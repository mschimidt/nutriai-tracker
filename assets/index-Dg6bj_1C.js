(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function ZS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var W_={exports:{}},yu={},K_={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zs=Symbol.for("react.element"),jS=Symbol.for("react.portal"),eC=Symbol.for("react.fragment"),tC=Symbol.for("react.strict_mode"),nC=Symbol.for("react.profiler"),rC=Symbol.for("react.provider"),iC=Symbol.for("react.context"),oC=Symbol.for("react.forward_ref"),sC=Symbol.for("react.suspense"),aC=Symbol.for("react.memo"),lC=Symbol.for("react.lazy"),Hm=Symbol.iterator;function uC(t){return t===null||typeof t!="object"?null:(t=Hm&&t[Hm]||t["@@iterator"],typeof t=="function"?t:null)}var J_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y_=Object.assign,Q_={};function ao(t,e,n){this.props=t,this.context=e,this.refs=Q_,this.updater=n||J_}ao.prototype.isReactComponent={};ao.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ao.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function X_(){}X_.prototype=ao.prototype;function $f(t,e,n){this.props=t,this.context=e,this.refs=Q_,this.updater=n||J_}var zf=$f.prototype=new X_;zf.constructor=$f;Y_(zf,ao.prototype);zf.isPureReactComponent=!0;var qm=Array.isArray,Z_=Object.prototype.hasOwnProperty,Wf={current:null},j_={key:!0,ref:!0,__self:!0,__source:!0};function eE(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Z_.call(e,r)&&!j_.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:zs,type:t,key:o,ref:s,props:i,_owner:Wf.current}}function cC(t,e){return{$$typeof:zs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Kf(t){return typeof t=="object"&&t!==null&&t.$$typeof===zs}function dC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $m=/\/+/g;function Ac(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dC(""+t.key):e.toString(36)}function tl(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case zs:case jS:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Ac(s,0):r,qm(i)?(n="",t!=null&&(n=t.replace($m,"$&/")+"/"),tl(i,e,n,"",function(c){return c})):i!=null&&(Kf(i)&&(i=cC(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace($m,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",qm(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+Ac(o,a);s+=tl(o,e,n,l,i)}else if(l=uC(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+Ac(o,a++),s+=tl(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Ra(t,e,n){if(t==null)return t;var r=[],i=0;return tl(t,r,"","",function(o){return e.call(n,o,i++)}),r}function fC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gt={current:null},nl={transition:null},hC={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:nl,ReactCurrentOwner:Wf};function tE(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:Ra,forEach:function(t,e,n){Ra(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ra(t,function(){e++}),e},toArray:function(t){return Ra(t,function(e){return e})||[]},only:function(t){if(!Kf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ne.Component=ao;ne.Fragment=eC;ne.Profiler=nC;ne.PureComponent=$f;ne.StrictMode=tC;ne.Suspense=sC;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hC;ne.act=tE;ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Y_({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Wf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Z_.call(e,l)&&!j_.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:zs,type:t.type,key:i,ref:o,props:r,_owner:s}};ne.createContext=function(t){return t={$$typeof:iC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rC,_context:t},t.Consumer=t};ne.createElement=eE;ne.createFactory=function(t){var e=eE.bind(null,t);return e.type=t,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(t){return{$$typeof:oC,render:t}};ne.isValidElement=Kf;ne.lazy=function(t){return{$$typeof:lC,_payload:{_status:-1,_result:t},_init:fC}};ne.memo=function(t,e){return{$$typeof:aC,type:t,compare:e===void 0?null:e}};ne.startTransition=function(t){var e=nl.transition;nl.transition={};try{t()}finally{nl.transition=e}};ne.unstable_act=tE;ne.useCallback=function(t,e){return gt.current.useCallback(t,e)};ne.useContext=function(t){return gt.current.useContext(t)};ne.useDebugValue=function(){};ne.useDeferredValue=function(t){return gt.current.useDeferredValue(t)};ne.useEffect=function(t,e){return gt.current.useEffect(t,e)};ne.useId=function(){return gt.current.useId()};ne.useImperativeHandle=function(t,e,n){return gt.current.useImperativeHandle(t,e,n)};ne.useInsertionEffect=function(t,e){return gt.current.useInsertionEffect(t,e)};ne.useLayoutEffect=function(t,e){return gt.current.useLayoutEffect(t,e)};ne.useMemo=function(t,e){return gt.current.useMemo(t,e)};ne.useReducer=function(t,e,n){return gt.current.useReducer(t,e,n)};ne.useRef=function(t){return gt.current.useRef(t)};ne.useState=function(t){return gt.current.useState(t)};ne.useSyncExternalStore=function(t,e,n){return gt.current.useSyncExternalStore(t,e,n)};ne.useTransition=function(){return gt.current.useTransition()};ne.version="18.3.1";K_.exports=ne;var le=K_.exports;const pC=ZS(le);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mC=le,gC=Symbol.for("react.element"),yC=Symbol.for("react.fragment"),vC=Object.prototype.hasOwnProperty,_C=mC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,EC={key:!0,ref:!0,__self:!0,__source:!0};function nE(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)vC.call(e,r)&&!EC.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:gC,type:t,key:o,ref:s,props:i,_owner:_C.current}}yu.Fragment=yC;yu.jsx=nE;yu.jsxs=nE;W_.exports=yu;var x=W_.exports,fd={},rE={exports:{}},xt={},iE={exports:{}},oE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,Y){var te=q.length;q.push(Y);e:for(;0<te;){var Ie=te-1>>>1,pe=q[Ie];if(0<i(pe,Y))q[Ie]=Y,q[te]=pe,te=Ie;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var Y=q[0],te=q.pop();if(te!==Y){q[0]=te;e:for(var Ie=0,pe=q.length,xe=pe>>>1;Ie<xe;){var mn=2*(Ie+1)-1,gn=q[mn],yn=mn+1,vn=q[yn];if(0>i(gn,te))yn<pe&&0>i(vn,gn)?(q[Ie]=vn,q[yn]=te,Ie=yn):(q[Ie]=gn,q[mn]=te,Ie=mn);else if(yn<pe&&0>i(vn,te))q[Ie]=vn,q[yn]=te,Ie=yn;else break e}}return Y}function i(q,Y){var te=q.sortIndex-Y.sortIndex;return te!==0?te:q.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],h=1,p=null,m=3,v=!1,I=!1,P=!1,N=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(q){for(var Y=n(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=q)r(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(c)}}function D(q){if(P=!1,C(q),!I)if(n(l)!==null)I=!0,zn(b);else{var Y=n(c);Y!==null&&Dt(D,Y.startTime-q)}}function b(q,Y){I=!1,P&&(P=!1,w(_),_=-1),v=!0;var te=m;try{for(C(Y),p=n(l);p!==null&&(!(p.expirationTime>Y)||q&&!M());){var Ie=p.callback;if(typeof Ie=="function"){p.callback=null,m=p.priorityLevel;var pe=Ie(p.expirationTime<=Y);Y=t.unstable_now(),typeof pe=="function"?p.callback=pe:p===n(l)&&r(l),C(Y)}else r(l);p=n(l)}if(p!==null)var xe=!0;else{var mn=n(c);mn!==null&&Dt(D,mn.startTime-Y),xe=!1}return xe}finally{p=null,m=te,v=!1}}var L=!1,A=null,_=-1,S=5,R=-1;function M(){return!(t.unstable_now()-R<S)}function V(){if(A!==null){var q=t.unstable_now();R=q;var Y=!0;try{Y=A(!0,q)}finally{Y?k():(L=!1,A=null)}}else L=!1}var k;if(typeof T=="function")k=function(){T(V)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,vt=de.port2;de.port1.onmessage=V,k=function(){vt.postMessage(null)}}else k=function(){N(V,0)};function zn(q){A=q,L||(L=!0,k())}function Dt(q,Y){_=N(function(){q(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){I||v||(I=!0,zn(b))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(q){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var te=m;m=Y;try{return q()}finally{m=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,Y){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var te=m;m=q;try{return Y()}finally{m=te}},t.unstable_scheduleCallback=function(q,Y,te){var Ie=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?Ie+te:Ie):te=Ie,q){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=te+pe,q={id:h++,callback:Y,priorityLevel:q,startTime:te,expirationTime:pe,sortIndex:-1},te>Ie?(q.sortIndex=te,e(c,q),n(l)===null&&q===n(c)&&(P?(w(_),_=-1):P=!0,Dt(D,te-Ie))):(q.sortIndex=pe,e(l,q),I||v||(I=!0,zn(b))),q},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(q){var Y=m;return function(){var te=m;m=Y;try{return q.apply(this,arguments)}finally{m=te}}}})(oE);iE.exports=oE;var TC=iE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IC=le,kt=TC;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sE=new Set,vs={};function ni(t,e){zi(t,e),zi(t+"Capture",e)}function zi(t,e){for(vs[t]=e,t=0;t<e.length;t++)sE.add(e[t])}var xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hd=Object.prototype.hasOwnProperty,wC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zm={},Wm={};function SC(t){return hd.call(Wm,t)?!0:hd.call(zm,t)?!1:wC.test(t)?Wm[t]=!0:(zm[t]=!0,!1)}function CC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function AC(t,e,n,r){if(e===null||typeof e>"u"||CC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yt(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qe[t]=new yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qe[e]=new yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qe[t]=new yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qe[t]=new yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qe[t]=new yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qe[t]=new yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qe[t]=new yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qe[t]=new yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qe[t]=new yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Jf=/[\-:]([a-z])/g;function Yf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Jf,Yf);Qe[e]=new yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Jf,Yf);Qe[e]=new yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Jf,Yf);Qe[e]=new yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qe[t]=new yt(t,1,!1,t.toLowerCase(),null,!1,!1)});Qe.xlinkHref=new yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qe[t]=new yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qf(t,e,n,r){var i=Qe.hasOwnProperty(e)?Qe[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(AC(e,n,i,r)&&(n=null),r||i===null?SC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Gn=IC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pa=Symbol.for("react.element"),vi=Symbol.for("react.portal"),_i=Symbol.for("react.fragment"),Xf=Symbol.for("react.strict_mode"),pd=Symbol.for("react.profiler"),aE=Symbol.for("react.provider"),lE=Symbol.for("react.context"),Zf=Symbol.for("react.forward_ref"),md=Symbol.for("react.suspense"),gd=Symbol.for("react.suspense_list"),jf=Symbol.for("react.memo"),Xn=Symbol.for("react.lazy"),uE=Symbol.for("react.offscreen"),Km=Symbol.iterator;function Uo(t){return t===null||typeof t!="object"?null:(t=Km&&t[Km]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,Rc;function Ko(t){if(Rc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Rc=e&&e[1]||""}return`
`+Rc+t}var Pc=!1;function Nc(t,e){if(!t||Pc)return"";Pc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{Pc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ko(t):""}function RC(t){switch(t.tag){case 5:return Ko(t.type);case 16:return Ko("Lazy");case 13:return Ko("Suspense");case 19:return Ko("SuspenseList");case 0:case 2:case 15:return t=Nc(t.type,!1),t;case 11:return t=Nc(t.type.render,!1),t;case 1:return t=Nc(t.type,!0),t;default:return""}}function yd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _i:return"Fragment";case vi:return"Portal";case pd:return"Profiler";case Xf:return"StrictMode";case md:return"Suspense";case gd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lE:return(t.displayName||"Context")+".Consumer";case aE:return(t._context.displayName||"Context")+".Provider";case Zf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jf:return e=t.displayName||null,e!==null?e:yd(t.type)||"Memo";case Xn:e=t._payload,t=t._init;try{return yd(t(e))}catch{}}return null}function PC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yd(e);case 8:return e===Xf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function NC(t){var e=cE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Na(t){t._valueTracker||(t._valueTracker=NC(t))}function dE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=cE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Sl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vd(t,e){var n=e.checked;return Ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Jm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Tr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fE(t,e){e=e.checked,e!=null&&Qf(t,"checked",e,!1)}function _d(t,e){fE(t,e);var n=Tr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ed(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ed(t,e.type,Tr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ym(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ed(t,e,n){(e!=="number"||Sl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Jo=Array.isArray;function Di(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Tr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Td(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return Ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(Jo(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Tr(n)}}function hE(t,e){var n=Tr(e.value),r=Tr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Xm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function pE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Id(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?pE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ka,mE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ka=ka||document.createElement("div"),ka.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ka.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _s(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var is={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kC=["Webkit","ms","Moz","O"];Object.keys(is).forEach(function(t){kC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),is[e]=is[t]})});function gE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||is.hasOwnProperty(t)&&is[t]?(""+e).trim():e+"px"}function yE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=gE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var xC=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wd(t,e){if(e){if(xC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function Sd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cd=null;function eh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ad=null,Li=null,Vi=null;function Zm(t){if(t=Js(t)){if(typeof Ad!="function")throw Error(G(280));var e=t.stateNode;e&&(e=Iu(e),Ad(t.stateNode,t.type,e))}}function vE(t){Li?Vi?Vi.push(t):Vi=[t]:Li=t}function _E(){if(Li){var t=Li,e=Vi;if(Vi=Li=null,Zm(t),e)for(t=0;t<e.length;t++)Zm(e[t])}}function EE(t,e){return t(e)}function TE(){}var kc=!1;function IE(t,e,n){if(kc)return t(e,n);kc=!0;try{return EE(t,e,n)}finally{kc=!1,(Li!==null||Vi!==null)&&(TE(),_E())}}function Es(t,e){var n=t.stateNode;if(n===null)return null;var r=Iu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var Rd=!1;if(xn)try{var Fo={};Object.defineProperty(Fo,"passive",{get:function(){Rd=!0}}),window.addEventListener("test",Fo,Fo),window.removeEventListener("test",Fo,Fo)}catch{Rd=!1}function MC(t,e,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var os=!1,Cl=null,Al=!1,Pd=null,DC={onError:function(t){os=!0,Cl=t}};function LC(t,e,n,r,i,o,s,a,l){os=!1,Cl=null,MC.apply(DC,arguments)}function VC(t,e,n,r,i,o,s,a,l){if(LC.apply(this,arguments),os){if(os){var c=Cl;os=!1,Cl=null}else throw Error(G(198));Al||(Al=!0,Pd=c)}}function ri(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function wE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jm(t){if(ri(t)!==t)throw Error(G(188))}function UC(t){var e=t.alternate;if(!e){if(e=ri(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return jm(i),t;if(o===r)return jm(i),e;o=o.sibling}throw Error(G(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function SE(t){return t=UC(t),t!==null?CE(t):null}function CE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=CE(t);if(e!==null)return e;t=t.sibling}return null}var AE=kt.unstable_scheduleCallback,eg=kt.unstable_cancelCallback,FC=kt.unstable_shouldYield,bC=kt.unstable_requestPaint,De=kt.unstable_now,OC=kt.unstable_getCurrentPriorityLevel,th=kt.unstable_ImmediatePriority,RE=kt.unstable_UserBlockingPriority,Rl=kt.unstable_NormalPriority,BC=kt.unstable_LowPriority,PE=kt.unstable_IdlePriority,vu=null,ln=null;function GC(t){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(vu,t,void 0,(t.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:$C,HC=Math.log,qC=Math.LN2;function $C(t){return t>>>=0,t===0?32:31-(HC(t)/qC|0)|0}var xa=64,Ma=4194304;function Yo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Pl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Yo(a):(o&=s,o!==0&&(r=Yo(o)))}else s=n&~i,s!==0?r=Yo(s):o!==0&&(r=Yo(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Yt(e),i=1<<n,r|=t[n],e&=~i;return r}function zC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Yt(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=zC(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function Nd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function NE(){var t=xa;return xa<<=1,!(xa&4194240)&&(xa=64),t}function xc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ws(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yt(e),t[e]=n}function KC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Yt(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function nh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Yt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var fe=0;function kE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xE,rh,ME,DE,LE,kd=!1,Da=[],lr=null,ur=null,cr=null,Ts=new Map,Is=new Map,jn=[],JC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tg(t,e){switch(t){case"focusin":case"focusout":lr=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":Ts.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Is.delete(e.pointerId)}}function bo(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Js(e),e!==null&&rh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function YC(t,e,n,r,i){switch(e){case"focusin":return lr=bo(lr,t,e,n,r,i),!0;case"dragenter":return ur=bo(ur,t,e,n,r,i),!0;case"mouseover":return cr=bo(cr,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ts.set(o,bo(Ts.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Is.set(o,bo(Is.get(o)||null,t,e,n,r,i)),!0}return!1}function VE(t){var e=Or(t.target);if(e!==null){var n=ri(e);if(n!==null){if(e=n.tag,e===13){if(e=wE(n),e!==null){t.blockedOn=e,LE(t.priority,function(){ME(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Cd=r,n.target.dispatchEvent(r),Cd=null}else return e=Js(n),e!==null&&rh(e),t.blockedOn=n,!1;e.shift()}return!0}function ng(t,e,n){rl(t)&&n.delete(e)}function QC(){kd=!1,lr!==null&&rl(lr)&&(lr=null),ur!==null&&rl(ur)&&(ur=null),cr!==null&&rl(cr)&&(cr=null),Ts.forEach(ng),Is.forEach(ng)}function Oo(t,e){t.blockedOn===e&&(t.blockedOn=null,kd||(kd=!0,kt.unstable_scheduleCallback(kt.unstable_NormalPriority,QC)))}function ws(t){function e(i){return Oo(i,t)}if(0<Da.length){Oo(Da[0],t);for(var n=1;n<Da.length;n++){var r=Da[n];r.blockedOn===t&&(r.blockedOn=null)}}for(lr!==null&&Oo(lr,t),ur!==null&&Oo(ur,t),cr!==null&&Oo(cr,t),Ts.forEach(e),Is.forEach(e),n=0;n<jn.length;n++)r=jn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<jn.length&&(n=jn[0],n.blockedOn===null);)VE(n),n.blockedOn===null&&jn.shift()}var Ui=Gn.ReactCurrentBatchConfig,Nl=!0;function XC(t,e,n,r){var i=fe,o=Ui.transition;Ui.transition=null;try{fe=1,ih(t,e,n,r)}finally{fe=i,Ui.transition=o}}function ZC(t,e,n,r){var i=fe,o=Ui.transition;Ui.transition=null;try{fe=4,ih(t,e,n,r)}finally{fe=i,Ui.transition=o}}function ih(t,e,n,r){if(Nl){var i=xd(t,e,n,r);if(i===null)Gc(t,e,r,kl,n),tg(t,r);else if(YC(i,t,e,n,r))r.stopPropagation();else if(tg(t,r),e&4&&-1<JC.indexOf(t)){for(;i!==null;){var o=Js(i);if(o!==null&&xE(o),o=xd(t,e,n,r),o===null&&Gc(t,e,r,kl,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Gc(t,e,r,null,n)}}var kl=null;function xd(t,e,n,r){if(kl=null,t=eh(r),t=Or(t),t!==null)if(e=ri(t),e===null)t=null;else if(n=e.tag,n===13){if(t=wE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kl=t,null}function UE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(OC()){case th:return 1;case RE:return 4;case Rl:case BC:return 16;case PE:return 536870912;default:return 16}default:return 16}}var or=null,oh=null,il=null;function FE(){if(il)return il;var t,e=oh,n=e.length,r,i="value"in or?or.value:or.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return il=i.slice(t,1<r?1-r:void 0)}function ol(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function La(){return!0}function rg(){return!1}function Mt(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?La:rg,this.isPropagationStopped=rg,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=La)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=La)},persist:function(){},isPersistent:La}),e}var lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sh=Mt(lo),Ks=Ae({},lo,{view:0,detail:0}),jC=Mt(Ks),Mc,Dc,Bo,_u=Ae({},Ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ah,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bo&&(Bo&&t.type==="mousemove"?(Mc=t.screenX-Bo.screenX,Dc=t.screenY-Bo.screenY):Dc=Mc=0,Bo=t),Mc)},movementY:function(t){return"movementY"in t?t.movementY:Dc}}),ig=Mt(_u),eA=Ae({},_u,{dataTransfer:0}),tA=Mt(eA),nA=Ae({},Ks,{relatedTarget:0}),Lc=Mt(nA),rA=Ae({},lo,{animationName:0,elapsedTime:0,pseudoElement:0}),iA=Mt(rA),oA=Ae({},lo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sA=Mt(oA),aA=Ae({},lo,{data:0}),og=Mt(aA),lA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=cA[t])?!!e[t]:!1}function ah(){return dA}var fA=Ae({},Ks,{key:function(t){if(t.key){var e=lA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ol(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?uA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ah,charCode:function(t){return t.type==="keypress"?ol(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ol(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hA=Mt(fA),pA=Ae({},_u,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sg=Mt(pA),mA=Ae({},Ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ah}),gA=Mt(mA),yA=Ae({},lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),vA=Mt(yA),_A=Ae({},_u,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),EA=Mt(_A),TA=[9,13,27,32],lh=xn&&"CompositionEvent"in window,ss=null;xn&&"documentMode"in document&&(ss=document.documentMode);var IA=xn&&"TextEvent"in window&&!ss,bE=xn&&(!lh||ss&&8<ss&&11>=ss),ag=" ",lg=!1;function OE(t,e){switch(t){case"keyup":return TA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function BE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ei=!1;function wA(t,e){switch(t){case"compositionend":return BE(e);case"keypress":return e.which!==32?null:(lg=!0,ag);case"textInput":return t=e.data,t===ag&&lg?null:t;default:return null}}function SA(t,e){if(Ei)return t==="compositionend"||!lh&&OE(t,e)?(t=FE(),il=oh=or=null,Ei=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return bE&&e.locale!=="ko"?null:e.data;default:return null}}var CA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ug(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!CA[t.type]:e==="textarea"}function GE(t,e,n,r){vE(r),e=xl(e,"onChange"),0<e.length&&(n=new sh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var as=null,Ss=null;function AA(t){ZE(t,0)}function Eu(t){var e=wi(t);if(dE(e))return t}function RA(t,e){if(t==="change")return e}var HE=!1;if(xn){var Vc;if(xn){var Uc="oninput"in document;if(!Uc){var cg=document.createElement("div");cg.setAttribute("oninput","return;"),Uc=typeof cg.oninput=="function"}Vc=Uc}else Vc=!1;HE=Vc&&(!document.documentMode||9<document.documentMode)}function dg(){as&&(as.detachEvent("onpropertychange",qE),Ss=as=null)}function qE(t){if(t.propertyName==="value"&&Eu(Ss)){var e=[];GE(e,Ss,t,eh(t)),IE(AA,e)}}function PA(t,e,n){t==="focusin"?(dg(),as=e,Ss=n,as.attachEvent("onpropertychange",qE)):t==="focusout"&&dg()}function NA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Eu(Ss)}function kA(t,e){if(t==="click")return Eu(e)}function xA(t,e){if(t==="input"||t==="change")return Eu(e)}function MA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var en=typeof Object.is=="function"?Object.is:MA;function Cs(t,e){if(en(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!hd.call(e,i)||!en(t[i],e[i]))return!1}return!0}function fg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hg(t,e){var n=fg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fg(n)}}function $E(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$E(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function zE(){for(var t=window,e=Sl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Sl(t.document)}return e}function uh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function DA(t){var e=zE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&$E(n.ownerDocument.documentElement,n)){if(r!==null&&uh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=hg(n,o);var s=hg(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var LA=xn&&"documentMode"in document&&11>=document.documentMode,Ti=null,Md=null,ls=null,Dd=!1;function pg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Dd||Ti==null||Ti!==Sl(r)||(r=Ti,"selectionStart"in r&&uh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ls&&Cs(ls,r)||(ls=r,r=xl(Md,"onSelect"),0<r.length&&(e=new sh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ti)))}function Va(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ii={animationend:Va("Animation","AnimationEnd"),animationiteration:Va("Animation","AnimationIteration"),animationstart:Va("Animation","AnimationStart"),transitionend:Va("Transition","TransitionEnd")},Fc={},WE={};xn&&(WE=document.createElement("div").style,"AnimationEvent"in window||(delete Ii.animationend.animation,delete Ii.animationiteration.animation,delete Ii.animationstart.animation),"TransitionEvent"in window||delete Ii.transitionend.transition);function Tu(t){if(Fc[t])return Fc[t];if(!Ii[t])return t;var e=Ii[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in WE)return Fc[t]=e[n];return t}var KE=Tu("animationend"),JE=Tu("animationiteration"),YE=Tu("animationstart"),QE=Tu("transitionend"),XE=new Map,mg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(t,e){XE.set(t,e),ni(e,[t])}for(var bc=0;bc<mg.length;bc++){var Oc=mg[bc],VA=Oc.toLowerCase(),UA=Oc[0].toUpperCase()+Oc.slice(1);Ar(VA,"on"+UA)}Ar(KE,"onAnimationEnd");Ar(JE,"onAnimationIteration");Ar(YE,"onAnimationStart");Ar("dblclick","onDoubleClick");Ar("focusin","onFocus");Ar("focusout","onBlur");Ar(QE,"onTransitionEnd");zi("onMouseEnter",["mouseout","mouseover"]);zi("onMouseLeave",["mouseout","mouseover"]);zi("onPointerEnter",["pointerout","pointerover"]);zi("onPointerLeave",["pointerout","pointerover"]);ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ni("onBeforeInput",["compositionend","keypress","textInput","paste"]);ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qo));function gg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,VC(r,e,void 0,t),t.currentTarget=null}function ZE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;gg(i,a,c),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;gg(i,a,c),o=l}}}if(Al)throw t=Pd,Al=!1,Pd=null,t}function ve(t,e){var n=e[bd];n===void 0&&(n=e[bd]=new Set);var r=t+"__bubble";n.has(r)||(jE(e,t,2,!1),n.add(r))}function Bc(t,e,n){var r=0;e&&(r|=4),jE(n,t,r,e)}var Ua="_reactListening"+Math.random().toString(36).slice(2);function As(t){if(!t[Ua]){t[Ua]=!0,sE.forEach(function(n){n!=="selectionchange"&&(FA.has(n)||Bc(n,!1,t),Bc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ua]||(e[Ua]=!0,Bc("selectionchange",!1,e))}}function jE(t,e,n,r){switch(UE(e)){case 1:var i=XC;break;case 4:i=ZC;break;default:i=ih}n=i.bind(null,e,n,t),i=void 0,!Rd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Gc(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Or(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}IE(function(){var c=o,h=eh(n),p=[];e:{var m=XE.get(t);if(m!==void 0){var v=sh,I=t;switch(t){case"keypress":if(ol(n)===0)break e;case"keydown":case"keyup":v=hA;break;case"focusin":I="focus",v=Lc;break;case"focusout":I="blur",v=Lc;break;case"beforeblur":case"afterblur":v=Lc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=ig;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=tA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=gA;break;case KE:case JE:case YE:v=iA;break;case QE:v=vA;break;case"scroll":v=jC;break;case"wheel":v=EA;break;case"copy":case"cut":case"paste":v=sA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=sg}var P=(e&4)!==0,N=!P&&t==="scroll",w=P?m!==null?m+"Capture":null:m;P=[];for(var T=c,C;T!==null;){C=T;var D=C.stateNode;if(C.tag===5&&D!==null&&(C=D,w!==null&&(D=Es(T,w),D!=null&&P.push(Rs(T,D,C)))),N)break;T=T.return}0<P.length&&(m=new v(m,I,null,n,h),p.push({event:m,listeners:P}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",m&&n!==Cd&&(I=n.relatedTarget||n.fromElement)&&(Or(I)||I[Mn]))break e;if((v||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,v?(I=n.relatedTarget||n.toElement,v=c,I=I?Or(I):null,I!==null&&(N=ri(I),I!==N||I.tag!==5&&I.tag!==6)&&(I=null)):(v=null,I=c),v!==I)){if(P=ig,D="onMouseLeave",w="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(P=sg,D="onPointerLeave",w="onPointerEnter",T="pointer"),N=v==null?m:wi(v),C=I==null?m:wi(I),m=new P(D,T+"leave",v,n,h),m.target=N,m.relatedTarget=C,D=null,Or(h)===c&&(P=new P(w,T+"enter",I,n,h),P.target=C,P.relatedTarget=N,D=P),N=D,v&&I)t:{for(P=v,w=I,T=0,C=P;C;C=fi(C))T++;for(C=0,D=w;D;D=fi(D))C++;for(;0<T-C;)P=fi(P),T--;for(;0<C-T;)w=fi(w),C--;for(;T--;){if(P===w||w!==null&&P===w.alternate)break t;P=fi(P),w=fi(w)}P=null}else P=null;v!==null&&yg(p,m,v,P,!1),I!==null&&N!==null&&yg(p,N,I,P,!0)}}e:{if(m=c?wi(c):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var b=RA;else if(ug(m))if(HE)b=xA;else{b=NA;var L=PA}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(b=kA);if(b&&(b=b(t,c))){GE(p,b,n,h);break e}L&&L(t,m,c),t==="focusout"&&(L=m._wrapperState)&&L.controlled&&m.type==="number"&&Ed(m,"number",m.value)}switch(L=c?wi(c):window,t){case"focusin":(ug(L)||L.contentEditable==="true")&&(Ti=L,Md=c,ls=null);break;case"focusout":ls=Md=Ti=null;break;case"mousedown":Dd=!0;break;case"contextmenu":case"mouseup":case"dragend":Dd=!1,pg(p,n,h);break;case"selectionchange":if(LA)break;case"keydown":case"keyup":pg(p,n,h)}var A;if(lh)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ei?OE(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(bE&&n.locale!=="ko"&&(Ei||_!=="onCompositionStart"?_==="onCompositionEnd"&&Ei&&(A=FE()):(or=h,oh="value"in or?or.value:or.textContent,Ei=!0)),L=xl(c,_),0<L.length&&(_=new og(_,t,null,n,h),p.push({event:_,listeners:L}),A?_.data=A:(A=BE(n),A!==null&&(_.data=A)))),(A=IA?wA(t,n):SA(t,n))&&(c=xl(c,"onBeforeInput"),0<c.length&&(h=new og("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:c}),h.data=A))}ZE(p,e)})}function Rs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Es(t,n),o!=null&&r.unshift(Rs(t,o,i)),o=Es(t,e),o!=null&&r.push(Rs(t,o,i))),t=t.return}return r}function fi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function yg(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Es(n,o),l!=null&&s.unshift(Rs(n,l,a))):i||(l=Es(n,o),l!=null&&s.push(Rs(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var bA=/\r\n?/g,OA=/\u0000|\uFFFD/g;function vg(t){return(typeof t=="string"?t:""+t).replace(bA,`
`).replace(OA,"")}function Fa(t,e,n){if(e=vg(e),vg(t)!==e&&n)throw Error(G(425))}function Ml(){}var Ld=null,Vd=null;function Ud(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fd=typeof setTimeout=="function"?setTimeout:void 0,BA=typeof clearTimeout=="function"?clearTimeout:void 0,_g=typeof Promise=="function"?Promise:void 0,GA=typeof queueMicrotask=="function"?queueMicrotask:typeof _g<"u"?function(t){return _g.resolve(null).then(t).catch(HA)}:Fd;function HA(t){setTimeout(function(){throw t})}function Hc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ws(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ws(e)}function dr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Eg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var uo=Math.random().toString(36).slice(2),an="__reactFiber$"+uo,Ps="__reactProps$"+uo,Mn="__reactContainer$"+uo,bd="__reactEvents$"+uo,qA="__reactListeners$"+uo,$A="__reactHandles$"+uo;function Or(t){var e=t[an];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mn]||n[an]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Eg(t);t!==null;){if(n=t[an])return n;t=Eg(t)}return e}t=n,n=t.parentNode}return null}function Js(t){return t=t[an]||t[Mn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function Iu(t){return t[Ps]||null}var Od=[],Si=-1;function Rr(t){return{current:t}}function Ee(t){0>Si||(t.current=Od[Si],Od[Si]=null,Si--)}function ge(t,e){Si++,Od[Si]=t.current,t.current=e}var Ir={},lt=Rr(Ir),Tt=Rr(!1),Wr=Ir;function Wi(t,e){var n=t.type.contextTypes;if(!n)return Ir;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function It(t){return t=t.childContextTypes,t!=null}function Dl(){Ee(Tt),Ee(lt)}function Tg(t,e,n){if(lt.current!==Ir)throw Error(G(168));ge(lt,e),ge(Tt,n)}function e0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(G(108,PC(t)||"Unknown",i));return Ae({},n,r)}function Ll(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ir,Wr=lt.current,ge(lt,t),ge(Tt,Tt.current),!0}function Ig(t,e,n){var r=t.stateNode;if(!r)throw Error(G(169));n?(t=e0(t,e,Wr),r.__reactInternalMemoizedMergedChildContext=t,Ee(Tt),Ee(lt),ge(lt,t)):Ee(Tt),ge(Tt,n)}var In=null,wu=!1,qc=!1;function t0(t){In===null?In=[t]:In.push(t)}function zA(t){wu=!0,t0(t)}function Pr(){if(!qc&&In!==null){qc=!0;var t=0,e=fe;try{var n=In;for(fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}In=null,wu=!1}catch(i){throw In!==null&&(In=In.slice(t+1)),AE(th,Pr),i}finally{fe=e,qc=!1}}return null}var Ci=[],Ai=0,Vl=null,Ul=0,Lt=[],Vt=0,Kr=null,wn=1,Sn="";function Vr(t,e){Ci[Ai++]=Ul,Ci[Ai++]=Vl,Vl=t,Ul=e}function n0(t,e,n){Lt[Vt++]=wn,Lt[Vt++]=Sn,Lt[Vt++]=Kr,Kr=t;var r=wn;t=Sn;var i=32-Yt(r)-1;r&=~(1<<i),n+=1;var o=32-Yt(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,wn=1<<32-Yt(e)+i|n<<i|r,Sn=o+t}else wn=1<<o|n<<i|r,Sn=t}function ch(t){t.return!==null&&(Vr(t,1),n0(t,1,0))}function dh(t){for(;t===Vl;)Vl=Ci[--Ai],Ci[Ai]=null,Ul=Ci[--Ai],Ci[Ai]=null;for(;t===Kr;)Kr=Lt[--Vt],Lt[Vt]=null,Sn=Lt[--Vt],Lt[Vt]=null,wn=Lt[--Vt],Lt[Vt]=null}var Nt=null,Pt=null,Te=!1,Kt=null;function r0(t,e){var n=Ft(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function wg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Nt=t,Pt=dr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Nt=t,Pt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Kr!==null?{id:wn,overflow:Sn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ft(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Nt=t,Pt=null,!0):!1;default:return!1}}function Bd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gd(t){if(Te){var e=Pt;if(e){var n=e;if(!wg(t,e)){if(Bd(t))throw Error(G(418));e=dr(n.nextSibling);var r=Nt;e&&wg(t,e)?r0(r,n):(t.flags=t.flags&-4097|2,Te=!1,Nt=t)}}else{if(Bd(t))throw Error(G(418));t.flags=t.flags&-4097|2,Te=!1,Nt=t}}}function Sg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Nt=t}function ba(t){if(t!==Nt)return!1;if(!Te)return Sg(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ud(t.type,t.memoizedProps)),e&&(e=Pt)){if(Bd(t))throw i0(),Error(G(418));for(;e;)r0(t,e),e=dr(e.nextSibling)}if(Sg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pt=dr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pt=null}}else Pt=Nt?dr(t.stateNode.nextSibling):null;return!0}function i0(){for(var t=Pt;t;)t=dr(t.nextSibling)}function Ki(){Pt=Nt=null,Te=!1}function fh(t){Kt===null?Kt=[t]:Kt.push(t)}var WA=Gn.ReactCurrentBatchConfig;function Go(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function Oa(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Cg(t){var e=t._init;return e(t._payload)}function o0(t){function e(w,T){if(t){var C=w.deletions;C===null?(w.deletions=[T],w.flags|=16):C.push(T)}}function n(w,T){if(!t)return null;for(;T!==null;)e(w,T),T=T.sibling;return null}function r(w,T){for(w=new Map;T!==null;)T.key!==null?w.set(T.key,T):w.set(T.index,T),T=T.sibling;return w}function i(w,T){return w=mr(w,T),w.index=0,w.sibling=null,w}function o(w,T,C){return w.index=C,t?(C=w.alternate,C!==null?(C=C.index,C<T?(w.flags|=2,T):C):(w.flags|=2,T)):(w.flags|=1048576,T)}function s(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,T,C,D){return T===null||T.tag!==6?(T=Qc(C,w.mode,D),T.return=w,T):(T=i(T,C),T.return=w,T)}function l(w,T,C,D){var b=C.type;return b===_i?h(w,T,C.props.children,D,C.key):T!==null&&(T.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Xn&&Cg(b)===T.type)?(D=i(T,C.props),D.ref=Go(w,T,C),D.return=w,D):(D=fl(C.type,C.key,C.props,null,w.mode,D),D.ref=Go(w,T,C),D.return=w,D)}function c(w,T,C,D){return T===null||T.tag!==4||T.stateNode.containerInfo!==C.containerInfo||T.stateNode.implementation!==C.implementation?(T=Xc(C,w.mode,D),T.return=w,T):(T=i(T,C.children||[]),T.return=w,T)}function h(w,T,C,D,b){return T===null||T.tag!==7?(T=$r(C,w.mode,D,b),T.return=w,T):(T=i(T,C),T.return=w,T)}function p(w,T,C){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Qc(""+T,w.mode,C),T.return=w,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Pa:return C=fl(T.type,T.key,T.props,null,w.mode,C),C.ref=Go(w,null,T),C.return=w,C;case vi:return T=Xc(T,w.mode,C),T.return=w,T;case Xn:var D=T._init;return p(w,D(T._payload),C)}if(Jo(T)||Uo(T))return T=$r(T,w.mode,C,null),T.return=w,T;Oa(w,T)}return null}function m(w,T,C,D){var b=T!==null?T.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return b!==null?null:a(w,T,""+C,D);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Pa:return C.key===b?l(w,T,C,D):null;case vi:return C.key===b?c(w,T,C,D):null;case Xn:return b=C._init,m(w,T,b(C._payload),D)}if(Jo(C)||Uo(C))return b!==null?null:h(w,T,C,D,null);Oa(w,C)}return null}function v(w,T,C,D,b){if(typeof D=="string"&&D!==""||typeof D=="number")return w=w.get(C)||null,a(T,w,""+D,b);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Pa:return w=w.get(D.key===null?C:D.key)||null,l(T,w,D,b);case vi:return w=w.get(D.key===null?C:D.key)||null,c(T,w,D,b);case Xn:var L=D._init;return v(w,T,C,L(D._payload),b)}if(Jo(D)||Uo(D))return w=w.get(C)||null,h(T,w,D,b,null);Oa(T,D)}return null}function I(w,T,C,D){for(var b=null,L=null,A=T,_=T=0,S=null;A!==null&&_<C.length;_++){A.index>_?(S=A,A=null):S=A.sibling;var R=m(w,A,C[_],D);if(R===null){A===null&&(A=S);break}t&&A&&R.alternate===null&&e(w,A),T=o(R,T,_),L===null?b=R:L.sibling=R,L=R,A=S}if(_===C.length)return n(w,A),Te&&Vr(w,_),b;if(A===null){for(;_<C.length;_++)A=p(w,C[_],D),A!==null&&(T=o(A,T,_),L===null?b=A:L.sibling=A,L=A);return Te&&Vr(w,_),b}for(A=r(w,A);_<C.length;_++)S=v(A,w,_,C[_],D),S!==null&&(t&&S.alternate!==null&&A.delete(S.key===null?_:S.key),T=o(S,T,_),L===null?b=S:L.sibling=S,L=S);return t&&A.forEach(function(M){return e(w,M)}),Te&&Vr(w,_),b}function P(w,T,C,D){var b=Uo(C);if(typeof b!="function")throw Error(G(150));if(C=b.call(C),C==null)throw Error(G(151));for(var L=b=null,A=T,_=T=0,S=null,R=C.next();A!==null&&!R.done;_++,R=C.next()){A.index>_?(S=A,A=null):S=A.sibling;var M=m(w,A,R.value,D);if(M===null){A===null&&(A=S);break}t&&A&&M.alternate===null&&e(w,A),T=o(M,T,_),L===null?b=M:L.sibling=M,L=M,A=S}if(R.done)return n(w,A),Te&&Vr(w,_),b;if(A===null){for(;!R.done;_++,R=C.next())R=p(w,R.value,D),R!==null&&(T=o(R,T,_),L===null?b=R:L.sibling=R,L=R);return Te&&Vr(w,_),b}for(A=r(w,A);!R.done;_++,R=C.next())R=v(A,w,_,R.value,D),R!==null&&(t&&R.alternate!==null&&A.delete(R.key===null?_:R.key),T=o(R,T,_),L===null?b=R:L.sibling=R,L=R);return t&&A.forEach(function(V){return e(w,V)}),Te&&Vr(w,_),b}function N(w,T,C,D){if(typeof C=="object"&&C!==null&&C.type===_i&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Pa:e:{for(var b=C.key,L=T;L!==null;){if(L.key===b){if(b=C.type,b===_i){if(L.tag===7){n(w,L.sibling),T=i(L,C.props.children),T.return=w,w=T;break e}}else if(L.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Xn&&Cg(b)===L.type){n(w,L.sibling),T=i(L,C.props),T.ref=Go(w,L,C),T.return=w,w=T;break e}n(w,L);break}else e(w,L);L=L.sibling}C.type===_i?(T=$r(C.props.children,w.mode,D,C.key),T.return=w,w=T):(D=fl(C.type,C.key,C.props,null,w.mode,D),D.ref=Go(w,T,C),D.return=w,w=D)}return s(w);case vi:e:{for(L=C.key;T!==null;){if(T.key===L)if(T.tag===4&&T.stateNode.containerInfo===C.containerInfo&&T.stateNode.implementation===C.implementation){n(w,T.sibling),T=i(T,C.children||[]),T.return=w,w=T;break e}else{n(w,T);break}else e(w,T);T=T.sibling}T=Xc(C,w.mode,D),T.return=w,w=T}return s(w);case Xn:return L=C._init,N(w,T,L(C._payload),D)}if(Jo(C))return I(w,T,C,D);if(Uo(C))return P(w,T,C,D);Oa(w,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,T!==null&&T.tag===6?(n(w,T.sibling),T=i(T,C),T.return=w,w=T):(n(w,T),T=Qc(C,w.mode,D),T.return=w,w=T),s(w)):n(w,T)}return N}var Ji=o0(!0),s0=o0(!1),Fl=Rr(null),bl=null,Ri=null,hh=null;function ph(){hh=Ri=bl=null}function mh(t){var e=Fl.current;Ee(Fl),t._currentValue=e}function Hd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Fi(t,e){bl=t,hh=Ri=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Et=!0),t.firstContext=null)}function Bt(t){var e=t._currentValue;if(hh!==t)if(t={context:t,memoizedValue:e,next:null},Ri===null){if(bl===null)throw Error(G(308));Ri=t,bl.dependencies={lanes:0,firstContext:t}}else Ri=Ri.next=t;return e}var Br=null;function gh(t){Br===null?Br=[t]:Br.push(t)}function a0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,gh(e)):(n.next=i.next,i.next=n),e.interleaved=n,Dn(t,r)}function Dn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zn=!1;function yh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function l0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Nn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,se&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Dn(t,n)}return i=r.interleaved,i===null?(e.next=e,gh(r)):(e.next=i.next,i.next=e),r.interleaved=e,Dn(t,n)}function sl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,nh(t,n)}}function Ag(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ol(t,e,n,r){var i=t.updateQueue;Zn=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==s&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(o!==null){var p=i.baseState;s=0,h=c=l=null,a=o;do{var m=a.lane,v=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var I=t,P=a;switch(m=e,v=n,P.tag){case 1:if(I=P.payload,typeof I=="function"){p=I.call(v,p,m);break e}p=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=P.payload,m=typeof I=="function"?I.call(v,p,m):I,m==null)break e;p=Ae({},p,m);break e;case 2:Zn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else v={eventTime:v,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=v,l=p):h=h.next=v,s|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(l=p),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Yr|=s,t.lanes=s,t.memoizedState=p}}function Rg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(G(191,i));i.call(r)}}}var Ys={},un=Rr(Ys),Ns=Rr(Ys),ks=Rr(Ys);function Gr(t){if(t===Ys)throw Error(G(174));return t}function vh(t,e){switch(ge(ks,e),ge(Ns,t),ge(un,Ys),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Id(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Id(e,t)}Ee(un),ge(un,e)}function Yi(){Ee(un),Ee(Ns),Ee(ks)}function u0(t){Gr(ks.current);var e=Gr(un.current),n=Id(e,t.type);e!==n&&(ge(Ns,t),ge(un,n))}function _h(t){Ns.current===t&&(Ee(un),Ee(Ns))}var Se=Rr(0);function Bl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $c=[];function Eh(){for(var t=0;t<$c.length;t++)$c[t]._workInProgressVersionPrimary=null;$c.length=0}var al=Gn.ReactCurrentDispatcher,zc=Gn.ReactCurrentBatchConfig,Jr=0,Ce=null,Fe=null,Ge=null,Gl=!1,us=!1,xs=0,KA=0;function tt(){throw Error(G(321))}function Th(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!en(t[n],e[n]))return!1;return!0}function Ih(t,e,n,r,i,o){if(Jr=o,Ce=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,al.current=t===null||t.memoizedState===null?XA:ZA,t=n(r,i),us){o=0;do{if(us=!1,xs=0,25<=o)throw Error(G(301));o+=1,Ge=Fe=null,e.updateQueue=null,al.current=jA,t=n(r,i)}while(us)}if(al.current=Hl,e=Fe!==null&&Fe.next!==null,Jr=0,Ge=Fe=Ce=null,Gl=!1,e)throw Error(G(300));return t}function wh(){var t=xs!==0;return xs=0,t}function sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Ce.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Gt(){if(Fe===null){var t=Ce.alternate;t=t!==null?t.memoizedState:null}else t=Fe.next;var e=Ge===null?Ce.memoizedState:Ge.next;if(e!==null)Ge=e,Fe=t;else{if(t===null)throw Error(G(310));Fe=t,t={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},Ge===null?Ce.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function Ms(t,e){return typeof e=="function"?e(t):e}function Wc(t){var e=Gt(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=Fe,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,c=o;do{var h=c.lane;if((Jr&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=p,s=r):l=l.next=p,Ce.lanes|=h,Yr|=h}c=c.next}while(c!==null&&c!==o);l===null?s=r:l.next=a,en(r,e.memoizedState)||(Et=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Ce.lanes|=o,Yr|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Kc(t){var e=Gt(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);en(o,e.memoizedState)||(Et=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function c0(){}function d0(t,e){var n=Ce,r=Gt(),i=e(),o=!en(r.memoizedState,i);if(o&&(r.memoizedState=i,Et=!0),r=r.queue,Sh(p0.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,Ds(9,h0.bind(null,n,r,i,e),void 0,null),He===null)throw Error(G(349));Jr&30||f0(n,e,i)}return i}function f0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ce.updateQueue,e===null?(e={lastEffect:null,stores:null},Ce.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function h0(t,e,n,r){e.value=n,e.getSnapshot=r,m0(e)&&g0(t)}function p0(t,e,n){return n(function(){m0(e)&&g0(t)})}function m0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!en(t,n)}catch{return!0}}function g0(t){var e=Dn(t,1);e!==null&&Qt(e,t,1,-1)}function Pg(t){var e=sn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:t},e.queue=t,t=t.dispatch=QA.bind(null,Ce,t),[e.memoizedState,t]}function Ds(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ce.updateQueue,e===null?(e={lastEffect:null,stores:null},Ce.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function y0(){return Gt().memoizedState}function ll(t,e,n,r){var i=sn();Ce.flags|=t,i.memoizedState=Ds(1|e,n,void 0,r===void 0?null:r)}function Su(t,e,n,r){var i=Gt();r=r===void 0?null:r;var o=void 0;if(Fe!==null){var s=Fe.memoizedState;if(o=s.destroy,r!==null&&Th(r,s.deps)){i.memoizedState=Ds(e,n,o,r);return}}Ce.flags|=t,i.memoizedState=Ds(1|e,n,o,r)}function Ng(t,e){return ll(8390656,8,t,e)}function Sh(t,e){return Su(2048,8,t,e)}function v0(t,e){return Su(4,2,t,e)}function _0(t,e){return Su(4,4,t,e)}function E0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function T0(t,e,n){return n=n!=null?n.concat([t]):null,Su(4,4,E0.bind(null,e,t),n)}function Ch(){}function I0(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Th(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function w0(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Th(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function S0(t,e,n){return Jr&21?(en(n,e)||(n=NE(),Ce.lanes|=n,Yr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Et=!0),t.memoizedState=n)}function JA(t,e){var n=fe;fe=n!==0&&4>n?n:4,t(!0);var r=zc.transition;zc.transition={};try{t(!1),e()}finally{fe=n,zc.transition=r}}function C0(){return Gt().memoizedState}function YA(t,e,n){var r=pr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},A0(t))R0(e,n);else if(n=a0(t,e,n,r),n!==null){var i=pt();Qt(n,t,r,i),P0(n,e,r)}}function QA(t,e,n){var r=pr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(A0(t))R0(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,en(a,s)){var l=e.interleaved;l===null?(i.next=i,gh(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=a0(t,e,i,r),n!==null&&(i=pt(),Qt(n,t,r,i),P0(n,e,r))}}function A0(t){var e=t.alternate;return t===Ce||e!==null&&e===Ce}function R0(t,e){us=Gl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function P0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,nh(t,n)}}var Hl={readContext:Bt,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useInsertionEffect:tt,useLayoutEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useMutableSource:tt,useSyncExternalStore:tt,useId:tt,unstable_isNewReconciler:!1},XA={readContext:Bt,useCallback:function(t,e){return sn().memoizedState=[t,e===void 0?null:e],t},useContext:Bt,useEffect:Ng,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ll(4194308,4,E0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ll(4194308,4,t,e)},useInsertionEffect:function(t,e){return ll(4,2,t,e)},useMemo:function(t,e){var n=sn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=sn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=YA.bind(null,Ce,t),[r.memoizedState,t]},useRef:function(t){var e=sn();return t={current:t},e.memoizedState=t},useState:Pg,useDebugValue:Ch,useDeferredValue:function(t){return sn().memoizedState=t},useTransition:function(){var t=Pg(!1),e=t[0];return t=JA.bind(null,t[1]),sn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ce,i=sn();if(Te){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),He===null)throw Error(G(349));Jr&30||f0(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Ng(p0.bind(null,r,o,t),[t]),r.flags|=2048,Ds(9,h0.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=sn(),e=He.identifierPrefix;if(Te){var n=Sn,r=wn;n=(r&~(1<<32-Yt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=KA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ZA={readContext:Bt,useCallback:I0,useContext:Bt,useEffect:Sh,useImperativeHandle:T0,useInsertionEffect:v0,useLayoutEffect:_0,useMemo:w0,useReducer:Wc,useRef:y0,useState:function(){return Wc(Ms)},useDebugValue:Ch,useDeferredValue:function(t){var e=Gt();return S0(e,Fe.memoizedState,t)},useTransition:function(){var t=Wc(Ms)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:c0,useSyncExternalStore:d0,useId:C0,unstable_isNewReconciler:!1},jA={readContext:Bt,useCallback:I0,useContext:Bt,useEffect:Sh,useImperativeHandle:T0,useInsertionEffect:v0,useLayoutEffect:_0,useMemo:w0,useReducer:Kc,useRef:y0,useState:function(){return Kc(Ms)},useDebugValue:Ch,useDeferredValue:function(t){var e=Gt();return Fe===null?e.memoizedState=t:S0(e,Fe.memoizedState,t)},useTransition:function(){var t=Kc(Ms)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:c0,useSyncExternalStore:d0,useId:C0,unstable_isNewReconciler:!1};function zt(t,e){if(t&&t.defaultProps){e=Ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function qd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Cu={isMounted:function(t){return(t=t._reactInternals)?ri(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pt(),i=pr(t),o=Nn(r,i);o.payload=e,n!=null&&(o.callback=n),e=fr(t,o,i),e!==null&&(Qt(e,t,i,r),sl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pt(),i=pr(t),o=Nn(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=fr(t,o,i),e!==null&&(Qt(e,t,i,r),sl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pt(),r=pr(t),i=Nn(n,r);i.tag=2,e!=null&&(i.callback=e),e=fr(t,i,r),e!==null&&(Qt(e,t,r,n),sl(e,t,r))}};function kg(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Cs(n,r)||!Cs(i,o):!0}function N0(t,e,n){var r=!1,i=Ir,o=e.contextType;return typeof o=="object"&&o!==null?o=Bt(o):(i=It(e)?Wr:lt.current,r=e.contextTypes,o=(r=r!=null)?Wi(t,i):Ir),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Cu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function xg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Cu.enqueueReplaceState(e,e.state,null)}function $d(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},yh(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Bt(o):(o=It(e)?Wr:lt.current,i.context=Wi(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(qd(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Cu.enqueueReplaceState(i,i.state,null),Ol(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Qi(t,e){try{var n="",r=e;do n+=RC(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Jc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function zd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var eR=typeof WeakMap=="function"?WeakMap:Map;function k0(t,e,n){n=Nn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$l||($l=!0,tf=r),zd(t,e)},n}function x0(t,e,n){n=Nn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){zd(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){zd(t,e),typeof r!="function"&&(hr===null?hr=new Set([this]):hr.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Mg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new eR;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=pR.bind(null,t,e,n),e.then(t,t))}function Dg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Lg(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Nn(-1,1),e.tag=2,fr(n,e,1))),n.lanes|=1),t)}var tR=Gn.ReactCurrentOwner,Et=!1;function ht(t,e,n,r){e.child=t===null?s0(e,null,n,r):Ji(e,t.child,n,r)}function Vg(t,e,n,r,i){n=n.render;var o=e.ref;return Fi(e,i),r=Ih(t,e,n,r,o,i),n=wh(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ln(t,e,i)):(Te&&n&&ch(e),e.flags|=1,ht(t,e,r,i),e.child)}function Ug(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Dh(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,M0(t,e,o,r,i)):(t=fl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Cs,n(s,r)&&t.ref===e.ref)return Ln(t,e,i)}return e.flags|=1,t=mr(o,r),t.ref=e.ref,t.return=e,e.child=t}function M0(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Cs(o,r)&&t.ref===e.ref)if(Et=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Et=!0);else return e.lanes=t.lanes,Ln(t,e,i)}return Wd(t,e,n,r,i)}function D0(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(Ni,Rt),Rt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ge(Ni,Rt),Rt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,ge(Ni,Rt),Rt|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,ge(Ni,Rt),Rt|=r;return ht(t,e,i,n),e.child}function L0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wd(t,e,n,r,i){var o=It(n)?Wr:lt.current;return o=Wi(e,o),Fi(e,i),n=Ih(t,e,n,r,o,i),r=wh(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ln(t,e,i)):(Te&&r&&ch(e),e.flags|=1,ht(t,e,n,i),e.child)}function Fg(t,e,n,r,i){if(It(n)){var o=!0;Ll(e)}else o=!1;if(Fi(e,i),e.stateNode===null)ul(t,e),N0(e,n,r),$d(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Bt(c):(c=It(n)?Wr:lt.current,c=Wi(e,c));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==c)&&xg(e,s,r,c),Zn=!1;var m=e.memoizedState;s.state=m,Ol(e,r,s,i),l=e.memoizedState,a!==r||m!==l||Tt.current||Zn?(typeof h=="function"&&(qd(e,n,h,r),l=e.memoizedState),(a=Zn||kg(e,n,a,r,m,l,c))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,l0(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:zt(e.type,a),s.props=c,p=e.pendingProps,m=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Bt(l):(l=It(n)?Wr:lt.current,l=Wi(e,l));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==p||m!==l)&&xg(e,s,r,l),Zn=!1,m=e.memoizedState,s.state=m,Ol(e,r,s,i);var I=e.memoizedState;a!==p||m!==I||Tt.current||Zn?(typeof v=="function"&&(qd(e,n,v,r),I=e.memoizedState),(c=Zn||kg(e,n,c,r,m,I,l)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,I,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,I,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),s.props=r,s.state=I,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Kd(t,e,n,r,o,i)}function Kd(t,e,n,r,i,o){L0(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Ig(e,n,!1),Ln(t,e,o);r=e.stateNode,tR.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Ji(e,t.child,null,o),e.child=Ji(e,null,a,o)):ht(t,e,a,o),e.memoizedState=r.state,i&&Ig(e,n,!0),e.child}function V0(t){var e=t.stateNode;e.pendingContext?Tg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Tg(t,e.context,!1),vh(t,e.containerInfo)}function bg(t,e,n,r,i){return Ki(),fh(i),e.flags|=256,ht(t,e,n,r),e.child}var Jd={dehydrated:null,treeContext:null,retryLane:0};function Yd(t){return{baseLanes:t,cachePool:null,transitions:null}}function U0(t,e,n){var r=e.pendingProps,i=Se.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ge(Se,i&1),t===null)return Gd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Pu(s,r,0,null),t=$r(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Yd(n),e.memoizedState=Jd,t):Ah(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return nR(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=mr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=mr(a,o):(o=$r(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Yd(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Jd,r}return o=t.child,t=o.sibling,r=mr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ah(t,e){return e=Pu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ba(t,e,n,r){return r!==null&&fh(r),Ji(e,t.child,null,n),t=Ah(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function nR(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Jc(Error(G(422))),Ba(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Pu({mode:"visible",children:r.children},i,0,null),o=$r(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Ji(e,t.child,null,s),e.child.memoizedState=Yd(s),e.memoizedState=Jd,o);if(!(e.mode&1))return Ba(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(G(419)),r=Jc(o,r,void 0),Ba(t,e,s,r)}if(a=(s&t.childLanes)!==0,Et||a){if(r=He,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Dn(t,i),Qt(r,t,i,-1))}return Mh(),r=Jc(Error(G(421))),Ba(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=mR.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Pt=dr(i.nextSibling),Nt=e,Te=!0,Kt=null,t!==null&&(Lt[Vt++]=wn,Lt[Vt++]=Sn,Lt[Vt++]=Kr,wn=t.id,Sn=t.overflow,Kr=e),e=Ah(e,r.children),e.flags|=4096,e)}function Og(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Hd(t.return,e,n)}function Yc(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function F0(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(ht(t,e,r.children,n),r=Se.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Og(t,n,e);else if(t.tag===19)Og(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ge(Se,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Bl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Yc(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Bl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Yc(e,!0,n,null,o);break;case"together":Yc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ul(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ln(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=mr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=mr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function rR(t,e,n){switch(e.tag){case 3:V0(e),Ki();break;case 5:u0(e);break;case 1:It(e.type)&&Ll(e);break;case 4:vh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ge(Fl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ge(Se,Se.current&1),e.flags|=128,null):n&e.child.childLanes?U0(t,e,n):(ge(Se,Se.current&1),t=Ln(t,e,n),t!==null?t.sibling:null);ge(Se,Se.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return F0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ge(Se,Se.current),r)break;return null;case 22:case 23:return e.lanes=0,D0(t,e,n)}return Ln(t,e,n)}var b0,Qd,O0,B0;b0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Qd=function(){};O0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Gr(un.current);var o=null;switch(n){case"input":i=vd(t,i),r=vd(t,r),o=[];break;case"select":i=Ae({},i,{value:void 0}),r=Ae({},r,{value:void 0}),o=[];break;case"textarea":i=Td(t,i),r=Td(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ml)}wd(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(vs.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(vs.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ve("scroll",t),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};B0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ho(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function iR(t,e,n){var r=e.pendingProps;switch(dh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(e),null;case 1:return It(e.type)&&Dl(),nt(e),null;case 3:return r=e.stateNode,Yi(),Ee(Tt),Ee(lt),Eh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ba(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kt!==null&&(of(Kt),Kt=null))),Qd(t,e),nt(e),null;case 5:_h(e);var i=Gr(ks.current);if(n=e.type,t!==null&&e.stateNode!=null)O0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return nt(e),null}if(t=Gr(un.current),ba(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[an]=e,r[Ps]=o,t=(e.mode&1)!==0,n){case"dialog":ve("cancel",r),ve("close",r);break;case"iframe":case"object":case"embed":ve("load",r);break;case"video":case"audio":for(i=0;i<Qo.length;i++)ve(Qo[i],r);break;case"source":ve("error",r);break;case"img":case"image":case"link":ve("error",r),ve("load",r);break;case"details":ve("toggle",r);break;case"input":Jm(r,o),ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ve("invalid",r);break;case"textarea":Qm(r,o),ve("invalid",r)}wd(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Fa(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Fa(r.textContent,a,t),i=["children",""+a]):vs.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&ve("scroll",r)}switch(n){case"input":Na(r),Ym(r,o,!0);break;case"textarea":Na(r),Xm(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ml)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[an]=e,t[Ps]=r,b0(t,e,!1,!1),e.stateNode=t;e:{switch(s=Sd(n,r),n){case"dialog":ve("cancel",t),ve("close",t),i=r;break;case"iframe":case"object":case"embed":ve("load",t),i=r;break;case"video":case"audio":for(i=0;i<Qo.length;i++)ve(Qo[i],t);i=r;break;case"source":ve("error",t),i=r;break;case"img":case"image":case"link":ve("error",t),ve("load",t),i=r;break;case"details":ve("toggle",t),i=r;break;case"input":Jm(t,r),i=vd(t,r),ve("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ae({},r,{value:void 0}),ve("invalid",t);break;case"textarea":Qm(t,r),i=Td(t,r),ve("invalid",t);break;default:i=r}wd(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?yE(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&mE(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&_s(t,l):typeof l=="number"&&_s(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(vs.hasOwnProperty(o)?l!=null&&o==="onScroll"&&ve("scroll",t):l!=null&&Qf(t,o,l,s))}switch(n){case"input":Na(t),Ym(t,r,!1);break;case"textarea":Na(t),Xm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Tr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Di(t,!!r.multiple,o,!1):r.defaultValue!=null&&Di(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ml)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nt(e),null;case 6:if(t&&e.stateNode!=null)B0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(n=Gr(ks.current),Gr(un.current),ba(e)){if(r=e.stateNode,n=e.memoizedProps,r[an]=e,(o=r.nodeValue!==n)&&(t=Nt,t!==null))switch(t.tag){case 3:Fa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fa(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[an]=e,e.stateNode=r}return nt(e),null;case 13:if(Ee(Se),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&Pt!==null&&e.mode&1&&!(e.flags&128))i0(),Ki(),e.flags|=98560,o=!1;else if(o=ba(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(G(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(G(317));o[an]=e}else Ki(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;nt(e),o=!1}else Kt!==null&&(of(Kt),Kt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Se.current&1?be===0&&(be=3):Mh())),e.updateQueue!==null&&(e.flags|=4),nt(e),null);case 4:return Yi(),Qd(t,e),t===null&&As(e.stateNode.containerInfo),nt(e),null;case 10:return mh(e.type._context),nt(e),null;case 17:return It(e.type)&&Dl(),nt(e),null;case 19:if(Ee(Se),o=e.memoizedState,o===null)return nt(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Ho(o,!1);else{if(be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Bl(t),s!==null){for(e.flags|=128,Ho(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ge(Se,Se.current&1|2),e.child}t=t.sibling}o.tail!==null&&De()>Xi&&(e.flags|=128,r=!0,Ho(o,!1),e.lanes=4194304)}else{if(!r)if(t=Bl(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ho(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Te)return nt(e),null}else 2*De()-o.renderingStartTime>Xi&&n!==1073741824&&(e.flags|=128,r=!0,Ho(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=De(),e.sibling=null,n=Se.current,ge(Se,r?n&1|2:n&1),e):(nt(e),null);case 22:case 23:return xh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rt&1073741824&&(nt(e),e.subtreeFlags&6&&(e.flags|=8192)):nt(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function oR(t,e){switch(dh(e),e.tag){case 1:return It(e.type)&&Dl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Yi(),Ee(Tt),Ee(lt),Eh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _h(e),null;case 13:if(Ee(Se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));Ki()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(Se),null;case 4:return Yi(),null;case 10:return mh(e.type._context),null;case 22:case 23:return xh(),null;case 24:return null;default:return null}}var Ga=!1,ot=!1,sR=typeof WeakSet=="function"?WeakSet:Set,z=null;function Pi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ne(t,e,r)}else n.current=null}function Xd(t,e,n){try{n()}catch(r){Ne(t,e,r)}}var Bg=!1;function aR(t,e){if(Ld=Nl,t=zE(),uh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,c=0,h=0,p=t,m=null;t:for(;;){for(var v;p!==n||i!==0&&p.nodeType!==3||(a=s+i),p!==o||r!==0&&p.nodeType!==3||(l=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(v=p.firstChild)!==null;)m=p,p=v;for(;;){if(p===t)break t;if(m===n&&++c===i&&(a=s),m===o&&++h===r&&(l=s),(v=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=v}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vd={focusedElem:t,selectionRange:n},Nl=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var P=I.memoizedProps,N=I.memoizedState,w=e.stateNode,T=w.getSnapshotBeforeUpdate(e.elementType===e.type?P:zt(e.type,P),N);w.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(D){Ne(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return I=Bg,Bg=!1,I}function cs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Xd(e,n,o)}i=i.next}while(i!==r)}}function Au(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Zd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function G0(t){var e=t.alternate;e!==null&&(t.alternate=null,G0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[an],delete e[Ps],delete e[bd],delete e[qA],delete e[$A])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function H0(t){return t.tag===5||t.tag===3||t.tag===4}function Gg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||H0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ml));else if(r!==4&&(t=t.child,t!==null))for(jd(t,e,n),t=t.sibling;t!==null;)jd(t,e,n),t=t.sibling}function ef(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ef(t,e,n),t=t.sibling;t!==null;)ef(t,e,n),t=t.sibling}var ze=null,Wt=!1;function Yn(t,e,n){for(n=n.child;n!==null;)q0(t,e,n),n=n.sibling}function q0(t,e,n){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(vu,n)}catch{}switch(n.tag){case 5:ot||Pi(n,e);case 6:var r=ze,i=Wt;ze=null,Yn(t,e,n),ze=r,Wt=i,ze!==null&&(Wt?(t=ze,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ze.removeChild(n.stateNode));break;case 18:ze!==null&&(Wt?(t=ze,n=n.stateNode,t.nodeType===8?Hc(t.parentNode,n):t.nodeType===1&&Hc(t,n),ws(t)):Hc(ze,n.stateNode));break;case 4:r=ze,i=Wt,ze=n.stateNode.containerInfo,Wt=!0,Yn(t,e,n),ze=r,Wt=i;break;case 0:case 11:case 14:case 15:if(!ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Xd(n,e,s),i=i.next}while(i!==r)}Yn(t,e,n);break;case 1:if(!ot&&(Pi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ne(n,e,a)}Yn(t,e,n);break;case 21:Yn(t,e,n);break;case 22:n.mode&1?(ot=(r=ot)||n.memoizedState!==null,Yn(t,e,n),ot=r):Yn(t,e,n);break;default:Yn(t,e,n)}}function Hg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new sR),e.forEach(function(r){var i=gR.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function $t(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:ze=a.stateNode,Wt=!1;break e;case 3:ze=a.stateNode.containerInfo,Wt=!0;break e;case 4:ze=a.stateNode.containerInfo,Wt=!0;break e}a=a.return}if(ze===null)throw Error(G(160));q0(o,s,i),ze=null,Wt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ne(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$0(e,t),e=e.sibling}function $0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($t(e,t),on(t),r&4){try{cs(3,t,t.return),Au(3,t)}catch(P){Ne(t,t.return,P)}try{cs(5,t,t.return)}catch(P){Ne(t,t.return,P)}}break;case 1:$t(e,t),on(t),r&512&&n!==null&&Pi(n,n.return);break;case 5:if($t(e,t),on(t),r&512&&n!==null&&Pi(n,n.return),t.flags&32){var i=t.stateNode;try{_s(i,"")}catch(P){Ne(t,t.return,P)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&fE(i,o),Sd(a,s);var c=Sd(a,o);for(s=0;s<l.length;s+=2){var h=l[s],p=l[s+1];h==="style"?yE(i,p):h==="dangerouslySetInnerHTML"?mE(i,p):h==="children"?_s(i,p):Qf(i,h,p,c)}switch(a){case"input":_d(i,o);break;case"textarea":hE(i,o);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?Di(i,!!o.multiple,v,!1):m!==!!o.multiple&&(o.defaultValue!=null?Di(i,!!o.multiple,o.defaultValue,!0):Di(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ps]=o}catch(P){Ne(t,t.return,P)}}break;case 6:if($t(e,t),on(t),r&4){if(t.stateNode===null)throw Error(G(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(P){Ne(t,t.return,P)}}break;case 3:if($t(e,t),on(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ws(e.containerInfo)}catch(P){Ne(t,t.return,P)}break;case 4:$t(e,t),on(t);break;case 13:$t(e,t),on(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Nh=De())),r&4&&Hg(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(ot=(c=ot)||h,$t(e,t),ot=c):$t(e,t),on(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(z=t,h=t.child;h!==null;){for(p=z=h;z!==null;){switch(m=z,v=m.child,m.tag){case 0:case 11:case 14:case 15:cs(4,m,m.return);break;case 1:Pi(m,m.return);var I=m.stateNode;if(typeof I.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(P){Ne(r,n,P)}}break;case 5:Pi(m,m.return);break;case 22:if(m.memoizedState!==null){$g(p);continue}}v!==null?(v.return=m,z=v):$g(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=p.stateNode,l=p.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=gE("display",s))}catch(P){Ne(t,t.return,P)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(P){Ne(t,t.return,P)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:$t(e,t),on(t),r&4&&Hg(t);break;case 21:break;default:$t(e,t),on(t)}}function on(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(H0(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(_s(i,""),r.flags&=-33);var o=Gg(t);ef(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=Gg(t);jd(t,a,s);break;default:throw Error(G(161))}}catch(l){Ne(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lR(t,e,n){z=t,z0(t)}function z0(t,e,n){for(var r=(t.mode&1)!==0;z!==null;){var i=z,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Ga;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ot;a=Ga;var c=ot;if(Ga=s,(ot=l)&&!c)for(z=i;z!==null;)s=z,l=s.child,s.tag===22&&s.memoizedState!==null?zg(i):l!==null?(l.return=s,z=l):zg(i);for(;o!==null;)z=o,z0(o),o=o.sibling;z=i,Ga=a,ot=c}qg(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,z=o):qg(t)}}function qg(t){for(;z!==null;){var e=z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ot||Au(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ot)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:zt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Rg(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Rg(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&ws(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}ot||e.flags&512&&Zd(e)}catch(m){Ne(e,e.return,m)}}if(e===t){z=null;break}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}}function $g(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,z=n;break}z=e.return}}function zg(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Au(4,e)}catch(l){Ne(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ne(e,i,l)}}var o=e.return;try{Zd(e)}catch(l){Ne(e,o,l)}break;case 5:var s=e.return;try{Zd(e)}catch(l){Ne(e,s,l)}}}catch(l){Ne(e,e.return,l)}if(e===t){z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,z=a;break}z=e.return}}var uR=Math.ceil,ql=Gn.ReactCurrentDispatcher,Rh=Gn.ReactCurrentOwner,bt=Gn.ReactCurrentBatchConfig,se=0,He=null,Ve=null,Je=0,Rt=0,Ni=Rr(0),be=0,Ls=null,Yr=0,Ru=0,Ph=0,ds=null,_t=null,Nh=0,Xi=1/0,Tn=null,$l=!1,tf=null,hr=null,Ha=!1,sr=null,zl=0,fs=0,nf=null,cl=-1,dl=0;function pt(){return se&6?De():cl!==-1?cl:cl=De()}function pr(t){return t.mode&1?se&2&&Je!==0?Je&-Je:WA.transition!==null?(dl===0&&(dl=NE()),dl):(t=fe,t!==0||(t=window.event,t=t===void 0?16:UE(t.type)),t):1}function Qt(t,e,n,r){if(50<fs)throw fs=0,nf=null,Error(G(185));Ws(t,n,r),(!(se&2)||t!==He)&&(t===He&&(!(se&2)&&(Ru|=n),be===4&&er(t,Je)),wt(t,r),n===1&&se===0&&!(e.mode&1)&&(Xi=De()+500,wu&&Pr()))}function wt(t,e){var n=t.callbackNode;WC(t,e);var r=Pl(t,t===He?Je:0);if(r===0)n!==null&&eg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&eg(n),e===1)t.tag===0?zA(Wg.bind(null,t)):t0(Wg.bind(null,t)),GA(function(){!(se&6)&&Pr()}),n=null;else{switch(kE(r)){case 1:n=th;break;case 4:n=RE;break;case 16:n=Rl;break;case 536870912:n=PE;break;default:n=Rl}n=j0(n,W0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function W0(t,e){if(cl=-1,dl=0,se&6)throw Error(G(327));var n=t.callbackNode;if(bi()&&t.callbackNode!==n)return null;var r=Pl(t,t===He?Je:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Wl(t,r);else{e=r;var i=se;se|=2;var o=J0();(He!==t||Je!==e)&&(Tn=null,Xi=De()+500,qr(t,e));do try{fR();break}catch(a){K0(t,a)}while(!0);ph(),ql.current=o,se=i,Ve!==null?e=0:(He=null,Je=0,e=be)}if(e!==0){if(e===2&&(i=Nd(t),i!==0&&(r=i,e=rf(t,i))),e===1)throw n=Ls,qr(t,0),er(t,r),wt(t,De()),n;if(e===6)er(t,r);else{if(i=t.current.alternate,!(r&30)&&!cR(i)&&(e=Wl(t,r),e===2&&(o=Nd(t),o!==0&&(r=o,e=rf(t,o))),e===1))throw n=Ls,qr(t,0),er(t,r),wt(t,De()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:Ur(t,_t,Tn);break;case 3:if(er(t,r),(r&130023424)===r&&(e=Nh+500-De(),10<e)){if(Pl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){pt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Fd(Ur.bind(null,t,_t,Tn),e);break}Ur(t,_t,Tn);break;case 4:if(er(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Yt(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=De()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*uR(r/1960))-r,10<r){t.timeoutHandle=Fd(Ur.bind(null,t,_t,Tn),r);break}Ur(t,_t,Tn);break;case 5:Ur(t,_t,Tn);break;default:throw Error(G(329))}}}return wt(t,De()),t.callbackNode===n?W0.bind(null,t):null}function rf(t,e){var n=ds;return t.current.memoizedState.isDehydrated&&(qr(t,e).flags|=256),t=Wl(t,e),t!==2&&(e=_t,_t=n,e!==null&&of(e)),t}function of(t){_t===null?_t=t:_t.push.apply(_t,t)}function cR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!en(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function er(t,e){for(e&=~Ph,e&=~Ru,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Yt(e),r=1<<n;t[n]=-1,e&=~r}}function Wg(t){if(se&6)throw Error(G(327));bi();var e=Pl(t,0);if(!(e&1))return wt(t,De()),null;var n=Wl(t,e);if(t.tag!==0&&n===2){var r=Nd(t);r!==0&&(e=r,n=rf(t,r))}if(n===1)throw n=Ls,qr(t,0),er(t,e),wt(t,De()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ur(t,_t,Tn),wt(t,De()),null}function kh(t,e){var n=se;se|=1;try{return t(e)}finally{se=n,se===0&&(Xi=De()+500,wu&&Pr())}}function Qr(t){sr!==null&&sr.tag===0&&!(se&6)&&bi();var e=se;se|=1;var n=bt.transition,r=fe;try{if(bt.transition=null,fe=1,t)return t()}finally{fe=r,bt.transition=n,se=e,!(se&6)&&Pr()}}function xh(){Rt=Ni.current,Ee(Ni)}function qr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,BA(n)),Ve!==null)for(n=Ve.return;n!==null;){var r=n;switch(dh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dl();break;case 3:Yi(),Ee(Tt),Ee(lt),Eh();break;case 5:_h(r);break;case 4:Yi();break;case 13:Ee(Se);break;case 19:Ee(Se);break;case 10:mh(r.type._context);break;case 22:case 23:xh()}n=n.return}if(He=t,Ve=t=mr(t.current,null),Je=Rt=e,be=0,Ls=null,Ph=Ru=Yr=0,_t=ds=null,Br!==null){for(e=0;e<Br.length;e++)if(n=Br[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Br=null}return t}function K0(t,e){do{var n=Ve;try{if(ph(),al.current=Hl,Gl){for(var r=Ce.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Gl=!1}if(Jr=0,Ge=Fe=Ce=null,us=!1,xs=0,Rh.current=null,n===null||n.return===null){be=1,Ls=e,Ve=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=Je,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=Dg(s);if(v!==null){v.flags&=-257,Lg(v,s,a,o,e),v.mode&1&&Mg(o,c,e),e=v,l=c;var I=e.updateQueue;if(I===null){var P=new Set;P.add(l),e.updateQueue=P}else I.add(l);break e}else{if(!(e&1)){Mg(o,c,e),Mh();break e}l=Error(G(426))}}else if(Te&&a.mode&1){var N=Dg(s);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Lg(N,s,a,o,e),fh(Qi(l,a));break e}}o=l=Qi(l,a),be!==4&&(be=2),ds===null?ds=[o]:ds.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var w=k0(o,l,e);Ag(o,w);break e;case 1:a=l;var T=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof T.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(hr===null||!hr.has(C)))){o.flags|=65536,e&=-e,o.lanes|=e;var D=x0(o,a,e);Ag(o,D);break e}}o=o.return}while(o!==null)}Q0(n)}catch(b){e=b,Ve===n&&n!==null&&(Ve=n=n.return);continue}break}while(!0)}function J0(){var t=ql.current;return ql.current=Hl,t===null?Hl:t}function Mh(){(be===0||be===3||be===2)&&(be=4),He===null||!(Yr&268435455)&&!(Ru&268435455)||er(He,Je)}function Wl(t,e){var n=se;se|=2;var r=J0();(He!==t||Je!==e)&&(Tn=null,qr(t,e));do try{dR();break}catch(i){K0(t,i)}while(!0);if(ph(),se=n,ql.current=r,Ve!==null)throw Error(G(261));return He=null,Je=0,be}function dR(){for(;Ve!==null;)Y0(Ve)}function fR(){for(;Ve!==null&&!FC();)Y0(Ve)}function Y0(t){var e=Z0(t.alternate,t,Rt);t.memoizedProps=t.pendingProps,e===null?Q0(t):Ve=e,Rh.current=null}function Q0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=oR(n,e),n!==null){n.flags&=32767,Ve=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{be=6,Ve=null;return}}else if(n=iR(n,e,Rt),n!==null){Ve=n;return}if(e=e.sibling,e!==null){Ve=e;return}Ve=e=t}while(e!==null);be===0&&(be=5)}function Ur(t,e,n){var r=fe,i=bt.transition;try{bt.transition=null,fe=1,hR(t,e,n,r)}finally{bt.transition=i,fe=r}return null}function hR(t,e,n,r){do bi();while(sr!==null);if(se&6)throw Error(G(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(KC(t,o),t===He&&(Ve=He=null,Je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ha||(Ha=!0,j0(Rl,function(){return bi(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=bt.transition,bt.transition=null;var s=fe;fe=1;var a=se;se|=4,Rh.current=null,aR(t,n),$0(n,t),DA(Vd),Nl=!!Ld,Vd=Ld=null,t.current=n,lR(n),bC(),se=a,fe=s,bt.transition=o}else t.current=n;if(Ha&&(Ha=!1,sr=t,zl=i),o=t.pendingLanes,o===0&&(hr=null),GC(n.stateNode),wt(t,De()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($l)throw $l=!1,t=tf,tf=null,t;return zl&1&&t.tag!==0&&bi(),o=t.pendingLanes,o&1?t===nf?fs++:(fs=0,nf=t):fs=0,Pr(),null}function bi(){if(sr!==null){var t=kE(zl),e=bt.transition,n=fe;try{if(bt.transition=null,fe=16>t?16:t,sr===null)var r=!1;else{if(t=sr,sr=null,zl=0,se&6)throw Error(G(331));var i=se;for(se|=4,z=t.current;z!==null;){var o=z,s=o.child;if(z.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(z=c;z!==null;){var h=z;switch(h.tag){case 0:case 11:case 15:cs(8,h,o)}var p=h.child;if(p!==null)p.return=h,z=p;else for(;z!==null;){h=z;var m=h.sibling,v=h.return;if(G0(h),h===c){z=null;break}if(m!==null){m.return=v,z=m;break}z=v}}}var I=o.alternate;if(I!==null){var P=I.child;if(P!==null){I.child=null;do{var N=P.sibling;P.sibling=null,P=N}while(P!==null)}}z=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,z=s;else e:for(;z!==null;){if(o=z,o.flags&2048)switch(o.tag){case 0:case 11:case 15:cs(9,o,o.return)}var w=o.sibling;if(w!==null){w.return=o.return,z=w;break e}z=o.return}}var T=t.current;for(z=T;z!==null;){s=z;var C=s.child;if(s.subtreeFlags&2064&&C!==null)C.return=s,z=C;else e:for(s=T;z!==null;){if(a=z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Au(9,a)}}catch(b){Ne(a,a.return,b)}if(a===s){z=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,z=D;break e}z=a.return}}if(se=i,Pr(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(vu,t)}catch{}r=!0}return r}finally{fe=n,bt.transition=e}}return!1}function Kg(t,e,n){e=Qi(n,e),e=k0(t,e,1),t=fr(t,e,1),e=pt(),t!==null&&(Ws(t,1,e),wt(t,e))}function Ne(t,e,n){if(t.tag===3)Kg(t,t,n);else for(;e!==null;){if(e.tag===3){Kg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hr===null||!hr.has(r))){t=Qi(n,t),t=x0(e,t,1),e=fr(e,t,1),t=pt(),e!==null&&(Ws(e,1,t),wt(e,t));break}}e=e.return}}function pR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pt(),t.pingedLanes|=t.suspendedLanes&n,He===t&&(Je&n)===n&&(be===4||be===3&&(Je&130023424)===Je&&500>De()-Nh?qr(t,0):Ph|=n),wt(t,e)}function X0(t,e){e===0&&(t.mode&1?(e=Ma,Ma<<=1,!(Ma&130023424)&&(Ma=4194304)):e=1);var n=pt();t=Dn(t,e),t!==null&&(Ws(t,e,n),wt(t,n))}function mR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),X0(t,n)}function gR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),X0(t,n)}var Z0;Z0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tt.current)Et=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Et=!1,rR(t,e,n);Et=!!(t.flags&131072)}else Et=!1,Te&&e.flags&1048576&&n0(e,Ul,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ul(t,e),t=e.pendingProps;var i=Wi(e,lt.current);Fi(e,n),i=Ih(null,e,r,t,i,n);var o=wh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,It(r)?(o=!0,Ll(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,yh(e),i.updater=Cu,e.stateNode=i,i._reactInternals=e,$d(e,r,t,n),e=Kd(null,e,r,!0,o,n)):(e.tag=0,Te&&o&&ch(e),ht(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ul(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=vR(r),t=zt(r,t),i){case 0:e=Wd(null,e,r,t,n);break e;case 1:e=Fg(null,e,r,t,n);break e;case 11:e=Vg(null,e,r,t,n);break e;case 14:e=Ug(null,e,r,zt(r.type,t),n);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zt(r,i),Wd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zt(r,i),Fg(t,e,r,i,n);case 3:e:{if(V0(e),t===null)throw Error(G(387));r=e.pendingProps,o=e.memoizedState,i=o.element,l0(t,e),Ol(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Qi(Error(G(423)),e),e=bg(t,e,r,n,i);break e}else if(r!==i){i=Qi(Error(G(424)),e),e=bg(t,e,r,n,i);break e}else for(Pt=dr(e.stateNode.containerInfo.firstChild),Nt=e,Te=!0,Kt=null,n=s0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ki(),r===i){e=Ln(t,e,n);break e}ht(t,e,r,n)}e=e.child}return e;case 5:return u0(e),t===null&&Gd(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Ud(r,i)?s=null:o!==null&&Ud(r,o)&&(e.flags|=32),L0(t,e),ht(t,e,s,n),e.child;case 6:return t===null&&Gd(e),null;case 13:return U0(t,e,n);case 4:return vh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ji(e,null,r,n):ht(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zt(r,i),Vg(t,e,r,i,n);case 7:return ht(t,e,e.pendingProps,n),e.child;case 8:return ht(t,e,e.pendingProps.children,n),e.child;case 12:return ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,ge(Fl,r._currentValue),r._currentValue=s,o!==null)if(en(o.value,s)){if(o.children===i.children&&!Tt.current){e=Ln(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Nn(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Hd(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(G(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Hd(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}ht(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Fi(e,n),i=Bt(i),r=r(i),e.flags|=1,ht(t,e,r,n),e.child;case 14:return r=e.type,i=zt(r,e.pendingProps),i=zt(r.type,i),Ug(t,e,r,i,n);case 15:return M0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zt(r,i),ul(t,e),e.tag=1,It(r)?(t=!0,Ll(e)):t=!1,Fi(e,n),N0(e,r,i),$d(e,r,i,n),Kd(null,e,r,!0,t,n);case 19:return F0(t,e,n);case 22:return D0(t,e,n)}throw Error(G(156,e.tag))};function j0(t,e){return AE(t,e)}function yR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ft(t,e,n,r){return new yR(t,e,n,r)}function Dh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vR(t){if(typeof t=="function")return Dh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zf)return 11;if(t===jf)return 14}return 2}function mr(t,e){var n=t.alternate;return n===null?(n=Ft(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function fl(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Dh(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case _i:return $r(n.children,i,o,e);case Xf:s=8,i|=8;break;case pd:return t=Ft(12,n,e,i|2),t.elementType=pd,t.lanes=o,t;case md:return t=Ft(13,n,e,i),t.elementType=md,t.lanes=o,t;case gd:return t=Ft(19,n,e,i),t.elementType=gd,t.lanes=o,t;case uE:return Pu(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case aE:s=10;break e;case lE:s=9;break e;case Zf:s=11;break e;case jf:s=14;break e;case Xn:s=16,r=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=Ft(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function $r(t,e,n,r){return t=Ft(7,t,r,e),t.lanes=n,t}function Pu(t,e,n,r){return t=Ft(22,t,r,e),t.elementType=uE,t.lanes=n,t.stateNode={isHidden:!1},t}function Qc(t,e,n){return t=Ft(6,t,null,e),t.lanes=n,t}function Xc(t,e,n){return e=Ft(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function _R(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xc(0),this.expirationTimes=xc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Lh(t,e,n,r,i,o,s,a,l){return t=new _R(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Ft(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yh(o),t}function ER(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function eT(t){if(!t)return Ir;t=t._reactInternals;e:{if(ri(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(It(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(It(n))return e0(t,n,e)}return e}function tT(t,e,n,r,i,o,s,a,l){return t=Lh(n,r,!0,t,i,o,s,a,l),t.context=eT(null),n=t.current,r=pt(),i=pr(n),o=Nn(r,i),o.callback=e??null,fr(n,o,i),t.current.lanes=i,Ws(t,i,r),wt(t,r),t}function Nu(t,e,n,r){var i=e.current,o=pt(),s=pr(i);return n=eT(n),e.context===null?e.context=n:e.pendingContext=n,e=Nn(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=fr(i,e,s),t!==null&&(Qt(t,i,s,o),sl(t,i,s)),s}function Kl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Jg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vh(t,e){Jg(t,e),(t=t.alternate)&&Jg(t,e)}function TR(){return null}var nT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Uh(t){this._internalRoot=t}ku.prototype.render=Uh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));Nu(t,e,null,null)};ku.prototype.unmount=Uh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qr(function(){Nu(null,t,null,null)}),e[Mn]=null}};function ku(t){this._internalRoot=t}ku.prototype.unstable_scheduleHydration=function(t){if(t){var e=DE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<jn.length&&e!==0&&e<jn[n].priority;n++);jn.splice(n,0,t),n===0&&VE(t)}};function Fh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Yg(){}function IR(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=Kl(s);o.call(c)}}var s=tT(e,r,t,0,null,!1,!1,"",Yg);return t._reactRootContainer=s,t[Mn]=s.current,As(t.nodeType===8?t.parentNode:t),Qr(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Kl(l);a.call(c)}}var l=Lh(t,0,!1,null,null,!1,!1,"",Yg);return t._reactRootContainer=l,t[Mn]=l.current,As(t.nodeType===8?t.parentNode:t),Qr(function(){Nu(e,l,n,r)}),l}function Mu(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=Kl(s);a.call(l)}}Nu(e,s,t,i)}else s=IR(n,e,t,i,r);return Kl(s)}xE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Yo(e.pendingLanes);n!==0&&(nh(e,n|1),wt(e,De()),!(se&6)&&(Xi=De()+500,Pr()))}break;case 13:Qr(function(){var r=Dn(t,1);if(r!==null){var i=pt();Qt(r,t,1,i)}}),Vh(t,1)}};rh=function(t){if(t.tag===13){var e=Dn(t,134217728);if(e!==null){var n=pt();Qt(e,t,134217728,n)}Vh(t,134217728)}};ME=function(t){if(t.tag===13){var e=pr(t),n=Dn(t,e);if(n!==null){var r=pt();Qt(n,t,e,r)}Vh(t,e)}};DE=function(){return fe};LE=function(t,e){var n=fe;try{return fe=t,e()}finally{fe=n}};Ad=function(t,e,n){switch(e){case"input":if(_d(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Iu(r);if(!i)throw Error(G(90));dE(r),_d(r,i)}}}break;case"textarea":hE(t,n);break;case"select":e=n.value,e!=null&&Di(t,!!n.multiple,e,!1)}};EE=kh;TE=Qr;var wR={usingClientEntryPoint:!1,Events:[Js,wi,Iu,vE,_E,kh]},qo={findFiberByHostInstance:Or,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SR={bundleType:qo.bundleType,version:qo.version,rendererPackageName:qo.rendererPackageName,rendererConfig:qo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=SE(t),t===null?null:t.stateNode},findFiberByHostInstance:qo.findFiberByHostInstance||TR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qa.isDisabled&&qa.supportsFiber)try{vu=qa.inject(SR),ln=qa}catch{}}xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wR;xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fh(e))throw Error(G(200));return ER(t,e,null,n)};xt.createRoot=function(t,e){if(!Fh(t))throw Error(G(299));var n=!1,r="",i=nT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Lh(t,1,!1,null,null,n,!1,r,i),t[Mn]=e.current,As(t.nodeType===8?t.parentNode:t),new Uh(e)};xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=SE(e),t=t===null?null:t.stateNode,t};xt.flushSync=function(t){return Qr(t)};xt.hydrate=function(t,e,n){if(!xu(e))throw Error(G(200));return Mu(null,t,e,!0,n)};xt.hydrateRoot=function(t,e,n){if(!Fh(t))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=nT;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=tT(e,null,t,1,n??null,i,!1,o,s),t[Mn]=e.current,As(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ku(e)};xt.render=function(t,e,n){if(!xu(e))throw Error(G(200));return Mu(null,t,e,!1,n)};xt.unmountComponentAtNode=function(t){if(!xu(t))throw Error(G(40));return t._reactRootContainer?(Qr(function(){Mu(null,null,t,!1,function(){t._reactRootContainer=null,t[Mn]=null})}),!0):!1};xt.unstable_batchedUpdates=kh;xt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!xu(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return Mu(t,e,n,!1,r)};xt.version="18.3.1-next-f1338f8080-20240426";function rT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rT)}catch(t){console.error(t)}}rT(),rE.exports=xt;var CR=rE.exports,Qg=CR;fd.createRoot=Qg.createRoot,fd.hydrateRoot=Qg.hydrateRoot;var Xg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},AR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],a=t[n++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},oT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4;let m=(a&15)<<2|c>>6,v=c&63;l||(v=64,s||(m=64)),r.push(n[h],n[p],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(iT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):AR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||c==null||p==null)throw new RR;const m=o<<2|a>>4;if(r.push(m),c!==64){const v=a<<4&240|c>>2;if(r.push(v),p!==64){const I=c<<6&192|p;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class RR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const PR=function(t){const e=iT(t);return oT.encodeByteArray(e,!0)},Jl=function(t){return PR(t).replace(/\./g,"")},sT=function(t){try{return oT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=()=>NR().__FIREBASE_DEFAULTS__,xR=()=>{if(typeof process>"u"||typeof Xg>"u")return;const t=Xg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},MR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sT(t[1]);return e&&JSON.parse(e)},Du=()=>{try{return kR()||xR()||MR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},aT=t=>{var e,n;return(n=(e=Du())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},DR=t=>{const e=aT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},lT=()=>{var t;return(t=Du())===null||t===void 0?void 0:t.config},uT=t=>{var e;return(e=Du())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Jl(JSON.stringify(n)),Jl(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function FR(){var t;const e=(t=Du())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function BR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GR(){const t=ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function HR(){return!FR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qR(){try{return typeof indexedDB=="object"}catch{return!1}}function $R(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="FirebaseError";class Hn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=zR,Object.setPrototypeOf(this,Hn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qs.prototype.create)}}class Qs{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?WR(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Hn(i,a,r)}}function WR(t,e){return t.replace(KR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const KR=/\{\$([^}]+)}/g;function JR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(Zg(o)&&Zg(s)){if(!Yl(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Zg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Zo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function YR(t,e){const n=new QR(t,e);return n.subscribe.bind(n)}class QR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");XR(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Zc),i.error===void 0&&(i.error=Zc),i.complete===void 0&&(i.complete=Zc);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Zc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t){return t&&t._delegate?t._delegate:t}class Xr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new LR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eP(e))try{this.getOrInitializeService({instanceIdentifier:Fr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Fr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fr){return this.instances.has(e)}getOptions(e=Fr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fr){return this.component?this.component.multipleInstances?e:Fr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jR(t){return t===Fr?void 0:t}function eP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ZR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const nP={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},rP=ie.INFO,iP={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},oP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=iP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bh{constructor(e){this.name=e,this._logLevel=rP,this._logHandler=oP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const sP=(t,e)=>e.some(n=>t instanceof n);let jg,ey;function aP(){return jg||(jg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lP(){return ey||(ey=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cT=new WeakMap,sf=new WeakMap,dT=new WeakMap,jc=new WeakMap,Oh=new WeakMap;function uP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(gr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&cT.set(n,t)}).catch(()=>{}),Oh.set(e,t),e}function cP(t){if(sf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});sf.set(t,e)}let af={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dP(t){af=t(af)}function fP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ed(this),e,...n);return dT.set(r,e.sort?e.sort():[e]),gr(r)}:lP().includes(t)?function(...e){return t.apply(ed(this),e),gr(cT.get(this))}:function(...e){return gr(t.apply(ed(this),e))}}function hP(t){return typeof t=="function"?fP(t):(t instanceof IDBTransaction&&cP(t),sP(t,aP())?new Proxy(t,af):t)}function gr(t){if(t instanceof IDBRequest)return uP(t);if(jc.has(t))return jc.get(t);const e=hP(t);return e!==t&&(jc.set(t,e),Oh.set(e,t)),e}const ed=t=>Oh.get(t);function pP(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=gr(s);return r&&s.addEventListener("upgradeneeded",l=>{r(gr(s.result),l.oldVersion,l.newVersion,gr(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const mP=["get","getKey","getAll","getAllKeys","count"],gP=["put","add","delete","clear"],td=new Map;function ty(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(td.get(e))return td.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=gP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mP.includes(n)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return td.set(e,o),o}dP(t=>({...t,get:(e,n,r)=>ty(e,n)||t.get(e,n,r),has:(e,n)=>!!ty(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function vP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lf="@firebase/app",ny="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn=new bh("@firebase/app"),_P="@firebase/app-compat",EP="@firebase/analytics-compat",TP="@firebase/analytics",IP="@firebase/app-check-compat",wP="@firebase/app-check",SP="@firebase/auth",CP="@firebase/auth-compat",AP="@firebase/database",RP="@firebase/data-connect",PP="@firebase/database-compat",NP="@firebase/functions",kP="@firebase/functions-compat",xP="@firebase/installations",MP="@firebase/installations-compat",DP="@firebase/messaging",LP="@firebase/messaging-compat",VP="@firebase/performance",UP="@firebase/performance-compat",FP="@firebase/remote-config",bP="@firebase/remote-config-compat",OP="@firebase/storage",BP="@firebase/storage-compat",GP="@firebase/firestore",HP="@firebase/vertexai-preview",qP="@firebase/firestore-compat",$P="firebase",zP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf="[DEFAULT]",WP={[lf]:"fire-core",[_P]:"fire-core-compat",[TP]:"fire-analytics",[EP]:"fire-analytics-compat",[wP]:"fire-app-check",[IP]:"fire-app-check-compat",[SP]:"fire-auth",[CP]:"fire-auth-compat",[AP]:"fire-rtdb",[RP]:"fire-data-connect",[PP]:"fire-rtdb-compat",[NP]:"fire-fn",[kP]:"fire-fn-compat",[xP]:"fire-iid",[MP]:"fire-iid-compat",[DP]:"fire-fcm",[LP]:"fire-fcm-compat",[VP]:"fire-perf",[UP]:"fire-perf-compat",[FP]:"fire-rc",[bP]:"fire-rc-compat",[OP]:"fire-gcs",[BP]:"fire-gcs-compat",[GP]:"fire-fst",[qP]:"fire-fst-compat",[HP]:"fire-vertex","fire-js":"fire-js",[$P]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql=new Map,KP=new Map,cf=new Map;function ry(t,e){try{t.container.addComponent(e)}catch(n){Vn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zi(t){const e=t.name;if(cf.has(e))return Vn.debug(`There were multiple attempts to register component ${e}.`),!1;cf.set(e,t);for(const n of Ql.values())ry(n,t);for(const n of KP.values())ry(n,t);return!0}function Bh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Cn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yr=new Qs("app","Firebase",JP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=zP;function fT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:uf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw yr.create("bad-app-name",{appName:String(i)});if(n||(n=lT()),!n)throw yr.create("no-options");const o=Ql.get(i);if(o){if(Yl(n,o.options)&&Yl(r,o.config))return o;throw yr.create("duplicate-app",{appName:i})}const s=new tP(i);for(const l of cf.values())s.addComponent(l);const a=new YP(n,r,s);return Ql.set(i,a),a}function hT(t=uf){const e=Ql.get(t);if(!e&&t===uf&&lT())return fT();if(!e)throw yr.create("no-app",{appName:t});return e}function vr(t,e,n){var r;let i=(r=WP[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vn.warn(a.join(" "));return}Zi(new Xr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP="firebase-heartbeat-database",XP=1,Vs="firebase-heartbeat-store";let nd=null;function pT(){return nd||(nd=pP(QP,XP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Vs)}catch(n){console.warn(n)}}}}).catch(t=>{throw yr.create("idb-open",{originalErrorMessage:t.message})})),nd}async function ZP(t){try{const n=(await pT()).transaction(Vs),r=await n.objectStore(Vs).get(mT(t));return await n.done,r}catch(e){if(e instanceof Hn)Vn.warn(e.message);else{const n=yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vn.warn(n.message)}}}async function iy(t,e){try{const r=(await pT()).transaction(Vs,"readwrite");await r.objectStore(Vs).put(e,mT(t)),await r.done}catch(n){if(n instanceof Hn)Vn.warn(n.message);else{const r=yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vn.warn(r.message)}}}function mT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=1024,eN=30*24*60*60*1e3;class tN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=oy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=eN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Vn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=oy(),{heartbeatsToSend:r,unsentEntries:i}=nN(this._heartbeatsCache.heartbeats),o=Jl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Vn.warn(n),""}}}function oy(){return new Date().toISOString().substring(0,10)}function nN(t,e=jP){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),sy(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),sy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class rN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qR()?$R().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ZP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return iy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return iy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function sy(t){return Jl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(t){Zi(new Xr("platform-logger",e=>new yP(e),"PRIVATE")),Zi(new Xr("heartbeat",e=>new tN(e),"PRIVATE")),vr(lf,ny,t),vr(lf,ny,"esm2017"),vr("fire-js","")}iN("");var oN="firebase",sN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vr(oN,sN,"app");function Gh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function gT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aN=gT,yT=new Qs("auth","Firebase",gT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=new bh("@firebase/auth");function lN(t,...e){Xl.logLevel<=ie.WARN&&Xl.warn(`Auth (${co}): ${t}`,...e)}function hl(t,...e){Xl.logLevel<=ie.ERROR&&Xl.error(`Auth (${co}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t,...e){throw Hh(t,...e)}function cn(t,...e){return Hh(t,...e)}function vT(t,e,n){const r=Object.assign(Object.assign({},aN()),{[e]:n});return new Qs("auth","Firebase",r).create(e,{appName:t.name})}function _r(t){return vT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hh(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return yT.create(t,...e)}function Q(t,e,...n){if(!t)throw Hh(e,...n)}function An(t){const e="INTERNAL ASSERTION FAILED: "+t;throw hl(e),new Error(e)}function Un(t,e){t||An(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function uN(){return ay()==="http:"||ay()==="https:"}function ay(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uN()||OR()||"connection"in navigator)?navigator.onLine:!0}function dN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n){this.shortDelay=e,this.longDelay=n,Un(n>e,"Short delay should be less than long delay!"),this.isMobile=UR()||BR()}get(){return cN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(t,e){Un(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;An("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;An("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;An("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=new Zs(3e4,6e4);function ii(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Nr(t,e,n,r,i={}){return ET(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const a=Xs(Object.assign({key:t.config.apiKey},s)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},o);return bR()||(c.referrerPolicy="no-referrer"),_T.fetch()(TT(t,t.config.apiHost,n,a),c)})}async function ET(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},fN),e);try{const i=new mN(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw $a(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw $a(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw $a(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw $a(t,"user-disabled",s);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw vT(t,h,c);tn(t,h)}}catch(i){if(i instanceof Hn)throw i;tn(t,"network-request-failed",{message:String(i)})}}async function Lu(t,e,n,r,i={}){const o=await Nr(t,e,n,r,i);return"mfaPendingCredential"in o&&tn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function TT(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?qh(t.config,i):`${t.config.apiScheme}://${i}`}function pN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(cn(this.auth,"network-request-failed")),hN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $a(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=cn(t,e,r);return i.customData._tokenResponse=n,i}function ly(t){return t!==void 0&&t.enterprise!==void 0}class gN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return pN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function yN(t,e){return Nr(t,"GET","/v2/recaptchaConfig",ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vN(t,e){return Nr(t,"POST","/v1/accounts:delete",e)}async function IT(t,e){return Nr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _N(t,e=!1){const n=Ct(t),r=await n.getIdToken(e),i=$h(r);Q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:hs(rd(i.auth_time)),issuedAtTime:hs(rd(i.iat)),expirationTime:hs(rd(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function rd(t){return Number(t)*1e3}function $h(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return hl("JWT malformed, contained fewer than 3 sections"),null;try{const i=sT(n);return i?JSON.parse(i):(hl("Failed to decode base64 JWT payload"),null)}catch(i){return hl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function uy(t){const e=$h(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Us(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Hn&&EN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function EN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hs(this.lastLoginAt),this.creationTime=hs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Us(t,IT(n,{idToken:r}));Q(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?wT(o.providerUserInfo):[],a=wN(t.providerData,s),l=t.isAnonymous,c=!(t.email&&o.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new ff(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function IN(t){const e=Ct(t);await Zl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wN(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function wT(t){return t.map(e=>{var{providerId:n}=e,r=Gh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(t,e){const n=await ET(t,{},async()=>{const r=Xs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=TT(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",_T.fetch()(s,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function CN(t,e){return Nr(t,"POST","/v2/accounts:revokeToken",ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=uy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await SN(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Oi;return r&&(Q(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Q(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Q(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oi,this.toJSON())}_performRefresh(){return An("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Rn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Gh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new TN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ff(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Us(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return _N(this,e)}reload(){return IN(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Rn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Zl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cn(this.auth.app))return Promise.reject(_r(this.auth));const e=await this.getIdToken();return await Us(this,vN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,l,c,h;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,v=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,I=(s=n.photoURL)!==null&&s!==void 0?s:void 0,P=(a=n.tenantId)!==null&&a!==void 0?a:void 0,N=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,T=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:C,emailVerified:D,isAnonymous:b,providerData:L,stsTokenManager:A}=n;Q(C&&A,e,"internal-error");const _=Oi.fromJSON(this.name,A);Q(typeof C=="string",e,"internal-error"),Qn(p,e.name),Qn(m,e.name),Q(typeof D=="boolean",e,"internal-error"),Q(typeof b=="boolean",e,"internal-error"),Qn(v,e.name),Qn(I,e.name),Qn(P,e.name),Qn(N,e.name),Qn(w,e.name),Qn(T,e.name);const S=new Rn({uid:C,auth:e,email:m,emailVerified:D,displayName:p,isAnonymous:b,photoURL:I,phoneNumber:v,tenantId:P,stsTokenManager:_,createdAt:w,lastLoginAt:T});return L&&Array.isArray(L)&&(S.providerData=L.map(R=>Object.assign({},R))),N&&(S._redirectEventId=N),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Oi;i.updateFromServerResponse(n);const o=new Rn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Zl(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Q(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?wT(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),a=new Oi;a.updateFromIdToken(r);const l=new Rn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ff(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy=new Map;function Pn(t){Un(t instanceof Function,"Expected a class definition");let e=cy.get(t);return e?(Un(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,cy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ST.type="NONE";const dy=ST;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(t,e,n){return`firebase:${t}:${e}:${n}`}class Bi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=pl(this.userKey,i.apiKey,o),this.fullPersistenceKey=pl("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Rn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Bi(Pn(dy),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let o=i[0]||Pn(dy);const s=pl(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(s);if(h){const p=Rn._fromJSON(e,h);c!==o&&(a=p),o=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new Bi(o,e,r):(o=l[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==o)try{await c._remove(s)}catch{}})),new Bi(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kT(e))return"Blackberry";if(xT(e))return"Webos";if(AT(e))return"Safari";if((e.includes("chrome/")||RT(e))&&!e.includes("edge/"))return"Chrome";if(NT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function CT(t=ut()){return/firefox\//i.test(t)}function AT(t=ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function RT(t=ut()){return/crios\//i.test(t)}function PT(t=ut()){return/iemobile/i.test(t)}function NT(t=ut()){return/android/i.test(t)}function kT(t=ut()){return/blackberry/i.test(t)}function xT(t=ut()){return/webos/i.test(t)}function zh(t=ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function AN(t=ut()){var e;return zh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function RN(){return GR()&&document.documentMode===10}function MT(t=ut()){return zh(t)||NT(t)||xT(t)||kT(t)||/windows phone/i.test(t)||PT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(t,e=[]){let n;switch(t){case"Browser":n=fy(ut());break;case"Worker":n=`${fy(ut())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${co}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{const l=e(o);s(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NN(t,e={}){return Nr(t,"GET","/v2/passwordPolicy",ii(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=6;class xN{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:kN,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hy(this),this.idTokenSubscription=new hy(this),this.beforeStateQueue=new PN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Bi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await IT(this,{idToken:e}),r=await Rn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Cn(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===a)&&(l!=null&&l.user)&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Zl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Cn(this.app))return Promise.reject(_r(this));const n=e?Ct(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Cn(this.app)?Promise.reject(_r(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Cn(this.app)?Promise.reject(_r(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NN(this),n=new xN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qs("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await CN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Pn(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await Bi.create(this,[Pn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{s=!0,l()}}else{const l=e.addObserver(n);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&lN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function fo(t){return Ct(t)}class hy{constructor(e){this.auth=e,this.observer=null,this.addObserver=YR(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DN(t){Vu=t}function LT(t){return Vu.loadJS(t)}function LN(){return Vu.recaptchaEnterpriseScript}function VN(){return Vu.gapiScript}function UN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const FN="recaptcha-enterprise",bN="NO_RECAPTCHA";class ON{constructor(e){this.type=FN,this.auth=fo(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,a)=>{yN(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new gN(l);return o.tenantId==null?o._agentRecaptchaConfig=c:o._tenantRecaptchaConfigs[o.tenantId]=c,s(c.siteKey)}}).catch(l=>{a(l)})})}function i(o,s,a){const l=window.grecaptcha;ly(l)?l.enterprise.ready(()=>{l.enterprise.execute(o,{action:e}).then(c=>{s(c)}).catch(()=>{s(bN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&ly(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let l=LN();l.length!==0&&(l+=a),LT(l).then(()=>{i(a,o,s)}).catch(c=>{s(c)})}}).catch(a=>{s(a)})})}}async function py(t,e,n,r=!1){const i=new ON(t);let o;try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function my(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await py(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await py(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(t,e){const n=Bh(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Yl(o,e??{}))return i;tn(i,"already-initialized")}return n.initialize({options:e})}function GN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Pn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function HN(t,e,n){const r=fo(t);Q(r._canInitEmulator,r,"emulator-config-failed"),Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=VT(e),{host:s,port:a}=qN(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),$N()}function VT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qN(t){const e=VT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:gy(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:gy(s)}}}function gy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function $N(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return An("not implemented")}_getIdTokenResponse(e){return An("not implemented")}_linkToIdToken(e,n){return An("not implemented")}_getReauthenticationResolver(e){return An("not implemented")}}async function zN(t,e){return Nr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WN(t,e){return Lu(t,"POST","/v1/accounts:signInWithPassword",ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KN(t,e){return Lu(t,"POST","/v1/accounts:signInWithEmailLink",ii(t,e))}async function JN(t,e){return Lu(t,"POST","/v1/accounts:signInWithEmailLink",ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends Wh{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Fs(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Fs(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return my(e,n,"signInWithPassword",WN);case"emailLink":return KN(e,{email:this._email,oobCode:this._password});default:tn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return my(e,r,"signUpPassword",zN);case"emailLink":return JN(e,{idToken:n,email:this._email,oobCode:this._password});default:tn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gi(t,e){return Lu(t,"POST","/v1/accounts:signInWithIdp",ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN="http://localhost";class Zr extends Wh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Zr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):tn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=Gh(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Zr(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Gi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Gi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gi(e,n)}buildRequest(){const e={requestUri:YN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xs(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function XN(t){const e=Xo(Zo(t)).link,n=e?Xo(Zo(e)).deep_link_id:null,r=Xo(Zo(t)).deep_link_id;return(r?Xo(Zo(r)).link:null)||r||n||e||t}class Kh{constructor(e){var n,r,i,o,s,a;const l=Xo(Zo(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,p=QN((i=l.mode)!==null&&i!==void 0?i:null);Q(c&&h&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=h,this.continueUrl=(o=l.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=l.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=XN(e);try{return new Kh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(){this.providerId=ho.PROVIDER_ID}static credential(e,n){return Fs._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Kh.parseLink(n);return Q(r,"argument-error"),Fs._fromEmailAndCode(e,r.code,r.tenantId)}}ho.PROVIDER_ID="password";ho.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ho.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends UT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends js{constructor(){super("facebook.com")}static credential(e){return Zr._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tr.credential(e.oauthAccessToken)}catch{return null}}}tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends js{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Zr._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return nr.credential(n,r)}catch{return null}}}nr.GOOGLE_SIGN_IN_METHOD="google.com";nr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends js{constructor(){super("github.com")}static credential(e){return Zr._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.GITHUB_SIGN_IN_METHOD="github.com";rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends js{constructor(){super("twitter.com")}static credential(e,n){return Zr._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ir.credential(n,r)}catch{return null}}}ir.TWITTER_SIGN_IN_METHOD="twitter.com";ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await Rn._fromIdTokenResponse(e,r,i),s=yy(r);return new ji({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=yy(r);return new ji({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function yy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl extends Hn{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,jl.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new jl(e,n,r,i)}}function FT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?jl._fromErrorAndOperation(t,o,e,r):o})}async function ZN(t,e,n=!1){const r=await Us(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ji._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jN(t,e,n=!1){const{auth:r}=t;if(Cn(r.app))return Promise.reject(_r(r));const i="reauthenticate";try{const o=await Us(t,FT(r,i,e,t),n);Q(o.idToken,r,"internal-error");const s=$h(o.idToken);Q(s,r,"internal-error");const{sub:a}=s;return Q(t.uid===a,r,"user-mismatch"),ji._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&tn(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bT(t,e,n=!1){if(Cn(t.app))return Promise.reject(_r(t));const r="signIn",i=await FT(t,r,e),o=await ji._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function ek(t,e){return bT(fo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tk(t){const e=fo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function nk(t,e,n){return Cn(t.app)?Promise.reject(_r(t)):ek(Ct(t),ho.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&tk(t),r})}function rk(t,e,n,r){return Ct(t).onIdTokenChanged(e,n,r)}function ik(t,e,n){return Ct(t).beforeAuthStateChanged(e,n)}function ok(t,e,n,r){return Ct(t).onAuthStateChanged(e,n,r)}const eu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(eu,"1"),this.storage.removeItem(eu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=1e3,ak=10;class BT extends OT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=MT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,a,l)=>{this.notifyListeners(s,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);RN()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,ak):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},sk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}BT.type="LOCAL";const lk=BT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT extends OT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}GT.type="SESSION";const HT=GT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Uu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(async c=>c(n.origin,o)),l=await uk(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,l)=>{const c=Jh("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){const m=p;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return window}function dk(t){dn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(){return typeof dn().WorkerGlobalScope<"u"&&typeof dn().importScripts=="function"}async function fk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function pk(){return qT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="firebaseLocalStorageDb",mk=1,tu="firebaseLocalStorage",zT="fbase_key";class ea{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Fu(t,e){return t.transaction([tu],e?"readwrite":"readonly").objectStore(tu)}function gk(){const t=indexedDB.deleteDatabase($T);return new ea(t).toPromise()}function hf(){const t=indexedDB.open($T,mk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(tu,{keyPath:zT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(tu)?e(r):(r.close(),await gk(),e(await hf()))})})}async function vy(t,e,n){const r=Fu(t,!0).put({[zT]:e,value:n});return new ea(r).toPromise()}async function yk(t,e){const n=Fu(t,!1).get(e),r=await new ea(n).toPromise();return r===void 0?null:r.value}function _y(t,e){const n=Fu(t,!0).delete(e);return new ea(n).toPromise()}const vk=800,_k=3;class WT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>_k)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uu._getInstance(pk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await fk(),!this.activeServiceWorker)return;this.sender=new ck(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hf();return await vy(e,eu,"1"),await _y(e,eu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>vy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>yk(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_y(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Fu(i,!1).getAll();return new ea(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WT.type="LOCAL";const Ek=WT;new Zs(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(t,e){return e?Pn(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh extends Wh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Gi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Gi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Ik(t){return bT(t.auth,new Yh(t),t.bypassAuthState)}function wk(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),jN(n,new Yh(t),t.bypassAuthState)}async function Sk(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),ZN(n,new Yh(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ik;case"linkViaPopup":case"linkViaRedirect":return Sk;case"reauthViaPopup":case"reauthViaRedirect":return wk;default:tn(this.auth,"internal-error")}}resolve(e){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=new Zs(2e3,1e4);class ki extends KT{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,ki.currentPopupAction&&ki.currentPopupAction.cancel(),ki.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){Un(this.filter.length===1,"Popup operations only handle one event");const e=Jh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ki.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ck.get())};e()}}ki.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak="pendingRedirect",ml=new Map;class Rk extends KT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ml.get(this.auth._key());if(!e){try{const r=await Pk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ml.set(this.auth._key(),e)}return this.bypassAuthState||ml.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Pk(t,e){const n=xk(e),r=kk(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Nk(t,e){ml.set(t._key(),e)}function kk(t){return Pn(t._redirectPersistence)}function xk(t){return pl(Ak,t.config.apiKey,t.name)}async function Mk(t,e,n=!1){if(Cn(t.app))return Promise.reject(_r(t));const r=fo(t),i=Tk(r,e),s=await new Rk(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=10*60*1e3;class Lk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Vk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!JT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(cn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Dk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ey(e))}saveEventToCache(e){this.cachedEventUids.add(Ey(e)),this.lastProcessedEventTime=Date.now()}}function Ey(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function JT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Vk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uk(t,e={}){return Nr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bk=/^https?/;async function Ok(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Uk(t);for(const n of e)try{if(Bk(n))return}catch{}tn(t,"unauthorized-domain")}function Bk(t){const e=df(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!bk.test(n))return!1;if(Fk.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=new Zs(3e4,6e4);function Ty(){const t=dn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Hk(t){return new Promise((e,n)=>{var r,i,o;function s(){Ty(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ty(),n(cn(t,"network-request-failed"))},timeout:Gk.get()})}if(!((i=(r=dn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=dn().gapi)===null||o===void 0)&&o.load)s();else{const a=UN("iframefcb");return dn()[a]=()=>{gapi.load?s():n(cn(t,"network-request-failed"))},LT(`${VN()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw gl=null,e})}let gl=null;function qk(t){return gl=gl||Hk(t),gl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=new Zs(5e3,15e3),zk="__/auth/iframe",Wk="emulator/auth/iframe",Kk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Jk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yk(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qh(e,Wk):`https://${t.config.authDomain}/${zk}`,r={apiKey:e.apiKey,appName:t.name,v:co},i=Jk.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Xs(r).slice(1)}`}async function Qk(t){const e=await qk(t),n=dn().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:Yk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Kk,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=cn(t,"network-request-failed"),a=dn().setTimeout(()=>{o(s)},$k.get());function l(){dn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Zk=500,jk=600,ex="_blank",tx="http://localhost";class Iy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nx(t,e,n,r=Zk,i=jk){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Xk),{width:r.toString(),height:i.toString(),top:o,left:s}),c=ut().toLowerCase();n&&(a=RT(c)?ex:n),CT(c)&&(e=e||tx,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[v,I])=>`${m}${v}=${I},`,"");if(AN(c)&&a!=="_self")return rx(e||"",a),new Iy(null);const p=window.open(e||"",a,h);Q(p,t,"popup-blocked");try{p.focus()}catch{}return new Iy(p)}function rx(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="__/auth/handler",ox="emulator/auth/handler",sx=encodeURIComponent("fac");async function wy(t,e,n,r,i,o){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:co,eventId:i};if(e instanceof UT){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",JR(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))s[h]=p}if(e instanceof js){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${sx}=${encodeURIComponent(l)}`:"";return`${ax(t)}?${Xs(a).slice(1)}${c}`}function ax({config:t}){return t.emulator?qh(t,ox):`https://${t.authDomain}/${ix}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id="webStorageSupport";class lx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HT,this._completeRedirectFn=Mk,this._overrideRedirectResult=Nk}async _openPopup(e,n,r,i){var o;Un((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await wy(e,n,r,df(),i);return nx(e,s,Jh())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await wy(e,n,r,df(),i);return dk(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Un(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Qk(e),r=new Lk(e);return n.register("authEvent",i=>(Q(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(id,{type:id},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[id];s!==void 0&&n(!!s),tn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Ok(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return MT()||AT()||zh()}}const ux=lx;var Sy="@firebase/auth",Cy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fx(t){Zi(new Xr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Q(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DT(t)},c=new MN(r,i,o,l);return GN(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Zi(new Xr("auth-internal",e=>{const n=fo(e.getProvider("auth").getImmediate());return(r=>new cx(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vr(Sy,Cy,dx(t)),vr(Sy,Cy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx=5*60,px=uT("authIdTokenMaxAge")||hx;let Ay=null;const mx=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>px)return;const i=n==null?void 0:n.token;Ay!==i&&(Ay=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function gx(t=hT()){const e=Bh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=BN(t,{popupRedirectResolver:ux,persistence:[Ek,lk,HT]}),r=uT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=mx(o.toString());ik(n,s,()=>s(n.currentUser)),rk(n,a=>s(a))}}const i=aT("auth");return i&&HN(n,`http://${i}`),n}function yx(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}DN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=cn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",yx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fx("Browser");var Ry=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zr,YT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,_){function S(){}S.prototype=_.prototype,A.D=_.prototype,A.prototype=new S,A.prototype.constructor=A,A.C=function(R,M,V){for(var k=Array(arguments.length-2),de=2;de<arguments.length;de++)k[de-2]=arguments[de];return _.prototype[M].apply(R,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,_,S){S||(S=0);var R=Array(16);if(typeof _=="string")for(var M=0;16>M;++M)R[M]=_.charCodeAt(S++)|_.charCodeAt(S++)<<8|_.charCodeAt(S++)<<16|_.charCodeAt(S++)<<24;else for(M=0;16>M;++M)R[M]=_[S++]|_[S++]<<8|_[S++]<<16|_[S++]<<24;_=A.g[0],S=A.g[1],M=A.g[2];var V=A.g[3],k=_+(V^S&(M^V))+R[0]+3614090360&4294967295;_=S+(k<<7&4294967295|k>>>25),k=V+(M^_&(S^M))+R[1]+3905402710&4294967295,V=_+(k<<12&4294967295|k>>>20),k=M+(S^V&(_^S))+R[2]+606105819&4294967295,M=V+(k<<17&4294967295|k>>>15),k=S+(_^M&(V^_))+R[3]+3250441966&4294967295,S=M+(k<<22&4294967295|k>>>10),k=_+(V^S&(M^V))+R[4]+4118548399&4294967295,_=S+(k<<7&4294967295|k>>>25),k=V+(M^_&(S^M))+R[5]+1200080426&4294967295,V=_+(k<<12&4294967295|k>>>20),k=M+(S^V&(_^S))+R[6]+2821735955&4294967295,M=V+(k<<17&4294967295|k>>>15),k=S+(_^M&(V^_))+R[7]+4249261313&4294967295,S=M+(k<<22&4294967295|k>>>10),k=_+(V^S&(M^V))+R[8]+1770035416&4294967295,_=S+(k<<7&4294967295|k>>>25),k=V+(M^_&(S^M))+R[9]+2336552879&4294967295,V=_+(k<<12&4294967295|k>>>20),k=M+(S^V&(_^S))+R[10]+4294925233&4294967295,M=V+(k<<17&4294967295|k>>>15),k=S+(_^M&(V^_))+R[11]+2304563134&4294967295,S=M+(k<<22&4294967295|k>>>10),k=_+(V^S&(M^V))+R[12]+1804603682&4294967295,_=S+(k<<7&4294967295|k>>>25),k=V+(M^_&(S^M))+R[13]+4254626195&4294967295,V=_+(k<<12&4294967295|k>>>20),k=M+(S^V&(_^S))+R[14]+2792965006&4294967295,M=V+(k<<17&4294967295|k>>>15),k=S+(_^M&(V^_))+R[15]+1236535329&4294967295,S=M+(k<<22&4294967295|k>>>10),k=_+(M^V&(S^M))+R[1]+4129170786&4294967295,_=S+(k<<5&4294967295|k>>>27),k=V+(S^M&(_^S))+R[6]+3225465664&4294967295,V=_+(k<<9&4294967295|k>>>23),k=M+(_^S&(V^_))+R[11]+643717713&4294967295,M=V+(k<<14&4294967295|k>>>18),k=S+(V^_&(M^V))+R[0]+3921069994&4294967295,S=M+(k<<20&4294967295|k>>>12),k=_+(M^V&(S^M))+R[5]+3593408605&4294967295,_=S+(k<<5&4294967295|k>>>27),k=V+(S^M&(_^S))+R[10]+38016083&4294967295,V=_+(k<<9&4294967295|k>>>23),k=M+(_^S&(V^_))+R[15]+3634488961&4294967295,M=V+(k<<14&4294967295|k>>>18),k=S+(V^_&(M^V))+R[4]+3889429448&4294967295,S=M+(k<<20&4294967295|k>>>12),k=_+(M^V&(S^M))+R[9]+568446438&4294967295,_=S+(k<<5&4294967295|k>>>27),k=V+(S^M&(_^S))+R[14]+3275163606&4294967295,V=_+(k<<9&4294967295|k>>>23),k=M+(_^S&(V^_))+R[3]+4107603335&4294967295,M=V+(k<<14&4294967295|k>>>18),k=S+(V^_&(M^V))+R[8]+1163531501&4294967295,S=M+(k<<20&4294967295|k>>>12),k=_+(M^V&(S^M))+R[13]+2850285829&4294967295,_=S+(k<<5&4294967295|k>>>27),k=V+(S^M&(_^S))+R[2]+4243563512&4294967295,V=_+(k<<9&4294967295|k>>>23),k=M+(_^S&(V^_))+R[7]+1735328473&4294967295,M=V+(k<<14&4294967295|k>>>18),k=S+(V^_&(M^V))+R[12]+2368359562&4294967295,S=M+(k<<20&4294967295|k>>>12),k=_+(S^M^V)+R[5]+4294588738&4294967295,_=S+(k<<4&4294967295|k>>>28),k=V+(_^S^M)+R[8]+2272392833&4294967295,V=_+(k<<11&4294967295|k>>>21),k=M+(V^_^S)+R[11]+1839030562&4294967295,M=V+(k<<16&4294967295|k>>>16),k=S+(M^V^_)+R[14]+4259657740&4294967295,S=M+(k<<23&4294967295|k>>>9),k=_+(S^M^V)+R[1]+2763975236&4294967295,_=S+(k<<4&4294967295|k>>>28),k=V+(_^S^M)+R[4]+1272893353&4294967295,V=_+(k<<11&4294967295|k>>>21),k=M+(V^_^S)+R[7]+4139469664&4294967295,M=V+(k<<16&4294967295|k>>>16),k=S+(M^V^_)+R[10]+3200236656&4294967295,S=M+(k<<23&4294967295|k>>>9),k=_+(S^M^V)+R[13]+681279174&4294967295,_=S+(k<<4&4294967295|k>>>28),k=V+(_^S^M)+R[0]+3936430074&4294967295,V=_+(k<<11&4294967295|k>>>21),k=M+(V^_^S)+R[3]+3572445317&4294967295,M=V+(k<<16&4294967295|k>>>16),k=S+(M^V^_)+R[6]+76029189&4294967295,S=M+(k<<23&4294967295|k>>>9),k=_+(S^M^V)+R[9]+3654602809&4294967295,_=S+(k<<4&4294967295|k>>>28),k=V+(_^S^M)+R[12]+3873151461&4294967295,V=_+(k<<11&4294967295|k>>>21),k=M+(V^_^S)+R[15]+530742520&4294967295,M=V+(k<<16&4294967295|k>>>16),k=S+(M^V^_)+R[2]+3299628645&4294967295,S=M+(k<<23&4294967295|k>>>9),k=_+(M^(S|~V))+R[0]+4096336452&4294967295,_=S+(k<<6&4294967295|k>>>26),k=V+(S^(_|~M))+R[7]+1126891415&4294967295,V=_+(k<<10&4294967295|k>>>22),k=M+(_^(V|~S))+R[14]+2878612391&4294967295,M=V+(k<<15&4294967295|k>>>17),k=S+(V^(M|~_))+R[5]+4237533241&4294967295,S=M+(k<<21&4294967295|k>>>11),k=_+(M^(S|~V))+R[12]+1700485571&4294967295,_=S+(k<<6&4294967295|k>>>26),k=V+(S^(_|~M))+R[3]+2399980690&4294967295,V=_+(k<<10&4294967295|k>>>22),k=M+(_^(V|~S))+R[10]+4293915773&4294967295,M=V+(k<<15&4294967295|k>>>17),k=S+(V^(M|~_))+R[1]+2240044497&4294967295,S=M+(k<<21&4294967295|k>>>11),k=_+(M^(S|~V))+R[8]+1873313359&4294967295,_=S+(k<<6&4294967295|k>>>26),k=V+(S^(_|~M))+R[15]+4264355552&4294967295,V=_+(k<<10&4294967295|k>>>22),k=M+(_^(V|~S))+R[6]+2734768916&4294967295,M=V+(k<<15&4294967295|k>>>17),k=S+(V^(M|~_))+R[13]+1309151649&4294967295,S=M+(k<<21&4294967295|k>>>11),k=_+(M^(S|~V))+R[4]+4149444226&4294967295,_=S+(k<<6&4294967295|k>>>26),k=V+(S^(_|~M))+R[11]+3174756917&4294967295,V=_+(k<<10&4294967295|k>>>22),k=M+(_^(V|~S))+R[2]+718787259&4294967295,M=V+(k<<15&4294967295|k>>>17),k=S+(V^(M|~_))+R[9]+3951481745&4294967295,A.g[0]=A.g[0]+_&4294967295,A.g[1]=A.g[1]+(M+(k<<21&4294967295|k>>>11))&4294967295,A.g[2]=A.g[2]+M&4294967295,A.g[3]=A.g[3]+V&4294967295}r.prototype.u=function(A,_){_===void 0&&(_=A.length);for(var S=_-this.blockSize,R=this.B,M=this.h,V=0;V<_;){if(M==0)for(;V<=S;)i(this,A,V),V+=this.blockSize;if(typeof A=="string"){for(;V<_;)if(R[M++]=A.charCodeAt(V++),M==this.blockSize){i(this,R),M=0;break}}else for(;V<_;)if(R[M++]=A[V++],M==this.blockSize){i(this,R),M=0;break}}this.h=M,this.o+=_},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var _=1;_<A.length-8;++_)A[_]=0;var S=8*this.o;for(_=A.length-8;_<A.length;++_)A[_]=S&255,S/=256;for(this.u(A),A=Array(16),_=S=0;4>_;++_)for(var R=0;32>R;R+=8)A[S++]=this.g[_]>>>R&255;return A};function o(A,_){var S=a;return Object.prototype.hasOwnProperty.call(S,A)?S[A]:S[A]=_(A)}function s(A,_){this.h=_;for(var S=[],R=!0,M=A.length-1;0<=M;M--){var V=A[M]|0;R&&V==_||(S[M]=V,R=!1)}this.g=S}var a={};function l(A){return-128<=A&&128>A?o(A,function(_){return new s([_|0],0>_?-1:0)}):new s([A|0],0>A?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return p;if(0>A)return N(c(-A));for(var _=[],S=1,R=0;A>=S;R++)_[R]=A/S|0,S*=4294967296;return new s(_,0)}function h(A,_){if(A.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(A.charAt(0)=="-")return N(h(A.substring(1),_));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(_,8)),R=p,M=0;M<A.length;M+=8){var V=Math.min(8,A.length-M),k=parseInt(A.substring(M,M+V),_);8>V?(V=c(Math.pow(_,V)),R=R.j(V).add(c(k))):(R=R.j(S),R=R.add(c(k)))}return R}var p=l(0),m=l(1),v=l(16777216);t=s.prototype,t.m=function(){if(P(this))return-N(this).m();for(var A=0,_=1,S=0;S<this.g.length;S++){var R=this.i(S);A+=(0<=R?R:4294967296+R)*_,_*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(I(this))return"0";if(P(this))return"-"+N(this).toString(A);for(var _=c(Math.pow(A,6)),S=this,R="";;){var M=D(S,_).g;S=w(S,M.j(_));var V=((0<S.g.length?S.g[0]:S.h)>>>0).toString(A);if(S=M,I(S))return V+R;for(;6>V.length;)V="0"+V;R=V+R}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function I(A){if(A.h!=0)return!1;for(var _=0;_<A.g.length;_++)if(A.g[_]!=0)return!1;return!0}function P(A){return A.h==-1}t.l=function(A){return A=w(this,A),P(A)?-1:I(A)?0:1};function N(A){for(var _=A.g.length,S=[],R=0;R<_;R++)S[R]=~A.g[R];return new s(S,~A.h).add(m)}t.abs=function(){return P(this)?N(this):this},t.add=function(A){for(var _=Math.max(this.g.length,A.g.length),S=[],R=0,M=0;M<=_;M++){var V=R+(this.i(M)&65535)+(A.i(M)&65535),k=(V>>>16)+(this.i(M)>>>16)+(A.i(M)>>>16);R=k>>>16,V&=65535,k&=65535,S[M]=k<<16|V}return new s(S,S[S.length-1]&-2147483648?-1:0)};function w(A,_){return A.add(N(_))}t.j=function(A){if(I(this)||I(A))return p;if(P(this))return P(A)?N(this).j(N(A)):N(N(this).j(A));if(P(A))return N(this.j(N(A)));if(0>this.l(v)&&0>A.l(v))return c(this.m()*A.m());for(var _=this.g.length+A.g.length,S=[],R=0;R<2*_;R++)S[R]=0;for(R=0;R<this.g.length;R++)for(var M=0;M<A.g.length;M++){var V=this.i(R)>>>16,k=this.i(R)&65535,de=A.i(M)>>>16,vt=A.i(M)&65535;S[2*R+2*M]+=k*vt,T(S,2*R+2*M),S[2*R+2*M+1]+=V*vt,T(S,2*R+2*M+1),S[2*R+2*M+1]+=k*de,T(S,2*R+2*M+1),S[2*R+2*M+2]+=V*de,T(S,2*R+2*M+2)}for(R=0;R<_;R++)S[R]=S[2*R+1]<<16|S[2*R];for(R=_;R<2*_;R++)S[R]=0;return new s(S,0)};function T(A,_){for(;(A[_]&65535)!=A[_];)A[_+1]+=A[_]>>>16,A[_]&=65535,_++}function C(A,_){this.g=A,this.h=_}function D(A,_){if(I(_))throw Error("division by zero");if(I(A))return new C(p,p);if(P(A))return _=D(N(A),_),new C(N(_.g),N(_.h));if(P(_))return _=D(A,N(_)),new C(N(_.g),_.h);if(30<A.g.length){if(P(A)||P(_))throw Error("slowDivide_ only works with positive integers.");for(var S=m,R=_;0>=R.l(A);)S=b(S),R=b(R);var M=L(S,1),V=L(R,1);for(R=L(R,2),S=L(S,2);!I(R);){var k=V.add(R);0>=k.l(A)&&(M=M.add(S),V=k),R=L(R,1),S=L(S,1)}return _=w(A,M.j(_)),new C(M,_)}for(M=p;0<=A.l(_);){for(S=Math.max(1,Math.floor(A.m()/_.m())),R=Math.ceil(Math.log(S)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),V=c(S),k=V.j(_);P(k)||0<k.l(A);)S-=R,V=c(S),k=V.j(_);I(V)&&(V=m),M=M.add(V),A=w(A,k)}return new C(M,A)}t.A=function(A){return D(this,A).h},t.and=function(A){for(var _=Math.max(this.g.length,A.g.length),S=[],R=0;R<_;R++)S[R]=this.i(R)&A.i(R);return new s(S,this.h&A.h)},t.or=function(A){for(var _=Math.max(this.g.length,A.g.length),S=[],R=0;R<_;R++)S[R]=this.i(R)|A.i(R);return new s(S,this.h|A.h)},t.xor=function(A){for(var _=Math.max(this.g.length,A.g.length),S=[],R=0;R<_;R++)S[R]=this.i(R)^A.i(R);return new s(S,this.h^A.h)};function b(A){for(var _=A.g.length+1,S=[],R=0;R<_;R++)S[R]=A.i(R)<<1|A.i(R-1)>>>31;return new s(S,A.h)}function L(A,_){var S=_>>5;_%=32;for(var R=A.g.length-S,M=[],V=0;V<R;V++)M[V]=0<_?A.i(V+S)>>>_|A.i(V+S+1)<<32-_:A.i(V+S);return new s(M,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,YT=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=c,s.fromString=h,zr=s}).apply(typeof Ry<"u"?Ry:typeof self<"u"?self:typeof window<"u"?window:{});var za=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var QT,jo,XT,yl,pf,ZT,jT,eI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,g,y){return f==Array.prototype||f==Object.prototype||(f[g]=y.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof za=="object"&&za];for(var g=0;g<f.length;++g){var y=f[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(f,g){if(g)e:{var y=r;f=f.split(".");for(var E=0;E<f.length-1;E++){var U=f[E];if(!(U in y))break e;y=y[U]}f=f[f.length-1],E=y[f],g=g(E),g!=E&&g!=null&&e(y,f,{configurable:!0,writable:!0,value:g})}}function o(f,g){f instanceof String&&(f+="");var y=0,E=!1,U={next:function(){if(!E&&y<f.length){var F=y++;return{value:g(F,f[F]),done:!1}}return E=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}i("Array.prototype.values",function(f){return f||function(){return o(this,function(g,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(f){var g=typeof f;return g=g!="object"?g:f?Array.isArray(f)?"array":g:"null",g=="array"||g=="object"&&typeof f.length=="number"}function c(f){var g=typeof f;return g=="object"&&f!=null||g=="function"}function h(f,g,y){return f.call.apply(f.bind,arguments)}function p(f,g,y){if(!f)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,E),f.apply(g,U)}}return function(){return f.apply(g,arguments)}}function m(f,g,y){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(f,g){var y=Array.prototype.slice.call(arguments,1);return function(){var E=y.slice();return E.push.apply(E,arguments),f.apply(this,E)}}function I(f,g){function y(){}y.prototype=g.prototype,f.aa=g.prototype,f.prototype=new y,f.prototype.constructor=f,f.Qb=function(E,U,F){for(var H=Array(arguments.length-2),me=2;me<arguments.length;me++)H[me-2]=arguments[me];return g.prototype[U].apply(E,H)}}function P(f){const g=f.length;if(0<g){const y=Array(g);for(let E=0;E<g;E++)y[E]=f[E];return y}return[]}function N(f,g){for(let y=1;y<arguments.length;y++){const E=arguments[y];if(l(E)){const U=f.length||0,F=E.length||0;f.length=U+F;for(let H=0;H<F;H++)f[U+H]=E[H]}else f.push(E)}}class w{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function T(f){return/^[\s\xa0]*$/.test(f)}function C(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function D(f){return D[" "](f),f}D[" "]=function(){};var b=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function L(f,g,y){for(const E in f)g.call(y,f[E],E,f)}function A(f,g){for(const y in f)g.call(void 0,f[y],y,f)}function _(f){const g={};for(const y in f)g[y]=f[y];return g}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(f,g){let y,E;for(let U=1;U<arguments.length;U++){E=arguments[U];for(y in E)f[y]=E[y];for(let F=0;F<S.length;F++)y=S[F],Object.prototype.hasOwnProperty.call(E,y)&&(f[y]=E[y])}}function M(f){var g=1;f=f.split(":");const y=[];for(;0<g&&f.length;)y.push(f.shift()),g--;return f.length&&y.push(f.join(":")),y}function V(f){a.setTimeout(()=>{throw f},0)}function k(){var f=Y;let g=null;return f.g&&(g=f.g,f.g=f.g.next,f.g||(f.h=null),g.next=null),g}class de{constructor(){this.h=this.g=null}add(g,y){const E=vt.get();E.set(g,y),this.h?this.h.next=E:this.g=E,this.h=E}}var vt=new w(()=>new zn,f=>f.reset());class zn{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Dt,q=!1,Y=new de,te=()=>{const f=a.Promise.resolve(void 0);Dt=()=>{f.then(Ie)}};var Ie=()=>{for(var f;f=k();){try{f.h.call(f.g)}catch(y){V(y)}var g=vt;g.j(f),100>g.h&&(g.h++,f.next=g.g,g.g=f)}q=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xe(f,g){this.type=f,this.g=this.target=g,this.defaultPrevented=!1}xe.prototype.h=function(){this.defaultPrevented=!0};var mn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,g=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const y=()=>{};a.addEventListener("test",y,g),a.removeEventListener("test",y,g)}catch{}return f}();function gn(f,g){if(xe.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var y=this.type=f.type,E=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=g,g=f.relatedTarget){if(b){e:{try{D(g.nodeName);var U=!0;break e}catch{}U=!1}U||(g=null)}}else y=="mouseover"?g=f.fromElement:y=="mouseout"&&(g=f.toElement);this.relatedTarget=g,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:yn[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&gn.aa.h.call(this)}}I(gn,xe);var yn={2:"touch",3:"pen",4:"mouse"};gn.prototype.h=function(){gn.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var vn="closure_listenable_"+(1e6*Math.random()|0),TS=0;function IS(f,g,y,E,U){this.listener=f,this.proxy=null,this.src=g,this.type=y,this.capture=!!E,this.ha=U,this.key=++TS,this.da=this.fa=!1}function ua(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ca(f){this.src=f,this.g={},this.h=0}ca.prototype.add=function(f,g,y,E,U){var F=f.toString();f=this.g[F],f||(f=this.g[F]=[],this.h++);var H=ic(f,g,E,U);return-1<H?(g=f[H],y||(g.fa=!1)):(g=new IS(g,this.src,F,!!E,U),g.fa=y,f.push(g)),g};function rc(f,g){var y=g.type;if(y in f.g){var E=f.g[y],U=Array.prototype.indexOf.call(E,g,void 0),F;(F=0<=U)&&Array.prototype.splice.call(E,U,1),F&&(ua(g),f.g[y].length==0&&(delete f.g[y],f.h--))}}function ic(f,g,y,E){for(var U=0;U<f.length;++U){var F=f[U];if(!F.da&&F.listener==g&&F.capture==!!y&&F.ha==E)return U}return-1}var oc="closure_lm_"+(1e6*Math.random()|0),sc={};function qp(f,g,y,E,U){if(Array.isArray(g)){for(var F=0;F<g.length;F++)qp(f,g[F],y,E,U);return null}return y=Wp(y),f&&f[vn]?f.K(g,y,c(E)?!!E.capture:!1,U):wS(f,g,y,!1,E,U)}function wS(f,g,y,E,U,F){if(!g)throw Error("Invalid event type");var H=c(U)?!!U.capture:!!U,me=lc(f);if(me||(f[oc]=me=new ca(f)),y=me.add(g,y,E,H,F),y.proxy)return y;if(E=SS(),y.proxy=E,E.src=f,E.listener=y,f.addEventListener)mn||(U=H),U===void 0&&(U=!1),f.addEventListener(g.toString(),E,U);else if(f.attachEvent)f.attachEvent(zp(g.toString()),E);else if(f.addListener&&f.removeListener)f.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return y}function SS(){function f(y){return g.call(f.src,f.listener,y)}const g=CS;return f}function $p(f,g,y,E,U){if(Array.isArray(g))for(var F=0;F<g.length;F++)$p(f,g[F],y,E,U);else E=c(E)?!!E.capture:!!E,y=Wp(y),f&&f[vn]?(f=f.i,g=String(g).toString(),g in f.g&&(F=f.g[g],y=ic(F,y,E,U),-1<y&&(ua(F[y]),Array.prototype.splice.call(F,y,1),F.length==0&&(delete f.g[g],f.h--)))):f&&(f=lc(f))&&(g=f.g[g.toString()],f=-1,g&&(f=ic(g,y,E,U)),(y=-1<f?g[f]:null)&&ac(y))}function ac(f){if(typeof f!="number"&&f&&!f.da){var g=f.src;if(g&&g[vn])rc(g.i,f);else{var y=f.type,E=f.proxy;g.removeEventListener?g.removeEventListener(y,E,f.capture):g.detachEvent?g.detachEvent(zp(y),E):g.addListener&&g.removeListener&&g.removeListener(E),(y=lc(g))?(rc(y,f),y.h==0&&(y.src=null,g[oc]=null)):ua(f)}}}function zp(f){return f in sc?sc[f]:sc[f]="on"+f}function CS(f,g){if(f.da)f=!0;else{g=new gn(g,this);var y=f.listener,E=f.ha||f.src;f.fa&&ac(f),f=y.call(E,g)}return f}function lc(f){return f=f[oc],f instanceof ca?f:null}var uc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wp(f){return typeof f=="function"?f:(f[uc]||(f[uc]=function(g){return f.handleEvent(g)}),f[uc])}function Ze(){pe.call(this),this.i=new ca(this),this.M=this,this.F=null}I(Ze,pe),Ze.prototype[vn]=!0,Ze.prototype.removeEventListener=function(f,g,y,E){$p(this,f,g,y,E)};function ct(f,g){var y,E=f.F;if(E)for(y=[];E;E=E.F)y.push(E);if(f=f.M,E=g.type||g,typeof g=="string")g=new xe(g,f);else if(g instanceof xe)g.target=g.target||f;else{var U=g;g=new xe(E,f),R(g,U)}if(U=!0,y)for(var F=y.length-1;0<=F;F--){var H=g.g=y[F];U=da(H,E,!0,g)&&U}if(H=g.g=f,U=da(H,E,!0,g)&&U,U=da(H,E,!1,g)&&U,y)for(F=0;F<y.length;F++)H=g.g=y[F],U=da(H,E,!1,g)&&U}Ze.prototype.N=function(){if(Ze.aa.N.call(this),this.i){var f=this.i,g;for(g in f.g){for(var y=f.g[g],E=0;E<y.length;E++)ua(y[E]);delete f.g[g],f.h--}}this.F=null},Ze.prototype.K=function(f,g,y,E){return this.i.add(String(f),g,!1,y,E)},Ze.prototype.L=function(f,g,y,E){return this.i.add(String(f),g,!0,y,E)};function da(f,g,y,E){if(g=f.i.g[String(g)],!g)return!0;g=g.concat();for(var U=!0,F=0;F<g.length;++F){var H=g[F];if(H&&!H.da&&H.capture==y){var me=H.listener,$e=H.ha||H.src;H.fa&&rc(f.i,H),U=me.call($e,E)!==!1&&U}}return U&&!E.defaultPrevented}function Kp(f,g,y){if(typeof f=="function")y&&(f=m(f,y));else if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(f,g||0)}function Jp(f){f.g=Kp(()=>{f.g=null,f.i&&(f.i=!1,Jp(f))},f.l);const g=f.h;f.h=null,f.m.apply(null,g)}class AS extends pe{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Jp(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wo(f){pe.call(this),this.h=f,this.g={}}I(wo,pe);var Yp=[];function Qp(f){L(f.g,function(g,y){this.g.hasOwnProperty(y)&&ac(g)},f),f.g={}}wo.prototype.N=function(){wo.aa.N.call(this),Qp(this)},wo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cc=a.JSON.stringify,RS=a.JSON.parse,PS=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function dc(){}dc.prototype.h=null;function Xp(f){return f.h||(f.h=f.i())}function Zp(){}var So={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fc(){xe.call(this,"d")}I(fc,xe);function hc(){xe.call(this,"c")}I(hc,xe);var xr={},jp=null;function fa(){return jp=jp||new Ze}xr.La="serverreachability";function em(f){xe.call(this,xr.La,f)}I(em,xe);function Co(f){const g=fa();ct(g,new em(g))}xr.STAT_EVENT="statevent";function tm(f,g){xe.call(this,xr.STAT_EVENT,f),this.stat=g}I(tm,xe);function dt(f){const g=fa();ct(g,new tm(g,f))}xr.Ma="timingevent";function nm(f,g){xe.call(this,xr.Ma,f),this.size=g}I(nm,xe);function Ao(f,g){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},g)}function Ro(){this.g=!0}Ro.prototype.xa=function(){this.g=!1};function NS(f,g,y,E,U,F){f.info(function(){if(f.g)if(F)for(var H="",me=F.split("&"),$e=0;$e<me.length;$e++){var ae=me[$e].split("=");if(1<ae.length){var je=ae[0];ae=ae[1];var et=je.split("_");H=2<=et.length&&et[1]=="type"?H+(je+"="+ae+"&"):H+(je+"=redacted&")}}else H=null;else H=F;return"XMLHTTP REQ ("+E+") [attempt "+U+"]: "+g+`
`+y+`
`+H})}function kS(f,g,y,E,U,F,H){f.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+U+"]: "+g+`
`+y+`
`+F+" "+H})}function li(f,g,y,E){f.info(function(){return"XMLHTTP TEXT ("+g+"): "+MS(f,y)+(E?" "+E:"")})}function xS(f,g){f.info(function(){return"TIMEOUT: "+g})}Ro.prototype.info=function(){};function MS(f,g){if(!f.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(f=0;f<y.length;f++)if(Array.isArray(y[f])){var E=y[f];if(!(2>E.length)){var U=E[1];if(Array.isArray(U)&&!(1>U.length)){var F=U[0];if(F!="noop"&&F!="stop"&&F!="close")for(var H=1;H<U.length;H++)U[H]=""}}}}return cc(y)}catch{return g}}var ha={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pc;function pa(){}I(pa,dc),pa.prototype.g=function(){return new XMLHttpRequest},pa.prototype.i=function(){return{}},pc=new pa;function Wn(f,g,y,E){this.j=f,this.i=g,this.l=y,this.R=E||1,this.U=new wo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new im}function im(){this.i=null,this.g="",this.h=!1}var om={},mc={};function gc(f,g,y){f.L=1,f.v=va(_n(g)),f.m=y,f.P=!0,sm(f,null)}function sm(f,g){f.F=Date.now(),ma(f),f.A=_n(f.v);var y=f.A,E=f.R;Array.isArray(E)||(E=[String(E)]),Em(y.i,"t",E),f.C=0,y=f.j.J,f.h=new im,f.g=bm(f.j,y?g:null,!f.m),0<f.O&&(f.M=new AS(m(f.Y,f,f.g),f.O)),g=f.U,y=f.g,E=f.ca;var U="readystatechange";Array.isArray(U)||(U&&(Yp[0]=U.toString()),U=Yp);for(var F=0;F<U.length;F++){var H=qp(y,U[F],E||g.handleEvent,!1,g.h||g);if(!H)break;g.g[H.key]=H}g=f.H?_(f.H):{},f.m?(f.u||(f.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,g)):(f.u="GET",f.g.ea(f.A,f.u,null,g)),Co(),NS(f.i,f.u,f.A,f.l,f.R,f.m)}Wn.prototype.ca=function(f){f=f.target;const g=this.M;g&&En(f)==3?g.j():this.Y(f)},Wn.prototype.Y=function(f){try{if(f==this.g)e:{const et=En(this.g);var g=this.g.Ba();const di=this.g.Z();if(!(3>et)&&(et!=3||this.g&&(this.h.h||this.g.oa()||Rm(this.g)))){this.J||et!=4||g==7||(g==8||0>=di?Co(3):Co(2)),yc(this);var y=this.g.Z();this.X=y;t:if(am(this)){var E=Rm(this.g);f="";var U=E.length,F=En(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mr(this),Po(this);var H="";break t}this.h.i=new a.TextDecoder}for(g=0;g<U;g++)this.h.h=!0,f+=this.h.i.decode(E[g],{stream:!(F&&g==U-1)});E.length=0,this.h.g+=f,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=y==200,kS(this.i,this.u,this.A,this.l,this.R,et,y),this.o){if(this.T&&!this.K){t:{if(this.g){var me,$e=this.g;if((me=$e.g?$e.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(me)){var ae=me;break t}}ae=null}if(y=ae)li(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vc(this,y);else{this.o=!1,this.s=3,dt(12),Mr(this),Po(this);break e}}if(this.P){y=!0;let qt;for(;!this.J&&this.C<H.length;)if(qt=DS(this,H),qt==mc){et==4&&(this.s=4,dt(14),y=!1),li(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==om){this.s=4,dt(15),li(this.i,this.l,H,"[Invalid Chunk]"),y=!1;break}else li(this.i,this.l,qt,null),vc(this,qt);if(am(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),et!=4||H.length!=0||this.h.h||(this.s=1,dt(16),y=!1),this.o=this.o&&y,!y)li(this.i,this.l,H,"[Invalid Chunked Response]"),Mr(this),Po(this);else if(0<H.length&&!this.W){this.W=!0;var je=this.j;je.g==this&&je.ba&&!je.M&&(je.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),Sc(je),je.M=!0,dt(11))}}else li(this.i,this.l,H,null),vc(this,H);et==4&&Mr(this),this.o&&!this.J&&(et==4?Lm(this.j,this):(this.o=!1,ma(this)))}else QS(this.g),y==400&&0<H.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),Mr(this),Po(this)}}}catch{}finally{}};function am(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function DS(f,g){var y=f.C,E=g.indexOf(`
`,y);return E==-1?mc:(y=Number(g.substring(y,E)),isNaN(y)?om:(E+=1,E+y>g.length?mc:(g=g.slice(E,E+y),f.C=E+y,g)))}Wn.prototype.cancel=function(){this.J=!0,Mr(this)};function ma(f){f.S=Date.now()+f.I,lm(f,f.I)}function lm(f,g){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Ao(m(f.ba,f),g)}function yc(f){f.B&&(a.clearTimeout(f.B),f.B=null)}Wn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(xS(this.i,this.A),this.L!=2&&(Co(),dt(17)),Mr(this),this.s=2,Po(this)):lm(this,this.S-f)};function Po(f){f.j.G==0||f.J||Lm(f.j,f)}function Mr(f){yc(f);var g=f.M;g&&typeof g.ma=="function"&&g.ma(),f.M=null,Qp(f.U),f.g&&(g=f.g,f.g=null,g.abort(),g.ma())}function vc(f,g){try{var y=f.j;if(y.G!=0&&(y.g==f||_c(y.h,f))){if(!f.K&&_c(y.h,f)&&y.G==3){try{var E=y.Da.g.parse(g)}catch{E=null}if(Array.isArray(E)&&E.length==3){var U=E;if(U[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<f.F)Sa(y),Ia(y);else break e;wc(y),dt(18)}}else y.za=U[1],0<y.za-y.T&&37500>U[2]&&y.F&&y.v==0&&!y.C&&(y.C=Ao(m(y.Za,y),6e3));if(1>=dm(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Lr(y,11)}else if((f.K||y.g==f)&&Sa(y),!T(g))for(U=y.Da.g.parse(g),g=0;g<U.length;g++){let ae=U[g];if(y.T=ae[0],ae=ae[1],y.G==2)if(ae[0]=="c"){y.K=ae[1],y.ia=ae[2];const je=ae[3];je!=null&&(y.la=je,y.j.info("VER="+y.la));const et=ae[4];et!=null&&(y.Aa=et,y.j.info("SVER="+y.Aa));const di=ae[5];di!=null&&typeof di=="number"&&0<di&&(E=1.5*di,y.L=E,y.j.info("backChannelRequestTimeoutMs_="+E)),E=y;const qt=f.g;if(qt){const Aa=qt.g?qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Aa){var F=E.h;F.g||Aa.indexOf("spdy")==-1&&Aa.indexOf("quic")==-1&&Aa.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Ec(F,F.h),F.h=null))}if(E.D){const Cc=qt.g?qt.g.getResponseHeader("X-HTTP-Session-Id"):null;Cc&&(E.ya=Cc,ye(E.I,E.D,Cc))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-f.F,y.j.info("Handshake RTT: "+y.R+"ms")),E=y;var H=f;if(E.qa=Fm(E,E.J?E.ia:null,E.W),H.K){fm(E.h,H);var me=H,$e=E.L;$e&&(me.I=$e),me.B&&(yc(me),ma(me)),E.g=H}else Mm(E);0<y.i.length&&wa(y)}else ae[0]!="stop"&&ae[0]!="close"||Lr(y,7);else y.G==3&&(ae[0]=="stop"||ae[0]=="close"?ae[0]=="stop"?Lr(y,7):Ic(y):ae[0]!="noop"&&y.l&&y.l.ta(ae),y.v=0)}}Co(4)}catch{}}var LS=class{constructor(f,g){this.g=f,this.map=g}};function um(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cm(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function dm(f){return f.h?1:f.g?f.g.size:0}function _c(f,g){return f.h?f.h==g:f.g?f.g.has(g):!1}function Ec(f,g){f.g?f.g.add(g):f.h=g}function fm(f,g){f.h&&f.h==g?f.h=null:f.g&&f.g.has(g)&&f.g.delete(g)}um.prototype.cancel=function(){if(this.i=hm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function hm(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let g=f.i;for(const y of f.g.values())g=g.concat(y.D);return g}return P(f.i)}function VS(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var g=[],y=f.length,E=0;E<y;E++)g.push(f[E]);return g}g=[],y=0;for(E in f)g[y++]=f[E];return g}function US(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var g=[];f=f.length;for(var y=0;y<f;y++)g.push(y);return g}g=[],y=0;for(const E in f)g[y++]=E;return g}}}function pm(f,g){if(f.forEach&&typeof f.forEach=="function")f.forEach(g,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,g,void 0);else for(var y=US(f),E=VS(f),U=E.length,F=0;F<U;F++)g.call(void 0,E[F],y&&y[F],f)}var mm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function FS(f,g){if(f){f=f.split("&");for(var y=0;y<f.length;y++){var E=f[y].indexOf("="),U=null;if(0<=E){var F=f[y].substring(0,E);U=f[y].substring(E+1)}else F=f[y];g(F,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Dr(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Dr){this.h=f.h,ga(this,f.j),this.o=f.o,this.g=f.g,ya(this,f.s),this.l=f.l;var g=f.i,y=new xo;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),gm(this,y),this.m=f.m}else f&&(g=String(f).match(mm))?(this.h=!1,ga(this,g[1]||"",!0),this.o=No(g[2]||""),this.g=No(g[3]||"",!0),ya(this,g[4]),this.l=No(g[5]||"",!0),gm(this,g[6]||"",!0),this.m=No(g[7]||"")):(this.h=!1,this.i=new xo(null,this.h))}Dr.prototype.toString=function(){var f=[],g=this.j;g&&f.push(ko(g,ym,!0),":");var y=this.g;return(y||g=="file")&&(f.push("//"),(g=this.o)&&f.push(ko(g,ym,!0),"@"),f.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&f.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&f.push("/"),f.push(ko(y,y.charAt(0)=="/"?BS:OS,!0))),(y=this.i.toString())&&f.push("?",y),(y=this.m)&&f.push("#",ko(y,HS)),f.join("")};function _n(f){return new Dr(f)}function ga(f,g,y){f.j=y?No(g,!0):g,f.j&&(f.j=f.j.replace(/:$/,""))}function ya(f,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);f.s=g}else f.s=null}function gm(f,g,y){g instanceof xo?(f.i=g,qS(f.i,f.h)):(y||(g=ko(g,GS)),f.i=new xo(g,f.h))}function ye(f,g,y){f.i.set(g,y)}function va(f){return ye(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function No(f,g){return f?g?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function ko(f,g,y){return typeof f=="string"?(f=encodeURI(f).replace(g,bS),y&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function bS(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var ym=/[#\/\?@]/g,OS=/[#\?:]/g,BS=/[#\?]/g,GS=/[#\?@]/g,HS=/#/g;function xo(f,g){this.h=this.g=null,this.i=f||null,this.j=!!g}function Kn(f){f.g||(f.g=new Map,f.h=0,f.i&&FS(f.i,function(g,y){f.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=xo.prototype,t.add=function(f,g){Kn(this),this.i=null,f=ui(this,f);var y=this.g.get(f);return y||this.g.set(f,y=[]),y.push(g),this.h+=1,this};function vm(f,g){Kn(f),g=ui(f,g),f.g.has(g)&&(f.i=null,f.h-=f.g.get(g).length,f.g.delete(g))}function _m(f,g){return Kn(f),g=ui(f,g),f.g.has(g)}t.forEach=function(f,g){Kn(this),this.g.forEach(function(y,E){y.forEach(function(U){f.call(g,U,E,this)},this)},this)},t.na=function(){Kn(this);const f=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let E=0;E<g.length;E++){const U=f[E];for(let F=0;F<U.length;F++)y.push(g[E])}return y},t.V=function(f){Kn(this);let g=[];if(typeof f=="string")_m(this,f)&&(g=g.concat(this.g.get(ui(this,f))));else{f=Array.from(this.g.values());for(let y=0;y<f.length;y++)g=g.concat(f[y])}return g},t.set=function(f,g){return Kn(this),this.i=null,f=ui(this,f),_m(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[g]),this.h+=1,this},t.get=function(f,g){return f?(f=this.V(f),0<f.length?String(f[0]):g):g};function Em(f,g,y){vm(f,g),0<y.length&&(f.i=null,f.g.set(ui(f,g),P(y)),f.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var E=g[y];const F=encodeURIComponent(String(E)),H=this.V(E);for(E=0;E<H.length;E++){var U=F;H[E]!==""&&(U+="="+encodeURIComponent(String(H[E]))),f.push(U)}}return this.i=f.join("&")};function ui(f,g){return g=String(g),f.j&&(g=g.toLowerCase()),g}function qS(f,g){g&&!f.j&&(Kn(f),f.i=null,f.g.forEach(function(y,E){var U=E.toLowerCase();E!=U&&(vm(this,E),Em(this,U,y))},f)),f.j=g}function $S(f,g){const y=new Ro;if(a.Image){const E=new Image;E.onload=v(Jn,y,"TestLoadImage: loaded",!0,g,E),E.onerror=v(Jn,y,"TestLoadImage: error",!1,g,E),E.onabort=v(Jn,y,"TestLoadImage: abort",!1,g,E),E.ontimeout=v(Jn,y,"TestLoadImage: timeout",!1,g,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=f}else g(!1)}function zS(f,g){const y=new Ro,E=new AbortController,U=setTimeout(()=>{E.abort(),Jn(y,"TestPingServer: timeout",!1,g)},1e4);fetch(f,{signal:E.signal}).then(F=>{clearTimeout(U),F.ok?Jn(y,"TestPingServer: ok",!0,g):Jn(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(U),Jn(y,"TestPingServer: error",!1,g)})}function Jn(f,g,y,E,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),E(y)}catch{}}function WS(){this.g=new PS}function KS(f,g,y){const E=y||"";try{pm(f,function(U,F){let H=U;c(U)&&(H=cc(U)),g.push(E+F+"="+encodeURIComponent(H))})}catch(U){throw g.push(E+"type="+encodeURIComponent("_badmap")),U}}function _a(f){this.l=f.Ub||null,this.j=f.eb||!1}I(_a,dc),_a.prototype.g=function(){return new Ea(this.l,this.j)},_a.prototype.i=function(f){return function(){return f}}({});function Ea(f,g){Ze.call(this),this.D=f,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Ea,Ze),t=Ea.prototype,t.open=function(f,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=g,this.readyState=1,Do(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(g.body=f),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mo(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Do(this)),this.g&&(this.readyState=3,Do(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tm(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tm(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var g=f.value?f.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!f.done}))&&(this.response=this.responseText+=g)}f.done?Mo(this):Do(this),this.readyState==3&&Tm(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Mo(this))},t.Qa=function(f){this.g&&(this.response=f,Mo(this))},t.ga=function(){this.g&&Mo(this)};function Mo(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Do(f)}t.setRequestHeader=function(f,g){this.u.append(f,g)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,f.push(y[0]+": "+y[1]),y=g.next();return f.join(`\r
`)};function Do(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Ea.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Im(f){let g="";return L(f,function(y,E){g+=E,g+=":",g+=y,g+=`\r
`}),g}function Tc(f,g,y){e:{for(E in y){var E=!1;break e}E=!0}E||(y=Im(y),typeof f=="string"?y!=null&&encodeURIComponent(String(y)):ye(f,g,y))}function Pe(f){Ze.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Pe,Ze);var JS=/^https?$/i,YS=["POST","PUT"];t=Pe.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,g,y,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);g=g?g.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pc.g(),this.v=this.o?Xp(this.o):Xp(pc),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(g,String(f),!0),this.B=!1}catch(F){wm(this,F);return}if(f=y||"",y=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var U in E)y.set(U,E[U]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const F of E.keys())y.set(F,E.get(F));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(y.keys()).find(F=>F.toLowerCase()=="content-type"),U=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(YS,g,void 0))||E||U||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,H]of y)this.g.setRequestHeader(F,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Am(this),this.u=!0,this.g.send(f),this.u=!1}catch(F){wm(this,F)}};function wm(f,g){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=g,f.m=5,Sm(f),Ta(f)}function Sm(f){f.A||(f.A=!0,ct(f,"complete"),ct(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,ct(this,"complete"),ct(this,"abort"),Ta(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ta(this,!0)),Pe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Cm(this):this.bb())},t.bb=function(){Cm(this)};function Cm(f){if(f.h&&typeof s<"u"&&(!f.v[1]||En(f)!=4||f.Z()!=2)){if(f.u&&En(f)==4)Kp(f.Ea,0,f);else if(ct(f,"readystatechange"),En(f)==4){f.h=!1;try{const H=f.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var E;if(E=H===0){var U=String(f.D).match(mm)[1]||null;!U&&a.self&&a.self.location&&(U=a.self.location.protocol.slice(0,-1)),E=!JS.test(U?U.toLowerCase():"")}y=E}if(y)ct(f,"complete"),ct(f,"success");else{f.m=6;try{var F=2<En(f)?f.g.statusText:""}catch{F=""}f.l=F+" ["+f.Z()+"]",Sm(f)}}finally{Ta(f)}}}}function Ta(f,g){if(f.g){Am(f);const y=f.g,E=f.v[0]?()=>{}:null;f.g=null,f.v=null,g||ct(f,"ready");try{y.onreadystatechange=E}catch{}}}function Am(f){f.I&&(a.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function En(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<En(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var g=this.g.responseText;return f&&g.indexOf(f)==0&&(g=g.substring(f.length)),RS(g)}};function Rm(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function QS(f){const g={};f=(f.g&&2<=En(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<f.length;E++){if(T(f[E]))continue;var y=M(f[E]);const U=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const F=g[U]||[];g[U]=F,F.push(y)}A(g,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Lo(f,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[f]||g}function Pm(f){this.Aa=0,this.i=[],this.j=new Ro,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Lo("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Lo("baseRetryDelayMs",5e3,f),this.cb=Lo("retryDelaySeedMs",1e4,f),this.Wa=Lo("forwardChannelMaxRetries",2,f),this.wa=Lo("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new um(f&&f.concurrentRequestLimit),this.Da=new WS,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Pm.prototype,t.la=8,t.G=1,t.connect=function(f,g,y,E){dt(0),this.W=f,this.H=g||{},y&&E!==void 0&&(this.H.OSID=y,this.H.OAID=E),this.F=this.X,this.I=Fm(this,null,this.W),wa(this)};function Ic(f){if(Nm(f),f.G==3){var g=f.U++,y=_n(f.I);if(ye(y,"SID",f.K),ye(y,"RID",g),ye(y,"TYPE","terminate"),Vo(f,y),g=new Wn(f,f.j,g),g.L=2,g.v=va(_n(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=g.v,y=!0),y||(g.g=bm(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ma(g)}Um(f)}function Ia(f){f.g&&(Sc(f),f.g.cancel(),f.g=null)}function Nm(f){Ia(f),f.u&&(a.clearTimeout(f.u),f.u=null),Sa(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function wa(f){if(!cm(f.h)&&!f.s){f.s=!0;var g=f.Ga;Dt||te(),q||(Dt(),q=!0),Y.add(g,f),f.B=0}}function XS(f,g){return dm(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=g.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Ao(m(f.Ga,f,g),Vm(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const U=new Wn(this,this.j,f);let F=this.o;if(this.S&&(F?(F=_(F),R(F,this.S)):F=this.S),this.m!==null||this.O||(U.H=F,F=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var E=this.i[y];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(g+=E,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=xm(this,U,g),y=_n(this.I),ye(y,"RID",f),ye(y,"CVER",22),this.D&&ye(y,"X-HTTP-Session-Id",this.D),Vo(this,y),F&&(this.O?g="headers="+encodeURIComponent(String(Im(F)))+"&"+g:this.m&&Tc(y,this.m,F)),Ec(this.h,U),this.Ua&&ye(y,"TYPE","init"),this.P?(ye(y,"$req",g),ye(y,"SID","null"),U.T=!0,gc(U,y,null)):gc(U,y,g),this.G=2}}else this.G==3&&(f?km(this,f):this.i.length==0||cm(this.h)||km(this))};function km(f,g){var y;g?y=g.l:y=f.U++;const E=_n(f.I);ye(E,"SID",f.K),ye(E,"RID",y),ye(E,"AID",f.T),Vo(f,E),f.m&&f.o&&Tc(E,f.m,f.o),y=new Wn(f,f.j,y,f.B+1),f.m===null&&(y.H=f.o),g&&(f.i=g.D.concat(f.i)),g=xm(f,y,1e3),y.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Ec(f.h,y),gc(y,E,g)}function Vo(f,g){f.H&&L(f.H,function(y,E){ye(g,E,y)}),f.l&&pm({},function(y,E){ye(g,E,y)})}function xm(f,g,y){y=Math.min(f.i.length,y);var E=f.l?m(f.l.Na,f.l,f):null;e:{var U=f.i;let F=-1;for(;;){const H=["count="+y];F==-1?0<y?(F=U[0].g,H.push("ofs="+F)):F=0:H.push("ofs="+F);let me=!0;for(let $e=0;$e<y;$e++){let ae=U[$e].g;const je=U[$e].map;if(ae-=F,0>ae)F=Math.max(0,U[$e].g-100),me=!1;else try{KS(je,H,"req"+ae+"_")}catch{E&&E(je)}}if(me){E=H.join("&");break e}}}return f=f.i.splice(0,y),g.D=f,E}function Mm(f){if(!f.g&&!f.u){f.Y=1;var g=f.Fa;Dt||te(),q||(Dt(),q=!0),Y.add(g,f),f.v=0}}function wc(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Ao(m(f.Fa,f),Vm(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,Dm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Ao(m(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),Ia(this),Dm(this))};function Sc(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function Dm(f){f.g=new Wn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var g=_n(f.qa);ye(g,"RID","rpc"),ye(g,"SID",f.K),ye(g,"AID",f.T),ye(g,"CI",f.F?"0":"1"),!f.F&&f.ja&&ye(g,"TO",f.ja),ye(g,"TYPE","xmlhttp"),Vo(f,g),f.m&&f.o&&Tc(g,f.m,f.o),f.L&&(f.g.I=f.L);var y=f.g;f=f.ia,y.L=1,y.v=va(_n(g)),y.m=null,y.P=!0,sm(y,f)}t.Za=function(){this.C!=null&&(this.C=null,Ia(this),wc(this),dt(19))};function Sa(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function Lm(f,g){var y=null;if(f.g==g){Sa(f),Sc(f),f.g=null;var E=2}else if(_c(f.h,g))y=g.D,fm(f.h,g),E=1;else return;if(f.G!=0){if(g.o)if(E==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var U=f.B;E=fa(),ct(E,new nm(E,y)),wa(f)}else Mm(f);else if(U=g.s,U==3||U==0&&0<g.X||!(E==1&&XS(f,g)||E==2&&wc(f)))switch(y&&0<y.length&&(g=f.h,g.i=g.i.concat(y)),U){case 1:Lr(f,5);break;case 4:Lr(f,10);break;case 3:Lr(f,6);break;default:Lr(f,2)}}}function Vm(f,g){let y=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(y*=2),y*g}function Lr(f,g){if(f.j.info("Error code "+g),g==2){var y=m(f.fb,f),E=f.Xa;const U=!E;E=new Dr(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ga(E,"https"),va(E),U?$S(E.toString(),y):zS(E.toString(),y)}else dt(2);f.G=0,f.l&&f.l.sa(g),Um(f),Nm(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function Um(f){if(f.G=0,f.ka=[],f.l){const g=hm(f.h);(g.length!=0||f.i.length!=0)&&(N(f.ka,g),N(f.ka,f.i),f.h.i.length=0,P(f.i),f.i.length=0),f.l.ra()}}function Fm(f,g,y){var E=y instanceof Dr?_n(y):new Dr(y);if(E.g!="")g&&(E.g=g+"."+E.g),ya(E,E.s);else{var U=a.location;E=U.protocol,g=g?g+"."+U.hostname:U.hostname,U=+U.port;var F=new Dr(null);E&&ga(F,E),g&&(F.g=g),U&&ya(F,U),y&&(F.l=y),E=F}return y=f.D,g=f.ya,y&&g&&ye(E,y,g),ye(E,"VER",f.la),Vo(f,E),E}function bm(f,g,y){if(g&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=f.Ca&&!f.pa?new Pe(new _a({eb:y})):new Pe(f.pa),g.Ha(f.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Om(){}t=Om.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ca(){}Ca.prototype.g=function(f,g){return new At(f,g)};function At(f,g){Ze.call(this),this.g=new Pm(g),this.l=f,this.h=g&&g.messageUrlParams||null,f=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(f?f["X-WebChannel-Content-Type"]=g.messageContentType:f={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(f?f["X-WebChannel-Client-Profile"]=g.va:f={"X-WebChannel-Client-Profile":g.va}),this.g.S=f,(f=g&&g.Sb)&&!T(f)&&(this.g.m=f),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!T(g)&&(this.g.D=g,f=this.h,f!==null&&g in f&&(f=this.h,g in f&&delete f[g])),this.j=new ci(this)}I(At,Ze),At.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},At.prototype.close=function(){Ic(this.g)},At.prototype.o=function(f){var g=this.g;if(typeof f=="string"){var y={};y.__data__=f,f=y}else this.u&&(y={},y.__data__=cc(f),f=y);g.i.push(new LS(g.Ya++,f)),g.G==3&&wa(g)},At.prototype.N=function(){this.g.l=null,delete this.j,Ic(this.g),delete this.g,At.aa.N.call(this)};function Bm(f){fc.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var g=f.__sm__;if(g){e:{for(const y in g){f=y;break e}f=void 0}(this.i=f)&&(f=this.i,g=g!==null&&f in g?g[f]:void 0),this.data=g}else this.data=f}I(Bm,fc);function Gm(){hc.call(this),this.status=1}I(Gm,hc);function ci(f){this.g=f}I(ci,Om),ci.prototype.ua=function(){ct(this.g,"a")},ci.prototype.ta=function(f){ct(this.g,new Bm(f))},ci.prototype.sa=function(f){ct(this.g,new Gm)},ci.prototype.ra=function(){ct(this.g,"b")},Ca.prototype.createWebChannel=Ca.prototype.g,At.prototype.send=At.prototype.o,At.prototype.open=At.prototype.m,At.prototype.close=At.prototype.close,eI=function(){return new Ca},jT=function(){return fa()},ZT=xr,pf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ha.NO_ERROR=0,ha.TIMEOUT=8,ha.HTTP_ERROR=6,yl=ha,rm.COMPLETE="complete",XT=rm,Zp.EventType=So,So.OPEN="a",So.CLOSE="b",So.ERROR="c",So.MESSAGE="d",Ze.prototype.listen=Ze.prototype.K,jo=Zp,Pe.prototype.listenOnce=Pe.prototype.L,Pe.prototype.getLastError=Pe.prototype.Ka,Pe.prototype.getLastErrorCode=Pe.prototype.Ba,Pe.prototype.getStatus=Pe.prototype.Z,Pe.prototype.getResponseJson=Pe.prototype.Oa,Pe.prototype.getResponseText=Pe.prototype.oa,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Ha,QT=Pe}).apply(typeof za<"u"?za:typeof self<"u"?self:typeof window<"u"?window:{});const Py="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}it.UNAUTHENTICATED=new it(null),it.GOOGLE_CREDENTIALS=new it("google-credentials-uid"),it.FIRST_PARTY=new it("first-party-uid"),it.MOCK_USER=new it("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let po="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=new bh("@firebase/firestore");function $o(){return jr.logLevel}function K(t,...e){if(jr.logLevel<=ie.DEBUG){const n=e.map(Qh);jr.debug(`Firestore (${po}): ${t}`,...n)}}function Fn(t,...e){if(jr.logLevel<=ie.ERROR){const n=e.map(Qh);jr.error(`Firestore (${po}): ${t}`,...n)}}function eo(t,...e){if(jr.logLevel<=ie.WARN){const n=e.map(Qh);jr.warn(`Firestore (${po}): ${t}`,...n)}}function Qh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t="Unexpected state"){const e=`FIRESTORE (${po}) INTERNAL ASSERTION FAILED: `+t;throw Fn(e),new Error(e)}function he(t,e){t||X()}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends Hn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(it.UNAUTHENTICATED))}shutdown(){}}class _x{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Ex{constructor(e){this.t=e,this.currentUser=it.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){he(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let o=new kn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new kn,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new kn)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(he(typeof r.accessToken=="string"),new tI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return he(e===null||typeof e=="string"),new it(e)}}class Tx{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=it.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ix{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Tx(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(it.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Sx{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){he(this.o===void 0);const r=o=>{o.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,K("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(he(typeof n.token=="string"),this.R=n.token,new wx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Cx(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function ue(t,e){return t<e?-1:t>e?1:0}function to(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Oe.fromMillis(Date.now())}static fromDate(e){return Oe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Oe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.timestamp=e}static fromTimestamp(e){return new j(e)}static min(){return new j(new Oe(0,0))}static max(){return new j(new Oe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(),r===void 0?r=e.length-n:r>e.length-n&&X(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return bs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof bs?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class _e extends bs{construct(e,n,r){return new _e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new _e(n)}static emptyPath(){return new _e([])}}const Ax=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ke extends bs{construct(e,n,r){return new Ke(e,n,r)}static isValidIdentifier(e){return Ax.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ke.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ke(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new W(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new W(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new W(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new W(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ke(n)}static emptyPath(){return new Ke([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(_e.fromString(e))}static fromName(e){return new J(_e.fromString(e).popFirst(5))}static empty(){return new J(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new _e(e.slice()))}}function Rx(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=j.fromTimestamp(r===1e9?new Oe(n+1,0):new Oe(n,r));return new wr(i,J.empty(),e)}function Px(t){return new wr(t.readTime,t.key,-1)}class wr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new wr(j.min(),J.empty(),-1)}static max(){return new wr(j.max(),J.empty(),-1)}}function Nx(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ta(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==kx)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},l=>r(l))}),s=!0,o===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const c=l;n(e[c]).next(h=>{s[c]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new B((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function Mx(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function na(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Xh.oe=-1;function bu(t){return t==null}function nu(t){return t===0&&1/t==-1/0}function Dx(t){return typeof t=="number"&&Number.isInteger(t)&&!nu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function mo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,n){this.comparator=e,this.root=n||We.EMPTY}insert(e,n){return new Re(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,We.BLACK,null,null))}remove(e){return new Re(this.comparator,this.root.remove(e,this.comparator).copy(null,null,We.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wa(this.root,e,this.comparator,!0)}}class Wa{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class We{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??We.RED,this.left=i??We.EMPTY,this.right=o??We.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new We(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return We.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return We.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,We.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,We.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}We.EMPTY=null,We.RED=!0,We.BLACK=!1;We.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,r,i,o){return this}insert(e,n,r){return new We(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ky(this.data.getIterator())}getIteratorFrom(e){return new ky(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ye(this.comparator);return n.data=e,n}}class ky{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.fields=e,e.sort(Ke.comparator)}static empty(){return new Jt([])}unionWith(e){let n=new Ye(Ke.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return to(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new iI("Invalid base64 string: "+o):o}}(e);return new Xe(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Xe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xe.EMPTY_BYTE_STRING=new Xe("");const Lx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sr(t){if(he(!!t),typeof t=="string"){let e=0;const n=Lx.exec(t);if(he(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ei(t){return typeof t=="string"?Xe.fromBase64String(t):Xe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function jh(t){const e=t.mapValue.fields.__previous_value__;return Zh(e)?jh(e):e}function Os(t){const e=Sr(t.mapValue.fields.__local_write_time__.timestampValue);return new Oe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,n,r,i,o,s,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Bs{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Bs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Bs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka={mapValue:{}};function ti(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zh(t)?4:Fx(t)?9007199254740991:Ux(t)?10:11:X()}function pn(t,e){if(t===e)return!0;const n=ti(t);if(n!==ti(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Os(t).isEqual(Os(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Sr(i.timestampValue),a=Sr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return ei(i.bytesValue).isEqual(ei(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Me(i.geoPointValue.latitude)===Me(o.geoPointValue.latitude)&&Me(i.geoPointValue.longitude)===Me(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Me(i.integerValue)===Me(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Me(i.doubleValue),a=Me(o.doubleValue);return s===a?nu(s)===nu(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return to(t.arrayValue.values||[],e.arrayValue.values||[],pn);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Ny(s)!==Ny(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!pn(s[l],a[l])))return!1;return!0}(t,e);default:return X()}}function Gs(t,e){return(t.values||[]).find(n=>pn(n,e))!==void 0}function no(t,e){if(t===e)return 0;const n=ti(t),r=ti(e);if(n!==r)return ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=Me(o.integerValue||o.doubleValue),l=Me(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return xy(t.timestampValue,e.timestampValue);case 4:return xy(Os(t),Os(e));case 5:return ue(t.stringValue,e.stringValue);case 6:return function(o,s){const a=ei(o),l=ei(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=ue(a[c],l[c]);if(h!==0)return h}return ue(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=ue(Me(o.latitude),Me(s.latitude));return a!==0?a:ue(Me(o.longitude),Me(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return My(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,l,c,h;const p=o.fields||{},m=s.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,I=(l=m.value)===null||l===void 0?void 0:l.arrayValue,P=ue(((c=v==null?void 0:v.values)===null||c===void 0?void 0:c.length)||0,((h=I==null?void 0:I.values)===null||h===void 0?void 0:h.length)||0);return P!==0?P:My(v,I)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Ka.mapValue&&s===Ka.mapValue)return 0;if(o===Ka.mapValue)return 1;if(s===Ka.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),c=s.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){const m=ue(l[p],h[p]);if(m!==0)return m;const v=no(a[l[p]],c[h[p]]);if(v!==0)return v}return ue(l.length,h.length)}(t.mapValue,e.mapValue);default:throw X()}}function xy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);const n=Sr(t),r=Sr(e),i=ue(n.seconds,r.seconds);return i!==0?i:ue(n.nanos,r.nanos)}function My(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=no(n[i],r[i]);if(o)return o}return ue(n.length,r.length)}function ro(t){return mf(t)}function mf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Sr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ei(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=mf(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${mf(n.fields[s])}`;return i+"}"}(t.mapValue):X()}function Dy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function gf(t){return!!t&&"integerValue"in t}function ep(t){return!!t&&"arrayValue"in t}function Ly(t){return!!t&&"nullValue"in t}function Vy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vl(t){return!!t&&"mapValue"in t}function Ux(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ps(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return mo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ps(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ps(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Fx(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.value=e}static empty(){return new Ut({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!vl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ps(n)}setAll(e){let n=Ke.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=ps(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());vl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];vl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){mo(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Ut(ps(this.value))}}function oI(t){const e=[];return mo(t.fields,(n,r)=>{const i=new Ke([n]);if(vl(r)){const o=oI(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new st(e,0,j.min(),j.min(),j.min(),Ut.empty(),0)}static newFoundDocument(e,n,r,i){return new st(e,1,n,j.min(),r,i,0)}static newNoDocument(e,n){return new st(e,2,n,j.min(),j.min(),Ut.empty(),0)}static newUnknownDocument(e,n){return new st(e,3,n,j.min(),j.min(),Ut.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(j.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ut.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ut.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=j.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof st&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new st(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n){this.position=e,this.inclusive=n}}function Uy(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=J.comparator(J.fromName(s.referenceValue),n.key):r=no(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Fy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n="asc"){this.field=e,this.dir=n}}function bx(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{}class Ue extends sI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Bx(e,n,r):n==="array-contains"?new qx(e,r):n==="in"?new $x(e,r):n==="not-in"?new zx(e,r):n==="array-contains-any"?new Wx(e,r):new Ue(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Gx(e,r):new Hx(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(no(n,this.value)):n!==null&&ti(this.value)===ti(n)&&this.matchesComparison(no(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nn extends sI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new nn(e,n)}matches(e){return aI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function aI(t){return t.op==="and"}function lI(t){return Ox(t)&&aI(t)}function Ox(t){for(const e of t.filters)if(e instanceof nn)return!1;return!0}function yf(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+ro(t.value);if(lI(t))return t.filters.map(e=>yf(e)).join(",");{const e=t.filters.map(n=>yf(n)).join(",");return`${t.op}(${e})`}}function uI(t,e){return t instanceof Ue?function(r,i){return i instanceof Ue&&r.op===i.op&&r.field.isEqual(i.field)&&pn(r.value,i.value)}(t,e):t instanceof nn?function(r,i){return i instanceof nn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&uI(s,i.filters[a]),!0):!1}(t,e):void X()}function cI(t){return t instanceof Ue?function(n){return`${n.field.canonicalString()} ${n.op} ${ro(n.value)}`}(t):t instanceof nn?function(n){return n.op.toString()+" {"+n.getFilters().map(cI).join(" ,")+"}"}(t):"Filter"}class Bx extends Ue{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class Gx extends Ue{constructor(e,n){super(e,"in",n),this.keys=dI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Hx extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=dI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function dI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class qx extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ep(n)&&Gs(n.arrayValue,this.value)}}class $x extends Ue{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Gs(this.value.arrayValue,n)}}class zx extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Gs(this.value.arrayValue,n)}}class Wx extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ep(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Gs(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function by(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Kx(t,e,n,r,i,o,s)}function tp(t){const e=ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>yf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),bu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ro(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ro(r)).join(",")),e.ue=n}return e.ue}function np(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!bx(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Fy(t.startAt,e.startAt)&&Fy(t.endAt,e.endAt)}function vf(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Jx(t,e,n,r,i,o,s,a){return new ra(t,e,n,r,i,o,s,a)}function rp(t){return new ra(t)}function Oy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function fI(t){return t.collectionGroup!==null}function ms(t){const e=ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ye(Ke.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new iu(o,r))}),n.has(Ke.keyField().canonicalString())||e.ce.push(new iu(Ke.keyField(),r))}return e.ce}function fn(t){const e=ee(t);return e.le||(e.le=Yx(e,ms(t))),e.le}function Yx(t,e){if(t.limitType==="F")return by(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new iu(i.field,o)});const n=t.endAt?new ru(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ru(t.startAt.position,t.startAt.inclusive):null;return by(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function _f(t,e){const n=t.filters.concat([e]);return new ra(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ef(t,e,n){return new ra(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ou(t,e){return np(fn(t),fn(e))&&t.limitType===e.limitType}function hI(t){return`${tp(fn(t))}|lt:${t.limitType}`}function pi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>cI(i)).join(", ")}]`),bu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ro(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ro(i)).join(",")),`Target(${r})`}(fn(t))}; limitType=${t.limitType})`}function Bu(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):J.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of ms(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,l){const c=Uy(s,a,l);return s.inclusive?c<=0:c<0}(r.startAt,ms(r),i)||r.endAt&&!function(s,a,l){const c=Uy(s,a,l);return s.inclusive?c>=0:c>0}(r.endAt,ms(r),i))}(t,e)}function Qx(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pI(t){return(e,n)=>{let r=!1;for(const i of ms(t)){const o=Xx(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Xx(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(o,s,a){const l=s.data.field(o),c=a.data.field(o);return l!==null&&c!==null?no(l,c):X()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){mo(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return rI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=new Re(J.comparator);function bn(){return Zx}const mI=new Re(J.comparator);function es(...t){let e=mI;for(const n of t)e=e.insert(n.key,n);return e}function gI(t){let e=mI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hr(){return gs()}function yI(){return gs()}function gs(){return new go(t=>t.toString(),(t,e)=>t.isEqual(e))}const jx=new Re(J.comparator),eM=new Ye(J.comparator);function re(...t){let e=eM;for(const n of t)e=e.add(n);return e}const tM=new Ye(ue);function nM(){return tM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nu(e)?"-0":e}}function vI(t){return{integerValue:""+t}}function rM(t,e){return Dx(e)?vI(e):ip(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(){this._=void 0}}function iM(t,e,n){return t instanceof ou?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Zh(o)&&(o=jh(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Hs?EI(t,e):t instanceof qs?TI(t,e):function(i,o){const s=_I(i,o),a=By(s)+By(i.Pe);return gf(s)&&gf(i.Pe)?vI(a):ip(i.serializer,a)}(t,e)}function oM(t,e,n){return t instanceof Hs?EI(t,e):t instanceof qs?TI(t,e):n}function _I(t,e){return t instanceof su?function(r){return gf(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class ou extends Gu{}class Hs extends Gu{constructor(e){super(),this.elements=e}}function EI(t,e){const n=II(e);for(const r of t.elements)n.some(i=>pn(i,r))||n.push(r);return{arrayValue:{values:n}}}class qs extends Gu{constructor(e){super(),this.elements=e}}function TI(t,e){let n=II(e);for(const r of t.elements)n=n.filter(i=>!pn(i,r));return{arrayValue:{values:n}}}class su extends Gu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function By(t){return Me(t.integerValue||t.doubleValue)}function II(t){return ep(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function sM(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Hs&&i instanceof Hs||r instanceof qs&&i instanceof qs?to(r.elements,i.elements,pn):r instanceof su&&i instanceof su?pn(r.Pe,i.Pe):r instanceof ou&&i instanceof ou}(t.transform,e.transform)}class aM{constructor(e,n){this.version=e,this.transformResults=n}}class Xt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xt}static exists(e){return new Xt(void 0,e)}static updateTime(e){return new Xt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _l(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hu{}function wI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new op(t.key,Xt.none()):new ia(t.key,t.data,Xt.none());{const n=t.data,r=Ut.empty();let i=new Ye(Ke.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new oi(t.key,r,new Jt(i.toArray()),Xt.none())}}function lM(t,e,n){t instanceof ia?function(i,o,s){const a=i.value.clone(),l=Hy(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof oi?function(i,o,s){if(!_l(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=Hy(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(SI(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function ys(t,e,n,r){return t instanceof ia?function(o,s,a,l){if(!_l(o.precondition,s))return a;const c=o.value.clone(),h=qy(o.fieldTransforms,l,s);return c.setAll(h),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof oi?function(o,s,a,l){if(!_l(o.precondition,s))return a;const c=qy(o.fieldTransforms,l,s),h=s.data;return h.setAll(SI(o)),h.setAll(c),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,a){return _l(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function uM(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=_I(r.transform,i||null);o!=null&&(n===null&&(n=Ut.empty()),n.set(r.field,o))}return n||null}function Gy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&to(r,i,(o,s)=>sM(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ia extends Hu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class oi extends Hu{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function SI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Hy(t,e,n){const r=new Map;he(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,oM(s,a,n[i]))}return r}function qy(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,iM(o,s,e))}return r}class op extends Hu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cM extends Hu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&lM(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ys(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ys(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=yI();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const l=wI(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(j.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),re())}isEqual(e){return this.batchId===e.batchId&&to(this.mutations,e.mutations,(n,r)=>Gy(n,r))&&to(this.baseMutations,e.baseMutations,(n,r)=>Gy(n,r))}}class sp{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){he(e.mutations.length===r.length);let i=function(){return jx}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new sp(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le,oe;function pM(t){switch(t){default:return X();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function CI(t){if(t===void 0)return Fn("GRPC error has no .code"),O.UNKNOWN;switch(t){case Le.OK:return O.OK;case Le.CANCELLED:return O.CANCELLED;case Le.UNKNOWN:return O.UNKNOWN;case Le.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Le.INTERNAL:return O.INTERNAL;case Le.UNAVAILABLE:return O.UNAVAILABLE;case Le.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Le.NOT_FOUND:return O.NOT_FOUND;case Le.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Le.ABORTED:return O.ABORTED;case Le.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Le.DATA_LOSS:return O.DATA_LOSS;default:return X()}}(oe=Le||(Le={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=new zr([4294967295,4294967295],0);function $y(t){const e=mM().encode(t),n=new YT;return n.update(e),new Uint8Array(n.digest())}function zy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new zr([n,r],0),new zr([i,o],0)]}class ap{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ts(`Invalid padding: ${n}`);if(r<0)throw new ts(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ts(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ts(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=zr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(zr.fromNumber(r)));return i.compare(gM)===1&&(i=new zr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=$y(e),[r,i]=zy(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new ap(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;const n=$y(e),[r,i]=zy(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ts extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,oa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new qu(j.min(),i,new Re(ue),bn(),re())}}class oa{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new oa(r,n,re(),re(),re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class AI{constructor(e,n){this.targetId=e,this.me=n}}class RI{constructor(e,n,r=Xe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Wy{constructor(){this.fe=0,this.ge=Jy(),this.pe=Xe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=re(),n=re(),r=re();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:X()}}),new oa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Jy()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,he(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class yM{constructor(e){this.Le=e,this.Be=new Map,this.ke=bn(),this.qe=Ky(),this.Qe=new Re(ue)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const o=i.target;if(vf(o))if(r===0){const s=new J(o.path);this.Ue(n,s,st.newNoDocument(s,j.min()))}else he(r===1);else{const s=this.Ye(n);if(s!==r){const a=this.Ze(e),l=a?this.Xe(a,e,s):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=ei(r).toUint8Array()}catch(l){if(l instanceof iI)return eo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new ap(s,i,o)}catch(l){return eo(l instanceof ts?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((o,s)=>{const a=this.Je(s);if(a){if(o.current&&vf(a.target)){const l=new J(a.target.path);this.ke.get(l)!==null||this.it(s,l)||this.Ue(s,l,st.newNoDocument(l,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=re();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new qu(e,n,this.Qe,this.ke,r);return this.ke=bn(),this.qe=Ky(),this.Qe=new Re(ue),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Wy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ye(ue),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Wy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Ky(){return new Re(J.comparator)}function Jy(){return new Re(J.comparator)}const vM={asc:"ASCENDING",desc:"DESCENDING"},_M={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EM={and:"AND",or:"OR"};class TM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Tf(t,e){return t.useProto3Json||bu(e)?e:{value:e}}function au(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function IM(t,e){return au(t,e.toTimestamp())}function hn(t){return he(!!t),j.fromTimestamp(function(n){const r=Sr(n);return new Oe(r.seconds,r.nanos)}(t))}function lp(t,e){return If(t,e).canonicalString()}function If(t,e){const n=function(i){return new _e(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function NI(t){const e=_e.fromString(t);return he(LI(e)),e}function wf(t,e){return lp(t.databaseId,e.path)}function od(t,e){const n=NI(e);if(n.get(1)!==t.databaseId.projectId)throw new W(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(xI(n))}function kI(t,e){return lp(t.databaseId,e)}function wM(t){const e=NI(t);return e.length===4?_e.emptyPath():xI(e)}function Sf(t){return new _e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xI(t){return he(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Yy(t,e,n){return{name:wf(t,e),fields:n.value.mapValue.fields}}function SM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,h){return c.useProto3Json?(he(h===void 0||typeof h=="string"),Xe.fromBase64String(h||"")):(he(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Xe.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const h=c.code===void 0?O.UNKNOWN:CI(c.code);return new W(h,c.message||"")}(s);n=new RI(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=od(t,r.document.name),o=hn(r.document.updateTime),s=r.document.createTime?hn(r.document.createTime):j.min(),a=new Ut({mapValue:{fields:r.document.fields}}),l=st.newFoundDocument(i,o,s,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new El(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=od(t,r.document),o=r.readTime?hn(r.readTime):j.min(),s=st.newNoDocument(i,o),a=r.removedTargetIds||[];n=new El([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=od(t,r.document),o=r.removedTargetIds||[];n=new El([],o,i,null)}else{if(!("filter"in e))return X();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new hM(i,o),a=r.targetId;n=new AI(a,s)}}return n}function CM(t,e){let n;if(e instanceof ia)n={update:Yy(t,e.key,e.value)};else if(e instanceof op)n={delete:wf(t,e.key)};else if(e instanceof oi)n={update:Yy(t,e.key,e.data),updateMask:LM(e.fieldMask)};else{if(!(e instanceof cM))return X();n={verify:wf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof ou)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Hs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qs)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof su)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw X()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:IM(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:X()}(t,e.precondition)),n}function AM(t,e){return t&&t.length>0?(he(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?hn(i.updateTime):hn(o);return s.isEqual(j.min())&&(s=hn(o)),new aM(s,i.transformResults||[])}(n,e))):[]}function RM(t,e){return{documents:[kI(t,e.path)]}}function PM(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=kI(t,i);const o=function(c){if(c.length!==0)return DI(nn.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:mi(m.field),direction:xM(m.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=Tf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function NM(t){let e=wM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){he(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){const m=MI(p);return m instanceof nn&&lI(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(m=>function(I){return new iu(gi(I.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,bu(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(p){const m=!!p.before,v=p.values||[];return new ru(v,m)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const m=!p.before,v=p.values||[];return new ru(v,m)}(n.endAt)),Jx(e,i,s,o,a,"F",l,c)}function kM(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function MI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=gi(n.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=gi(n.unaryFilter.field);return Ue.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=gi(n.unaryFilter.field);return Ue.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=gi(n.unaryFilter.field);return Ue.create(s,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return Ue.create(gi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return nn.create(n.compositeFilter.filters.map(r=>MI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function xM(t){return vM[t]}function MM(t){return _M[t]}function DM(t){return EM[t]}function mi(t){return{fieldPath:t.canonicalString()}}function gi(t){return Ke.fromServerFormat(t.fieldPath)}function DI(t){return t instanceof Ue?function(n){if(n.op==="=="){if(Vy(n.value))return{unaryFilter:{field:mi(n.field),op:"IS_NAN"}};if(Ly(n.value))return{unaryFilter:{field:mi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Vy(n.value))return{unaryFilter:{field:mi(n.field),op:"IS_NOT_NAN"}};if(Ly(n.value))return{unaryFilter:{field:mi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mi(n.field),op:MM(n.op),value:n.value}}}(t):t instanceof nn?function(n){const r=n.getFilters().map(i=>DI(i));return r.length===1?r[0]:{compositeFilter:{op:DM(n.op),filters:r}}}(t):X()}function LM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function LI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n,r,i,o=j.min(),s=j.min(),a=Xe.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ar(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e){this.ct=e}}function UM(t){const e=NM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ef(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(){this.un=new bM}addToCollectionParentIndex(e,n){return this.un.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(wr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(wr.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class bM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ye(_e.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ye(_e.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new io(0)}static kn(){return new io(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(){this.changes=new go(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,st.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ys(r.mutation,i,Jt.empty(),Oe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=re()){const i=Hr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=es();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Hr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,re()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=bn();const s=gs(),a=function(){return gs()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof oi)?o=o.insert(c.key,c):h!==void 0?(s.set(c.key,h.mutation.getFieldMask()),ys(h.mutation,c,h.mutation.getFieldMask(),Oe.now())):s.set(c.key,Jt.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,h)=>s.set(c,h)),n.forEach((c,h)=>{var p;return a.set(c,new BM(h,(p=s.get(c))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=gs();let i=new Re((s,a)=>s-a),o=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Jt.empty();h=a.applyToLocalView(c,h),r.set(l,h);const p=(i.get(a.batchId)||re()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,p=yI();h.forEach(m=>{if(!o.has(m)){const v=wI(n.get(m),r.get(m));v!==null&&p.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,p))}return B.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return J.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):fI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):B.resolve(Hr());let a=-1,l=o;return s.next(c=>B.forEach(c,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,re())).next(h=>({batchId:a,changes:gI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let i=es();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=es();return this.indexManager.getCollectionParents(e,o).next(a=>B.forEach(a,l=>{const c=function(p,m){return new ra(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((l,c)=>{const h=c.getKey();s.get(h)===null&&(s=s.insert(h,st.newInvalidDocument(h)))});let a=es();return s.forEach((l,c)=>{const h=o.get(l);h!==void 0&&ys(h.mutation,c,Jt.empty(),Oe.now()),Bu(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return B.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:hn(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:UM(i.bundledQuery),readTime:hn(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(){this.overlays=new Re(J.comparator),this.Ir=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hr();return B.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=Hr(),o=n.length+1,s=new J(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Re((c,h)=>c-h);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=o.get(c.largestBatchId);h===null&&(h=Hr(),o=o.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Hr(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return B.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new fM(n,r));let o=this.Ir.get(n);o===void 0&&(o=re(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(){this.sessionToken=Xe.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(){this.Tr=new Ye(Be.Er),this.dr=new Ye(Be.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Be(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Be(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new J(new _e([])),r=new Be(n,e),i=new Be(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new J(new _e([])),r=new Be(n,e),i=new Be(n,e+1);let o=re();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Be(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Be{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return J.comparator(e.key,n.key)||ue(e.wr,n.wr)}static Ar(e,n){return ue(e.wr,n.wr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ye(Be.Er)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new dM(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.br=this.br.add(new Be(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(s)}lookupMutationBatch(e,n){return B.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),o=i<0?0:i;return B.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Be(n,0),i=new Be(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{const a=this.Dr(s.wr);o.push(a)}),B.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(ue);return n.forEach(i=>{const o=new Be(i,0),s=new Be(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),B.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;J.isDocumentKey(o)||(o=o.child(""));const s=new Be(new J(o),0);let a=new Ye(ue);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},s),B.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){he(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return B.forEach(n.mutations,i=>{const o=new Be(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Be(n,0),i=this.br.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e){this.Mr=e,this.docs=function(){return new Re(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():st.newInvalidDocument(n))}getEntries(e,n){let r=bn();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():st.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=bn();const s=n.path,a=new J(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||Nx(Px(h),r)<=0||(i.has(h.key)||Bu(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return B.resolve(o)}getAllFromCollectionGroup(e,n,r,i){X()}Or(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new KM(this)}getSize(e){return B.resolve(this.size)}}class KM extends OM{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e){this.persistence=e,this.Nr=new go(n=>tp(n),np),this.lastRemoteSnapshotVersion=j.min(),this.highestTargetId=0,this.Lr=0,this.Br=new up,this.targetCount=0,this.kr=io.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),B.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new io(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Kn(n),B.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),B.waitFor(o).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),B.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Xh(0),this.Kr=!1,this.Kr=!0,this.$r=new $M,this.referenceDelegate=e(this),this.Ur=new JM(this),this.indexManager=new FM,this.remoteDocumentCache=function(i){return new WM(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new VM(n),this.Gr=new HM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new qM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new zM(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const i=new QM(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return B.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class QM extends xx{constructor(e){super(),this.currentSequenceNumber=e}}class cp{constructor(e){this.persistence=e,this.Jr=new up,this.Yr=null}static Zr(e){return new cp(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),B.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Xr,r=>{const i=J.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,j.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return B.or([()=>B.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=re(),i=re();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new dp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return HR()?8:Mx(ut())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new XM;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?($o()<=ie.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",pi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),B.resolve()):($o()<=ie.DEBUG&&K("QueryEngine","Query:",pi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?($o()<=ie.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",pi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fn(n))):B.resolve())}Yi(e,n){if(Oy(n))return B.resolve(null);let r=fn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Ef(n,null,"F"),r=fn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=re(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,s,l.readTime)?this.Yi(e,Ef(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return Oy(n)||i.isEqual(j.min())?B.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const s=this.ts(n,o);return this.ns(n,s,r,i)?B.resolve(null):($o()<=ie.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),pi(n)),this.rs(e,s,n,Rx(i,-1)).next(a=>a))})}ts(e,n){let r=new Ye(pI(e));return n.forEach((i,o)=>{Bu(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return $o()<=ie.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",pi(n)),this.Ji.getDocumentsMatchingQuery(e,n,wr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Re(ue),this._s=new go(o=>tp(o),np),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GM(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function eD(t,e,n,r){return new jM(t,e,n,r)}async function VI(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let l=re();for(const c of i){s.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of o){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:s,addedBatchIds:a}))})})}function tD(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const p=c.batch,m=p.keys();let v=B.resolve();return m.forEach(I=>{v=v.next(()=>h.getEntry(l,I)).next(P=>{const N=c.docVersions.get(I);he(N!==null),P.version.compareTo(N)<0&&(p.applyToRemoteDocument(P,c),P.isValidDocument()&&(P.setReadTime(c.commitVersion),h.addEntry(P)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=re();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function UI(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function nD(t,e){const n=ee(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,p)=>{const m=i.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(o,h.addedDocuments,p)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Xe.EMPTY_BYTE_STRING,j.min()).withLastLimboFreeSnapshotVersion(j.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(P,N,w){return P.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,v,h)&&a.push(n.Ur.updateTargetData(o,v))});let l=bn(),c=re();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(rD(o,s,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(j.min())){const h=n.Ur.getLastRemoteSnapshotVersion(o).next(p=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return B.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(n.os=i,o))}function rD(t,e,n){let r=re(),i=re();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=bn();return n.forEach((a,l)=>{const c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(j.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):K("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:s,Is:i}})}function iD(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oD(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,B.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new ar(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Cf(t,e,n){const r=ee(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!na(s))throw s;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Qy(t,e,n){const r=ee(t);let i=j.min(),o=re();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,c,h){const p=ee(l),m=p._s.get(h);return m!==void 0?B.resolve(p.os.get(m)):p.Ur.getTargetData(c,h)}(r,s,fn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:j.min(),n?o:re())).next(a=>(sD(r,Qx(e),a),{documents:a,Ts:o})))}function sD(t,e,n){let r=t.us.get(e)||j.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}class Xy{constructor(){this.activeTargetIds=nM()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aD{constructor(){this.so=new Xy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Xy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ja=null;function sd(){return Ja===null?Ja=function(){return 268435456+Math.round(2147483648*Math.random())}():Ja++,"0x"+Ja.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rt="WebChannelConnection";class dD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){const a=sd(),l=this.xo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,o,s),this.No(n,l,c,i).then(h=>(K("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw eo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,o,s,a){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+po}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){const i=uD[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const o=sd();return new Promise((s,a)=>{const l=new QT;l.setWithCredentials(!0),l.listenOnce(XT.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case yl.NO_ERROR:const h=l.getResponseJson();K(rt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case yl.TIMEOUT:K(rt,`RPC '${e}' ${o} timed out`),a(new W(O.DEADLINE_EXCEEDED,"Request time out"));break;case yl.HTTP_ERROR:const p=l.getStatus();if(K(rt,`RPC '${e}' ${o} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const I=function(N){const w=N.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(w)>=0?w:O.UNKNOWN}(v.status);a(new W(I,v.message))}else a(new W(O.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new W(O.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{K(rt,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);K(rt,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=sd(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=eI(),a=jT(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=o.join("");K(rt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const p=s.createWebChannel(h,l);let m=!1,v=!1;const I=new cD({Io:N=>{v?K(rt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(K(rt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),K(rt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),P=(N,w,T)=>{N.listen(w,C=>{try{T(C)}catch(D){setTimeout(()=>{throw D},0)}})};return P(p,jo.EventType.OPEN,()=>{v||(K(rt,`RPC '${e}' stream ${i} transport opened.`),I.yo())}),P(p,jo.EventType.CLOSE,()=>{v||(v=!0,K(rt,`RPC '${e}' stream ${i} transport closed`),I.So())}),P(p,jo.EventType.ERROR,N=>{v||(v=!0,eo(rt,`RPC '${e}' stream ${i} transport errored:`,N),I.So(new W(O.UNAVAILABLE,"The operation could not be completed")))}),P(p,jo.EventType.MESSAGE,N=>{var w;if(!v){const T=N.data[0];he(!!T);const C=T,D=C.error||((w=C[0])===null||w===void 0?void 0:w.error);if(D){K(rt,`RPC '${e}' stream ${i} received error:`,D);const b=D.status;let L=function(S){const R=Le[S];if(R!==void 0)return CI(R)}(b),A=D.message;L===void 0&&(L=O.INTERNAL,A="Unknown error status: "+b+" with message "+D.message),v=!0,I.So(new W(L,A)),p.close()}else K(rt,`RPC '${e}' stream ${i} received:`,T),I.bo(T)}}),P(a,ZT.STAT_EVENT,N=>{N.stat===pf.PROXY?K(rt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===pf.NOPROXY&&K(rt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.wo()},0),I}}function ad(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(t){return new TM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,n,r,i,o,s,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new FI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(Fn(n.toString()),Fn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new W(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fD extends bI{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=SM(this.serializer,e),r=function(o){if(!("targetChange"in o))return j.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?j.min():s.readTime?hn(s.readTime):j.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Sf(this.serializer),n.addTarget=function(o,s){let a;const l=s.target;if(a=vf(l)?{documents:RM(o,l)}:{query:PM(o,l)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=PI(o,s.resumeToken);const c=Tf(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(j.min())>0){a.readTime=au(o,s.snapshotVersion.toTimestamp());const c=Tf(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=kM(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Sf(this.serializer),n.removeTarget=e,this.a_(n)}}class hD extends bI{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return he(!!e.streamToken),this.lastStreamToken=e.streamToken,he(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){he(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=AM(e.writeResults,e.commitTime),r=hn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Sf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>CM(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new W(O.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,If(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(O.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,If(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(O.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class mD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Fn(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(async()=>{si(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ee(l);c.L_.add(4),await sa(c),c.q_.set("Unknown"),c.L_.delete(4),await zu(c)}(this))})}),this.q_=new mD(r,i)}}async function zu(t){if(si(t))for(const e of t.B_)await e(!0)}async function sa(t){for(const e of t.B_)await e(!1)}function OI(t,e){const n=ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),mp(n)?pp(n):yo(n).r_()&&hp(n,e))}function fp(t,e){const n=ee(t),r=yo(n);n.N_.delete(e),r.r_()&&BI(n,e),n.N_.size===0&&(r.r_()?r.o_():si(n)&&n.q_.set("Unknown"))}function hp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(j.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yo(t).A_(e)}function BI(t,e){t.Q_.xe(e),yo(t).R_(e)}function pp(t){t.Q_=new yM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),yo(t).start(),t.q_.v_()}function mp(t){return si(t)&&!yo(t).n_()&&t.N_.size>0}function si(t){return ee(t).L_.size===0}function GI(t){t.Q_=void 0}async function yD(t){t.q_.set("Online")}async function vD(t){t.N_.forEach((e,n)=>{hp(t,e)})}async function _D(t,e){GI(t),mp(t)?(t.q_.M_(e),pp(t)):t.q_.set("Unknown")}async function ED(t,e,n){if(t.q_.set("Online"),e instanceof RI&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lu(t,r)}else if(e instanceof El?t.Q_.Ke(e):e instanceof AI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(j.min()))try{const r=await UI(t.localStore);n.compareTo(r)>=0&&await function(o,s){const a=o.Q_.rt(s);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=o.N_.get(c);h&&o.N_.set(c,h.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,c)=>{const h=o.N_.get(l);if(!h)return;o.N_.set(l,h.withResumeToken(Xe.EMPTY_BYTE_STRING,h.snapshotVersion)),BI(o,l);const p=new ar(h.target,l,c,h.sequenceNumber);hp(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){K("RemoteStore","Failed to raise snapshot:",r),await lu(t,r)}}async function lu(t,e,n){if(!na(e))throw e;t.L_.add(1),await sa(t),t.q_.set("Offline"),n||(n=()=>UI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await zu(t)})}function HI(t,e){return e().catch(n=>lu(t,n,e))}async function Wu(t){const e=ee(t),n=Cr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;TD(e);)try{const i=await iD(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,ID(e,i)}catch(i){await lu(e,i)}qI(e)&&$I(e)}function TD(t){return si(t)&&t.O_.length<10}function ID(t,e){t.O_.push(e);const n=Cr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function qI(t){return si(t)&&!Cr(t).n_()&&t.O_.length>0}function $I(t){Cr(t).start()}async function wD(t){Cr(t).p_()}async function SD(t){const e=Cr(t);for(const n of t.O_)e.m_(n.mutations)}async function CD(t,e,n){const r=t.O_.shift(),i=sp.from(r,e,n);await HI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Wu(t)}async function AD(t,e){e&&Cr(t).V_&&await async function(r,i){if(function(s){return pM(s)&&s!==O.ABORTED}(i.code)){const o=r.O_.shift();Cr(r).s_(),await HI(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Wu(r)}}(t,e),qI(t)&&$I(t)}async function jy(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const r=si(n);n.L_.add(3),await sa(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await zu(n)}async function RD(t,e){const n=ee(t);e?(n.L_.delete(2),await zu(n)):e||(n.L_.add(2),await sa(n),n.q_.set("Unknown"))}function yo(t){return t.K_||(t.K_=function(n,r,i){const o=ee(n);return o.w_(),new fD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:yD.bind(null,t),Ro:vD.bind(null,t),mo:_D.bind(null,t),d_:ED.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),mp(t)?pp(t):t.q_.set("Unknown")):(await t.K_.stop(),GI(t))})),t.K_}function Cr(t){return t.U_||(t.U_=function(n,r,i){const o=ee(n);return o.w_(),new hD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:wD.bind(null,t),mo:AD.bind(null,t),f_:SD.bind(null,t),g_:CD.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Wu(t)):(await t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new gp(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yp(t,e){if(Fn("AsyncQueue",`${e}: ${t}`),na(t))return new W(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=es(),this.sortedSet=new Re(this.comparator)}static emptySet(e){return new Hi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Hi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Hi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this.W_=new Re(J.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class oo{constructor(e,n,r,i,o,s,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new oo(e,n,Hi.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ou(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class ND{constructor(){this.queries=tv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ee(n),o=i.queries;i.queries=tv(),o.forEach((s,a)=>{for(const l of a.j_)l.onError(r)})})(this,new W(O.ABORTED,"Firestore shutting down"))}}function tv(){return new go(t=>hI(t),Ou)}async function zI(t,e){const n=ee(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new PD,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(i,!0);break;case 1:o.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const a=yp(s,`Initialization of query '${pi(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&vp(n)}async function WI(t,e){const n=ee(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function kD(t,e){const n=ee(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&vp(n)}function xD(t,e,n){const r=ee(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(e)}function vp(t){t.Y_.forEach(e=>{e.next()})}var Af,nv;(nv=Af||(Af={})).ea="default",nv.Cache="cache";class KI{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new oo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=oo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Af.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.key=e}}class YI{constructor(e){this.key=e}}class MD{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=re(),this.mutatedKeys=re(),this.Aa=pI(e),this.Ra=new Hi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new ev,i=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const m=i.get(h),v=Bu(this.query,p)?p:null,I=!!m&&this.mutatedKeys.has(m.key),P=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let N=!1;m&&v?m.data.isEqual(v.data)?I!==P&&(r.track({type:3,doc:v}),N=!0):this.ga(m,v)||(r.track({type:2,doc:v}),N=!0,(l&&this.Aa(v,l)>0||c&&this.Aa(v,c)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),N=!0):m&&!v&&(r.track({type:1,doc:m}),N=!0,(l||c)&&(a=!0)),N&&(v?(s=s.add(v),o=P?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((h,p)=>function(v,I){const P=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return P(v)-P(I)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,s.length!==0||c?{snapshot:new oo(this.query,e.Ra,o,s,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ev,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=re(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new YI(r))}),this.da.forEach(r=>{e.has(r)||n.push(new JI(r))}),n}ba(e){this.Ta=e.Ts,this.da=re();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return oo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class DD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class LD{constructor(e){this.key=e,this.va=!1}}class VD{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new go(a=>hI(a),Ou),this.Ma=new Map,this.xa=new Set,this.Oa=new Re(J.comparator),this.Na=new Map,this.La=new up,this.Ba={},this.ka=new Map,this.qa=io.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function UD(t,e,n=!0){const r=tw(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await QI(r,e,n,!0),i}async function FD(t,e){const n=tw(t);await QI(n,e,!0,!1)}async function QI(t,e,n,r){const i=await oD(t.localStore,fn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await bD(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&OI(t.remoteStore,i),a}async function bD(t,e,n,r,i){t.Ka=(p,m,v)=>async function(P,N,w,T){let C=N.view.ma(w);C.ns&&(C=await Qy(P.localStore,N.query,!1).then(({documents:A})=>N.view.ma(A,C)));const D=T&&T.targetChanges.get(N.targetId),b=T&&T.targetMismatches.get(N.targetId)!=null,L=N.view.applyChanges(C,P.isPrimaryClient,D,b);return iv(P,N.targetId,L.wa),L.snapshot}(t,p,m,v);const o=await Qy(t.localStore,e,!0),s=new MD(e,o.Ts),a=s.ma(o.documents),l=oa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=s.applyChanges(a,t.isPrimaryClient,l);iv(t,n,c.wa);const h=new DD(e,n,s);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function OD(t,e,n){const r=ee(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Ou(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Cf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&fp(r.remoteStore,i.targetId),Rf(r,i.targetId)}).catch(ta)):(Rf(r,i.targetId),await Cf(r.localStore,i.targetId,!0))}async function BD(t,e){const n=ee(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),fp(n.remoteStore,r.targetId))}async function GD(t,e,n){const r=JD(t);try{const i=await function(s,a){const l=ee(s),c=Oe.now(),h=a.reduce((v,I)=>v.add(I.key),re());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let I=bn(),P=re();return l.cs.getEntries(v,h).next(N=>{I=N,I.forEach((w,T)=>{T.isValidDocument()||(P=P.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,I)).next(N=>{p=N;const w=[];for(const T of a){const C=uM(T,p.get(T.key).overlayedDocument);C!=null&&w.push(new oi(T.key,C,oI(C.value.mapValue),Xt.exists(!0)))}return l.mutationQueue.addMutationBatch(v,c,w,a)}).next(N=>{m=N;const w=N.applyToLocalDocumentSet(p,P);return l.documentOverlayCache.saveOverlays(v,N.batchId,w)})}).then(()=>({batchId:m.batchId,changes:gI(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let c=s.Ba[s.currentUser.toKey()];c||(c=new Re(ue)),c=c.insert(a,l),s.Ba[s.currentUser.toKey()]=c}(r,i.batchId,n),await aa(r,i.changes),await Wu(r.remoteStore)}catch(i){const o=yp(i,"Failed to persist write");n.reject(o)}}async function XI(t,e){const n=ee(t);try{const r=await nD(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Na.get(o);s&&(he(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?he(s.va):i.removedDocuments.size>0&&(he(s.va),s.va=!1))}),await aa(n,r,e)}catch(r){await ta(r)}}function rv(t,e,n){const r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((o,s)=>{const a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=ee(s);l.onlineState=a;let c=!1;l.queries.forEach((h,p)=>{for(const m of p.j_)m.Z_(a)&&(c=!0)}),c&&vp(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function HD(t,e,n){const r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),o=i&&i.key;if(o){let s=new Re(J.comparator);s=s.insert(o,st.newNoDocument(o,j.min()));const a=re().add(o),l=new qu(j.min(),new Map,new Re(ue),s,a);await XI(r,l),r.Oa=r.Oa.remove(o),r.Na.delete(e),_p(r)}else await Cf(r.localStore,e,!1).then(()=>Rf(r,e,n)).catch(ta)}async function qD(t,e){const n=ee(t),r=e.batch.batchId;try{const i=await tD(n.localStore,e);jI(n,r,null),ZI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await aa(n,i)}catch(i){await ta(i)}}async function $D(t,e,n){const r=ee(t);try{const i=await function(s,a){const l=ee(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(p=>(he(p!==null),h=p.keys(),l.mutationQueue.removeMutationBatch(c,p))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);jI(r,e,n),ZI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await aa(r,i)}catch(i){await ta(i)}}function ZI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function jI(t,e,n){const r=ee(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Rf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||ew(t,r)})}function ew(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(fp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),_p(t))}function iv(t,e,n){for(const r of n)r instanceof JI?(t.La.addReference(r.key,e),zD(t,r)):r instanceof YI?(K("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||ew(t,r.key)):X()}function zD(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(K("SyncEngine","New document in limbo: "+n),t.xa.add(r),_p(t))}function _p(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new J(_e.fromString(e)),r=t.qa.next();t.Na.set(r,new LD(n)),t.Oa=t.Oa.insert(n,r),OI(t.remoteStore,new ar(fn(rp(n.path)),r,"TargetPurposeLimboResolution",Xh.oe))}}async function aa(t,e,n){const r=ee(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{s.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const p=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(c){i.push(c);const p=dp.Wi(l.targetId,c);o.push(p)}}))}),await Promise.all(s),r.Ca.d_(i),await async function(l,c){const h=ee(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>B.forEach(c,m=>B.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>B.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!na(p))throw p;K("LocalStore","Failed to update sequence numbers: "+p)}for(const p of c){const m=p.targetId;if(!p.fromCache){const v=h.os.get(m),I=v.snapshotVersion,P=v.withLastLimboFreeSnapshotVersion(I);h.os=h.os.insert(m,P)}}}(r.localStore,o))}async function WD(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const r=await VI(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(l=>{l.reject(new W(O.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await aa(n,r.hs)}}function KD(t,e){const n=ee(t),r=n.Na.get(e);if(r&&r.va)return re().add(r.key);{let i=re();const o=n.Ma.get(e);if(!o)return i;for(const s of o){const a=n.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function tw(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=XI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HD.bind(null,e),e.Ca.d_=kD.bind(null,e.eventManager),e.Ca.$a=xD.bind(null,e.eventManager),e}function JD(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$D.bind(null,e),e}class uu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$u(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return eD(this.persistence,new ZM,e.initialUser,this.serializer)}Ga(e){return new YM(cp.Zr,this.serializer)}Wa(e){return new aD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uu.provider={build:()=>new uu};class Pf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>rv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=WD.bind(null,this.syncEngine),await RD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ND}()}createDatastore(e){const n=$u(e.databaseInfo.databaseId),r=function(o){return new dD(o)}(e.databaseInfo);return function(o,s,a,l){return new pD(o,s,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new gD(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>rv(this.syncEngine,n,0),function(){return Zy.D()?new Zy:new lD}())}createSyncEngine(e,n){return function(i,o,s,a,l,c,h){const p=new VD(i,o,s,a,l,c);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=ee(i);K("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await sa(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Pf.provider={build:()=>new Pf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Fn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=it.UNAUTHENTICATED,this.clientId=nI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{K("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(K("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=yp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ld(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await VI(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ov(t,e){t.asyncQueue.verifyOperationInProgress();const n=await QD(t);K("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>jy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>jy(e.remoteStore,i)),t._onlineComponents=e}async function QD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await ld(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===O.FAILED_PRECONDITION||i.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;eo("Error using user provided cache. Falling back to memory cache: "+n),await ld(t,new uu)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await ld(t,new uu);return t._offlineComponents}async function rw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await ov(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await ov(t,new Pf))),t._onlineComponents}function XD(t){return rw(t).then(e=>e.syncEngine)}async function iw(t){const e=await rw(t),n=e.eventManager;return n.onListen=UD.bind(null,e.syncEngine),n.onUnlisten=OD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=FD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=BD.bind(null,e.syncEngine),n}function ZD(t,e,n={}){const r=new kn;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,c){const h=new nw({next:m=>{h.Za(),s.enqueueAndForget(()=>WI(o,p));const v=m.docs.has(a);!v&&m.fromCache?c.reject(new W(O.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&l&&l.source==="server"?c.reject(new W(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new KI(rp(a.path),h,{includeMetadataChanges:!0,_a:!0});return zI(o,p)}(await iw(t),t.asyncQueue,e,n,r)),r.promise}function jD(t,e,n={}){const r=new kn;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,c){const h=new nw({next:m=>{h.Za(),s.enqueueAndForget(()=>WI(o,p)),m.fromCache&&l.source==="server"?c.reject(new W(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new KI(a,h,{includeMetadataChanges:!0,_a:!0});return zI(o,p)}(await iw(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(t,e,n){if(!n)throw new W(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function e1(t,e,n,r){if(e===!0&&r===!0)throw new W(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function av(t){if(!J.isDocumentKey(t))throw new W(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lv(t){if(J.isDocumentKey(t))throw new W(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ku(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function On(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ku(t);throw new W(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}e1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ow((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new W(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new W(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new W(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ju{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new vx;switch(r.type){case"firstParty":return new Ix(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=sv.get(n);r&&(K("ComponentProvider","Removing Datastore"),sv.delete(n),r.terminate())}(this),Promise.resolve()}}function t1(t,e,n,r={}){var i;const o=(t=On(t,Ju))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=it.MOCK_USER;else{a=VR(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new W(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new it(c)}t._authCredentials=new _x(new tI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vo(this.firestore,e,this._query)}}class St{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new St(this.firestore,e,this._key)}}class Er extends vo{constructor(e,n,r){super(e,n,rp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new J(e))}withConverter(e){return new Er(this.firestore,e,this._path)}}function aw(t,e,...n){if(t=Ct(t),sw("collection","path",e),t instanceof Ju){const r=_e.fromString(e,...n);return lv(r),new Er(t,null,r)}{if(!(t instanceof St||t instanceof Er))throw new W(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_e.fromString(e,...n));return lv(r),new Er(t.firestore,null,r)}}function Yu(t,e,...n){if(t=Ct(t),arguments.length===1&&(e=nI.newId()),sw("doc","path",e),t instanceof Ju){const r=_e.fromString(e,...n);return av(r),new St(t,null,new J(r))}{if(!(t instanceof St||t instanceof Er))throw new W(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_e.fromString(e,...n));return av(r),new St(t.firestore,t instanceof Er?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new FI(this,"async_queue_retry"),this.Vu=()=>{const r=ad();r&&K("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=ad();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=ad();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new kn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!na(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Fn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=gp.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&X()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class _o extends Ju{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new cv,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cv(e),this._firestoreClient=void 0,await e}}}function n1(t,e){const n=typeof t=="object"?t:hT(),r=typeof t=="string"?t:"(default)",i=Bh(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=DR("firestore");o&&t1(i,...o)}return i}function Ep(t){if(t._terminated)throw new W(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||r1(t),t._firestoreClient}function r1(t){var e,n,r;const i=t._freezeSettings(),o=function(a,l,c,h){return new Vx(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,ow(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new YD(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this._byteString=e}static fromBase64String(e){try{return new so(Xe.fromBase64String(e))}catch(n){throw new W(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new so(Xe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=/^__.*__$/;class o1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new oi(e,this.data,this.fieldMask,n,this.fieldTransforms):new ia(e,this.data,n,this.fieldTransforms)}}function uw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class Sp{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Sp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return cu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(uw(this.Cu)&&i1.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class s1{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$u(e)}Qu(e,n,r,i=!1){return new Sp({Cu:e,methodName:n,qu:r,path:Ke.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cp(t){const e=t._freezeSettings(),n=$u(t._databaseId);return new s1(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cw(t,e,n,r,i,o={}){const s=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);hw("Data must be an object, but it was:",s,r);const a=dw(r,s);let l,c;if(o.merge)l=new Jt(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const p of o.mergeFields){const m=l1(e,p,n);if(!s.contains(m))throw new W(O.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);c1(h,m)||h.push(m)}l=new Jt(h),c=s.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,c=s.fieldTransforms;return new o1(new Ut(a),l,c)}function a1(t,e,n,r=!1){return Ap(n,t.Qu(r?4:3,e))}function Ap(t,e){if(fw(t=Ct(t)))return hw("Unsupported field value:",e,t),dw(t,e);if(t instanceof lw)return function(r,i){if(!uw(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let l=Ap(a,i.Lu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Oe.fromDate(r);return{timestampValue:au(i.serializer,o)}}if(r instanceof Oe){const o=new Oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:au(i.serializer,o)}}if(r instanceof Ip)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof so)return{bytesValue:PI(i.serializer,r._byteString)};if(r instanceof St){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:lp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof wp)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return ip(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Ku(r)}`)}(t,e)}function dw(t,e){const n={};return rI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mo(t,(r,i)=>{const o=Ap(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function fw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Oe||t instanceof Ip||t instanceof so||t instanceof St||t instanceof lw||t instanceof wp)}function hw(t,e,n){if(!fw(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Ku(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function l1(t,e,n){if((e=Ct(e))instanceof Tp)return e._internalPath;if(typeof e=="string")return pw(t,e);throw cu("Field path arguments must be of type string or ",t,!1,void 0,n)}const u1=new RegExp("[~\\*/\\[\\]]");function pw(t,e,n){if(e.search(u1)>=0)throw cu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Tp(...e.split("."))._internalPath}catch{throw cu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function cu(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new W(O.INVALID_ARGUMENT,a+t+l)}function c1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new d1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Rp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class d1 extends mw{data(){return super.data()}}function Rp(t,e){return typeof e=="string"?pw(t,e):e instanceof Tp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pp{}class h1 extends Pp{}function p1(t,e,...n){let r=[];e instanceof Pp&&r.push(e),r=r.concat(n),function(o){const s=o.filter(l=>l instanceof Np).length,a=o.filter(l=>l instanceof Qu).length;if(s>1||s>0&&a>0)throw new W(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Qu extends h1{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Qu(e,n,r)}_apply(e){const n=this._parse(e);return gw(e._query,n),new vo(e.firestore,e.converter,_f(e._query,n))}_parse(e){const n=Cp(e.firestore);return function(o,s,a,l,c,h,p){let m;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new W(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){fv(p,h);const v=[];for(const I of p)v.push(dv(l,o,I));m={arrayValue:{values:v}}}else m=dv(l,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||fv(p,h),m=a1(a,s,p,h==="in"||h==="not-in");return Ue.create(c,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function m1(t,e,n){const r=e,i=Rp("where",t);return Qu._create(i,r,n)}class Np extends Pp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Np(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:nn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const l of a)gw(s,l),s=_f(s,l)}(e._query,n),new vo(e.firestore,e.converter,_f(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function dv(t,e,n){if(typeof(n=Ct(n))=="string"){if(n==="")throw new W(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fI(e)&&n.indexOf("/")!==-1)throw new W(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(_e.fromString(n));if(!J.isDocumentKey(r))throw new W(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Dy(t,new J(r))}if(n instanceof St)return Dy(t,n._key);throw new W(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ku(n)}.`)}function fv(t,e){if(!Array.isArray(t)||t.length===0)throw new W(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gw(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class g1{convertValue(e,n="none"){switch(ti(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ei(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return mo(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Me(s.doubleValue));return new wp(o)}convertGeoPoint(e){return new Ip(Me(e.latitude),Me(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=jh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Os(e));default:return null}}convertTimestamp(e){const n=Sr(e);return new Oe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=_e.fromString(e);he(LI(r));const i=new Bs(r.get(1),r.get(3)),o=new J(r.popFirst(5));return i.isEqual(n)||Fn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vw extends mw{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Tl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Rp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Tl extends vw{data(e={}){return super.data(e)}}class y1{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ns(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Tl(this._firestore,this._userDataWriter,r.key,r,new ns(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const l=new Tl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ns(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const l=new Tl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ns(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:v1(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function v1(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(t){t=On(t,St);const e=On(t.firestore,_o);return ZD(Ep(e),t._key).then(n=>S1(e,t,n))}class _w extends g1{constructor(e){super(),this.firestore=e}convertBytes(e){return new so(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,n)}}function E1(t){t=On(t,vo);const e=On(t.firestore,_o),n=Ep(e),r=new _w(e);return f1(t._query),jD(n,t._query).then(i=>new y1(e,r,t,i))}function T1(t,e,n){t=On(t,St);const r=On(t.firestore,_o),i=yw(t.converter,e);return kp(r,[cw(Cp(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Xt.none())])}function I1(t){return kp(On(t.firestore,_o),[new op(t._key,Xt.none())])}function w1(t,e){const n=On(t.firestore,_o),r=Yu(t),i=yw(t.converter,e);return kp(n,[cw(Cp(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Xt.exists(!1))]).then(()=>r)}function kp(t,e){return function(r,i){const o=new kn;return r.asyncQueue.enqueueAndForget(async()=>GD(await XD(r),i,o)),o.promise}(Ep(t),e)}function S1(t,e,n){const r=n.docs.get(e._key),i=new _w(t);return new vw(t,i,e._key,r,new ns(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){po=i})(co),Zi(new Xr("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new _o(new Ex(r.getProvider("auth-internal")),new Sx(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new W(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bs(c.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),vr(Py,"4.7.3",e),vr(Py,"4.7.3","esm2017")})();const C1={VITE_FIREBASE_API_KEY:"AIzaSyBZ8-0NrU8C3cXnU9d1Dc2qBctv8xMrpo4",VITE_FIREBASE_APP_ID:"1:245765105329:web:c7daacb35f7b040b442490",VITE_FIREBASE_AUTH_DOMAIN:"nutriai-9f4c8.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"245765105329",VITE_FIREBASE_PROJECT_ID:"nutriai-9f4c8",VITE_FIREBASE_STORAGE_BUCKET:"nutriai-9f4c8.firebasestorage.app"},hi=C1,A1={apiKey:hi.VITE_FIREBASE_API_KEY,authDomain:hi.VITE_FIREBASE_AUTH_DOMAIN,projectId:hi.VITE_FIREBASE_PROJECT_ID,storageBucket:hi.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:hi.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:hi.VITE_FIREBASE_APP_ID},Ew=fT(A1),xp=gx(Ew),la=n1(Ew);var we=(t=>(t.LOGIN="LOGIN",t.DASHBOARD="DASHBOARD",t.FOOD_TRACKER="FOOD_TRACKER",t.WORKOUT_TRACKER="WORKOUT_TRACKER",t))(we||{});const R1=({currentView:t,setView:e,userEmail:n})=>{const r=()=>{xp.signOut()};return x.jsxs("nav",{className:"bg-emerald-600 text-white shadow-lg sticky top-0 z-50",children:[x.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:x.jsxs("div",{className:"flex items-center justify-between h-16",children:[x.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>e(we.DASHBOARD),children:[x.jsx("svg",{className:"w-8 h-8 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),x.jsx("span",{className:"font-bold text-xl tracking-tight",children:"NutriAI"})]}),x.jsx("div",{className:"hidden md:block",children:x.jsxs("div",{className:"ml-10 flex items-baseline space-x-4",children:[x.jsx("button",{onClick:()=>e(we.FOOD_TRACKER),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${t===we.FOOD_TRACKER?"bg-emerald-700 text-white":"text-emerald-100 hover:bg-emerald-500"}`,children:"Alimentao"}),x.jsx("button",{onClick:()=>e(we.WORKOUT_TRACKER),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${t===we.WORKOUT_TRACKER?"bg-emerald-700 text-white":"text-emerald-100 hover:bg-emerald-500"}`,children:"Treino"})]})}),x.jsxs("div",{className:"flex items-center",children:[x.jsx("span",{className:"hidden sm:block text-xs text-emerald-200 mr-4 truncate max-w-[150px]",children:n}),x.jsx("button",{onClick:r,className:"bg-emerald-800 hover:bg-emerald-900 text-white px-3 py-1 rounded text-sm transition-colors",children:"Sair"})]})]})}),x.jsxs("div",{className:"md:hidden flex justify-around bg-emerald-700 py-2",children:[x.jsx("button",{onClick:()=>e(we.DASHBOARD),className:`p-2 ${t===we.DASHBOARD?"text-white":"text-emerald-300"}`,children:x.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),x.jsx("button",{onClick:()=>e(we.FOOD_TRACKER),className:`p-2 ${t===we.FOOD_TRACKER?"text-white":"text-emerald-300"}`,children:x.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),x.jsx("button",{onClick:()=>e(we.WORKOUT_TRACKER),className:`p-2 ${t===we.WORKOUT_TRACKER?"text-white":"text-emerald-300"}`,children:x.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]})]})},Mp="logs",Tw="users",Iw=async(t,e)=>{try{await w1(aw(la,Mp),{...e,userId:t,timestamp:e.timestamp||Date.now()})}catch(n){throw console.error("Error adding document: ",n),n}},P1=async t=>{try{const e=p1(aw(la,Mp),m1("userId","==",t)),n=await E1(e),r=[];n.forEach(o=>{const s=o.data();r.push({id:o.id,timestamp:s.timestamp,type:s.type,title:s.title,calories:s.calories,details:s.details})});const i=new Date().setHours(0,0,0,0);return r.filter(o=>new Date(o.timestamp).setHours(0,0,0,0)===i).sort((o,s)=>s.timestamp-o.timestamp)}catch(e){return console.error("Error fetching logs: ",e),[]}},N1=async(t,e)=>{try{await I1(Yu(la,Mp,e))}catch(n){throw console.error("Error deleting document: ",n),n}},k1=async(t,e)=>{try{await T1(Yu(la,Tw,t),{stats:e})}catch(n){throw console.error("Error saving stats: ",n),n}},ww=async t=>{try{const e=Yu(la,Tw,t),n=await _1(e);return n.exists()&&n.data().stats?n.data().stats:{weight:70,height:170,tmb:1600}}catch(e){return console.error("Error getting stats: ",e),{weight:70,height:170,tmb:1600}}},x1=({setView:t,userId:e})=>{const[n,r]=le.useState([]),[i,o]=le.useState({eaten:0,burned:0,bmr:0,balance:0}),[s,a]=le.useState(!0),l=async()=>{a(!0);try{const[p,m]=await Promise.all([P1(e),ww(e)]),v=p.filter(N=>N.type==="FOOD").reduce((N,w)=>N+w.calories,0),I=p.filter(N=>N.type==="WORKOUT").reduce((N,w)=>N+w.calories,0),P=v-(m.tmb+I);r(p),o({eaten:v,burned:I,bmr:m.tmb,balance:P})}catch(p){console.error("Failed to load dashboard data",p)}finally{a(!1)}};le.useEffect(()=>{l()},[e]);const c=async p=>{confirm("Tem certeza que deseja excluir este registro?")&&(await N1(e,p),l())},h=p=>p<-500?"text-blue-600":p>500?"text-red-600":"text-emerald-600";return s?x.jsx("div",{className:"flex justify-center items-center h-64",children:x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600"})}):x.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[x.jsxs("div",{className:"mb-8",children:[x.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-6",children:"Resumo do Dia"}),x.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[x.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-100",children:[x.jsx("p",{className:"text-xs text-slate-500 uppercase font-semibold",children:"Ingeridas"}),x.jsxs("p",{className:"text-2xl font-bold text-slate-800",children:[i.eaten," ",x.jsx("span",{className:"text-sm font-normal text-slate-400",children:"kcal"})]})]}),x.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-100",children:[x.jsx("p",{className:"text-xs text-slate-500 uppercase font-semibold",children:"Basal (TMB)"}),x.jsxs("p",{className:"text-2xl font-bold text-slate-800",children:[i.bmr," ",x.jsx("span",{className:"text-sm font-normal text-slate-400",children:"kcal"})]})]}),x.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-100",children:[x.jsx("p",{className:"text-xs text-slate-500 uppercase font-semibold",children:"Exerccio"}),x.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[i.burned," ",x.jsx("span",{className:"text-sm font-normal text-slate-400",children:"kcal"})]})]}),x.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-100",children:[x.jsx("p",{className:"text-xs text-slate-500 uppercase font-semibold",children:"Saldo"}),x.jsxs("p",{className:`text-2xl font-bold ${h(i.balance)}`,children:[i.balance>0?"+":"",i.balance," ",x.jsx("span",{className:"text-sm font-normal text-slate-400",children:"kcal"})]})]})]})]}),x.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[x.jsxs("div",{className:"md:col-span-1 space-y-4",children:[x.jsx("h2",{className:"text-lg font-bold text-slate-700",children:"Aes Rpidas"}),x.jsxs("div",{onClick:()=>t(we.FOOD_TRACKER),className:"bg-white rounded-xl shadow-sm p-4 cursor-pointer hover:shadow-md transition-shadow border border-slate-100 flex items-center group",children:[x.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center mr-4 group-hover:bg-orange-200 transition-colors",children:x.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-slate-800",children:"Registrar Refeio"}),x.jsx("p",{className:"text-xs text-slate-500",children:"Foto ou texto"})]})]}),x.jsxs("div",{onClick:()=>t(we.WORKOUT_TRACKER),className:"bg-white rounded-xl shadow-sm p-4 cursor-pointer hover:shadow-md transition-shadow border border-slate-100 flex items-center group",children:[x.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center mr-4 group-hover:bg-blue-200 transition-colors",children:x.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-slate-800",children:"Registrar Treino"}),x.jsx("p",{className:"text-xs text-slate-500",children:"Calculadora de queima"})]})]})]}),x.jsxs("div",{className:"md:col-span-2",children:[x.jsx("h2",{className:"text-lg font-bold text-slate-700 mb-4",children:"Histrico de Hoje"}),x.jsx("div",{className:"space-y-3",children:n.length===0?x.jsx("div",{className:"text-center py-10 bg-white rounded-xl border border-dashed border-slate-200 text-slate-400",children:"Nenhum registro hoje. Comece adicionando uma refeio!"}):n.map(p=>x.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-100 flex justify-between items-center",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:`p-2 rounded-lg mr-4 ${p.type==="FOOD"?"bg-orange-50 text-orange-500":"bg-blue-50 text-blue-500"}`,children:p.type==="FOOD"?x.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}):x.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold text-slate-800",children:p.title}),x.jsx("p",{className:"text-xs text-slate-500 line-clamp-1",children:p.details})]})]}),x.jsxs("div",{className:"flex items-center",children:[x.jsxs("span",{className:`font-bold mr-4 ${p.type==="FOOD"?"text-slate-700":"text-orange-600"}`,children:[p.type==="WORKOUT"?"-":"+",p.calories]}),x.jsx("button",{onClick:()=>c(p.id),className:"text-slate-300 hover:text-red-500 transition-colors",children:x.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},p.id))})]})]})]})},M1=Object.prototype.toString,D1=t=>M1.call(t)==="[object Error]",L1=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function V1(t){if(!(t&&D1(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;const{message:n,stack:r}=t;return n==="Load failed"?r===void 0||"__sentry_captured__"in t:n.startsWith("error sending request for url")?!0:L1.has(n)}function U1(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function Ya(t,e,{min:n=0,allowInfinity:r=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${r?" or Infinity":""}.`);if(!r&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<n)throw new TypeError(`Expected \`${t}\` to be  ${n}.`)}}class Sw extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}function F1(t,e){const n=Math.max(1,t+1),r=e.randomize?Math.random()+1:1;let i=Math.round(r*e.minTimeout*e.factor**(n-1));return i=Math.min(i,e.maxTimeout),i}function hv(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function b1({error:t,attemptNumber:e,retriesConsumed:n,startTime:r,options:i}){var v,I,P,N;const o=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(o instanceof Sw)throw o.originalError;const s=Number.isFinite(i.retries)?Math.max(0,i.retries-n):i.retries,a=i.maxRetryTime??Number.POSITIVE_INFINITY,l=Object.freeze({error:o,attemptNumber:e,retriesLeft:s,retriesConsumed:n});if(await i.onFailedAttempt(l),hv(r,a)<=0)throw o;const c=await i.shouldConsumeRetry(l),h=hv(r,a);if(h<=0||s<=0)throw o;if(o instanceof TypeError&&!V1(o)){if(c)throw o;return(v=i.signal)==null||v.throwIfAborted(),!1}if(!await i.shouldRetry(l))throw o;if(!c)return(I=i.signal)==null||I.throwIfAborted(),!1;const p=F1(n,i),m=Math.min(p,h);return(P=i.signal)==null||P.throwIfAborted(),m>0&&await new Promise((w,T)=>{var b,L;const C=()=>{var A;clearTimeout(D),(A=i.signal)==null||A.removeEventListener("abort",C),T(i.signal.reason)},D=setTimeout(()=>{var A;(A=i.signal)==null||A.removeEventListener("abort",C),w()},m);i.unref&&((b=D.unref)==null||b.call(D)),(L=i.signal)==null||L.addEventListener("abort",C,{once:!0})}),(N=i.signal)==null||N.throwIfAborted(),!0}async function O1(t,e={}){var o,s,a;if(e={...e},U1(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),Ya("factor",e.factor,{min:0,allowInfinity:!1}),Ya("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),Ya("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),Ya("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(o=e.signal)==null||o.throwIfAborted();let n=0,r=0;const i=performance.now();for(;!Number.isFinite(e.retries)||r<=e.retries;){n++;try{(s=e.signal)==null||s.throwIfAborted();const l=await t(n);return(a=e.signal)==null||a.throwIfAborted(),l}catch(l){await b1({error:l,attemptNumber:n,retriesConsumed:r,startTime:i,options:e})&&r++}}throw new Error("Retry attempts exhausted without throwing an error.")}var B1={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let G1,H1;function q1(){return{geminiUrl:G1,vertexUrl:H1}}function $1(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=q1();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qn{}function $(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function d(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const a=s.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){const h=l[c];d(h,e.slice(o+1),n[c])}else for(const c of l)d(c,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const a=s.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];d(l[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function u(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const s=t[o];return Array.isArray(s)?s.map(a=>u(a,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function z1(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),o=r.split("."),s=new Set;let a=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){a=l;break}if(a!==-1&&o.length>a)for(let l=a;l<o.length;l++){const c=o[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&s.add(c)}Nf(t,i,o,0,s)}}function Nf(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const o=e[r];if(o.endsWith("[]")){const s=o.slice(0,-2),a=t;if(s in a&&Array.isArray(a[s]))for(const l of a[s])Nf(l,e,n,r+1,i)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,a=Object.keys(s).filter(c=>!c.startsWith("_")&&!i.has(c)),l={};for(const c of a)l[c]=s[c];for(const[c,h]of Object.entries(l)){const p=[];for(const m of n.slice(r))m==="*"?p.push(c):p.push(m);d(s,p,h)}for(const c of a)delete s[c]}}else{const s=t;o in s&&Nf(s[o],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dp(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W1(t){const e={},n=u(t,["operationName"]);n!=null&&d(e,["operationName"],n);const r=u(t,["resourceName"]);return r!=null&&d(e,["_url","resourceName"],r),e}function K1(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);const i=u(t,["done"]);i!=null&&d(e,["done"],i);const o=u(t,["error"]);o!=null&&d(e,["error"],o);const s=u(t,["response","generateVideoResponse"]);return s!=null&&d(e,["response"],Y1(s)),e}function J1(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);const i=u(t,["done"]);i!=null&&d(e,["done"],i);const o=u(t,["error"]);o!=null&&d(e,["error"],o);const s=u(t,["response"]);return s!=null&&d(e,["response"],Q1(s)),e}function Y1(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>X1(s))),d(e,["generatedVideos"],o)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);const i=u(t,["raiMediaFilteredReasons"]);return i!=null&&d(e,["raiMediaFilteredReasons"],i),e}function Q1(t){const e={},n=u(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Z1(s))),d(e,["generatedVideos"],o)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);const i=u(t,["raiMediaFilteredReasons"]);return i!=null&&d(e,["raiMediaFilteredReasons"],i),e}function X1(t){const e={},n=u(t,["video"]);return n!=null&&d(e,["video"],iL(n)),e}function Z1(t){const e={},n=u(t,["_self"]);return n!=null&&d(e,["video"],oL(n)),e}function j1(t){const e={},n=u(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function eL(t){const e={},n=u(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function tL(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);const i=u(t,["done"]);i!=null&&d(e,["done"],i);const o=u(t,["error"]);o!=null&&d(e,["error"],o);const s=u(t,["response"]);return s!=null&&d(e,["response"],nL(s)),e}function nL(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["parent"]);r!=null&&d(e,["parent"],r);const i=u(t,["documentName"]);return i!=null&&d(e,["documentName"],i),e}function Cw(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);const i=u(t,["done"]);i!=null&&d(e,["done"],i);const o=u(t,["error"]);o!=null&&d(e,["error"],o);const s=u(t,["response"]);return s!=null&&d(e,["response"],rL(s)),e}function rL(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["parent"]);r!=null&&d(e,["parent"],r);const i=u(t,["documentName"]);return i!=null&&d(e,["documentName"],i),e}function iL(t){const e={},n=u(t,["uri"]);n!=null&&d(e,["uri"],n);const r=u(t,["encodedVideo"]);r!=null&&d(e,["videoBytes"],Dp(r));const i=u(t,["encoding"]);return i!=null&&d(e,["mimeType"],i),e}function oL(t){const e={},n=u(t,["gcsUri"]);n!=null&&d(e,["uri"],n);const r=u(t,["bytesBase64Encoded"]);r!=null&&d(e,["videoBytes"],Dp(r));const i=u(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var pv;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(pv||(pv={}));var mv;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(mv||(mv={}));var gv;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(gv||(gv={}));var ke;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ke||(ke={}));var yv;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(yv||(yv={}));var vv;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(vv||(vv={}));var _v;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(_v||(_v={}));var Ev;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Ev||(Ev={}));var Tv;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Tv||(Tv={}));var Iv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Iv||(Iv={}));var wv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(wv||(wv={}));var Sv;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Sv||(Sv={}));var Cv;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Cv||(Cv={}));var Av;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Av||(Av={}));var Rv;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Rv||(Rv={}));var Pv;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Pv||(Pv={}));var Nv;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Nv||(Nv={}));var kv;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(kv||(kv={}));var xv;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(xv||(xv={}));var Mv;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Mv||(Mv={}));var Dv;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Dv||(Dv={}));var du;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(du||(du={}));var Lv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Lv||(Lv={}));var Vv;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Vv||(Vv={}));var Uv;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Uv||(Uv={}));var kf;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(kf||(kf={}));var Fv;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Fv||(Fv={}));var bv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(bv||(bv={}));var xf;(function(t){t.COLLECTION="COLLECTION"})(xf||(xf={}));var Ov;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Ov||(Ov={}));var Bv;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Bv||(Bv={}));var Gv;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Gv||(Gv={}));var Hv;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Hv||(Hv={}));var qv;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(qv||(qv={}));var $v;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})($v||($v={}));var zv;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(zv||(zv={}));var Wv;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Wv||(Wv={}));var Kv;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Kv||(Kv={}));var Jv;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Jv||(Jv={}));var Yv;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Yv||(Yv={}));var Qv;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Qv||(Qv={}));var Xv;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Xv||(Xv={}));var Zv;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(Zv||(Zv={}));var jv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(jv||(jv={}));var e_;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(e_||(e_={}));var t_;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(t_||(t_={}));var n_;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(n_||(n_={}));var r_;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(r_||(r_={}));var i_;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(i_||(i_={}));var o_;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(o_||(o_={}));var s_;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(s_||(s_={}));var a_;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(a_||(a_={}));var l_;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(l_||(l_={}));var u_;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(u_||(u_={}));var c_;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(c_||(c_={}));var d_;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(d_||(d_={}));var xi;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(xi||(xi={}));class Mf{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class zo{get text(){var e,n,r,i,o,s,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",h=!1;const p=[];for(const m of(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[v,I]of Object.entries(m))v!=="text"&&v!=="thought"&&v!=="thoughtSignature"&&(I!==null||I!==void 0)&&p.push(v);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;h=!0,c+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?c:void 0}get data(){var e,n,r,i,o,s,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const h=[];for(const p of(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[m,v]of Object.entries(p))m!=="inlineData"&&(v!==null||v!==void 0)&&h.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,i,o,s,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,r,i,o,s,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(c=h==null?void 0:h[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,i,o,s,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(c=h==null?void 0:h[0])===null||c===void 0?void 0:c.output}}class f_{}class h_{}class sL{}class aL{}class lL{}class uL{}class p_{}class m_{}class g_{}class cL{}class fu{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new fu;let i;const o=e;return n?i=J1(o):i=K1(o),Object.assign(r,i),r}}class y_{}class v_{}class __{}class E_{}class dL{}class fL{}class hL{}class Lp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Lp,o=tL(e);return Object.assign(r,o),r}}class pL{}class mL{}class gL{}class yL{}class T_{}class vL{get text(){var e,n,r;let i="",o=!1;const s=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&s.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,i+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(s))a!=="inlineData"&&l!==null&&o.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class _L{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Vp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Vp,o=Cw(e);return Object.assign(r,o),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ce(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Aw(t,e){const n=ce(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Rw(t){return Array.isArray(t)?t.map(e=>hu(e)):[hu(t)]}function hu(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Pw(t){const e=hu(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Nw(t){const e=hu(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function I_(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function kw(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>I_(e)):[I_(t)]}function Df(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function w_(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function S_(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function at(t){if(t==null)throw new Error("ContentUnion is required");return Df(t)?t:{role:"user",parts:kw(t)}}function Up(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=at(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=at(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>at(n)):[at(e)]}function Ot(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(w_(t)||S_(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[at(t)]}const e=[],n=[],r=Df(t[0]);for(const i of t){const o=Df(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(w_(i)||S_(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:kw(n)}),e}function EL(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(ke).includes(n[0].toUpperCase())?n[0].toUpperCase():ke.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(ke).includes(r.toUpperCase())?r.toUpperCase():ke.TYPE_UNSPECIFIED})}}function qi(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&EL(t.type,e);for(const[s,a]of Object.entries(t))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(ke).includes(a.toUpperCase())?a.toUpperCase():ke.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=qi(a);else if(r.includes(s)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(qi(c))}e[s]=l}else if(i.includes(s)){const l={};for(const[c,h]of Object.entries(a))l[c]=qi(h);e[s]=l}else{if(s==="additionalProperties")continue;e[s]=a}return e}function Fp(t){return qi(t)}function bp(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Op(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Eo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=qi(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=qi(e.response));return t}function To(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function TL(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function $n(t,e){if(typeof e!="string")throw new Error("name must be a string");return TL(t,e,"cachedContents")}function xw(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function kr(t){return Dp(t)}function IL(t){return t!=null&&typeof t=="object"&&"name"in t}function wL(t){return t!=null&&typeof t=="object"&&"video"in t}function SL(t){return t!=null&&typeof t=="object"&&"uri"in t}function Mw(t){var e;let n;if(IL(t)&&(n=t.name),!(SL(t)&&(n=t.uri,n===void 0))&&!(wL(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Dw(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Lw(t){for(const e of["models","tunedModels","publisherModels"])if(CL(t,e))return t[e];return[]}function CL(t,e){return t!==null&&typeof t=="object"&&e in t}function AL(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function RL(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=AL(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function Vw(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function PL(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Uw(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const l=s.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Io(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Fw(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NL(t){const e={},n=u(t,["responsesFile"]);n!=null&&d(e,["fileName"],n);const r=u(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>uV(s))),d(e,["inlinedResponses"],o)}const i=u(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["inlinedEmbedContentResponses"],o)}return e}function kL(t){const e={},n=u(t,["predictionsFormat"]);n!=null&&d(e,["format"],n);const r=u(t,["gcsDestination","outputUriPrefix"]);r!=null&&d(e,["gcsUri"],r);const i=u(t,["bigqueryDestination","outputUri"]);return i!=null&&d(e,["bigqueryUri"],i),e}function xL(t){const e={},n=u(t,["format"]);n!=null&&d(e,["predictionsFormat"],n);const r=u(t,["gcsUri"]);r!=null&&d(e,["gcsDestination","outputUriPrefix"],r);const i=u(t,["bigqueryUri"]);if(i!=null&&d(e,["bigqueryDestination","outputUri"],i),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Il(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const r=u(t,["metadata","displayName"]);r!=null&&d(e,["displayName"],r);const i=u(t,["metadata","state"]);i!=null&&d(e,["state"],Fw(i));const o=u(t,["metadata","createTime"]);o!=null&&d(e,["createTime"],o);const s=u(t,["metadata","endTime"]);s!=null&&d(e,["endTime"],s);const a=u(t,["metadata","updateTime"]);a!=null&&d(e,["updateTime"],a);const l=u(t,["metadata","model"]);l!=null&&d(e,["model"],l);const c=u(t,["metadata","output"]);return c!=null&&d(e,["dest"],NL(Uw(c))),e}function Lf(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const r=u(t,["displayName"]);r!=null&&d(e,["displayName"],r);const i=u(t,["state"]);i!=null&&d(e,["state"],Fw(i));const o=u(t,["error"]);o!=null&&d(e,["error"],o);const s=u(t,["createTime"]);s!=null&&d(e,["createTime"],s);const a=u(t,["startTime"]);a!=null&&d(e,["startTime"],a);const l=u(t,["endTime"]);l!=null&&d(e,["endTime"],l);const c=u(t,["updateTime"]);c!=null&&d(e,["updateTime"],c);const h=u(t,["model"]);h!=null&&d(e,["model"],h);const p=u(t,["inputConfig"]);p!=null&&d(e,["src"],ML(p));const m=u(t,["outputConfig"]);m!=null&&d(e,["dest"],kL(Uw(m)));const v=u(t,["completionStats"]);return v!=null&&d(e,["completionStats"],v),e}function ML(t){const e={},n=u(t,["instancesFormat"]);n!=null&&d(e,["format"],n);const r=u(t,["gcsSource","uris"]);r!=null&&d(e,["gcsUri"],r);const i=u(t,["bigquerySource","inputUri"]);return i!=null&&d(e,["bigqueryUri"],i),e}function DL(t,e){const n={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=u(e,["fileName"]);r!=null&&d(n,["fileName"],r);const i=u(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>lV(t,s))),d(n,["requests","requests"],o)}return n}function LL(t){const e={},n=u(t,["format"]);n!=null&&d(e,["instancesFormat"],n);const r=u(t,["gcsUri"]);r!=null&&d(e,["gcsSource","uris"],r);const i=u(t,["bigqueryUri"]);if(i!=null&&d(e,["bigquerySource","inputUri"],i),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function VL(t){const e={},n=u(t,["data"]);if(n!=null&&d(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function UL(t,e){const n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],Io(t,r)),n}function FL(t,e){const n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],Io(t,r)),n}function bL(t){const e={},n=u(t,["content"]);n!=null&&d(e,["content"],n);const r=u(t,["citationMetadata"]);r!=null&&d(e,["citationMetadata"],OL(r));const i=u(t,["tokenCount"]);i!=null&&d(e,["tokenCount"],i);const o=u(t,["finishReason"]);o!=null&&d(e,["finishReason"],o);const s=u(t,["avgLogprobs"]);s!=null&&d(e,["avgLogprobs"],s);const a=u(t,["groundingMetadata"]);a!=null&&d(e,["groundingMetadata"],a);const l=u(t,["index"]);l!=null&&d(e,["index"],l);const c=u(t,["logprobsResult"]);c!=null&&d(e,["logprobsResult"],c);const h=u(t,["safetyRatings"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(v=>v)),d(e,["safetyRatings"],m)}const p=u(t,["urlContextMetadata"]);return p!=null&&d(e,["urlContextMetadata"],p),e}function OL(t){const e={},n=u(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),d(e,["citations"],r)}return e}function bw(t){const e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>gV(o))),d(e,["parts"],i)}const r=u(t,["role"]);return r!=null&&d(e,["role"],r),e}function BL(t,e){const n={},r=u(t,["displayName"]);if(e!==void 0&&r!=null&&d(e,["batch","displayName"],r),u(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function GL(t,e){const n={},r=u(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const i=u(t,["dest"]);return e!==void 0&&i!=null&&d(e,["outputConfig"],xL(PL(i))),n}function C_(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],ce(t,r));const i=u(e,["src"]);i!=null&&d(n,["batch","inputConfig"],DL(t,Vw(t,i)));const o=u(e,["config"]);return o!=null&&BL(o,n),n}function HL(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["model"],ce(t,r));const i=u(e,["src"]);i!=null&&d(n,["inputConfig"],LL(Vw(t,i)));const o=u(e,["config"]);return o!=null&&GL(o,n),n}function qL(t,e){const n={},r=u(t,["displayName"]);return e!==void 0&&r!=null&&d(e,["batch","displayName"],r),n}function $L(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],ce(t,r));const i=u(e,["src"]);i!=null&&d(n,["batch","inputConfig"],XL(t,i));const o=u(e,["config"]);return o!=null&&qL(o,n),n}function zL(t,e){const n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],Io(t,r)),n}function WL(t,e){const n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],Io(t,r)),n}function KL(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["name"]);r!=null&&d(e,["name"],r);const i=u(t,["done"]);i!=null&&d(e,["done"],i);const o=u(t,["error"]);return o!=null&&d(e,["error"],o),e}function JL(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["name"]);r!=null&&d(e,["name"],r);const i=u(t,["done"]);i!=null&&d(e,["done"],i);const o=u(t,["error"]);return o!=null&&d(e,["error"],o),e}function YL(t,e){const n={},r=u(e,["contents"]);if(r!=null){let o=Up(t,r);Array.isArray(o)&&(o=o.map(s=>s)),d(n,["requests[]","request","content"],o)}const i=u(e,["config"]);return i!=null&&(d(n,["_self"],QL(i,n)),z1(n,{"requests[].*":"requests[].request.*"})),n}function QL(t,e){const n={},r=u(t,["taskType"]);e!==void 0&&r!=null&&d(e,["requests[]","taskType"],r);const i=u(t,["title"]);e!==void 0&&i!=null&&d(e,["requests[]","title"],i);const o=u(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&d(e,["requests[]","outputDimensionality"],o),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function XL(t,e){const n={},r=u(e,["fileName"]);r!=null&&d(n,["file_name"],r);const i=u(e,["inlinedRequests"]);return i!=null&&d(n,["requests"],YL(t,i)),n}function ZL(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function jL(t){const e={},n=u(t,["id"]);n!=null&&d(e,["id"],n);const r=u(t,["args"]);r!=null&&d(e,["args"],r);const i=u(t,["name"]);if(i!=null&&d(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function eV(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&d(e,["allowedFunctionNames"],n);const r=u(t,["mode"]);if(r!=null&&d(e,["mode"],r),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function tV(t,e,n){const r={},i=u(e,["systemInstruction"]);n!==void 0&&i!=null&&d(n,["systemInstruction"],bw(at(i)));const o=u(e,["temperature"]);o!=null&&d(r,["temperature"],o);const s=u(e,["topP"]);s!=null&&d(r,["topP"],s);const a=u(e,["topK"]);a!=null&&d(r,["topK"],a);const l=u(e,["candidateCount"]);l!=null&&d(r,["candidateCount"],l);const c=u(e,["maxOutputTokens"]);c!=null&&d(r,["maxOutputTokens"],c);const h=u(e,["stopSequences"]);h!=null&&d(r,["stopSequences"],h);const p=u(e,["responseLogprobs"]);p!=null&&d(r,["responseLogprobs"],p);const m=u(e,["logprobs"]);m!=null&&d(r,["logprobs"],m);const v=u(e,["presencePenalty"]);v!=null&&d(r,["presencePenalty"],v);const I=u(e,["frequencyPenalty"]);I!=null&&d(r,["frequencyPenalty"],I);const P=u(e,["seed"]);P!=null&&d(r,["seed"],P);const N=u(e,["responseMimeType"]);N!=null&&d(r,["responseMimeType"],N);const w=u(e,["responseSchema"]);w!=null&&d(r,["responseSchema"],Fp(w));const T=u(e,["responseJsonSchema"]);if(T!=null&&d(r,["responseJsonSchema"],T),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=u(e,["safetySettings"]);if(n!==void 0&&C!=null){let k=C;Array.isArray(k)&&(k=k.map(de=>yV(de))),d(n,["safetySettings"],k)}const D=u(e,["tools"]);if(n!==void 0&&D!=null){let k=To(D);Array.isArray(k)&&(k=k.map(de=>_V(Eo(de)))),d(n,["tools"],k)}const b=u(e,["toolConfig"]);if(n!==void 0&&b!=null&&d(n,["toolConfig"],vV(b)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=u(e,["cachedContent"]);n!==void 0&&L!=null&&d(n,["cachedContent"],$n(t,L));const A=u(e,["responseModalities"]);A!=null&&d(r,["responseModalities"],A);const _=u(e,["mediaResolution"]);_!=null&&d(r,["mediaResolution"],_);const S=u(e,["speechConfig"]);if(S!=null&&d(r,["speechConfig"],bp(S)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=u(e,["thinkingConfig"]);R!=null&&d(r,["thinkingConfig"],R);const M=u(e,["imageConfig"]);M!=null&&d(r,["imageConfig"],aV(M));const V=u(e,["enableEnhancedCivicAnswers"]);if(V!=null&&d(r,["enableEnhancedCivicAnswers"],V),u(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function nV(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>bL(c))),d(e,["candidates"],l)}const i=u(t,["modelVersion"]);i!=null&&d(e,["modelVersion"],i);const o=u(t,["promptFeedback"]);o!=null&&d(e,["promptFeedback"],o);const s=u(t,["responseId"]);s!=null&&d(e,["responseId"],s);const a=u(t,["usageMetadata"]);return a!=null&&d(e,["usageMetadata"],a),e}function rV(t,e){const n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],Io(t,r)),n}function iV(t,e){const n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],Io(t,r)),n}function oV(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function sV(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function aV(t){const e={},n=u(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const r=u(t,["imageSize"]);if(r!=null&&d(e,["imageSize"],r),u(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function lV(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["request","model"],ce(t,r));const i=u(e,["contents"]);if(i!=null){let a=Ot(i);Array.isArray(a)&&(a=a.map(l=>bw(l))),d(n,["request","contents"],a)}const o=u(e,["metadata"]);o!=null&&d(n,["metadata"],o);const s=u(e,["config"]);return s!=null&&d(n,["request","generationConfig"],tV(t,s,u(n,["request"],{}))),n}function uV(t){const e={},n=u(t,["response"]);n!=null&&d(e,["response"],nV(n));const r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);const i=u(t,["error"]);return i!=null&&d(e,["error"],i),e}function cV(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);if(e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),u(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function dV(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);e!==void 0&&i!=null&&d(e,["_query","pageToken"],i);const o=u(t,["filter"]);return e!==void 0&&o!=null&&d(e,["_query","filter"],o),n}function fV(t){const e={},n=u(t,["config"]);return n!=null&&cV(n,e),e}function hV(t){const e={},n=u(t,["config"]);return n!=null&&dV(n,e),e}function pV(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=u(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Il(s))),d(e,["batchJobs"],o)}return e}function mV(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=u(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Lf(s))),d(e,["batchJobs"],o)}return e}function gV(t){const e={},n=u(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);const i=u(t,["executableCode"]);i!=null&&d(e,["executableCode"],i);const o=u(t,["fileData"]);o!=null&&d(e,["fileData"],ZL(o));const s=u(t,["functionCall"]);s!=null&&d(e,["functionCall"],jL(s));const a=u(t,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&d(e,["inlineData"],VL(l));const c=u(t,["text"]);c!=null&&d(e,["text"],c);const h=u(t,["thought"]);h!=null&&d(e,["thought"],h);const p=u(t,["thoughtSignature"]);p!=null&&d(e,["thoughtSignature"],p);const m=u(t,["videoMetadata"]);return m!=null&&d(e,["videoMetadata"],m),e}function yV(t){const e={},n=u(t,["category"]);if(n!=null&&d(e,["category"],n),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=u(t,["threshold"]);return r!=null&&d(e,["threshold"],r),e}function vV(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&d(e,["retrievalConfig"],n);const r=u(t,["functionCallingConfig"]);return r!=null&&d(e,["functionCallingConfig"],eV(r)),e}function _V(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const r=u(t,["fileSearch"]);r!=null&&d(e,["fileSearch"],r);const i=u(t,["codeExecution"]);if(i!=null&&d(e,["codeExecution"],i),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=u(t,["functionDeclarations"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(p=>p)),d(e,["functionDeclarations"],h)}const s=u(t,["googleMaps"]);s!=null&&d(e,["googleMaps"],oV(s));const a=u(t,["googleSearch"]);a!=null&&d(e,["googleSearch"],sV(a));const l=u(t,["googleSearchRetrieval"]);l!=null&&d(e,["googleSearchRetrieval"],l);const c=u(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Bn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Bn||(Bn={}));class ai{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EV extends qn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ai(Bn.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=C_(this.apiClient,e),r=n._url,i=$("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(const h of l){const p=Object.assign({},h);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const v=p.request;v.systemInstruction=m,p.request=v}c.push(p)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=HL(this.apiClient,e);return a=$("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Lf(h))}else{const c=C_(this.apiClient,e);return a=$("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Il(h))}}async createEmbeddingsInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=$L(this.apiClient,e);return o=$("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>Il(l))}}async get(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=iV(this.apiClient,e);return a=$("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Lf(h))}else{const c=rV(this.apiClient,e);return a=$("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Il(h))}}async cancel(e){var n,r,i,o;let s="",a={};if(this.apiClient.isVertexAI()){const l=FL(this.apiClient,e);s=$("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=UL(this.apiClient,e);s=$("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=hV(e);return a=$("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=mV(h),m=new T_;return Object.assign(m,p),m})}else{const c=fV(e);return a=$("batches",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=pV(h),m=new T_;return Object.assign(m,p),m})}}async delete(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=WL(this.apiClient,e);return a=$("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>JL(h))}else{const c=zL(this.apiClient,e);return a=$("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>KL(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TV(t){const e={},n=u(t,["data"]);if(n!=null&&d(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function A_(t){const e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>$V(o))),d(e,["parts"],i)}const r=u(t,["role"]);return r!=null&&d(e,["role"],r),e}function IV(t,e){const n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const i=u(t,["expireTime"]);e!==void 0&&i!=null&&d(e,["expireTime"],i);const o=u(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const s=u(t,["contents"]);if(e!==void 0&&s!=null){let h=Ot(s);Array.isArray(h)&&(h=h.map(p=>A_(p))),d(e,["contents"],h)}const a=u(t,["systemInstruction"]);e!==void 0&&a!=null&&d(e,["systemInstruction"],A_(at(a)));const l=u(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>WV(p))),d(e,["tools"],h)}const c=u(t,["toolConfig"]);if(e!==void 0&&c!=null&&d(e,["toolConfig"],zV(c)),u(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function wV(t,e){const n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const i=u(t,["expireTime"]);e!==void 0&&i!=null&&d(e,["expireTime"],i);const o=u(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const s=u(t,["contents"]);if(e!==void 0&&s!=null){let p=Ot(s);Array.isArray(p)&&(p=p.map(m=>m)),d(e,["contents"],p)}const a=u(t,["systemInstruction"]);e!==void 0&&a!=null&&d(e,["systemInstruction"],at(a));const l=u(t,["tools"]);if(e!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(m=>KV(m))),d(e,["tools"],p)}const c=u(t,["toolConfig"]);e!==void 0&&c!=null&&d(e,["toolConfig"],c);const h=u(t,["kmsKeyName"]);return e!==void 0&&h!=null&&d(e,["encryption_spec","kmsKeyName"],h),n}function SV(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["model"],Aw(t,r));const i=u(e,["config"]);return i!=null&&IV(i,n),n}function CV(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["model"],Aw(t,r));const i=u(e,["config"]);return i!=null&&wV(i,n),n}function AV(t,e){const n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],$n(t,r)),n}function RV(t,e){const n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],$n(t,r)),n}function PV(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function NV(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function kV(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function xV(t){const e={},n=u(t,["id"]);n!=null&&d(e,["id"],n);const r=u(t,["args"]);r!=null&&d(e,["args"],r);const i=u(t,["name"]);if(i!=null&&d(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function MV(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&d(e,["allowedFunctionNames"],n);const r=u(t,["mode"]);if(r!=null&&d(e,["mode"],r),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function DV(t){const e={},n=u(t,["description"]);n!=null&&d(e,["description"],n);const r=u(t,["name"]);r!=null&&d(e,["name"],r);const i=u(t,["parameters"]);i!=null&&d(e,["parameters"],i);const o=u(t,["parametersJsonSchema"]);o!=null&&d(e,["parametersJsonSchema"],o);const s=u(t,["response"]);s!=null&&d(e,["response"],s);const a=u(t,["responseJsonSchema"]);if(a!=null&&d(e,["responseJsonSchema"],a),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function LV(t,e){const n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],$n(t,r)),n}function VV(t,e){const n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],$n(t,r)),n}function UV(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function FV(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function bV(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),n}function OV(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),n}function BV(t){const e={},n=u(t,["config"]);return n!=null&&bV(n,e),e}function GV(t){const e={},n=u(t,["config"]);return n!=null&&OV(n,e),e}function HV(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=u(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["cachedContents"],o)}return e}function qV(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=u(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["cachedContents"],o)}return e}function $V(t){const e={},n=u(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);const i=u(t,["executableCode"]);i!=null&&d(e,["executableCode"],i);const o=u(t,["fileData"]);o!=null&&d(e,["fileData"],kV(o));const s=u(t,["functionCall"]);s!=null&&d(e,["functionCall"],xV(s));const a=u(t,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&d(e,["inlineData"],TV(l));const c=u(t,["text"]);c!=null&&d(e,["text"],c);const h=u(t,["thought"]);h!=null&&d(e,["thought"],h);const p=u(t,["thoughtSignature"]);p!=null&&d(e,["thoughtSignature"],p);const m=u(t,["videoMetadata"]);return m!=null&&d(e,["videoMetadata"],m),e}function zV(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&d(e,["retrievalConfig"],n);const r=u(t,["functionCallingConfig"]);return r!=null&&d(e,["functionCallingConfig"],MV(r)),e}function WV(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const r=u(t,["fileSearch"]);r!=null&&d(e,["fileSearch"],r);const i=u(t,["codeExecution"]);if(i!=null&&d(e,["codeExecution"],i),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=u(t,["functionDeclarations"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(p=>p)),d(e,["functionDeclarations"],h)}const s=u(t,["googleMaps"]);s!=null&&d(e,["googleMaps"],UV(s));const a=u(t,["googleSearch"]);a!=null&&d(e,["googleSearch"],FV(a));const l=u(t,["googleSearchRetrieval"]);l!=null&&d(e,["googleSearchRetrieval"],l);const c=u(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}function KV(t){const e={},n=u(t,["retrieval"]);n!=null&&d(e,["retrieval"],n);const r=u(t,["computerUse"]);if(r!=null&&d(e,["computerUse"],r),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=u(t,["codeExecution"]);i!=null&&d(e,["codeExecution"],i);const o=u(t,["enterpriseWebSearch"]);o!=null&&d(e,["enterpriseWebSearch"],o);const s=u(t,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>DV(m))),d(e,["functionDeclarations"],p)}const a=u(t,["googleMaps"]);a!=null&&d(e,["googleMaps"],a);const l=u(t,["googleSearch"]);l!=null&&d(e,["googleSearch"],l);const c=u(t,["googleSearchRetrieval"]);c!=null&&d(e,["googleSearchRetrieval"],c);const h=u(t,["urlContext"]);return h!=null&&d(e,["urlContext"],h),e}function JV(t,e){const n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const i=u(t,["expireTime"]);return e!==void 0&&i!=null&&d(e,["expireTime"],i),n}function YV(t,e){const n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const i=u(t,["expireTime"]);return e!==void 0&&i!=null&&d(e,["expireTime"],i),n}function QV(t,e){const n={},r=u(e,["name"]);r!=null&&d(n,["_url","name"],$n(t,r));const i=u(e,["config"]);return i!=null&&JV(i,n),n}function XV(t,e){const n={},r=u(e,["name"]);r!=null&&d(n,["_url","name"],$n(t,r));const i=u(e,["config"]);return i!=null&&YV(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZV extends qn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ai(Bn.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=CV(this.apiClient,e);return a=$("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const c=SV(this.apiClient,e);return a=$("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async get(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=VV(this.apiClient,e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const c=LV(this.apiClient,e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=RV(this.apiClient,e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=NV(h),m=new __;return Object.assign(m,p),m})}else{const c=AV(this.apiClient,e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=PV(h),m=new __;return Object.assign(m,p),m})}}async update(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=XV(this.apiClient,e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const c=QV(this.apiClient,e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=GV(e);return a=$("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=qV(h),m=new E_;return Object.assign(m,p),m})}else{const c=BV(e);return a=$("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=HV(h),m=new E_;return Object.assign(m,p),m})}}}function pu(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function R_(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Z(t){return this instanceof Z?(this.v=t,this):new Z(t)}function Zt(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(v){return function(I){return Promise.resolve(I).then(v,p)}}function a(v,I){r[v]&&(i[v]=function(P){return new Promise(function(N,w){o.push([v,P,N,w])>1||l(v,P)})},I&&(i[v]=I(i[v])))}function l(v,I){try{c(r[v](I))}catch(P){m(o[0][3],P)}}function c(v){v.value instanceof Z?Promise.resolve(v.value.v).then(h,p):m(o[0][2],v)}function h(v){l("next",v)}function p(v){l("throw",v)}function m(v,I){v(I),o.shift(),o.length&&l(o[0][0],o[0][1])}}function jt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof R_=="function"?R_(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,l){s=t[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jV(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Ow(n)}function Ow(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function eU(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function P_(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!Ow(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class tU{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new nU(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class nU{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),eU(o)}async sendMessage(e){var n;await this.sendPromise;const r=at(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,a;const l=await i,c=(s=(o=l.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,h=l.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];h!=null&&(m=(a=h.slice(p))!==null&&a!==void 0?a:[]);const v=c?[c]:[];this.recordHistory(r,v,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=at(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?P_(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Zt(this,arguments,function*(){var i,o,s,a,l,c;const h=[];try{for(var p=!0,m=jt(e),v;v=yield Z(m.next()),i=v.done,!i;p=!0){a=v.value,p=!1;const I=a;if(jV(I)){const P=(c=(l=I.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;P!==void 0&&h.push(P)}yield yield Z(I)}}catch(I){o={error:I}}finally{try{!p&&!i&&(s=m.return)&&(yield Z(s.call(m)))}finally{if(o)throw o.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...P_(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $s extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,$s.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rU(t){const e={},n=u(t,["file"]);return n!=null&&d(e,["file"],n),e}function iU(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function oU(t){const e={},n=u(t,["name"]);return n!=null&&d(e,["_url","file"],Mw(n)),e}function sU(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function aU(t){const e={},n=u(t,["name"]);return n!=null&&d(e,["_url","file"],Mw(n)),e}function lU(t){const e={},n=u(t,["uris"]);return n!=null&&d(e,["uris"],n),e}function uU(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),n}function cU(t){const e={},n=u(t,["config"]);return n!=null&&uU(n,e),e}function dU(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=u(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["files"],o)}return e}function fU(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),d(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hU extends qn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ai(Bn.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=cU(e);return o=$("files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const c=dU(l),h=new pL;return Object.assign(h,c),h})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=rU(e);return o=$("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=iU(l),h=new mL;return Object.assign(h,c),h})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=aU(e);return o=$("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=oU(e);return o=$("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const c=sU(l),h=new gL;return Object.assign(h,c),h})}}async registerFilesInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=lU(e);return o=$("files:register",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=fU(l),h=new yL;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wl(t){const e={},n=u(t,["data"]);if(n!=null&&d(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function pU(t){const e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>kU(o))),d(e,["parts"],i)}const r=u(t,["role"]);return r!=null&&d(e,["role"],r),e}function mU(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function gU(t){const e={},n=u(t,["id"]);n!=null&&d(e,["id"],n);const r=u(t,["args"]);r!=null&&d(e,["args"],r);const i=u(t,["name"]);if(i!=null&&d(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function yU(t){const e={},n=u(t,["description"]);n!=null&&d(e,["description"],n);const r=u(t,["name"]);r!=null&&d(e,["name"],r);const i=u(t,["parameters"]);i!=null&&d(e,["parameters"],i);const o=u(t,["parametersJsonSchema"]);o!=null&&d(e,["parametersJsonSchema"],o);const s=u(t,["response"]);s!=null&&d(e,["response"],s);const a=u(t,["responseJsonSchema"]);if(a!=null&&d(e,["responseJsonSchema"],a),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function vU(t){const e={},n=u(t,["modelSelectionConfig"]);n!=null&&d(e,["modelConfig"],n);const r=u(t,["responseJsonSchema"]);r!=null&&d(e,["responseJsonSchema"],r);const i=u(t,["audioTimestamp"]);i!=null&&d(e,["audioTimestamp"],i);const o=u(t,["candidateCount"]);o!=null&&d(e,["candidateCount"],o);const s=u(t,["enableAffectiveDialog"]);s!=null&&d(e,["enableAffectiveDialog"],s);const a=u(t,["frequencyPenalty"]);a!=null&&d(e,["frequencyPenalty"],a);const l=u(t,["logprobs"]);l!=null&&d(e,["logprobs"],l);const c=u(t,["maxOutputTokens"]);c!=null&&d(e,["maxOutputTokens"],c);const h=u(t,["mediaResolution"]);h!=null&&d(e,["mediaResolution"],h);const p=u(t,["presencePenalty"]);p!=null&&d(e,["presencePenalty"],p);const m=u(t,["responseLogprobs"]);m!=null&&d(e,["responseLogprobs"],m);const v=u(t,["responseMimeType"]);v!=null&&d(e,["responseMimeType"],v);const I=u(t,["responseModalities"]);I!=null&&d(e,["responseModalities"],I);const P=u(t,["responseSchema"]);P!=null&&d(e,["responseSchema"],P);const N=u(t,["routingConfig"]);N!=null&&d(e,["routingConfig"],N);const w=u(t,["seed"]);w!=null&&d(e,["seed"],w);const T=u(t,["speechConfig"]);T!=null&&d(e,["speechConfig"],T);const C=u(t,["stopSequences"]);C!=null&&d(e,["stopSequences"],C);const D=u(t,["temperature"]);D!=null&&d(e,["temperature"],D);const b=u(t,["thinkingConfig"]);b!=null&&d(e,["thinkingConfig"],b);const L=u(t,["topK"]);L!=null&&d(e,["topK"],L);const A=u(t,["topP"]);if(A!=null&&d(e,["topP"],A),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function _U(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function EU(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function TU(t,e){const n={},r=u(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],r);const i=u(t,["responseModalities"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig","responseModalities"],i);const o=u(t,["temperature"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","temperature"],o);const s=u(t,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);const a=u(t,["topK"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","topK"],a);const l=u(t,["maxOutputTokens"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","maxOutputTokens"],l);const c=u(t,["mediaResolution"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","mediaResolution"],c);const h=u(t,["seed"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","seed"],h);const p=u(t,["speechConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","speechConfig"],Op(p));const m=u(t,["thinkingConfig"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","thinkingConfig"],m);const v=u(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],v);const I=u(t,["systemInstruction"]);e!==void 0&&I!=null&&d(e,["setup","systemInstruction"],pU(at(I)));const P=u(t,["tools"]);if(e!==void 0&&P!=null){let L=To(P);Array.isArray(L)&&(L=L.map(A=>MU(Eo(A)))),d(e,["setup","tools"],L)}const N=u(t,["sessionResumption"]);e!==void 0&&N!=null&&d(e,["setup","sessionResumption"],xU(N));const w=u(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&d(e,["setup","inputAudioTranscription"],w);const T=u(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&d(e,["setup","outputAudioTranscription"],T);const C=u(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&d(e,["setup","realtimeInputConfig"],C);const D=u(t,["contextWindowCompression"]);e!==void 0&&D!=null&&d(e,["setup","contextWindowCompression"],D);const b=u(t,["proactivity"]);if(e!==void 0&&b!=null&&d(e,["setup","proactivity"],b),u(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function IU(t,e){const n={},r=u(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],vU(r));const i=u(t,["responseModalities"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig","responseModalities"],i);const o=u(t,["temperature"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","temperature"],o);const s=u(t,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);const a=u(t,["topK"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","topK"],a);const l=u(t,["maxOutputTokens"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","maxOutputTokens"],l);const c=u(t,["mediaResolution"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","mediaResolution"],c);const h=u(t,["seed"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","seed"],h);const p=u(t,["speechConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","speechConfig"],Op(p));const m=u(t,["thinkingConfig"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","thinkingConfig"],m);const v=u(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],v);const I=u(t,["systemInstruction"]);e!==void 0&&I!=null&&d(e,["setup","systemInstruction"],at(I));const P=u(t,["tools"]);if(e!==void 0&&P!=null){let A=To(P);Array.isArray(A)&&(A=A.map(_=>DU(Eo(_)))),d(e,["setup","tools"],A)}const N=u(t,["sessionResumption"]);e!==void 0&&N!=null&&d(e,["setup","sessionResumption"],N);const w=u(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&d(e,["setup","inputAudioTranscription"],w);const T=u(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&d(e,["setup","outputAudioTranscription"],T);const C=u(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&d(e,["setup","realtimeInputConfig"],C);const D=u(t,["contextWindowCompression"]);e!==void 0&&D!=null&&d(e,["setup","contextWindowCompression"],D);const b=u(t,["proactivity"]);e!==void 0&&b!=null&&d(e,["setup","proactivity"],b);const L=u(t,["explicitVadSignal"]);return e!==void 0&&L!=null&&d(e,["setup","explicitVadSignal"],L),n}function wU(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["setup","model"],ce(t,r));const i=u(e,["config"]);return i!=null&&d(n,["config"],TU(i,n)),n}function SU(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["setup","model"],ce(t,r));const i=u(e,["config"]);return i!=null&&d(n,["config"],IU(i,n)),n}function CU(t){const e={},n=u(t,["musicGenerationConfig"]);return n!=null&&d(e,["musicGenerationConfig"],n),e}function AU(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),d(e,["weightedPrompts"],r)}return e}function RU(t){const e={},n=u(t,["media"]);if(n!=null){let c=Rw(n);Array.isArray(c)&&(c=c.map(h=>wl(h))),d(e,["mediaChunks"],c)}const r=u(t,["audio"]);r!=null&&d(e,["audio"],wl(Nw(r)));const i=u(t,["audioStreamEnd"]);i!=null&&d(e,["audioStreamEnd"],i);const o=u(t,["video"]);o!=null&&d(e,["video"],wl(Pw(o)));const s=u(t,["text"]);s!=null&&d(e,["text"],s);const a=u(t,["activityStart"]);a!=null&&d(e,["activityStart"],a);const l=u(t,["activityEnd"]);return l!=null&&d(e,["activityEnd"],l),e}function PU(t){const e={},n=u(t,["media"]);if(n!=null){let c=Rw(n);Array.isArray(c)&&(c=c.map(h=>h)),d(e,["mediaChunks"],c)}const r=u(t,["audio"]);r!=null&&d(e,["audio"],Nw(r));const i=u(t,["audioStreamEnd"]);i!=null&&d(e,["audioStreamEnd"],i);const o=u(t,["video"]);o!=null&&d(e,["video"],Pw(o));const s=u(t,["text"]);s!=null&&d(e,["text"],s);const a=u(t,["activityStart"]);a!=null&&d(e,["activityStart"],a);const l=u(t,["activityEnd"]);return l!=null&&d(e,["activityEnd"],l),e}function NU(t){const e={},n=u(t,["setupComplete"]);n!=null&&d(e,["setupComplete"],n);const r=u(t,["serverContent"]);r!=null&&d(e,["serverContent"],r);const i=u(t,["toolCall"]);i!=null&&d(e,["toolCall"],i);const o=u(t,["toolCallCancellation"]);o!=null&&d(e,["toolCallCancellation"],o);const s=u(t,["usageMetadata"]);s!=null&&d(e,["usageMetadata"],LU(s));const a=u(t,["goAway"]);a!=null&&d(e,["goAway"],a);const l=u(t,["sessionResumptionUpdate"]);l!=null&&d(e,["sessionResumptionUpdate"],l);const c=u(t,["voiceActivityDetectionSignal"]);c!=null&&d(e,["voiceActivityDetectionSignal"],c);const h=u(t,["voiceActivity"]);return h!=null&&d(e,["voiceActivity"],VU(h)),e}function kU(t){const e={},n=u(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);const i=u(t,["executableCode"]);i!=null&&d(e,["executableCode"],i);const o=u(t,["fileData"]);o!=null&&d(e,["fileData"],mU(o));const s=u(t,["functionCall"]);s!=null&&d(e,["functionCall"],gU(s));const a=u(t,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&d(e,["inlineData"],wl(l));const c=u(t,["text"]);c!=null&&d(e,["text"],c);const h=u(t,["thought"]);h!=null&&d(e,["thought"],h);const p=u(t,["thoughtSignature"]);p!=null&&d(e,["thoughtSignature"],p);const m=u(t,["videoMetadata"]);return m!=null&&d(e,["videoMetadata"],m),e}function xU(t){const e={},n=u(t,["handle"]);if(n!=null&&d(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function MU(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const r=u(t,["fileSearch"]);r!=null&&d(e,["fileSearch"],r);const i=u(t,["codeExecution"]);if(i!=null&&d(e,["codeExecution"],i),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=u(t,["functionDeclarations"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(p=>p)),d(e,["functionDeclarations"],h)}const s=u(t,["googleMaps"]);s!=null&&d(e,["googleMaps"],_U(s));const a=u(t,["googleSearch"]);a!=null&&d(e,["googleSearch"],EU(a));const l=u(t,["googleSearchRetrieval"]);l!=null&&d(e,["googleSearchRetrieval"],l);const c=u(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}function DU(t){const e={},n=u(t,["retrieval"]);n!=null&&d(e,["retrieval"],n);const r=u(t,["computerUse"]);if(r!=null&&d(e,["computerUse"],r),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=u(t,["codeExecution"]);i!=null&&d(e,["codeExecution"],i);const o=u(t,["enterpriseWebSearch"]);o!=null&&d(e,["enterpriseWebSearch"],o);const s=u(t,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>yU(m))),d(e,["functionDeclarations"],p)}const a=u(t,["googleMaps"]);a!=null&&d(e,["googleMaps"],a);const l=u(t,["googleSearch"]);l!=null&&d(e,["googleSearch"],l);const c=u(t,["googleSearchRetrieval"]);c!=null&&d(e,["googleSearchRetrieval"],c);const h=u(t,["urlContext"]);return h!=null&&d(e,["urlContext"],h),e}function LU(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&d(e,["promptTokenCount"],n);const r=u(t,["cachedContentTokenCount"]);r!=null&&d(e,["cachedContentTokenCount"],r);const i=u(t,["candidatesTokenCount"]);i!=null&&d(e,["responseTokenCount"],i);const o=u(t,["toolUsePromptTokenCount"]);o!=null&&d(e,["toolUsePromptTokenCount"],o);const s=u(t,["thoughtsTokenCount"]);s!=null&&d(e,["thoughtsTokenCount"],s);const a=u(t,["totalTokenCount"]);a!=null&&d(e,["totalTokenCount"],a);const l=u(t,["promptTokensDetails"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(I=>I)),d(e,["promptTokensDetails"],v)}const c=u(t,["cacheTokensDetails"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(I=>I)),d(e,["cacheTokensDetails"],v)}const h=u(t,["candidatesTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(I=>I)),d(e,["responseTokensDetails"],v)}const p=u(t,["toolUsePromptTokensDetails"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(I=>I)),d(e,["toolUsePromptTokensDetails"],v)}const m=u(t,["trafficType"]);return m!=null&&d(e,["trafficType"],m),e}function VU(t){const e={},n=u(t,["type"]);return n!=null&&d(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UU(t,e){const n={},r=u(t,["data"]);if(r!=null&&d(n,["data"],r),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=u(t,["mimeType"]);return i!=null&&d(n,["mimeType"],i),n}function FU(t,e){const n={},r=u(t,["content"]);r!=null&&d(n,["content"],r);const i=u(t,["citationMetadata"]);i!=null&&d(n,["citationMetadata"],bU(i));const o=u(t,["tokenCount"]);o!=null&&d(n,["tokenCount"],o);const s=u(t,["finishReason"]);s!=null&&d(n,["finishReason"],s);const a=u(t,["avgLogprobs"]);a!=null&&d(n,["avgLogprobs"],a);const l=u(t,["groundingMetadata"]);l!=null&&d(n,["groundingMetadata"],l);const c=u(t,["index"]);c!=null&&d(n,["index"],c);const h=u(t,["logprobsResult"]);h!=null&&d(n,["logprobsResult"],h);const p=u(t,["safetyRatings"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(I=>I)),d(n,["safetyRatings"],v)}const m=u(t,["urlContextMetadata"]);return m!=null&&d(n,["urlContextMetadata"],m),n}function bU(t,e){const n={},r=u(t,["citationSources"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),d(n,["citations"],i)}return n}function OU(t,e,n){const r={},i=u(e,["model"]);i!=null&&d(r,["_url","model"],ce(t,i));const o=u(e,["contents"]);if(o!=null){let s=Ot(o);Array.isArray(s)&&(s=s.map(a=>a)),d(r,["contents"],s)}return r}function BU(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=u(t,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(n,["tokensInfo"],o)}return n}function GU(t,e){const n={},r=u(t,["values"]);r!=null&&d(n,["values"],r);const i=u(t,["statistics"]);return i!=null&&d(n,["statistics"],HU(i)),n}function HU(t,e){const n={},r=u(t,["truncated"]);r!=null&&d(n,["truncated"],r);const i=u(t,["token_count"]);return i!=null&&d(n,["tokenCount"],i),n}function Xu(t,e){const n={},r=u(t,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>XF(s))),d(n,["parts"],o)}const i=u(t,["role"]);return i!=null&&d(n,["role"],i),n}function qU(t,e){const n={},r=u(t,["controlType"]);r!=null&&d(n,["controlType"],r);const i=u(t,["enableControlImageComputation"]);return i!=null&&d(n,["computeControl"],i),n}function $U(t,e){const n={};if(u(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function zU(t,e,n){const r={},i=u(t,["systemInstruction"]);e!==void 0&&i!=null&&d(e,["systemInstruction"],at(i));const o=u(t,["tools"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>qw(l))),d(e,["tools"],a)}const s=u(t,["generationConfig"]);return e!==void 0&&s!=null&&d(e,["generationConfig"],UF(s)),r}function WU(t,e,n){const r={},i=u(e,["model"]);i!=null&&d(r,["_url","model"],ce(t,i));const o=u(e,["contents"]);if(o!=null){let a=Ot(o);Array.isArray(a)&&(a=a.map(l=>Xu(l))),d(r,["contents"],a)}const s=u(e,["config"]);return s!=null&&$U(s),r}function KU(t,e,n){const r={},i=u(e,["model"]);i!=null&&d(r,["_url","model"],ce(t,i));const o=u(e,["contents"]);if(o!=null){let a=Ot(o);Array.isArray(a)&&(a=a.map(l=>l)),d(r,["contents"],a)}const s=u(e,["config"]);return s!=null&&zU(s,r),r}function JU(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=u(t,["totalTokens"]);i!=null&&d(n,["totalTokens"],i);const o=u(t,["cachedContentTokenCount"]);return o!=null&&d(n,["cachedContentTokenCount"],o),n}function YU(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=u(t,["totalTokens"]);return i!=null&&d(n,["totalTokens"],i),n}function QU(t,e,n){const r={},i=u(e,["model"]);return i!=null&&d(r,["_url","name"],ce(t,i)),r}function XU(t,e,n){const r={},i=u(e,["model"]);return i!=null&&d(r,["_url","name"],ce(t,i)),r}function ZU(t,e){const n={},r=u(t,["sdkHttpResponse"]);return r!=null&&d(n,["sdkHttpResponse"],r),n}function jU(t,e){const n={},r=u(t,["sdkHttpResponse"]);return r!=null&&d(n,["sdkHttpResponse"],r),n}function eF(t,e,n){const r={},i=u(t,["outputGcsUri"]);e!==void 0&&i!=null&&d(e,["parameters","storageUri"],i);const o=u(t,["negativePrompt"]);e!==void 0&&o!=null&&d(e,["parameters","negativePrompt"],o);const s=u(t,["numberOfImages"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);const a=u(t,["aspectRatio"]);e!==void 0&&a!=null&&d(e,["parameters","aspectRatio"],a);const l=u(t,["guidanceScale"]);e!==void 0&&l!=null&&d(e,["parameters","guidanceScale"],l);const c=u(t,["seed"]);e!==void 0&&c!=null&&d(e,["parameters","seed"],c);const h=u(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&d(e,["parameters","safetySetting"],h);const p=u(t,["personGeneration"]);e!==void 0&&p!=null&&d(e,["parameters","personGeneration"],p);const m=u(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&d(e,["parameters","includeSafetyAttributes"],m);const v=u(t,["includeRaiReason"]);e!==void 0&&v!=null&&d(e,["parameters","includeRaiReason"],v);const I=u(t,["language"]);e!==void 0&&I!=null&&d(e,["parameters","language"],I);const P=u(t,["outputMimeType"]);e!==void 0&&P!=null&&d(e,["parameters","outputOptions","mimeType"],P);const N=u(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&d(e,["parameters","outputOptions","compressionQuality"],N);const w=u(t,["addWatermark"]);e!==void 0&&w!=null&&d(e,["parameters","addWatermark"],w);const T=u(t,["labels"]);e!==void 0&&T!=null&&d(e,["labels"],T);const C=u(t,["editMode"]);e!==void 0&&C!=null&&d(e,["parameters","editMode"],C);const D=u(t,["baseSteps"]);return e!==void 0&&D!=null&&d(e,["parameters","editConfig","baseSteps"],D),r}function tF(t,e,n){const r={},i=u(e,["model"]);i!=null&&d(r,["_url","model"],ce(t,i));const o=u(e,["prompt"]);o!=null&&d(r,["instances[0]","prompt"],o);const s=u(e,["referenceImages"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>rb(c))),d(r,["instances[0]","referenceImages"],l)}const a=u(e,["config"]);return a!=null&&eF(a,r),r}function nF(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=u(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Zu(s))),d(n,["generatedImages"],o)}return n}function rF(t,e,n){const r={},i=u(t,["taskType"]);e!==void 0&&i!=null&&d(e,["requests[]","taskType"],i);const o=u(t,["title"]);e!==void 0&&o!=null&&d(e,["requests[]","title"],o);const s=u(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&d(e,["requests[]","outputDimensionality"],s),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function iF(t,e,n){const r={},i=u(t,["taskType"]);e!==void 0&&i!=null&&d(e,["instances[]","task_type"],i);const o=u(t,["title"]);e!==void 0&&o!=null&&d(e,["instances[]","title"],o);const s=u(t,["outputDimensionality"]);e!==void 0&&s!=null&&d(e,["parameters","outputDimensionality"],s);const a=u(t,["mimeType"]);e!==void 0&&a!=null&&d(e,["instances[]","mimeType"],a);const l=u(t,["autoTruncate"]);return e!==void 0&&l!=null&&d(e,["parameters","autoTruncate"],l),r}function oF(t,e,n){const r={},i=u(e,["model"]);i!=null&&d(r,["_url","model"],ce(t,i));const o=u(e,["contents"]);if(o!=null){let l=Up(t,o);Array.isArray(l)&&(l=l.map(c=>c)),d(r,["requests[]","content"],l)}const s=u(e,["config"]);s!=null&&rF(s,r);const a=u(e,["model"]);return a!==void 0&&d(r,["requests[]","model"],ce(t,a)),r}function sF(t,e,n){const r={},i=u(e,["model"]);i!=null&&d(r,["_url","model"],ce(t,i));const o=u(e,["contents"]);if(o!=null){let a=Up(t,o);Array.isArray(a)&&(a=a.map(l=>l)),d(r,["instances[]","content"],a)}const s=u(e,["config"]);return s!=null&&iF(s,r),r}function aF(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=u(t,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),d(n,["embeddings"],s)}const o=u(t,["metadata"]);return o!=null&&d(n,["metadata"],o),n}function lF(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=u(t,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>GU(a))),d(n,["embeddings"],s)}const o=u(t,["metadata"]);return o!=null&&d(n,["metadata"],o),n}function uF(t,e){const n={},r=u(t,["endpoint"]);r!=null&&d(n,["name"],r);const i=u(t,["deployedModelId"]);return i!=null&&d(n,["deployedModelId"],i),n}function cF(t,e){const n={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["fileUri"]);r!=null&&d(n,["fileUri"],r);const i=u(t,["mimeType"]);return i!=null&&d(n,["mimeType"],i),n}function dF(t,e){const n={},r=u(t,["id"]);r!=null&&d(n,["id"],r);const i=u(t,["args"]);i!=null&&d(n,["args"],i);const o=u(t,["name"]);if(o!=null&&d(n,["name"],o),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function fF(t,e){const n={},r=u(t,["allowedFunctionNames"]);r!=null&&d(n,["allowedFunctionNames"],r);const i=u(t,["mode"]);if(i!=null&&d(n,["mode"],i),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function hF(t,e){const n={},r=u(t,["description"]);r!=null&&d(n,["description"],r);const i=u(t,["name"]);i!=null&&d(n,["name"],i);const o=u(t,["parameters"]);o!=null&&d(n,["parameters"],o);const s=u(t,["parametersJsonSchema"]);s!=null&&d(n,["parametersJsonSchema"],s);const a=u(t,["response"]);a!=null&&d(n,["response"],a);const l=u(t,["responseJsonSchema"]);if(l!=null&&d(n,["responseJsonSchema"],l),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function pF(t,e,n,r){const i={},o=u(e,["systemInstruction"]);n!==void 0&&o!=null&&d(n,["systemInstruction"],Xu(at(o)));const s=u(e,["temperature"]);s!=null&&d(i,["temperature"],s);const a=u(e,["topP"]);a!=null&&d(i,["topP"],a);const l=u(e,["topK"]);l!=null&&d(i,["topK"],l);const c=u(e,["candidateCount"]);c!=null&&d(i,["candidateCount"],c);const h=u(e,["maxOutputTokens"]);h!=null&&d(i,["maxOutputTokens"],h);const p=u(e,["stopSequences"]);p!=null&&d(i,["stopSequences"],p);const m=u(e,["responseLogprobs"]);m!=null&&d(i,["responseLogprobs"],m);const v=u(e,["logprobs"]);v!=null&&d(i,["logprobs"],v);const I=u(e,["presencePenalty"]);I!=null&&d(i,["presencePenalty"],I);const P=u(e,["frequencyPenalty"]);P!=null&&d(i,["frequencyPenalty"],P);const N=u(e,["seed"]);N!=null&&d(i,["seed"],N);const w=u(e,["responseMimeType"]);w!=null&&d(i,["responseMimeType"],w);const T=u(e,["responseSchema"]);T!=null&&d(i,["responseSchema"],Fp(T));const C=u(e,["responseJsonSchema"]);if(C!=null&&d(i,["responseJsonSchema"],C),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=u(e,["safetySettings"]);if(n!==void 0&&D!=null){let de=D;Array.isArray(de)&&(de=de.map(vt=>ib(vt))),d(n,["safetySettings"],de)}const b=u(e,["tools"]);if(n!==void 0&&b!=null){let de=To(b);Array.isArray(de)&&(de=de.map(vt=>db(Eo(vt)))),d(n,["tools"],de)}const L=u(e,["toolConfig"]);if(n!==void 0&&L!=null&&d(n,["toolConfig"],cb(L)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=u(e,["cachedContent"]);n!==void 0&&A!=null&&d(n,["cachedContent"],$n(t,A));const _=u(e,["responseModalities"]);_!=null&&d(i,["responseModalities"],_);const S=u(e,["mediaResolution"]);S!=null&&d(i,["mediaResolution"],S);const R=u(e,["speechConfig"]);if(R!=null&&d(i,["speechConfig"],bp(R)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=u(e,["thinkingConfig"]);M!=null&&d(i,["thinkingConfig"],M);const V=u(e,["imageConfig"]);V!=null&&d(i,["imageConfig"],GF(V));const k=u(e,["enableEnhancedCivicAnswers"]);if(k!=null&&d(i,["enableEnhancedCivicAnswers"],k),u(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function mF(t,e,n,r){const i={},o=u(e,["systemInstruction"]);n!==void 0&&o!=null&&d(n,["systemInstruction"],at(o));const s=u(e,["temperature"]);s!=null&&d(i,["temperature"],s);const a=u(e,["topP"]);a!=null&&d(i,["topP"],a);const l=u(e,["topK"]);l!=null&&d(i,["topK"],l);const c=u(e,["candidateCount"]);c!=null&&d(i,["candidateCount"],c);const h=u(e,["maxOutputTokens"]);h!=null&&d(i,["maxOutputTokens"],h);const p=u(e,["stopSequences"]);p!=null&&d(i,["stopSequences"],p);const m=u(e,["responseLogprobs"]);m!=null&&d(i,["responseLogprobs"],m);const v=u(e,["logprobs"]);v!=null&&d(i,["logprobs"],v);const I=u(e,["presencePenalty"]);I!=null&&d(i,["presencePenalty"],I);const P=u(e,["frequencyPenalty"]);P!=null&&d(i,["frequencyPenalty"],P);const N=u(e,["seed"]);N!=null&&d(i,["seed"],N);const w=u(e,["responseMimeType"]);w!=null&&d(i,["responseMimeType"],w);const T=u(e,["responseSchema"]);T!=null&&d(i,["responseSchema"],Fp(T));const C=u(e,["responseJsonSchema"]);C!=null&&d(i,["responseJsonSchema"],C);const D=u(e,["routingConfig"]);D!=null&&d(i,["routingConfig"],D);const b=u(e,["modelSelectionConfig"]);b!=null&&d(i,["modelConfig"],b);const L=u(e,["safetySettings"]);if(n!==void 0&&L!=null){let q=L;Array.isArray(q)&&(q=q.map(Y=>Y)),d(n,["safetySettings"],q)}const A=u(e,["tools"]);if(n!==void 0&&A!=null){let q=To(A);Array.isArray(q)&&(q=q.map(Y=>qw(Eo(Y)))),d(n,["tools"],q)}const _=u(e,["toolConfig"]);n!==void 0&&_!=null&&d(n,["toolConfig"],_);const S=u(e,["labels"]);n!==void 0&&S!=null&&d(n,["labels"],S);const R=u(e,["cachedContent"]);n!==void 0&&R!=null&&d(n,["cachedContent"],$n(t,R));const M=u(e,["responseModalities"]);M!=null&&d(i,["responseModalities"],M);const V=u(e,["mediaResolution"]);V!=null&&d(i,["mediaResolution"],V);const k=u(e,["speechConfig"]);k!=null&&d(i,["speechConfig"],bp(k));const de=u(e,["audioTimestamp"]);de!=null&&d(i,["audioTimestamp"],de);const vt=u(e,["thinkingConfig"]);vt!=null&&d(i,["thinkingConfig"],vt);const zn=u(e,["imageConfig"]);if(zn!=null&&d(i,["imageConfig"],HF(zn)),u(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const Dt=u(e,["modelArmorConfig"]);return n!==void 0&&Dt!=null&&d(n,["modelArmorConfig"],Dt),i}function N_(t,e,n){const r={},i=u(e,["model"]);i!=null&&d(r,["_url","model"],ce(t,i));const o=u(e,["contents"]);if(o!=null){let a=Ot(o);Array.isArray(a)&&(a=a.map(l=>Xu(l))),d(r,["contents"],a)}const s=u(e,["config"]);return s!=null&&d(r,["generationConfig"],pF(t,s,r)),r}function k_(t,e,n){const r={},i=u(e,["model"]);i!=null&&d(r,["_url","model"],ce(t,i));const o=u(e,["contents"]);if(o!=null){let a=Ot(o);Array.isArray(a)&&(a=a.map(l=>l)),d(r,["contents"],a)}const s=u(e,["config"]);return s!=null&&d(r,["generationConfig"],mF(t,s,r)),r}function x_(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=u(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(h=>FU(h))),d(n,["candidates"],c)}const o=u(t,["modelVersion"]);o!=null&&d(n,["modelVersion"],o);const s=u(t,["promptFeedback"]);s!=null&&d(n,["promptFeedback"],s);const a=u(t,["responseId"]);a!=null&&d(n,["responseId"],a);const l=u(t,["usageMetadata"]);return l!=null&&d(n,["usageMetadata"],l),n}function M_(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=u(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(p=>p)),d(n,["candidates"],h)}const o=u(t,["createTime"]);o!=null&&d(n,["createTime"],o);const s=u(t,["modelVersion"]);s!=null&&d(n,["modelVersion"],s);const a=u(t,["promptFeedback"]);a!=null&&d(n,["promptFeedback"],a);const l=u(t,["responseId"]);l!=null&&d(n,["responseId"],l);const c=u(t,["usageMetadata"]);return c!=null&&d(n,["usageMetadata"],c),n}function gF(t,e,n){const r={};if(u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=u(t,["numberOfImages"]);e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i);const o=u(t,["aspectRatio"]);e!==void 0&&o!=null&&d(e,["parameters","aspectRatio"],o);const s=u(t,["guidanceScale"]);if(e!==void 0&&s!=null&&d(e,["parameters","guidanceScale"],s),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=u(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&d(e,["parameters","safetySetting"],a);const l=u(t,["personGeneration"]);e!==void 0&&l!=null&&d(e,["parameters","personGeneration"],l);const c=u(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&d(e,["parameters","includeSafetyAttributes"],c);const h=u(t,["includeRaiReason"]);e!==void 0&&h!=null&&d(e,["parameters","includeRaiReason"],h);const p=u(t,["language"]);e!==void 0&&p!=null&&d(e,["parameters","language"],p);const m=u(t,["outputMimeType"]);e!==void 0&&m!=null&&d(e,["parameters","outputOptions","mimeType"],m);const v=u(t,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&d(e,["parameters","outputOptions","compressionQuality"],v),u(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=u(t,["imageSize"]);if(e!==void 0&&I!=null&&d(e,["parameters","sampleImageSize"],I),u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function yF(t,e,n){const r={},i=u(t,["outputGcsUri"]);e!==void 0&&i!=null&&d(e,["parameters","storageUri"],i);const o=u(t,["negativePrompt"]);e!==void 0&&o!=null&&d(e,["parameters","negativePrompt"],o);const s=u(t,["numberOfImages"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);const a=u(t,["aspectRatio"]);e!==void 0&&a!=null&&d(e,["parameters","aspectRatio"],a);const l=u(t,["guidanceScale"]);e!==void 0&&l!=null&&d(e,["parameters","guidanceScale"],l);const c=u(t,["seed"]);e!==void 0&&c!=null&&d(e,["parameters","seed"],c);const h=u(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&d(e,["parameters","safetySetting"],h);const p=u(t,["personGeneration"]);e!==void 0&&p!=null&&d(e,["parameters","personGeneration"],p);const m=u(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&d(e,["parameters","includeSafetyAttributes"],m);const v=u(t,["includeRaiReason"]);e!==void 0&&v!=null&&d(e,["parameters","includeRaiReason"],v);const I=u(t,["language"]);e!==void 0&&I!=null&&d(e,["parameters","language"],I);const P=u(t,["outputMimeType"]);e!==void 0&&P!=null&&d(e,["parameters","outputOptions","mimeType"],P);const N=u(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&d(e,["parameters","outputOptions","compressionQuality"],N);const w=u(t,["addWatermark"]);e!==void 0&&w!=null&&d(e,["parameters","addWatermark"],w);const T=u(t,["labels"]);e!==void 0&&T!=null&&d(e,["labels"],T);const C=u(t,["imageSize"]);e!==void 0&&C!=null&&d(e,["parameters","sampleImageSize"],C);const D=u(t,["enhancePrompt"]);return e!==void 0&&D!=null&&d(e,["parameters","enhancePrompt"],D),r}function vF(t,e,n){const r={},i=u(e,["model"]);i!=null&&d(r,["_url","model"],ce(t,i));const o=u(e,["prompt"]);o!=null&&d(r,["instances[0]","prompt"],o);const s=u(e,["config"]);return s!=null&&gF(s,r),r}function _F(t,e,n){const r={},i=u(e,["model"]);i!=null&&d(r,["_url","model"],ce(t,i));const o=u(e,["prompt"]);o!=null&&d(r,["instances[0]","prompt"],o);const s=u(e,["config"]);return s!=null&&yF(s,r),r}function EF(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=u(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>MF(a))),d(n,["generatedImages"],s)}const o=u(t,["positivePromptSafetyAttributes"]);return o!=null&&d(n,["positivePromptSafetyAttributes"],Gw(o)),n}function TF(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=u(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Zu(a))),d(n,["generatedImages"],s)}const o=u(t,["positivePromptSafetyAttributes"]);return o!=null&&d(n,["positivePromptSafetyAttributes"],Hw(o)),n}function IF(t,e,n){const r={},i=u(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i),u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=u(t,["durationSeconds"]);if(e!==void 0&&o!=null&&d(e,["parameters","durationSeconds"],o),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=u(t,["aspectRatio"]);e!==void 0&&s!=null&&d(e,["parameters","aspectRatio"],s);const a=u(t,["resolution"]);e!==void 0&&a!=null&&d(e,["parameters","resolution"],a);const l=u(t,["personGeneration"]);if(e!==void 0&&l!=null&&d(e,["parameters","personGeneration"],l),u(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=u(t,["negativePrompt"]);e!==void 0&&c!=null&&d(e,["parameters","negativePrompt"],c);const h=u(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&d(e,["parameters","enhancePrompt"],h),u(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=u(t,["lastFrame"]);e!==void 0&&p!=null&&d(e,["instances[0]","lastFrame"],ju(p));const m=u(t,["referenceImages"]);if(e!==void 0&&m!=null){let v=m;Array.isArray(v)&&(v=v.map(I=>Sb(I))),d(e,["instances[0]","referenceImages"],v)}if(u(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function wF(t,e,n){const r={},i=u(t,["numberOfVideos"]);e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i);const o=u(t,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);const s=u(t,["fps"]);e!==void 0&&s!=null&&d(e,["parameters","fps"],s);const a=u(t,["durationSeconds"]);e!==void 0&&a!=null&&d(e,["parameters","durationSeconds"],a);const l=u(t,["seed"]);e!==void 0&&l!=null&&d(e,["parameters","seed"],l);const c=u(t,["aspectRatio"]);e!==void 0&&c!=null&&d(e,["parameters","aspectRatio"],c);const h=u(t,["resolution"]);e!==void 0&&h!=null&&d(e,["parameters","resolution"],h);const p=u(t,["personGeneration"]);e!==void 0&&p!=null&&d(e,["parameters","personGeneration"],p);const m=u(t,["pubsubTopic"]);e!==void 0&&m!=null&&d(e,["parameters","pubsubTopic"],m);const v=u(t,["negativePrompt"]);e!==void 0&&v!=null&&d(e,["parameters","negativePrompt"],v);const I=u(t,["enhancePrompt"]);e!==void 0&&I!=null&&d(e,["parameters","enhancePrompt"],I);const P=u(t,["generateAudio"]);e!==void 0&&P!=null&&d(e,["parameters","generateAudio"],P);const N=u(t,["lastFrame"]);e!==void 0&&N!=null&&d(e,["instances[0]","lastFrame"],rn(N));const w=u(t,["referenceImages"]);if(e!==void 0&&w!=null){let D=w;Array.isArray(D)&&(D=D.map(b=>Cb(b))),d(e,["instances[0]","referenceImages"],D)}const T=u(t,["mask"]);e!==void 0&&T!=null&&d(e,["instances[0]","mask"],wb(T));const C=u(t,["compressionQuality"]);return e!==void 0&&C!=null&&d(e,["parameters","compressionQuality"],C),r}function SF(t,e){const n={},r=u(t,["name"]);r!=null&&d(n,["name"],r);const i=u(t,["metadata"]);i!=null&&d(n,["metadata"],i);const o=u(t,["done"]);o!=null&&d(n,["done"],o);const s=u(t,["error"]);s!=null&&d(n,["error"],s);const a=u(t,["response","generateVideoResponse"]);return a!=null&&d(n,["response"],PF(a)),n}function CF(t,e){const n={},r=u(t,["name"]);r!=null&&d(n,["name"],r);const i=u(t,["metadata"]);i!=null&&d(n,["metadata"],i);const o=u(t,["done"]);o!=null&&d(n,["done"],o);const s=u(t,["error"]);s!=null&&d(n,["error"],s);const a=u(t,["response"]);return a!=null&&d(n,["response"],NF(a)),n}function AF(t,e,n){const r={},i=u(e,["model"]);i!=null&&d(r,["_url","model"],ce(t,i));const o=u(e,["prompt"]);o!=null&&d(r,["instances[0]","prompt"],o);const s=u(e,["image"]);s!=null&&d(r,["instances[0]","image"],ju(s));const a=u(e,["video"]);a!=null&&d(r,["instances[0]","video"],$w(a));const l=u(e,["source"]);l!=null&&kF(l,r);const c=u(e,["config"]);return c!=null&&IF(c,r),r}function RF(t,e,n){const r={},i=u(e,["model"]);i!=null&&d(r,["_url","model"],ce(t,i));const o=u(e,["prompt"]);o!=null&&d(r,["instances[0]","prompt"],o);const s=u(e,["image"]);s!=null&&d(r,["instances[0]","image"],rn(s));const a=u(e,["video"]);a!=null&&d(r,["instances[0]","video"],zw(a));const l=u(e,["source"]);l!=null&&xF(l,r);const c=u(e,["config"]);return c!=null&&wF(c,r),r}function PF(t,e){const n={},r=u(t,["generatedSamples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>LF(a))),d(n,["generatedVideos"],s)}const i=u(t,["raiMediaFilteredCount"]);i!=null&&d(n,["raiMediaFilteredCount"],i);const o=u(t,["raiMediaFilteredReasons"]);return o!=null&&d(n,["raiMediaFilteredReasons"],o),n}function NF(t,e){const n={},r=u(t,["videos"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>VF(a))),d(n,["generatedVideos"],s)}const i=u(t,["raiMediaFilteredCount"]);i!=null&&d(n,["raiMediaFilteredCount"],i);const o=u(t,["raiMediaFilteredReasons"]);return o!=null&&d(n,["raiMediaFilteredReasons"],o),n}function kF(t,e,n){const r={},i=u(t,["prompt"]);e!==void 0&&i!=null&&d(e,["instances[0]","prompt"],i);const o=u(t,["image"]);e!==void 0&&o!=null&&d(e,["instances[0]","image"],ju(o));const s=u(t,["video"]);return e!==void 0&&s!=null&&d(e,["instances[0]","video"],$w(s)),r}function xF(t,e,n){const r={},i=u(t,["prompt"]);e!==void 0&&i!=null&&d(e,["instances[0]","prompt"],i);const o=u(t,["image"]);e!==void 0&&o!=null&&d(e,["instances[0]","image"],rn(o));const s=u(t,["video"]);return e!==void 0&&s!=null&&d(e,["instances[0]","video"],zw(s)),r}function MF(t,e){const n={},r=u(t,["_self"]);r!=null&&d(n,["image"],qF(r));const i=u(t,["raiFilteredReason"]);i!=null&&d(n,["raiFilteredReason"],i);const o=u(t,["_self"]);return o!=null&&d(n,["safetyAttributes"],Gw(o)),n}function Zu(t,e){const n={},r=u(t,["_self"]);r!=null&&d(n,["image"],Bw(r));const i=u(t,["raiFilteredReason"]);i!=null&&d(n,["raiFilteredReason"],i);const o=u(t,["_self"]);o!=null&&d(n,["safetyAttributes"],Hw(o));const s=u(t,["prompt"]);return s!=null&&d(n,["enhancedPrompt"],s),n}function DF(t,e){const n={},r=u(t,["_self"]);r!=null&&d(n,["mask"],Bw(r));const i=u(t,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(n,["labels"],o)}return n}function LF(t,e){const n={},r=u(t,["video"]);return r!=null&&d(n,["video"],Tb(r)),n}function VF(t,e){const n={},r=u(t,["_self"]);return r!=null&&d(n,["video"],Ib(r)),n}function UF(t,e){const n={},r=u(t,["modelSelectionConfig"]);r!=null&&d(n,["modelConfig"],r);const i=u(t,["responseJsonSchema"]);i!=null&&d(n,["responseJsonSchema"],i);const o=u(t,["audioTimestamp"]);o!=null&&d(n,["audioTimestamp"],o);const s=u(t,["candidateCount"]);s!=null&&d(n,["candidateCount"],s);const a=u(t,["enableAffectiveDialog"]);a!=null&&d(n,["enableAffectiveDialog"],a);const l=u(t,["frequencyPenalty"]);l!=null&&d(n,["frequencyPenalty"],l);const c=u(t,["logprobs"]);c!=null&&d(n,["logprobs"],c);const h=u(t,["maxOutputTokens"]);h!=null&&d(n,["maxOutputTokens"],h);const p=u(t,["mediaResolution"]);p!=null&&d(n,["mediaResolution"],p);const m=u(t,["presencePenalty"]);m!=null&&d(n,["presencePenalty"],m);const v=u(t,["responseLogprobs"]);v!=null&&d(n,["responseLogprobs"],v);const I=u(t,["responseMimeType"]);I!=null&&d(n,["responseMimeType"],I);const P=u(t,["responseModalities"]);P!=null&&d(n,["responseModalities"],P);const N=u(t,["responseSchema"]);N!=null&&d(n,["responseSchema"],N);const w=u(t,["routingConfig"]);w!=null&&d(n,["routingConfig"],w);const T=u(t,["seed"]);T!=null&&d(n,["seed"],T);const C=u(t,["speechConfig"]);C!=null&&d(n,["speechConfig"],C);const D=u(t,["stopSequences"]);D!=null&&d(n,["stopSequences"],D);const b=u(t,["temperature"]);b!=null&&d(n,["temperature"],b);const L=u(t,["thinkingConfig"]);L!=null&&d(n,["thinkingConfig"],L);const A=u(t,["topK"]);A!=null&&d(n,["topK"],A);const _=u(t,["topP"]);if(_!=null&&d(n,["topP"],_),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function FF(t,e,n){const r={},i=u(e,["model"]);return i!=null&&d(r,["_url","name"],ce(t,i)),r}function bF(t,e,n){const r={},i=u(e,["model"]);return i!=null&&d(r,["_url","name"],ce(t,i)),r}function OF(t,e){const n={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=u(t,["enableWidget"]);return r!=null&&d(n,["enableWidget"],r),n}function BF(t,e){const n={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=u(t,["timeRangeFilter"]);return r!=null&&d(n,["timeRangeFilter"],r),n}function GF(t,e){const n={},r=u(t,["aspectRatio"]);r!=null&&d(n,["aspectRatio"],r);const i=u(t,["imageSize"]);if(i!=null&&d(n,["imageSize"],i),u(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function HF(t,e){const n={},r=u(t,["aspectRatio"]);r!=null&&d(n,["aspectRatio"],r);const i=u(t,["imageSize"]);i!=null&&d(n,["imageSize"],i);const o=u(t,["personGeneration"]);o!=null&&d(n,["personGeneration"],o);const s=u(t,["outputMimeType"]);s!=null&&d(n,["imageOutputOptions","mimeType"],s);const a=u(t,["outputCompressionQuality"]);return a!=null&&d(n,["imageOutputOptions","compressionQuality"],a),n}function qF(t,e){const n={},r=u(t,["bytesBase64Encoded"]);r!=null&&d(n,["imageBytes"],kr(r));const i=u(t,["mimeType"]);return i!=null&&d(n,["mimeType"],i),n}function Bw(t,e){const n={},r=u(t,["gcsUri"]);r!=null&&d(n,["gcsUri"],r);const i=u(t,["bytesBase64Encoded"]);i!=null&&d(n,["imageBytes"],kr(i));const o=u(t,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function ju(t,e){const n={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=u(t,["imageBytes"]);r!=null&&d(n,["bytesBase64Encoded"],kr(r));const i=u(t,["mimeType"]);return i!=null&&d(n,["mimeType"],i),n}function rn(t,e){const n={},r=u(t,["gcsUri"]);r!=null&&d(n,["gcsUri"],r);const i=u(t,["imageBytes"]);i!=null&&d(n,["bytesBase64Encoded"],kr(i));const o=u(t,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function $F(t,e,n,r){const i={},o=u(e,["pageSize"]);n!==void 0&&o!=null&&d(n,["_query","pageSize"],o);const s=u(e,["pageToken"]);n!==void 0&&s!=null&&d(n,["_query","pageToken"],s);const a=u(e,["filter"]);n!==void 0&&a!=null&&d(n,["_query","filter"],a);const l=u(e,["queryBase"]);return n!==void 0&&l!=null&&d(n,["_url","models_url"],Dw(t,l)),i}function zF(t,e,n,r){const i={},o=u(e,["pageSize"]);n!==void 0&&o!=null&&d(n,["_query","pageSize"],o);const s=u(e,["pageToken"]);n!==void 0&&s!=null&&d(n,["_query","pageToken"],s);const a=u(e,["filter"]);n!==void 0&&a!=null&&d(n,["_query","filter"],a);const l=u(e,["queryBase"]);return n!==void 0&&l!=null&&d(n,["_url","models_url"],Dw(t,l)),i}function WF(t,e,n){const r={},i=u(e,["config"]);return i!=null&&$F(t,i,r),r}function KF(t,e,n){const r={},i=u(e,["config"]);return i!=null&&zF(t,i,r),r}function JF(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=u(t,["nextPageToken"]);i!=null&&d(n,["nextPageToken"],i);const o=u(t,["_self"]);if(o!=null){let s=Lw(o);Array.isArray(s)&&(s=s.map(a=>Vf(a))),d(n,["models"],s)}return n}function YF(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=u(t,["nextPageToken"]);i!=null&&d(n,["nextPageToken"],i);const o=u(t,["_self"]);if(o!=null){let s=Lw(o);Array.isArray(s)&&(s=s.map(a=>Uf(a))),d(n,["models"],s)}return n}function QF(t,e){const n={},r=u(t,["maskMode"]);r!=null&&d(n,["maskMode"],r);const i=u(t,["segmentationClasses"]);i!=null&&d(n,["maskClasses"],i);const o=u(t,["maskDilation"]);return o!=null&&d(n,["dilation"],o),n}function Vf(t,e){const n={},r=u(t,["name"]);r!=null&&d(n,["name"],r);const i=u(t,["displayName"]);i!=null&&d(n,["displayName"],i);const o=u(t,["description"]);o!=null&&d(n,["description"],o);const s=u(t,["version"]);s!=null&&d(n,["version"],s);const a=u(t,["_self"]);a!=null&&d(n,["tunedModelInfo"],fb(a));const l=u(t,["inputTokenLimit"]);l!=null&&d(n,["inputTokenLimit"],l);const c=u(t,["outputTokenLimit"]);c!=null&&d(n,["outputTokenLimit"],c);const h=u(t,["supportedGenerationMethods"]);h!=null&&d(n,["supportedActions"],h);const p=u(t,["temperature"]);p!=null&&d(n,["temperature"],p);const m=u(t,["maxTemperature"]);m!=null&&d(n,["maxTemperature"],m);const v=u(t,["topP"]);v!=null&&d(n,["topP"],v);const I=u(t,["topK"]);I!=null&&d(n,["topK"],I);const P=u(t,["thinking"]);return P!=null&&d(n,["thinking"],P),n}function Uf(t,e){const n={},r=u(t,["name"]);r!=null&&d(n,["name"],r);const i=u(t,["displayName"]);i!=null&&d(n,["displayName"],i);const o=u(t,["description"]);o!=null&&d(n,["description"],o);const s=u(t,["versionId"]);s!=null&&d(n,["version"],s);const a=u(t,["deployedModels"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(v=>uF(v))),d(n,["endpoints"],m)}const l=u(t,["labels"]);l!=null&&d(n,["labels"],l);const c=u(t,["_self"]);c!=null&&d(n,["tunedModelInfo"],hb(c));const h=u(t,["defaultCheckpointId"]);h!=null&&d(n,["defaultCheckpointId"],h);const p=u(t,["checkpoints"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(v=>v)),d(n,["checkpoints"],m)}return n}function XF(t,e){const n={},r=u(t,["mediaResolution"]);r!=null&&d(n,["mediaResolution"],r);const i=u(t,["codeExecutionResult"]);i!=null&&d(n,["codeExecutionResult"],i);const o=u(t,["executableCode"]);o!=null&&d(n,["executableCode"],o);const s=u(t,["fileData"]);s!=null&&d(n,["fileData"],cF(s));const a=u(t,["functionCall"]);a!=null&&d(n,["functionCall"],dF(a));const l=u(t,["functionResponse"]);l!=null&&d(n,["functionResponse"],l);const c=u(t,["inlineData"]);c!=null&&d(n,["inlineData"],UU(c));const h=u(t,["text"]);h!=null&&d(n,["text"],h);const p=u(t,["thought"]);p!=null&&d(n,["thought"],p);const m=u(t,["thoughtSignature"]);m!=null&&d(n,["thoughtSignature"],m);const v=u(t,["videoMetadata"]);return v!=null&&d(n,["videoMetadata"],v),n}function ZF(t,e){const n={},r=u(t,["productImage"]);return r!=null&&d(n,["image"],rn(r)),n}function jF(t,e,n){const r={},i=u(t,["numberOfImages"]);e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i);const o=u(t,["baseSteps"]);e!==void 0&&o!=null&&d(e,["parameters","baseSteps"],o);const s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);const a=u(t,["seed"]);e!==void 0&&a!=null&&d(e,["parameters","seed"],a);const l=u(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&d(e,["parameters","safetySetting"],l);const c=u(t,["personGeneration"]);e!==void 0&&c!=null&&d(e,["parameters","personGeneration"],c);const h=u(t,["addWatermark"]);e!==void 0&&h!=null&&d(e,["parameters","addWatermark"],h);const p=u(t,["outputMimeType"]);e!==void 0&&p!=null&&d(e,["parameters","outputOptions","mimeType"],p);const m=u(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&d(e,["parameters","outputOptions","compressionQuality"],m);const v=u(t,["enhancePrompt"]);e!==void 0&&v!=null&&d(e,["parameters","enhancePrompt"],v);const I=u(t,["labels"]);return e!==void 0&&I!=null&&d(e,["labels"],I),r}function eb(t,e,n){const r={},i=u(e,["model"]);i!=null&&d(r,["_url","model"],ce(t,i));const o=u(e,["source"]);o!=null&&nb(o,r);const s=u(e,["config"]);return s!=null&&jF(s,r),r}function tb(t,e){const n={},r=u(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Zu(o))),d(n,["generatedImages"],i)}return n}function nb(t,e,n){const r={},i=u(t,["prompt"]);e!==void 0&&i!=null&&d(e,["instances[0]","prompt"],i);const o=u(t,["personImage"]);e!==void 0&&o!=null&&d(e,["instances[0]","personImage","image"],rn(o));const s=u(t,["productImages"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>ZF(l))),d(e,["instances[0]","productImages"],a)}return r}function rb(t,e){const n={},r=u(t,["referenceImage"]);r!=null&&d(n,["referenceImage"],rn(r));const i=u(t,["referenceId"]);i!=null&&d(n,["referenceId"],i);const o=u(t,["referenceType"]);o!=null&&d(n,["referenceType"],o);const s=u(t,["maskImageConfig"]);s!=null&&d(n,["maskImageConfig"],QF(s));const a=u(t,["controlImageConfig"]);a!=null&&d(n,["controlImageConfig"],qU(a));const l=u(t,["styleImageConfig"]);l!=null&&d(n,["styleImageConfig"],l);const c=u(t,["subjectImageConfig"]);return c!=null&&d(n,["subjectImageConfig"],c),n}function Gw(t,e){const n={},r=u(t,["safetyAttributes","categories"]);r!=null&&d(n,["categories"],r);const i=u(t,["safetyAttributes","scores"]);i!=null&&d(n,["scores"],i);const o=u(t,["contentType"]);return o!=null&&d(n,["contentType"],o),n}function Hw(t,e){const n={},r=u(t,["safetyAttributes","categories"]);r!=null&&d(n,["categories"],r);const i=u(t,["safetyAttributes","scores"]);i!=null&&d(n,["scores"],i);const o=u(t,["contentType"]);return o!=null&&d(n,["contentType"],o),n}function ib(t,e){const n={},r=u(t,["category"]);if(r!=null&&d(n,["category"],r),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=u(t,["threshold"]);return i!=null&&d(n,["threshold"],i),n}function ob(t,e){const n={},r=u(t,["image"]);return r!=null&&d(n,["image"],rn(r)),n}function sb(t,e,n){const r={},i=u(t,["mode"]);e!==void 0&&i!=null&&d(e,["parameters","mode"],i);const o=u(t,["maxPredictions"]);e!==void 0&&o!=null&&d(e,["parameters","maxPredictions"],o);const s=u(t,["confidenceThreshold"]);e!==void 0&&s!=null&&d(e,["parameters","confidenceThreshold"],s);const a=u(t,["maskDilation"]);e!==void 0&&a!=null&&d(e,["parameters","maskDilation"],a);const l=u(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&d(e,["parameters","binaryColorThreshold"],l);const c=u(t,["labels"]);return e!==void 0&&c!=null&&d(e,["labels"],c),r}function ab(t,e,n){const r={},i=u(e,["model"]);i!=null&&d(r,["_url","model"],ce(t,i));const o=u(e,["source"]);o!=null&&ub(o,r);const s=u(e,["config"]);return s!=null&&sb(s,r),r}function lb(t,e){const n={},r=u(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>DF(o))),d(n,["generatedMasks"],i)}return n}function ub(t,e,n){const r={},i=u(t,["prompt"]);e!==void 0&&i!=null&&d(e,["instances[0]","prompt"],i);const o=u(t,["image"]);e!==void 0&&o!=null&&d(e,["instances[0]","image"],rn(o));const s=u(t,["scribbleImage"]);return e!==void 0&&s!=null&&d(e,["instances[0]","scribble"],ob(s)),r}function cb(t,e){const n={},r=u(t,["retrievalConfig"]);r!=null&&d(n,["retrievalConfig"],r);const i=u(t,["functionCallingConfig"]);return i!=null&&d(n,["functionCallingConfig"],fF(i)),n}function db(t,e){const n={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=u(t,["computerUse"]);r!=null&&d(n,["computerUse"],r);const i=u(t,["fileSearch"]);i!=null&&d(n,["fileSearch"],i);const o=u(t,["codeExecution"]);if(o!=null&&d(n,["codeExecution"],o),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=u(t,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>m)),d(n,["functionDeclarations"],p)}const a=u(t,["googleMaps"]);a!=null&&d(n,["googleMaps"],OF(a));const l=u(t,["googleSearch"]);l!=null&&d(n,["googleSearch"],BF(l));const c=u(t,["googleSearchRetrieval"]);c!=null&&d(n,["googleSearchRetrieval"],c);const h=u(t,["urlContext"]);return h!=null&&d(n,["urlContext"],h),n}function qw(t,e){const n={},r=u(t,["retrieval"]);r!=null&&d(n,["retrieval"],r);const i=u(t,["computerUse"]);if(i!=null&&d(n,["computerUse"],i),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=u(t,["codeExecution"]);o!=null&&d(n,["codeExecution"],o);const s=u(t,["enterpriseWebSearch"]);s!=null&&d(n,["enterpriseWebSearch"],s);const a=u(t,["functionDeclarations"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(v=>hF(v))),d(n,["functionDeclarations"],m)}const l=u(t,["googleMaps"]);l!=null&&d(n,["googleMaps"],l);const c=u(t,["googleSearch"]);c!=null&&d(n,["googleSearch"],c);const h=u(t,["googleSearchRetrieval"]);h!=null&&d(n,["googleSearchRetrieval"],h);const p=u(t,["urlContext"]);return p!=null&&d(n,["urlContext"],p),n}function fb(t,e){const n={},r=u(t,["baseModel"]);r!=null&&d(n,["baseModel"],r);const i=u(t,["createTime"]);i!=null&&d(n,["createTime"],i);const o=u(t,["updateTime"]);return o!=null&&d(n,["updateTime"],o),n}function hb(t,e){const n={},r=u(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&d(n,["baseModel"],r);const i=u(t,["createTime"]);i!=null&&d(n,["createTime"],i);const o=u(t,["updateTime"]);return o!=null&&d(n,["updateTime"],o),n}function pb(t,e,n){const r={},i=u(t,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);const o=u(t,["description"]);e!==void 0&&o!=null&&d(e,["description"],o);const s=u(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&d(e,["defaultCheckpointId"],s),r}function mb(t,e,n){const r={},i=u(t,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);const o=u(t,["description"]);e!==void 0&&o!=null&&d(e,["description"],o);const s=u(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&d(e,["defaultCheckpointId"],s),r}function gb(t,e,n){const r={},i=u(e,["model"]);i!=null&&d(r,["_url","name"],ce(t,i));const o=u(e,["config"]);return o!=null&&pb(o,r),r}function yb(t,e,n){const r={},i=u(e,["model"]);i!=null&&d(r,["_url","model"],ce(t,i));const o=u(e,["config"]);return o!=null&&mb(o,r),r}function vb(t,e,n){const r={},i=u(t,["outputGcsUri"]);e!==void 0&&i!=null&&d(e,["parameters","storageUri"],i);const o=u(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&d(e,["parameters","safetySetting"],o);const s=u(t,["personGeneration"]);e!==void 0&&s!=null&&d(e,["parameters","personGeneration"],s);const a=u(t,["includeRaiReason"]);e!==void 0&&a!=null&&d(e,["parameters","includeRaiReason"],a);const l=u(t,["outputMimeType"]);e!==void 0&&l!=null&&d(e,["parameters","outputOptions","mimeType"],l);const c=u(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&d(e,["parameters","outputOptions","compressionQuality"],c);const h=u(t,["enhanceInputImage"]);e!==void 0&&h!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],h);const p=u(t,["imagePreservationFactor"]);e!==void 0&&p!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const m=u(t,["labels"]);e!==void 0&&m!=null&&d(e,["labels"],m);const v=u(t,["numberOfImages"]);e!==void 0&&v!=null&&d(e,["parameters","sampleCount"],v);const I=u(t,["mode"]);return e!==void 0&&I!=null&&d(e,["parameters","mode"],I),r}function _b(t,e,n){const r={},i=u(e,["model"]);i!=null&&d(r,["_url","model"],ce(t,i));const o=u(e,["image"]);o!=null&&d(r,["instances[0]","image"],rn(o));const s=u(e,["upscaleFactor"]);s!=null&&d(r,["parameters","upscaleConfig","upscaleFactor"],s);const a=u(e,["config"]);return a!=null&&vb(a,r),r}function Eb(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=u(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Zu(s))),d(n,["generatedImages"],o)}return n}function Tb(t,e){const n={},r=u(t,["uri"]);r!=null&&d(n,["uri"],r);const i=u(t,["encodedVideo"]);i!=null&&d(n,["videoBytes"],kr(i));const o=u(t,["encoding"]);return o!=null&&d(n,["mimeType"],o),n}function Ib(t,e){const n={},r=u(t,["gcsUri"]);r!=null&&d(n,["uri"],r);const i=u(t,["bytesBase64Encoded"]);i!=null&&d(n,["videoBytes"],kr(i));const o=u(t,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function wb(t,e){const n={},r=u(t,["image"]);r!=null&&d(n,["_self"],rn(r));const i=u(t,["maskMode"]);return i!=null&&d(n,["maskMode"],i),n}function Sb(t,e){const n={},r=u(t,["image"]);r!=null&&d(n,["image"],ju(r));const i=u(t,["referenceType"]);return i!=null&&d(n,["referenceType"],i),n}function Cb(t,e){const n={},r=u(t,["image"]);r!=null&&d(n,["image"],rn(r));const i=u(t,["referenceType"]);return i!=null&&d(n,["referenceType"],i),n}function $w(t,e){const n={},r=u(t,["uri"]);r!=null&&d(n,["uri"],r);const i=u(t,["videoBytes"]);i!=null&&d(n,["encodedVideo"],kr(i));const o=u(t,["mimeType"]);return o!=null&&d(n,["encoding"],o),n}function zw(t,e){const n={},r=u(t,["uri"]);r!=null&&d(n,["gcsUri"],r);const i=u(t,["videoBytes"]);i!=null&&d(n,["bytesBase64Encoded"],kr(i));const o=u(t,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ab(t,e){const n={},r=u(t,["displayName"]);return e!==void 0&&r!=null&&d(e,["displayName"],r),n}function Rb(t){const e={},n=u(t,["config"]);return n!=null&&Ab(n,e),e}function Pb(t,e){const n={},r=u(t,["force"]);return e!==void 0&&r!=null&&d(e,["_query","force"],r),n}function Nb(t){const e={},n=u(t,["name"]);n!=null&&d(e,["_url","name"],n);const r=u(t,["config"]);return r!=null&&Pb(r,e),e}function kb(t){const e={},n=u(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function xb(t,e){const n={},r=u(t,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["customMetadata"],o)}const i=u(t,["chunkingConfig"]);return e!==void 0&&i!=null&&d(e,["chunkingConfig"],i),n}function Mb(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);const i=u(t,["done"]);i!=null&&d(e,["done"],i);const o=u(t,["error"]);o!=null&&d(e,["error"],o);const s=u(t,["response"]);return s!=null&&d(e,["response"],Lb(s)),e}function Db(t){const e={},n=u(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);const r=u(t,["fileName"]);r!=null&&d(e,["fileName"],r);const i=u(t,["config"]);return i!=null&&xb(i,e),e}function Lb(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["parent"]);r!=null&&d(e,["parent"],r);const i=u(t,["documentName"]);return i!=null&&d(e,["documentName"],i),e}function Vb(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),n}function Ub(t){const e={},n=u(t,["config"]);return n!=null&&Vb(n,e),e}function Fb(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=u(t,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["fileSearchStores"],o)}return e}function Ww(t,e){const n={},r=u(t,["mimeType"]);e!==void 0&&r!=null&&d(e,["mimeType"],r);const i=u(t,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);const o=u(t,["customMetadata"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),d(e,["customMetadata"],a)}const s=u(t,["chunkingConfig"]);return e!==void 0&&s!=null&&d(e,["chunkingConfig"],s),n}function bb(t){const e={},n=u(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);const r=u(t,["config"]);return r!=null&&Ww(r,e),e}function Ob(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bb="Content-Type",Gb="X-Server-Timeout",Hb="User-Agent",Ff="x-goog-api-client",qb="1.41.0",$b=`google-genai-sdk/${qb}`,zb="v1beta1",Wb="v1beta",Kb=5,Jb=[408,429,500,502,503,504];class Yb{constructor(e){var n,r,i;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const o={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const a=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!a?(o.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?o.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(o.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:zb}else{if(!this.clientOptions.apiKey)throw new $s({message:"API key must be set when using the Gemini API.",status:403});o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Wb,o.baseUrl="https://generativelanguage.googleapis.com/"}o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===xf.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e,n),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,a]of Object.entries(e.queryParams))i.searchParams.append(s,String(a));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e,n),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const o=new AbortController,s=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>o.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=s}return n&&n.extraBody!==null&&Qb(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await D_(i),new Mf(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await D_(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return Zt(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:h}=yield Z(i.read());if(c){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=o.decode(h,{stream:!0});try{const I=JSON.parse(p);if("error"in I){const P=JSON.parse(JSON.stringify(I.error)),N=P.status,w=P.code,T=`got status: ${N}. ${JSON.stringify(I)}`;if(w>=400&&w<600)throw new $s({message:T,status:w})}}catch(I){if(I.name==="ApiError")throw I}s+=p;let m=-1,v=0;for(;;){m=-1,v=0;for(const N of l){const w=s.indexOf(N);w!==-1&&(m===-1||w<m)&&(m=w,v=N.length)}if(m===-1)break;const I=s.substring(0,m);s=s.substring(m+v);const P=I.trim();if(P.startsWith(a)){const N=P.substring(a.length).trim();try{const w=new Response(N,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Z(new Mf(w))}catch(w){throw new Error(`exception parsing stream chunk ${N}. ${w}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){var r;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,n);const i=this.clientOptions.httpOptions.retryOptions;return O1(async()=>{const s=await fetch(e,n);if(s.ok)return s;throw Jb.includes(s.status)?new Error(`Retryable HTTP Error: ${s.statusText}`):new Sw(`Non-retryable exception ${s.statusText} sending request`)},{retries:((r=i.attempts)!==null&&r!==void 0?r:Kb)-1})}getDefaultHeaders(){const e={},n=$b+" "+this.clientOptions.userAgentExtra;return e[Hb]=n,e[Ff]=n,e[Bb]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))r.append(i,o);e.timeout&&e.timeout>0&&r.append(Gb,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const l={file:i},c=this.getFileName(e),h=$("upload/v1beta/files",l._url),p=await this.fetchUploadUrl(h,i.sizeBytes,i.mimeType,c,l,n==null?void 0:n.httpOptions);return o.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,r){var i;const o=this.clientOptions.uploader,s=await o.stat(n),a=String(s.size),l=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,h=this.getFileName(n),p={};r!=null&&Ww(r,p);const m=await this.fetchUploadUrl(c,a,l,h,p,r==null?void 0:r.httpOptions);return o.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,o,s){var a;let l={};s?l=s:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const c=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:l});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function D_(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new $s({message:i,status:n}):new Error(i)}}function Qb(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const a=Object.assign({},o);for(const l in s)if(Object.prototype.hasOwnProperty.call(s,l)){const c=s[l],h=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&h&&typeof h=="object"&&!Array.isArray(h)?a[l]=r(h,c):(h&&c&&typeof h!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof h}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xb="mcp_used/unknown";let Zb=!1;function Kw(t){for(const e of t)if(jb(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Zb}function Jw(t){var e;const n=(e=t[Ff])!==null&&e!==void 0?e:"";t[Ff]=(n+` ${Xb}`).trimStart()}function jb(t){return t!==null&&typeof t=="object"&&t instanceof Bp}function e2(t){return Zt(this,arguments,function*(n,r=100){let i,o=0;for(;o<r;){const s=yield Z(n.listTools({cursor:i}));for(const a of s.tools)yield yield Z(a),o++;if(!s.nextCursor)break;i=s.nextCursor}})}class Bp{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Bp(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const h of this.mcpClients)try{for(var a=!0,l=(n=void 0,jt(e2(h))),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const p=i;s.push(p);const m=p.name;if(o[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);o[m]=h}}catch(p){n={error:p}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),RL(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function t2(t,e,n){const r=new _L;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class n2{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=o2(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const h=new Promise(C=>{c=C}),p=e.callbacks,m=function(){c({})},v=this.apiClient,I={onopen:m,onmessage:C=>{t2(v,p.onmessage,C)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(C){},onclose:(r=p==null?void 0:p.onclose)!==null&&r!==void 0?r:function(C){}},P=this.webSocketFactory.create(l,i2(s),I);P.connect(),await h;const T={setup:{model:ce(this.apiClient,e.model)}};return P.send(JSON.stringify(T)),new r2(P,this.apiClient)}}class r2{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=AU(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=CU(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(xi.PLAY)}pause(){this.sendPlaybackControl(xi.PAUSE)}stop(){this.sendPlaybackControl(xi.STOP)}resetContext(){this.sendPlaybackControl(xi.RESET_CONTEXT)}close(){this.conn.close()}}function i2(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function o2(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const s2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function a2(t,e,n){const r=new vL;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=NU(o);Object.assign(r,s)}else Object.assign(r,o);e(r)}class l2{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new n2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let h;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&Kw(e.config.tools)&&Jw(p);const m=f2(p);if(this.apiClient.isVertexAI()){const S=this.apiClient.getProject(),R=this.apiClient.getLocation(),M=this.apiClient.getApiKey(),V=!!S&&!!R||!!M;this.apiClient.getCustomBaseUrl()&&!V?h=l:(h=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,h))}else{const S=this.apiClient.getApiKey();let R="BidiGenerateContent",M="key";S!=null&&S.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),R="BidiGenerateContentConstrained",M="access_token"),h=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${R}?${M}=${S}`}let v=()=>{};const I=new Promise(S=>{v=S}),P=e.callbacks,N=function(){var S;(S=P==null?void 0:P.onopen)===null||S===void 0||S.call(P),v({})},w=this.apiClient,T={onopen:N,onmessage:S=>{a2(w,P.onmessage,S)},onerror:(n=P==null?void 0:P.onerror)!==null&&n!==void 0?n:function(S){},onclose:(r=P==null?void 0:P.onclose)!==null&&r!==void 0?r:function(S){}},C=this.webSocketFactory.create(h,d2(m),T);C.connect(),await I;let D=ce(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){const S=this.apiClient.getProject(),R=this.apiClient.getLocation();S&&R&&(D=`projects/${S}/locations/${R}/`+D)}let b={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[du.AUDIO]}:e.config.responseModalities=[du.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const L=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],A=[];for(const S of L)if(this.isCallableTool(S)){const R=S;A.push(await R.tool())}else A.push(S);A.length>0&&(e.config.tools=A);const _={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?b=SU(this.apiClient,_):b=wU(this.apiClient,_),delete b.config,C.send(JSON.stringify(b)),new c2(C,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const u2={turnComplete:!0};class c2{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Ot(n.turns),e.isVertexAI()||(r=r.map(i=>Xu(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(s2)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},u2),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:PU(e)}:n={realtimeInput:RU(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function d2(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function f2(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const L_=10;function V_(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if($i(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function $i(t){return"callTool"in t&&typeof t.callTool=="function"}function h2(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>$i(i)))!==null&&r!==void 0?r:!1}function U_(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if($i(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(i)}),n}function F_(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class p2 extends qn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!h2(n)||V_(n.config))return await this.generateContentInternal(l);const c=U_(n);if(c.length>0){const P=c.map(N=>`tools[${N}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${P}.`)}let h,p;const m=Ot(l.contents),v=(o=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:L_;let I=0;for(;I<v&&(h=await this.generateContentInternal(l),!(!h.functionCalls||h.functionCalls.length===0));){const P=h.candidates[0].content,N=[];for(const w of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if($i(w)){const C=await w.callTool(h.functionCalls);N.push(...C)}I++,p={role:"user",parts:N},l.contents=Ot(l.contents),l.contents.push(P),l.contents.push(p),F_(l.config)&&(m.push(P),m.push(p))}return F_(l.config)&&(h.automaticFunctionCallingHistory=m),h},this.generateContentStream=async n=>{var r,i,o,s,a;if(this.maybeMoveToResponseJsonSchem(n),V_(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const l=U_(n);if(l.length>0){const p=l.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(o=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,h=(a=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!h)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=l==null?void 0:l.safetyAttributes:s.push(l);let a;return o?a={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new ai(Bn.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,o,s,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(o=n.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async l=>$i(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(a.config.tools=s,e.config&&e.config.tools&&Kw(e.config.tools)){const l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),Jw(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if($i(s)){const a=s,l=await a.tool();for(const c of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(o.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);o.set(c.name,a)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:L_;let s=!1,a=0;const l=await this.initAfcToolsMap(e);return function(c,h,p){return Zt(this,arguments,function*(){for(var m,v,I,P,N,w;a<o;){s&&(a++,s=!1);const b=yield Z(c.processParamsMaybeAddMcpUsage(p)),L=yield Z(c.generateContentStreamInternal(b)),A=[],_=[];try{for(var T=!0,C=(v=void 0,jt(L)),D;D=yield Z(C.next()),m=D.done,!m;T=!0){P=D.value,T=!1;const S=P;if(yield yield Z(S),S.candidates&&(!((N=S.candidates[0])===null||N===void 0)&&N.content)){_.push(S.candidates[0].content);for(const R of(w=S.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(a<o&&R.functionCall){if(!R.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(R.functionCall.name)){const M=yield Z(h.get(R.functionCall.name).callTool([R.functionCall]));A.push(...M)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${R.functionCall.name}`)}}}}catch(S){v={error:S}}finally{try{!T&&!m&&(I=C.return)&&(yield Z(I.call(C)))}finally{if(v)throw v.error}}if(A.length>0){s=!0;const S=new zo;S.candidates=[{content:{role:"user",parts:A}}],yield yield Z(S);const R=[];R.push(..._),R.push({role:"user",parts:A});const M=Ot(p.contents).concat(R);p.contents=M}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=k_(this.apiClient,e);return a=$("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=M_(h),m=new zo;return Object.assign(m,p),m})}else{const c=N_(this.apiClient,e);return a=$("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=x_(h),m=new zo;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=k_(this.apiClient,e);return a=$("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return Zt(this,arguments,function*(){var m,v,I,P;try{for(var N=!0,w=jt(p),T;T=yield Z(w.next()),m=T.done,!m;N=!0){P=T.value,N=!1;const C=P,D=M_(yield Z(C.json()),e);D.sdkHttpResponse={headers:C.headers};const b=new zo;Object.assign(b,D),yield yield Z(b)}}catch(C){v={error:C}}finally{try{!N&&!m&&(I=w.return)&&(yield Z(I.call(w)))}finally{if(v)throw v.error}}})})}else{const c=N_(this.apiClient,e);return a=$("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(p){return Zt(this,arguments,function*(){var m,v,I,P;try{for(var N=!0,w=jt(p),T;T=yield Z(w.next()),m=T.done,!m;N=!0){P=T.value,N=!1;const C=P,D=x_(yield Z(C.json()),e);D.sdkHttpResponse={headers:C.headers};const b=new zo;Object.assign(b,D),yield yield Z(b)}}catch(C){v={error:C}}finally{try{!N&&!m&&(I=w.return)&&(yield Z(I.call(w)))}finally{if(v)throw v.error}}})})}}async embedContent(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=sF(this.apiClient,e);return a=$("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=lF(h),m=new f_;return Object.assign(m,p),m})}else{const c=oF(this.apiClient,e);return a=$("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=aF(h),m=new f_;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=_F(this.apiClient,e);return a=$("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=TF(h),m=new h_;return Object.assign(m,p),m})}else{const c=vF(this.apiClient,e);return a=$("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=EF(h),m=new h_;return Object.assign(m,p),m})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=tF(this.apiClient,e);return o=$("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const c=nF(l),h=new sL;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=_b(this.apiClient,e);return o=$("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const c=Eb(l),h=new aL;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=eb(this.apiClient,e);return o=$("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=tb(l),h=new lL;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=ab(this.apiClient,e);return o=$("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=lb(l),h=new uL;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=bF(this.apiClient,e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Uf(h))}else{const c=FF(this.apiClient,e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Vf(h))}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=KF(this.apiClient,e);return a=$("{models_url}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=YF(h),m=new p_;return Object.assign(m,p),m})}else{const c=WF(this.apiClient,e);return a=$("{models_url}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=JF(h),m=new p_;return Object.assign(m,p),m})}}async update(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=yb(this.apiClient,e);return a=$("{model}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Uf(h))}else{const c=gb(this.apiClient,e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Vf(h))}}async delete(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=XU(this.apiClient,e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=jU(h),m=new m_;return Object.assign(m,p),m})}else{const c=QU(this.apiClient,e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=ZU(h),m=new m_;return Object.assign(m,p),m})}}async countTokens(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=KU(this.apiClient,e);return a=$("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=YU(h),m=new g_;return Object.assign(m,p),m})}else{const c=WU(this.apiClient,e);return a=$("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=JU(h),m=new g_;return Object.assign(m,p),m})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=OU(this.apiClient,e);return o=$("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const c=BU(l),h=new cL;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=RF(this.apiClient,e);return a=$("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const p=CF(h),m=new fu;return Object.assign(m,p),m})}else{const c=AF(this.apiClient,e);return a=$("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const p=SF(h),m=new fu;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class m2 extends qn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=eL(e);return a=$("{operationName}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s}else{const c=j1(e);return a=$("{operationName}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=W1(e);return o=$("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g2(t){const e={},n=u(t,["data"]);if(n!=null&&d(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function y2(t){const e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>A2(o))),d(e,["parts"],i)}const r=u(t,["role"]);return r!=null&&d(e,["role"],r),e}function v2(t,e,n){const r={},i=u(e,["expireTime"]);n!==void 0&&i!=null&&d(n,["expireTime"],i);const o=u(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&d(n,["newSessionExpireTime"],o);const s=u(e,["uses"]);n!==void 0&&s!=null&&d(n,["uses"],s);const a=u(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&d(n,["bidiGenerateContentSetup"],C2(t,a));const l=u(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&d(n,["fieldMask"],l),r}function _2(t,e){const n={},r=u(e,["config"]);return r!=null&&d(n,["config"],v2(t,r,n)),n}function E2(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function T2(t){const e={},n=u(t,["id"]);n!=null&&d(e,["id"],n);const r=u(t,["args"]);r!=null&&d(e,["args"],r);const i=u(t,["name"]);if(i!=null&&d(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function I2(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function w2(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function S2(t,e){const n={},r=u(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],r);const i=u(t,["responseModalities"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig","responseModalities"],i);const o=u(t,["temperature"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","temperature"],o);const s=u(t,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);const a=u(t,["topK"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","topK"],a);const l=u(t,["maxOutputTokens"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","maxOutputTokens"],l);const c=u(t,["mediaResolution"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","mediaResolution"],c);const h=u(t,["seed"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","seed"],h);const p=u(t,["speechConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","speechConfig"],Op(p));const m=u(t,["thinkingConfig"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","thinkingConfig"],m);const v=u(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],v);const I=u(t,["systemInstruction"]);e!==void 0&&I!=null&&d(e,["setup","systemInstruction"],y2(at(I)));const P=u(t,["tools"]);if(e!==void 0&&P!=null){let L=To(P);Array.isArray(L)&&(L=L.map(A=>P2(Eo(A)))),d(e,["setup","tools"],L)}const N=u(t,["sessionResumption"]);e!==void 0&&N!=null&&d(e,["setup","sessionResumption"],R2(N));const w=u(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&d(e,["setup","inputAudioTranscription"],w);const T=u(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&d(e,["setup","outputAudioTranscription"],T);const C=u(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&d(e,["setup","realtimeInputConfig"],C);const D=u(t,["contextWindowCompression"]);e!==void 0&&D!=null&&d(e,["setup","contextWindowCompression"],D);const b=u(t,["proactivity"]);if(e!==void 0&&b!=null&&d(e,["setup","proactivity"],b),u(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function C2(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["setup","model"],ce(t,r));const i=u(e,["config"]);return i!=null&&d(n,["config"],S2(i,n)),n}function A2(t){const e={},n=u(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);const i=u(t,["executableCode"]);i!=null&&d(e,["executableCode"],i);const o=u(t,["fileData"]);o!=null&&d(e,["fileData"],E2(o));const s=u(t,["functionCall"]);s!=null&&d(e,["functionCall"],T2(s));const a=u(t,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&d(e,["inlineData"],g2(l));const c=u(t,["text"]);c!=null&&d(e,["text"],c);const h=u(t,["thought"]);h!=null&&d(e,["thought"],h);const p=u(t,["thoughtSignature"]);p!=null&&d(e,["thoughtSignature"],p);const m=u(t,["videoMetadata"]);return m!=null&&d(e,["videoMetadata"],m),e}function R2(t){const e={},n=u(t,["handle"]);if(n!=null&&d(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function P2(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const r=u(t,["fileSearch"]);r!=null&&d(e,["fileSearch"],r);const i=u(t,["codeExecution"]);if(i!=null&&d(e,["codeExecution"],i),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=u(t,["functionDeclarations"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(p=>p)),d(e,["functionDeclarations"],h)}const s=u(t,["googleMaps"]);s!=null&&d(e,["googleMaps"],I2(s));const a=u(t,["googleSearch"]);a!=null&&d(e,["googleSearch"],w2(a));const l=u(t,["googleSearchRetrieval"]);l!=null&&d(e,["googleSearchRetrieval"],l);const c=u(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function N2(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function k2(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=N2(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(c=>s.includes(c)?`generationConfig.${c}`:c));const l=[];o&&l.push(o),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class x2 extends qn{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=_2(this.apiClient,e);o=$("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;const l=k2(a,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M2(t,e){const n={},r=u(t,["force"]);return e!==void 0&&r!=null&&d(e,["_query","force"],r),n}function D2(t){const e={},n=u(t,["name"]);n!=null&&d(e,["_url","name"],n);const r=u(t,["config"]);return r!=null&&M2(r,e),e}function L2(t){const e={},n=u(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function V2(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=u(t,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),n}function U2(t){const e={},n=u(t,["parent"]);n!=null&&d(e,["_url","parent"],n);const r=u(t,["config"]);return r!=null&&V2(r,e),e}function F2(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=u(t,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class b2 extends qn{constructor(e){super(),this.apiClient=e,this.list=async n=>new ai(Bn.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=L2(e);return o=$("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=D2(e);i=$("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=U2(e);return o=$("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=F2(l),h=new dL;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class O2 extends qn{constructor(e,n=new b2(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new ai(Bn.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Rb(e);return o=$("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=kb(e);return o=$("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Nb(e);i=$("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Ub(e);return o=$("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Fb(l),h=new fL;return Object.assign(h,c),h})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=bb(e);return o=$("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Ob(l),h=new hL;return Object.assign(h,c),h})}}async importFile(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Db(e);return o=$("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Mb(l),h=new Lp;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Yw=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Yw=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const B2=()=>Yw();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bf(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Of=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ht extends Error{}class mt extends Ht{constructor(e,n,r,i){super(`${mt.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new ec({message:r,cause:Of(n)});const o=n;return e===400?new Xw(e,o,r,i):e===401?new Zw(e,o,r,i):e===403?new jw(e,o,r,i):e===404?new eS(e,o,r,i):e===409?new tS(e,o,r,i):e===422?new nS(e,o,r,i):e===429?new rS(e,o,r,i):e>=500?new iS(e,o,r,i):new mt(e,o,r,i)}}class Bf extends mt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ec extends mt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Qw extends ec{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Xw extends mt{}class Zw extends mt{}class jw extends mt{}class eS extends mt{}class tS extends mt{}class nS extends mt{}class rS extends mt{}class iS extends mt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const G2=/^[a-z][a-z0-9+.-]*:/i,H2=t=>G2.test(t);let Gf=t=>(Gf=Array.isArray,Gf(t));const q2=Gf;let $2=q2;const b_=$2;function z2(t){if(!t)return!0;for(const e in t)return!1;return!0}function W2(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const K2=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ht(`${t} must be an integer`);if(e<0)throw new Ht(`${t} must be a positive integer`);return e},J2=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Y2=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yi="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q2(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const X2=()=>{var t,e,n,r,i;const o=Q2();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":yi,"X-Stainless-OS":B_(Deno.build.os),"X-Stainless-Arch":O_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":yi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":yi,"X-Stainless-OS":B_((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":O_((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const s=Z2();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":yi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":yi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Z2(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,s=r[3]||0;return{browser:e,version:`${i}.${o}.${s}`}}}return null}const O_=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",B_=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Qa;const j2=()=>Qa??(Qa=X2());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eO(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function oS(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function tO(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return oS({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function sS(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function nO(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rO=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aS=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ud(t,e,n){return aS(),new File(t,e??"unknown_file",n)}function iO(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const oO=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lS=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",sO=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&lS(t),aO=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function lO(t,e,n){if(aS(),t=await t,sO(t))return t instanceof File?t:ud([await t.arrayBuffer()],t.name);if(aO(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),ud(await Hf(i),e,n)}const r=await Hf(t);if(e||(e=iO(t)),!(n!=null&&n.type)){const i=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return ud(r,e,n)}async function Hf(t){var e,n,r,i,o;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(lS(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(oO(t))try{for(var a=!0,l=jt(t),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const h=i;s.push(...await Hf(h))}}catch(h){n={error:h}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{const h=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${h?`; constructor: ${h}`:""}${uO(t)}`)}return s}function uO(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uS{constructor(e){this._client=e}}uS._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cS(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const G_=Object.freeze(Object.create(null)),cO=(t=cS)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const o=[],s=n.reduce((h,p,m)=>{var v,I,P;/[?#]/.test(p)&&(i=!0);const N=r[m];let w=(i?encodeURIComponent:t)(""+N);return m!==r.length&&(N==null||typeof N=="object"&&N.toString===((P=Object.getPrototypeOf((I=Object.getPrototypeOf((v=N.hasOwnProperty)!==null&&v!==void 0?v:G_))!==null&&I!==void 0?I:G_))===null||P===void 0?void 0:P.toString))&&(w=N+"",o.push({start:h.length+p.length,length:w.length,error:`Value of type ${Object.prototype.toString.call(N).slice(8,-1)} is not a valid path parameter`})),h+p+(m===r.length?"":w)},""),a=s.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(a))!==null;)o.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(o.sort((h,p)=>h.start-p.start),o.length>0){let h=0;const p=o.reduce((m,v)=>{const I=" ".repeat(v.start-h),P="^".repeat(v.length);return h=v.start+v.length,m+I+P},"");throw new Ht(`Path parameters result in path with invalid segments:
${o.map(m=>m.error).join(`
`)}
${s}
${p}`)}return s},Xa=cO(cS);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dS extends uS{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,o=pu(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new Ht("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Ht("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Xa`/${i}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(Xa`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(Xa`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const o=n??{},{api_version:s=this._client.apiVersion}=o,a=pu(o,["api_version"]);return this._client.get(Xa`/${s}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}dS._key=Object.freeze(["interactions"]);class fS extends dS{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dO(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let Za;function Gp(t){let e;return(Za??(e=new globalThis.TextEncoder,Za=e.encode.bind(e)))(t)}let ja;function H_(t){let e;return(ja??(e=new globalThis.TextDecoder,ja=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tc{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Gp(e):e;this.buffer=dO([this.buffer,n]);const r=[];let i;for(;(i=fO(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(H_(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,s=H_(this.buffer.subarray(0,o));r.push(s),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}tc.NEWLINE_CHARS=new Set([`
`,"\r"]);tc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function fO(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function hO(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mu={off:0,error:200,warn:300,info:400,debug:500},q_=(t,e,n)=>{if(t){if(W2(mu,t))return t;ft(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(mu))}`)}};function rs(){}function el(t,e,n){return!e||mu[t]>mu[n]?rs:e[t].bind(e)}const pO={error:rs,warn:rs,info:rs,debug:rs};let $_=new WeakMap;function ft(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return pO;const i=$_.get(n);if(i&&i[0]===r)return i[1];const o={error:el("error",n,r),warn:el("warn",n,r),info:el("info",n,r),debug:el("debug",n,r)};return $_.set(n,[r,o]),o}const br=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mi{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const o=r?ft(r):console;function s(){return Zt(this,arguments,function*(){var l,c,h,p;if(i)throw new Ht("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let m=!1;try{try{for(var v=!0,I=jt(mO(e,n)),P;P=yield Z(I.next()),l=P.done,!l;v=!0){p=P.value,v=!1;const N=p;if(!m)if(N.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield Z(JSON.parse(N.data))}catch(w){throw o.error("Could not parse message into JSON:",N.data),o.error("From chunk:",N.raw),w}}}catch(N){c={error:N}}finally{try{!v&&!l&&(h=I.return)&&(yield Z(h.call(I)))}finally{if(c)throw c.error}}m=!0}catch(N){if(bf(N))return yield Z(void 0);throw N}finally{m||n.abort()}})}return new Mi(s,n,r)}static fromReadableStream(e,n,r){let i=!1;function o(){return Zt(this,arguments,function*(){var l,c,h,p;const m=new tc,v=sS(e);try{for(var I=!0,P=jt(v),N;N=yield Z(P.next()),l=N.done,!l;I=!0){p=N.value,I=!1;const w=p;for(const T of m.decode(w))yield yield Z(T)}}catch(w){c={error:w}}finally{try{!I&&!l&&(h=P.return)&&(yield Z(h.call(P)))}finally{if(c)throw c.error}}for(const w of m.flush())yield yield Z(w)})}function s(){return Zt(this,arguments,function*(){var l,c,h,p;if(i)throw new Ht("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let m=!1;try{try{for(var v=!0,I=jt(o()),P;P=yield Z(I.next()),l=P.done,!l;v=!0){p=P.value,v=!1;const N=p;m||N&&(yield yield Z(JSON.parse(N)))}}catch(N){c={error:N}}finally{try{!v&&!l&&(h=I.return)&&(yield Z(h.call(I)))}finally{if(c)throw c.error}}m=!0}catch(N){if(bf(N))return yield Z(void 0);throw N}finally{m||n.abort()}})}return new Mi(s,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const s=r.next();e.push(s),n.push(s)}return o.shift()}});return[new Mi(()=>i(e),this.controller,this.client),new Mi(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return oS({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:o}=await n.next();if(o)return r.close();const s=Gp(JSON.stringify(i)+`
`);r.enqueue(s)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function mO(t,e){return Zt(this,arguments,function*(){var r,i,o,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ht("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ht("Attempted to iterate over a response with no body");const a=new yO,l=new tc,c=sS(t.body);try{for(var h=!0,p=jt(gO(c)),m;m=yield Z(p.next()),r=m.done,!r;h=!0){s=m.value,h=!1;const v=s;for(const I of l.decode(v)){const P=a.decode(I);P&&(yield yield Z(P))}}}catch(v){i={error:v}}finally{try{!h&&!r&&(o=p.return)&&(yield Z(o.call(p)))}finally{if(i)throw i.error}}for(const v of l.flush()){const I=a.decode(v);I&&(yield yield Z(I))}})}function gO(t){return Zt(this,arguments,function*(){var n,r,i,o;let s=new Uint8Array;try{for(var a=!0,l=jt(t),c;c=yield Z(l.next()),n=c.done,!n;a=!0){o=c.value,a=!1;const h=o;if(h==null)continue;const p=h instanceof ArrayBuffer?new Uint8Array(h):typeof h=="string"?Gp(h):h;let m=new Uint8Array(s.length+p.length);m.set(s),m.set(p,s.length),s=m;let v;for(;(v=hO(s))!==-1;)yield yield Z(s.slice(0,v)),s=s.slice(v)}}catch(h){r={error:h}}finally{try{!a&&!n&&(i=l.return)&&(yield Z(i.call(l)))}finally{if(r)throw r.error}}s.length>0&&(yield yield Z(s))})}class yO{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=vO(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function vO(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function _O(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:o}=e,s=await(async()=>{var a;if(e.options.stream)return ft(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Mi.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),c=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?n.headers.get("content-length")==="0"?void 0:await n.json():await n.text()})();return ft(t).debug(`[${r}] response parsed`,br({retryOfRequestLogID:i,url:n.url,status:n.status,body:s,durationMs:Date.now()-o})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hp extends Promise{constructor(e,n,r=_O){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new Hp(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hS=Symbol("brand.privateNullableHeaders");function*EO(t){if(!t)return;if(hS in t){const{values:r,nulls:i}=t;yield*r.entries();for(const o of i)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():b_(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const o=b_(r[1])?r[1]:[r[1]];let s=!1;for(const a of o)a!==void 0&&(e&&!s&&(s=!0,yield[i,null]),yield[i,a])}}const Wo=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[o,s]of EO(r)){const a=o.toLowerCase();i.has(a)||(e.delete(o),i.add(a)),s===null?(e.delete(o),n.add(a)):(e.append(o,s),n.delete(a))}}return{[hS]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cd=t=>{var e,n,r,i,o,s;if(typeof globalThis.process<"u")return(r=(n=(e=B1)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(s=(o=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||o===void 0?void 0:o.call(i,t))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var pS;class nc{constructor(e){var n,r,i,o,s,a,l,{baseURL:c=cd("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:h=(n=cd("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=e,m=pu(e,["baseURL","apiKey","apiVersion"]);const v=Object.assign(Object.assign({apiKey:h,apiVersion:p},m),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=v.baseURL,this.timeout=(r=v.timeout)!==null&&r!==void 0?r:nc.DEFAULT_TIMEOUT,this.logger=(i=v.logger)!==null&&i!==void 0?i:console;const I="warn";this.logLevel=I,this.logLevel=(s=(o=q_(v.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:q_(cd("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:I,this.fetchOptions=v.fetchOptions,this.maxRetries=(a=v.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=v.fetch)!==null&&l!==void 0?l:eO(),this.encoder=rO,this._options=v,this.apiKey=h,this.apiVersion=p,this.clientAdapter=v.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Wo([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Wo([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Wo([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Ht(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${yi}`}defaultIdempotencyKey(){return`stainless-node-retry-${B2()}`}makeStatusError(e,n,r,i){return mt.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,o=H2(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return z2(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new Hp(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,o,s;const a=await e,l=(i=a.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:c,url:h,timeout:p}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(c,{url:h,options:a});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),v=r===void 0?"":`, retryOf: ${r}`,I=Date.now();if(ft(this).debug(`[${m}] sending request`,br({retryOfRequestLogID:r,method:a.method,url:h,options:a,headers:c.headers})),!((o=a.signal)===null||o===void 0)&&o.aborted)throw new Bf;const P=new AbortController,N=await this.fetchWithTimeout(h,c,p,P).catch(Of),w=Date.now();if(N instanceof globalThis.Error){const C=`retrying, ${n} attempts remaining`;if(!((s=a.signal)===null||s===void 0)&&s.aborted)throw new Bf;const D=bf(N)||/timed? ?out/i.test(String(N)+("cause"in N?String(N.cause):""));if(n)return ft(this).info(`[${m}] connection ${D?"timed out":"failed"} - ${C}`),ft(this).debug(`[${m}] connection ${D?"timed out":"failed"} (${C})`,br({retryOfRequestLogID:r,url:h,durationMs:w-I,message:N.message})),this.retryRequest(a,n,r??m);throw ft(this).info(`[${m}] connection ${D?"timed out":"failed"} - error; no more retries left`),ft(this).debug(`[${m}] connection ${D?"timed out":"failed"} (error; no more retries left)`,br({retryOfRequestLogID:r,url:h,durationMs:w-I,message:N.message})),D?new Qw:new ec({cause:N})}const T=`[${m}${v}] ${c.method} ${h} ${N.ok?"succeeded":"failed"} with status ${N.status} in ${w-I}ms`;if(!N.ok){const C=await this.shouldRetry(N);if(n&&C){const S=`retrying, ${n} attempts remaining`;return await nO(N.body),ft(this).info(`${T} - ${S}`),ft(this).debug(`[${m}] response error (${S})`,br({retryOfRequestLogID:r,url:N.url,status:N.status,headers:N.headers,durationMs:w-I})),this.retryRequest(a,n,r??m,N.headers)}const D=C?"error; no more retries left":"error; not retryable";ft(this).info(`${T} - ${D}`);const b=await N.text().catch(S=>Of(S).message),L=J2(b),A=L?void 0:b;throw ft(this).debug(`[${m}] response error (${D})`,br({retryOfRequestLogID:r,url:N.url,status:N.status,headers:N.headers,message:A,durationMs:Date.now()-I})),this.makeStatusError(N.status,L,A,N.headers)}return ft(this).info(T),ft(this).debug(`[${m}] response start`,br({retryOfRequestLogID:r,url:N.url,status:N.status,headers:N.headers,durationMs:w-I})),{response:N,options:a,controller:P,requestLogID:m,retryOfRequestLogID:r,startTime:I}}async fetchWithTimeout(e,n,r,i){const o=n||{},{signal:s,method:a}=o,l=pu(o,["signal","method"]),c=this._makeAbort(i);s&&s.addEventListener("abort",c,{once:!0});const h=setTimeout(c,r),p=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,m=Object.assign(Object.assign(Object.assign({signal:i.signal},p?{duplex:"half"}:{}),{method:"GET"}),l);a&&(m.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(h)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var o;let s;const a=i==null?void 0:i.get("retry-after-ms");if(a){const c=parseFloat(a);Number.isNaN(c)||(s=c)}const l=i==null?void 0:i.get("retry-after");if(l&&!s){const c=parseFloat(l);Number.isNaN(c)?s=Date.parse(l)-Date.now():s=c*1e3}if(!(s&&0<=s&&s<60*1e3)){const c=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,c)}return await Y2(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,s=Math.min(.5*Math.pow(2,o),8),a=1-Math.random()*.25;return s*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,o;const s=Object.assign({},e),{method:a,path:l,query:c,defaultBaseURL:h}=s,p=this.buildURL(l,c,h);"timeout"in s&&K2("timeout",s.timeout),s.timeout=(r=s.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:m,body:v}=this.buildBody({options:s}),I=await this.buildHeaders({options:e,method:a,bodyHeaders:m,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:I},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&v instanceof globalThis.ReadableStream&&{duplex:"half"}),v&&{body:v}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(o=s.fetchOptions)!==null&&o!==void 0?o:{}),url:p,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const s=await this.authHeaders(e);let a=Wo([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),j2()),this._options.defaultHeaders,r,e.headers,s]);return this.validateHeaders(a),a.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Wo([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:tO(e)}:this.encoder({body:e,headers:r})}}nc.DEFAULT_TIMEOUT=6e4;class qe extends nc{constructor(){super(...arguments),this.interactions=new fS(this)}}pS=qe;qe.GeminiNextGenAPIClient=pS;qe.GeminiNextGenAPIClientError=Ht;qe.APIError=mt;qe.APIConnectionError=ec;qe.APIConnectionTimeoutError=Qw;qe.APIUserAbortError=Bf;qe.NotFoundError=eS;qe.ConflictError=tS;qe.RateLimitError=rS;qe.BadRequestError=Xw;qe.AuthenticationError=Zw;qe.InternalServerError=iS;qe.PermissionDeniedError=jw;qe.UnprocessableEntityError=nS;qe.toFile=lO;qe.Interactions=fS;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TO(t,e){const n={},r=u(t,["name"]);return r!=null&&d(n,["_url","name"],r),n}function IO(t,e){const n={},r=u(t,["name"]);return r!=null&&d(n,["_url","name"],r),n}function wO(t,e){const n={},r=u(t,["sdkHttpResponse"]);return r!=null&&d(n,["sdkHttpResponse"],r),n}function SO(t,e){const n={},r=u(t,["sdkHttpResponse"]);return r!=null&&d(n,["sdkHttpResponse"],r),n}function CO(t,e,n){const r={};if(u(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=u(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&d(e,["displayName"],i),u(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=u(t,["epochCount"]);e!==void 0&&o!=null&&d(e,["tuningTask","hyperparameters","epochCount"],o);const s=u(t,["learningRateMultiplier"]);if(s!=null&&d(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),u(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(u(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(u(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const a=u(t,["batchSize"]);e!==void 0&&a!=null&&d(e,["tuningTask","hyperparameters","batchSize"],a);const l=u(t,["learningRate"]);if(e!==void 0&&l!=null&&d(e,["tuningTask","hyperparameters","learningRate"],l),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(u(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(u(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(u(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(u(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(u(t,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return r}function AO(t,e,n){const r={};let i=u(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const L=u(t,["validationDataset"]);e!==void 0&&L!=null&&d(e,["supervisedTuningSpec"],dd(L))}else if(i==="PREFERENCE_TUNING"){const L=u(t,["validationDataset"]);e!==void 0&&L!=null&&d(e,["preferenceOptimizationSpec"],dd(L))}else if(i==="DISTILLATION"){const L=u(t,["validationDataset"]);e!==void 0&&L!=null&&d(e,["distillationSpec"],dd(L))}const o=u(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&d(e,["tunedModelDisplayName"],o);const s=u(t,["description"]);e!==void 0&&s!=null&&d(e,["description"],s);let a=u(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const L=u(t,["epochCount"]);e!==void 0&&L!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],L)}else if(a==="PREFERENCE_TUNING"){const L=u(t,["epochCount"]);e!==void 0&&L!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],L)}else if(a==="DISTILLATION"){const L=u(t,["epochCount"]);e!==void 0&&L!=null&&d(e,["distillationSpec","hyperParameters","epochCount"],L)}let l=u(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const L=u(t,["learningRateMultiplier"]);e!==void 0&&L!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],L)}else if(l==="PREFERENCE_TUNING"){const L=u(t,["learningRateMultiplier"]);e!==void 0&&L!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],L)}else if(l==="DISTILLATION"){const L=u(t,["learningRateMultiplier"]);e!==void 0&&L!=null&&d(e,["distillationSpec","hyperParameters","learningRateMultiplier"],L)}let c=u(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const L=u(t,["exportLastCheckpointOnly"]);e!==void 0&&L!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],L)}else if(c==="PREFERENCE_TUNING"){const L=u(t,["exportLastCheckpointOnly"]);e!==void 0&&L!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],L)}else if(c==="DISTILLATION"){const L=u(t,["exportLastCheckpointOnly"]);e!==void 0&&L!=null&&d(e,["distillationSpec","exportLastCheckpointOnly"],L)}let h=u(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const L=u(t,["adapterSize"]);e!==void 0&&L!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],L)}else if(h==="PREFERENCE_TUNING"){const L=u(t,["adapterSize"]);e!==void 0&&L!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],L)}else if(h==="DISTILLATION"){const L=u(t,["adapterSize"]);e!==void 0&&L!=null&&d(e,["distillationSpec","hyperParameters","adapterSize"],L)}let p=u(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const L=u(t,["tuningMode"]);e!==void 0&&L!=null&&d(e,["supervisedTuningSpec","tuningMode"],L)}const m=u(t,["customBaseModel"]);e!==void 0&&m!=null&&d(e,["customBaseModel"],m);let v=u(n,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const L=u(t,["batchSize"]);e!==void 0&&L!=null&&d(e,["supervisedTuningSpec","hyperParameters","batchSize"],L)}let I=u(n,["config","method"]);if(I===void 0&&(I="SUPERVISED_FINE_TUNING"),I==="SUPERVISED_FINE_TUNING"){const L=u(t,["learningRate"]);e!==void 0&&L!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRate"],L)}const P=u(t,["labels"]);e!==void 0&&P!=null&&d(e,["labels"],P);const N=u(t,["beta"]);e!==void 0&&N!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],N);const w=u(t,["baseTeacherModel"]);e!==void 0&&w!=null&&d(e,["distillationSpec","baseTeacherModel"],w);const T=u(t,["tunedTeacherModelSource"]);e!==void 0&&T!=null&&d(e,["distillationSpec","tunedTeacherModelSource"],T);const C=u(t,["sftLossWeightMultiplier"]);e!==void 0&&C!=null&&d(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],C);const D=u(t,["outputUri"]);e!==void 0&&D!=null&&d(e,["outputUri"],D);const b=u(t,["encryptionSpec"]);return e!==void 0&&b!=null&&d(e,["encryptionSpec"],b),r}function RO(t,e){const n={},r=u(t,["baseModel"]);r!=null&&d(n,["baseModel"],r);const i=u(t,["preTunedModel"]);i!=null&&d(n,["preTunedModel"],i);const o=u(t,["trainingDataset"]);o!=null&&bO(o);const s=u(t,["config"]);return s!=null&&CO(s,n),n}function PO(t,e){const n={},r=u(t,["baseModel"]);r!=null&&d(n,["baseModel"],r);const i=u(t,["preTunedModel"]);i!=null&&d(n,["preTunedModel"],i);const o=u(t,["trainingDataset"]);o!=null&&OO(o,n,e);const s=u(t,["config"]);return s!=null&&AO(s,n,e),n}function NO(t,e){const n={},r=u(t,["name"]);return r!=null&&d(n,["_url","name"],r),n}function kO(t,e){const n={},r=u(t,["name"]);return r!=null&&d(n,["_url","name"],r),n}function xO(t,e,n){const r={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const o=u(t,["pageToken"]);e!==void 0&&o!=null&&d(e,["_query","pageToken"],o);const s=u(t,["filter"]);return e!==void 0&&s!=null&&d(e,["_query","filter"],s),r}function MO(t,e,n){const r={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const o=u(t,["pageToken"]);e!==void 0&&o!=null&&d(e,["_query","pageToken"],o);const s=u(t,["filter"]);return e!==void 0&&s!=null&&d(e,["_query","filter"],s),r}function DO(t,e){const n={},r=u(t,["config"]);return r!=null&&xO(r,n),n}function LO(t,e){const n={},r=u(t,["config"]);return r!=null&&MO(r,n),n}function VO(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=u(t,["nextPageToken"]);i!=null&&d(n,["nextPageToken"],i);const o=u(t,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>mS(a))),d(n,["tuningJobs"],s)}return n}function UO(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=u(t,["nextPageToken"]);i!=null&&d(n,["nextPageToken"],i);const o=u(t,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>qf(a))),d(n,["tuningJobs"],s)}return n}function FO(t,e){const n={},r=u(t,["name"]);r!=null&&d(n,["model"],r);const i=u(t,["name"]);return i!=null&&d(n,["endpoint"],i),n}function bO(t,e){const n={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=u(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),d(n,["examples","examples"],i)}return n}function OO(t,e,n){const r={};let i=u(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=u(t,["gcsUri"]);e!==void 0&&s!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=u(t,["gcsUri"]);e!==void 0&&s!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(i==="DISTILLATION"){const s=u(t,["gcsUri"]);e!==void 0&&s!=null&&d(e,["distillationSpec","promptDatasetUri"],s)}let o=u(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=u(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=u(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(o==="DISTILLATION"){const s=u(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&d(e,["distillationSpec","promptDatasetUri"],s)}if(u(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function mS(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=u(t,["name"]);i!=null&&d(n,["name"],i);const o=u(t,["state"]);o!=null&&d(n,["state"],xw(o));const s=u(t,["createTime"]);s!=null&&d(n,["createTime"],s);const a=u(t,["tuningTask","startTime"]);a!=null&&d(n,["startTime"],a);const l=u(t,["tuningTask","completeTime"]);l!=null&&d(n,["endTime"],l);const c=u(t,["updateTime"]);c!=null&&d(n,["updateTime"],c);const h=u(t,["description"]);h!=null&&d(n,["description"],h);const p=u(t,["baseModel"]);p!=null&&d(n,["baseModel"],p);const m=u(t,["_self"]);return m!=null&&d(n,["tunedModel"],FO(m)),n}function qf(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=u(t,["name"]);i!=null&&d(n,["name"],i);const o=u(t,["state"]);o!=null&&d(n,["state"],xw(o));const s=u(t,["createTime"]);s!=null&&d(n,["createTime"],s);const a=u(t,["startTime"]);a!=null&&d(n,["startTime"],a);const l=u(t,["endTime"]);l!=null&&d(n,["endTime"],l);const c=u(t,["updateTime"]);c!=null&&d(n,["updateTime"],c);const h=u(t,["error"]);h!=null&&d(n,["error"],h);const p=u(t,["description"]);p!=null&&d(n,["description"],p);const m=u(t,["baseModel"]);m!=null&&d(n,["baseModel"],m);const v=u(t,["tunedModel"]);v!=null&&d(n,["tunedModel"],v);const I=u(t,["preTunedModel"]);I!=null&&d(n,["preTunedModel"],I);const P=u(t,["supervisedTuningSpec"]);P!=null&&d(n,["supervisedTuningSpec"],P);const N=u(t,["preferenceOptimizationSpec"]);N!=null&&d(n,["preferenceOptimizationSpec"],N);const w=u(t,["distillationSpec"]);w!=null&&d(n,["distillationSpec"],w);const T=u(t,["tuningDataStats"]);T!=null&&d(n,["tuningDataStats"],T);const C=u(t,["encryptionSpec"]);C!=null&&d(n,["encryptionSpec"],C);const D=u(t,["partnerModelTuningSpec"]);D!=null&&d(n,["partnerModelTuningSpec"],D);const b=u(t,["customBaseModel"]);b!=null&&d(n,["customBaseModel"],b);const L=u(t,["experiment"]);L!=null&&d(n,["experiment"],L);const A=u(t,["labels"]);A!=null&&d(n,["labels"],A);const _=u(t,["outputUri"]);_!=null&&d(n,["outputUri"],_);const S=u(t,["pipelineJob"]);S!=null&&d(n,["pipelineJob"],S);const R=u(t,["serviceAccount"]);R!=null&&d(n,["serviceAccount"],R);const M=u(t,["tunedModelDisplayName"]);M!=null&&d(n,["tunedModelDisplayName"],M);const V=u(t,["veoTuningSpec"]);return V!=null&&d(n,["veoTuningSpec"],V),n}function BO(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=u(t,["name"]);i!=null&&d(n,["name"],i);const o=u(t,["metadata"]);o!=null&&d(n,["metadata"],o);const s=u(t,["done"]);s!=null&&d(n,["done"],s);const a=u(t,["error"]);return a!=null&&d(n,["error"],a),n}function dd(t,e){const n={},r=u(t,["gcsUri"]);r!=null&&d(n,["validationDatasetUri"],r);const i=u(t,["vertexDatasetResource"]);return i!=null&&d(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GO extends qn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ai(Bn.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:kf.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=kO(e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>qf(h))}else{const c=NO(e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>mS(h))}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=LO(e);return a=$("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=UO(h),m=new y_;return Object.assign(m,p),m})}else{const c=DO(e);return a=$("tunedModels",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=VO(h),m=new y_;return Object.assign(m,p),m})}}async cancel(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=IO(e);return a=$("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=SO(h),m=new v_;return Object.assign(m,p),m})}else{const c=TO(e);return a=$("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=wO(h),m=new v_;return Object.assign(m,p),m})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=PO(e,e);return o=$("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>qf(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=RO(e);return o=$("tunedModels",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>BO(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HO{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const qO=1024*1024*8,$O=3,zO=1e3,WO=2,gu="x-goog-upload-status";async function KO(t,e,n){var r;const i=await gS(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[gu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function JO(t,e,n){var r;const i=await gS(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[gu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=Cw(o),a=new Vp;return Object.assign(a,s),a}async function gS(t,e,n){var r,i;let o=0,s=0,a=new Mf(new Response),l="upload";for(o=t.size;s<o;){const c=Math.min(qO,o-s),h=t.slice(s,s+c);s+c>=o&&(l+=", finalize");let p=0,m=zO;for(;p<$O&&(a=await n.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(s),"Content-Length":String(c)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[gu]));)p++,await QO(m),m=m*WO;if(s+=c,((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[gu])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function YO(t){return{size:t.size,type:t.type}}function QO(t){return new Promise(e=>setTimeout(e,t))}class XO{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await KO(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await JO(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await YO(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZO{create(e,n,r){return new jO(e,n,r)}}class jO{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const z_="x-goog-api-key";class e4{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(z_)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(z_,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const t4="gl-node/";class n4{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const n=this.httpOptions;n!=null&&n.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const r=new qe({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:n==null?void 0:n.timeout,maxRetries:(e=n==null?void 0:n.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=r.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=$1(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new e4(this.apiKey);this.apiClient=new Yb({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:t4+"web",uploader:new XO,downloader:new HO}),this.models=new p2(this.apiClient),this.live=new l2(this.apiClient,i,new ZO),this.batches=new EV(this.apiClient),this.chats=new tU(this.models,this.apiClient),this.caches=new ZV(this.apiClient),this.files=new hU(this.apiClient),this.operations=new m2(this.apiClient),this.authTokens=new x2(this.apiClient),this.tunings=new GO(this.apiClient),this.fileSearchStores=new O2(this.apiClient)}}const yS=new n4({apiKey:"AIzaSyBrKqC3jnsXqEViaROJMW_P5lWT0grBS4Q"}),vS="gemini-3-flash-preview",_S=async t=>new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{const o=r.result.split(",")[1];e({inlineData:{data:o,mimeType:t.type}})},r.onerror=n,r.readAsDataURL(t)}),r4=async(t,e)=>{const n=[];if(e){const i=await _S(e);n.push(i)}t&&n.push({text:`Descrio da comida: ${t}`}),n.push({text:`
    Analise a imagem da comida fornecida e/ou a descrio.
    Identifique os itens alimentares.
    Estime o total de calorias.
    Fornea uma diviso de macronutrientes (Protena, Carboidratos, Gorduras).
    Fornea um breve resumo em PORTUGUS (PT-BR).
    
    Retorne a resposta em formato JSON correspondente a este esquema:
    {
      "foodName": "string (Nome do prato principal ou resumo em PT-BR)",
      "estimatedCalories": number,
      "macros": {
        "protein": "string (ex: 20g)",
        "carbs": "string",
        "fat": "string"
      },
      "confidence": "string (Alta/Mdia/Baixa)",
      "summary": "string (Resumo amigvel em Portugus PT-BR)"
    }
  `});try{const i=await yS.models.generateContent({model:vS,contents:{parts:n},config:{responseMimeType:"application/json",responseSchema:{type:ke.OBJECT,properties:{foodName:{type:ke.STRING},estimatedCalories:{type:ke.NUMBER},macros:{type:ke.OBJECT,properties:{protein:{type:ke.STRING},carbs:{type:ke.STRING},fat:{type:ke.STRING}}},confidence:{type:ke.STRING},summary:{type:ke.STRING}}}}});if(i.text)return JSON.parse(i.text);throw new Error("Nenhum dado retornado pela IA")}catch(i){throw console.error("Gemini Food Analysis Error:",i),i}},i4=async(t,e,n)=>{const r=[];if(n){const s=await _S(n);r.push(s)}const i=`
    Estatsticas do Usurio:
    Peso: ${t.weight}kg
    Altura: ${t.height}cm
    TMB (Taxa Metablica Basal): ${t.tmb} kcal/dia
  `;r.push({text:i}),e&&r.push({text:`Descrio do treino: ${e}`}),r.push({text:`
    Analise a descrio do treino fornecida ou a imagem (que pode ser a tela de uma mquina de academia, um quadro de resumo de treino ou uma selfie) no contexto das Estatsticas do Usurio.
    Estime o total de calorias queimadas durante esta sesso especfica.
    Responda em PORTUGUS (PT-BR).
    
    Retorne a resposta em formato JSON correspondente a este esquema:
    {
      "workoutType": "string (Tipo de treino em PT-BR)",
      "caloriesBurned": number,
      "intensity": "string (Baixa/Moderada/Alta)",
      "summary": "string (Breve anlise do esforo em Portugus PT-BR)"
    }
  `});try{const s=await yS.models.generateContent({model:vS,contents:{parts:r},config:{responseMimeType:"application/json",responseSchema:{type:ke.OBJECT,properties:{workoutType:{type:ke.STRING},caloriesBurned:{type:ke.NUMBER},intensity:{type:ke.STRING},summary:{type:ke.STRING}}}}});if(s.text)return JSON.parse(s.text);throw new Error("Nenhum dado retornado pela IA")}catch(s){throw console.error("Gemini Workout Analysis Error:",s),s}},o4=({userId:t,setView:e})=>{const[n,r]=le.useState(""),[i,o]=le.useState(null),[s,a]=le.useState(null),[l,c]=le.useState(!1),[h,p]=le.useState(null),[m,v]=le.useState(null),I=le.useRef(null),P=C=>{if(C.target.files&&C.target.files[0]){const D=C.target.files[0];o(D);const b=new FileReader;b.onloadend=()=>{a(b.result)},b.readAsDataURL(D)}},N=async()=>{if(!n&&!i){v("Por favor, fornea uma descrio ou uma imagem.");return}c(!0),v(null),p(null);try{const C=await r4(n,i);p(C)}catch(C){v("Falha ao analisar. Tente novamente. "+(C instanceof Error?C.message:""))}finally{c(!1)}},w=async()=>{if(h){c(!0);try{await Iw(t,{timestamp:Date.now(),type:"FOOD",title:h.foodName,calories:h.estimatedCalories,details:h.summary}),e(we.DASHBOARD)}catch(C){console.error(C),v("Erro ao salvar no banco de dados."),c(!1)}}},T=()=>{r(""),o(null),a(null),p(null),I.current&&(I.current.value="")};return x.jsx("div",{className:"max-w-3xl mx-auto px-4 py-6",children:x.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-slate-100",children:[x.jsxs("h2",{className:"text-2xl font-bold text-slate-800 mb-6 flex items-center",children:[x.jsx("span",{className:"bg-orange-100 text-orange-600 p-2 rounded-lg mr-3",children:x.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),"Anlise de Alimentao"]}),h?x.jsxs("div",{className:"animate-fade-in",children:[x.jsxs("div",{className:"bg-orange-50 border border-orange-100 rounded-xl p-6 mb-6",children:[x.jsxs("div",{className:"flex justify-between items-start mb-4",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-xl font-bold text-slate-900",children:h.foodName}),x.jsxs("p",{className:"text-sm text-slate-500",children:["Confiana: ",h.confidence]})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("span",{className:"block text-3xl font-bold text-orange-600",children:h.estimatedCalories}),x.jsx("span",{className:"text-xs text-orange-600 font-medium uppercase tracking-wide",children:"Calorias"})]})]}),x.jsxs("p",{className:"text-slate-700 mb-6 italic",children:['"',h.summary,'"']}),x.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[x.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm border border-slate-100 text-center",children:[x.jsx("span",{className:"block text-sm text-slate-500 mb-1",children:"Protena"}),x.jsx("span",{className:"block font-semibold text-slate-800",children:h.macros.protein})]}),x.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm border border-slate-100 text-center",children:[x.jsx("span",{className:"block text-sm text-slate-500 mb-1",children:"Carboidratos"}),x.jsx("span",{className:"block font-semibold text-slate-800",children:h.macros.carbs})]}),x.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm border border-slate-100 text-center",children:[x.jsx("span",{className:"block text-sm text-slate-500 mb-1",children:"Gordura"}),x.jsx("span",{className:"block font-semibold text-slate-800",children:h.macros.fat})]})]})]}),x.jsxs("div",{className:"flex space-x-4",children:[x.jsx("button",{onClick:T,className:"flex-1 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 font-medium rounded-xl transition-colors",children:"Descartar"}),x.jsx("button",{onClick:w,className:"flex-1 py-3 bg-emerald-600 hover:bg-emerald-700 text-white font-bold rounded-xl shadow-md transition-colors",children:l?"Salvando...":"Salvar no Histrico"})]})]}):x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Foto da Comida"}),x.jsxs("div",{onClick:()=>{var C;return(C=I.current)==null?void 0:C.click()},className:`border-2 border-dashed rounded-xl h-48 flex flex-col items-center justify-center cursor-pointer transition-colors ${s?"border-orange-300 bg-orange-50":"border-slate-300 hover:border-orange-400 hover:bg-slate-50"}`,children:[s?x.jsx("img",{src:s,alt:"Preview",className:"h-full w-full object-contain rounded-lg"}):x.jsxs(x.Fragment,{children:[x.jsx("svg",{className:"w-10 h-10 text-slate-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),x.jsx("p",{className:"text-sm text-slate-500",children:"Toque para enviar imagem"})]}),x.jsx("input",{type:"file",ref:I,onChange:P,accept:"image/*",className:"hidden"})]}),i&&x.jsx("button",{onClick:C=>{C.stopPropagation(),o(null),a(null)},className:"text-xs text-red-500 hover:underline",children:"Remover Imagem"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Descrio (Opcional se enviar imagem)"}),x.jsx("textarea",{value:n,onChange:C=>r(C.target.value),placeholder:"ex: Fil de frango grelhado com brcolis e arroz integral...",className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all resize-none h-24"})]}),m&&x.jsx("div",{className:"p-3 bg-red-50 text-red-600 rounded-lg text-sm",children:m}),x.jsx("button",{onClick:N,disabled:l,className:`w-full py-3 px-4 rounded-xl font-bold text-white shadow-md transition-all ${l?"bg-slate-400 cursor-not-allowed":"bg-orange-50 hover:bg-orange-600 hover:shadow-lg active:scale-[0.98]"}`,children:l?x.jsxs("span",{className:"flex items-center justify-center",children:[x.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Analisando..."]}):"Analisar Refeio"})]})]})})},s4=({userId:t,setView:e})=>{const[n,r]=le.useState({weight:70,height:170,tmb:1600}),[i,o]=le.useState(""),[s,a]=le.useState(null),[l,c]=le.useState(null),[h,p]=le.useState(!1),[m,v]=le.useState(null),[I,P]=le.useState(null),[N,w]=le.useState(!0),T=le.useRef(null);le.useEffect(()=>{(async()=>{const S=await ww(t);r(S),(S.weight!==70||S.tmb!==1600)&&w(!1)})()},[t]);const C=(_,S)=>{const R=parseFloat(S)||0,M={...n,[_]:R};r(M),k1(t,M).catch(console.error)},D=_=>{if(_.target.files&&_.target.files[0]){const S=_.target.files[0];a(S);const R=new FileReader;R.onloadend=()=>{c(R.result)},R.readAsDataURL(S)}},b=async()=>{if(!i&&!s){P("Descreva o treino ou envie uma foto.");return}p(!0),P(null),v(null);try{const _=await i4(n,i,s);v(_)}catch(_){P("Falha ao analisar. Tente novamente. "+(_ instanceof Error?_.message:""))}finally{p(!1)}},L=async()=>{if(m){p(!0);try{await Iw(t,{timestamp:Date.now(),type:"WORKOUT",title:m.workoutType,calories:m.caloriesBurned,details:m.summary}),e(we.DASHBOARD)}catch(_){console.error(_),P("Erro ao salvar no banco de dados."),p(!1)}}},A=()=>{o(""),a(null),c(null),v(null),T.current&&(T.current.value="")};return x.jsx("div",{className:"max-w-3xl mx-auto px-4 py-6",children:x.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-slate-100",children:[x.jsxs("h2",{className:"text-2xl font-bold text-slate-800 mb-6 flex items-center",children:[x.jsx("span",{className:"bg-blue-100 text-blue-600 p-2 rounded-lg mr-3",children:x.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),"Calculadora de Treino"]}),m?x.jsxs("div",{className:"animate-fade-in",children:[x.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-xl p-6 mb-6",children:[x.jsxs("div",{className:"flex justify-between items-start mb-4",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-xl font-bold text-slate-900",children:m.workoutType}),x.jsxs("p",{className:"inline-block bg-blue-200 text-blue-800 text-xs px-2 py-1 rounded-full mt-1",children:["Intensidade: ",m.intensity]})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("span",{className:"block text-3xl font-bold text-blue-600",children:m.caloriesBurned}),x.jsx("span",{className:"text-xs text-blue-600 font-medium uppercase tracking-wide",children:"Calorias Queimadas"})]})]}),x.jsxs("p",{className:"text-slate-700 italic border-l-4 border-blue-300 pl-3",children:['"',m.summary,'"']})]}),x.jsxs("div",{className:"flex space-x-4",children:[x.jsx("button",{onClick:A,className:"flex-1 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 font-medium rounded-xl transition-colors",children:"Descartar"}),x.jsx("button",{onClick:L,className:"flex-1 py-3 bg-emerald-600 hover:bg-emerald-700 text-white font-bold rounded-xl shadow-md transition-colors",children:h?"Salvando...":"Salvar no Histrico"})]})]}):x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-200",children:[x.jsxs("div",{className:"flex justify-between items-center mb-2 cursor-pointer",onClick:()=>w(!N),children:[x.jsx("h3",{className:"font-semibold text-slate-700",children:"Minhas Estatsticas"}),x.jsx("svg",{className:`w-5 h-5 text-slate-400 transition-transform ${N?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),N&&x.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4 animate-fade-in",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Peso (kg)"}),x.jsx("input",{type:"number",value:n.weight,onChange:_=>C("weight",_.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Altura (cm)"}),x.jsx("input",{type:"number",value:n.height,onChange:_=>C("height",_.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"TMB (kcal)"}),x.jsx("input",{type:"number",value:n.tmb,onChange:_=>C("tmb",_.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Foto do Treino (Opcional)"}),x.jsxs("div",{onClick:()=>{var _;return(_=T.current)==null?void 0:_.click()},className:`border-2 border-dashed rounded-xl h-32 flex flex-col items-center justify-center cursor-pointer transition-colors ${l?"border-blue-300 bg-blue-50":"border-slate-300 hover:border-blue-400 hover:bg-slate-50"}`,children:[l?x.jsx("img",{src:l,alt:"Preview",className:"h-full w-full object-contain rounded-lg"}):x.jsxs("div",{className:"text-center",children:[x.jsxs("svg",{className:"w-8 h-8 text-slate-400 mx-auto mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),x.jsx("span",{className:"text-xs text-slate-500",children:"Enviar foto do painel/equipamento"})]}),x.jsx("input",{type:"file",ref:T,onChange:D,accept:"image/*",className:"hidden"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Descrio"}),x.jsx("textarea",{value:i,onChange:_=>o(_.target.value),placeholder:"ex: 30 minutos de esteira HIIT a 10km/h...",className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all resize-none h-24"})]}),I&&x.jsx("div",{className:"p-3 bg-red-50 text-red-600 rounded-lg text-sm",children:I}),x.jsx("button",{onClick:b,disabled:h,className:`w-full py-3 px-4 rounded-xl font-bold text-white shadow-md transition-all ${h?"bg-slate-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 hover:shadow-lg active:scale-[0.98]"}`,children:h?x.jsxs("span",{className:"flex items-center justify-center",children:[x.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Calculando..."]}):"Calcular Queima"})]})]})})},a4=()=>{const[t,e]=le.useState(""),[n,r]=le.useState(""),[i,o]=le.useState(""),[s,a]=le.useState(!1),l=async c=>{c.preventDefault(),a(!0),o("");try{await nk(xp,t,n)}catch(h){console.error(h),h.code==="auth/invalid-credential"?o("E-mail ou senha invlidos."):o("Falha ao entrar. Tente novamente.")}finally{a(!1)}};return x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 px-4",children:x.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 border border-slate-100",children:[x.jsxs("div",{className:"text-center mb-8",children:[x.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-emerald-100 text-emerald-600 mb-4",children:x.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),x.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"NutriAI"}),x.jsx("p",{className:"text-slate-500 mt-2",children:"Entre para monitorar sua sade"})]}),i&&x.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm mb-6 text-center",children:i}),x.jsxs("form",{onSubmit:l,className:"space-y-6",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"E-mail"}),x.jsx("input",{type:"email",value:t,onChange:c=>e(c.target.value),required:!0,className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none transition-all",placeholder:"voce@exemplo.com"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Senha"}),x.jsx("input",{type:"password",value:n,onChange:c=>r(c.target.value),required:!0,className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none transition-all",placeholder:""})]}),x.jsx("button",{type:"submit",disabled:s,className:`w-full py-3 px-4 rounded-xl font-bold text-white shadow-md transition-all ${s?"bg-slate-400 cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-700 hover:shadow-lg active:scale-[0.98]"}`,children:s?"Entrando...":"Entrar"})]}),x.jsx("div",{className:"mt-6 text-center text-xs text-slate-400",children:"Nota: Novos contatos devem ser criados pelo administrador."})]})})},l4=()=>{const[t,e]=le.useState(null),[n,r]=le.useState(!0),[i,o]=le.useState(we.DASHBOARD);return le.useEffect(()=>{const s=ok(xp,a=>{e(a),r(!1),a?i===we.LOGIN&&o(we.DASHBOARD):o(we.LOGIN)});return()=>s()},[i]),n?x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:x.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})}):t?x.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col font-sans",children:[x.jsx(R1,{currentView:i,setView:o,userEmail:t.email}),x.jsxs("main",{className:"flex-grow",children:[i===we.DASHBOARD&&x.jsx(x1,{setView:o,userId:t.uid}),i===we.FOOD_TRACKER&&x.jsx(o4,{userId:t.uid,setView:o}),i===we.WORKOUT_TRACKER&&x.jsx(s4,{userId:t.uid,setView:o})]}),x.jsx("footer",{className:"bg-white border-t border-slate-200 py-6 mt-12",children:x.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center text-slate-400 text-sm",children:[" ",new Date().getFullYear()," NutriAI. Powered by Google Gemini."]})})]}):x.jsx(a4,{})},ES=document.getElementById("root");if(!ES)throw new Error("Could not find root element to mount to");const u4=fd.createRoot(ES);u4.render(x.jsx(pC.StrictMode,{children:x.jsx(l4,{})}));

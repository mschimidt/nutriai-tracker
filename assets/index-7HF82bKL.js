(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function pv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fp={exports:{}},ss={},pp={exports:{}},b={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var So=Symbol.for("react.element"),hv=Symbol.for("react.portal"),mv=Symbol.for("react.fragment"),gv=Symbol.for("react.strict_mode"),vv=Symbol.for("react.profiler"),yv=Symbol.for("react.provider"),_v=Symbol.for("react.context"),Ev=Symbol.for("react.forward_ref"),Tv=Symbol.for("react.suspense"),Sv=Symbol.for("react.memo"),Iv=Symbol.for("react.lazy"),Ju=Symbol.iterator;function Cv(t){return t===null||typeof t!="object"?null:(t=Ju&&t[Ju]||t["@@iterator"],typeof t=="function"?t:null)}var hp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mp=Object.assign,gp={};function yr(t,e,n){this.props=t,this.context=e,this.refs=gp,this.updater=n||hp}yr.prototype.isReactComponent={};yr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vp(){}vp.prototype=yr.prototype;function xa(t,e,n){this.props=t,this.context=e,this.refs=gp,this.updater=n||hp}var Ma=xa.prototype=new vp;Ma.constructor=xa;mp(Ma,yr.prototype);Ma.isPureReactComponent=!0;var Ku=Array.isArray,yp=Object.prototype.hasOwnProperty,Da={current:null},_p={key:!0,ref:!0,__self:!0,__source:!0};function Ep(t,e,n){var r,o={},i=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(i=""+e.key),e)yp.call(e,r)&&!_p.hasOwnProperty(r)&&(o[r]=e[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];o.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:So,type:t,key:i,ref:s,props:o,_owner:Da.current}}function wv(t,e){return{$$typeof:So,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function La(t){return typeof t=="object"&&t!==null&&t.$$typeof===So}function Av(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Yu=/\/+/g;function Ds(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Av(""+t.key):e.toString(36)}function ii(t,e,n,r,o){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case So:case hv:s=!0}}if(s)return s=t,o=o(s),t=r===""?"."+Ds(s,0):r,Ku(o)?(n="",t!=null&&(n=t.replace(Yu,"$&/")+"/"),ii(o,e,n,"",function(d){return d})):o!=null&&(La(o)&&(o=wv(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(Yu,"$&/")+"/")+t)),e.push(o)),1;if(s=0,r=r===""?".":r+":",Ku(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+Ds(i,a);s+=ii(i,e,n,c,o)}else if(c=Cv(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+Ds(i,a++),s+=ii(i,e,n,c,o);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Uo(t,e,n){if(t==null)return t;var r=[],o=0;return ii(t,r,"","",function(i){return e.call(n,i,o++)}),r}function Rv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ae={current:null},si={transition:null},Nv={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:si,ReactCurrentOwner:Da};function Tp(){throw Error("act(...) is not supported in production builds of React.")}b.Children={map:Uo,forEach:function(t,e,n){Uo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Uo(t,function(){e++}),e},toArray:function(t){return Uo(t,function(e){return e})||[]},only:function(t){if(!La(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};b.Component=yr;b.Fragment=mv;b.Profiler=vv;b.PureComponent=xa;b.StrictMode=gv;b.Suspense=Tv;b.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nv;b.act=Tp;b.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=mp({},t.props),o=t.key,i=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,s=Da.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)yp.call(e,c)&&!_p.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:So,type:t.type,key:o,ref:i,props:r,_owner:s}};b.createContext=function(t){return t={$$typeof:_v,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yv,_context:t},t.Consumer=t};b.createElement=Ep;b.createFactory=function(t){var e=Ep.bind(null,t);return e.type=t,e};b.createRef=function(){return{current:null}};b.forwardRef=function(t){return{$$typeof:Ev,render:t}};b.isValidElement=La;b.lazy=function(t){return{$$typeof:Iv,_payload:{_status:-1,_result:t},_init:Rv}};b.memo=function(t,e){return{$$typeof:Sv,type:t,compare:e===void 0?null:e}};b.startTransition=function(t){var e=si.transition;si.transition={};try{t()}finally{si.transition=e}};b.unstable_act=Tp;b.useCallback=function(t,e){return Ae.current.useCallback(t,e)};b.useContext=function(t){return Ae.current.useContext(t)};b.useDebugValue=function(){};b.useDeferredValue=function(t){return Ae.current.useDeferredValue(t)};b.useEffect=function(t,e){return Ae.current.useEffect(t,e)};b.useId=function(){return Ae.current.useId()};b.useImperativeHandle=function(t,e,n){return Ae.current.useImperativeHandle(t,e,n)};b.useInsertionEffect=function(t,e){return Ae.current.useInsertionEffect(t,e)};b.useLayoutEffect=function(t,e){return Ae.current.useLayoutEffect(t,e)};b.useMemo=function(t,e){return Ae.current.useMemo(t,e)};b.useReducer=function(t,e,n){return Ae.current.useReducer(t,e,n)};b.useRef=function(t){return Ae.current.useRef(t)};b.useState=function(t){return Ae.current.useState(t)};b.useSyncExternalStore=function(t,e,n){return Ae.current.useSyncExternalStore(t,e,n)};b.useTransition=function(){return Ae.current.useTransition()};b.version="18.3.1";pp.exports=b;var $=pp.exports;const Pv=pv($);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv=$,xv=Symbol.for("react.element"),Mv=Symbol.for("react.fragment"),Dv=Object.prototype.hasOwnProperty,Lv=kv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Uv={key:!0,ref:!0,__self:!0,__source:!0};function Sp(t,e,n){var r,o={},i=null,s=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Dv.call(e,r)&&!Uv.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:xv,type:t,key:i,ref:s,props:o,_owner:Lv.current}}ss.Fragment=Mv;ss.jsx=Sp;ss.jsxs=Sp;fp.exports=ss;var S=fp.exports,ml={},Ip={exports:{}},Oe={},Cp={exports:{}},wp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,U){var O=k.length;k.push(U);e:for(;0<O;){var te=O-1>>>1,ue=k[te];if(0<o(ue,U))k[te]=U,k[O]=ue,O=te;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var U=k[0],O=k.pop();if(O!==U){k[0]=O;e:for(var te=0,ue=k.length,Do=ue>>>1;te<Do;){var cn=2*(te+1)-1,Ms=k[cn],dn=cn+1,Lo=k[dn];if(0>o(Ms,O))dn<ue&&0>o(Lo,Ms)?(k[te]=Lo,k[dn]=O,te=dn):(k[te]=Ms,k[cn]=O,te=cn);else if(dn<ue&&0>o(Lo,O))k[te]=Lo,k[dn]=O,te=dn;else break e}}return U}function o(k,U){var O=k.sortIndex-U.sortIndex;return O!==0?O:k.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var c=[],d=[],f=1,h=null,p=3,m=!1,_=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(k){for(var U=n(d);U!==null;){if(U.callback===null)r(d);else if(U.startTime<=k)r(d),U.sortIndex=U.expirationTime,e(c,U);else break;U=n(d)}}function I(k){if(E=!1,y(k),!_)if(n(c)!==null)_=!0,xn(w);else{var U=n(d);U!==null&&Mn(I,U.startTime-k)}}function w(k,U){_=!1,E&&(E=!1,v(N),N=-1),m=!0;var O=p;try{for(y(U),h=n(c);h!==null&&(!(h.expirationTime>U)||k&&!G());){var te=h.callback;if(typeof te=="function"){h.callback=null,p=h.priorityLevel;var ue=te(h.expirationTime<=U);U=t.unstable_now(),typeof ue=="function"?h.callback=ue:h===n(c)&&r(c),y(U)}else r(c);h=n(c)}if(h!==null)var Do=!0;else{var cn=n(d);cn!==null&&Mn(I,cn.startTime-U),Do=!1}return Do}finally{h=null,p=O,m=!1}}var C=!1,A=null,N=-1,P=5,M=-1;function G(){return!(t.unstable_now()-M<P)}function ie(){if(A!==null){var k=t.unstable_now();M=k;var U=!0;try{U=A(!0,k)}finally{U?ee():(C=!1,A=null)}}else C=!1}var ee;if(typeof g=="function")ee=function(){g(ie)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,kt=se.port2;se.port1.onmessage=ie,ee=function(){kt.postMessage(null)}}else ee=function(){T(ie,0)};function xn(k){A=k,C||(C=!0,ee())}function Mn(k,U){N=T(function(){k(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,xn(w))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(k){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var O=p;p=U;try{return k()}finally{p=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,U){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var O=p;p=k;try{return U()}finally{p=O}},t.unstable_scheduleCallback=function(k,U,O){var te=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?te+O:te):O=te,k){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=O+ue,k={id:f++,callback:U,priorityLevel:k,startTime:O,expirationTime:ue,sortIndex:-1},O>te?(k.sortIndex=O,e(d,k),n(c)===null&&k===n(d)&&(E?(v(N),N=-1):E=!0,Mn(I,O-te))):(k.sortIndex=ue,e(c,k),_||m||(_=!0,xn(w))),k},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(k){var U=p;return function(){var O=p;p=U;try{return k.apply(this,arguments)}finally{p=O}}}})(wp);Cp.exports=wp;var Fv=Cp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ov=$,Fe=Fv;function R(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ap=new Set,jr={};function Rn(t,e){ur(t,e),ur(t+"Capture",e)}function ur(t,e){for(jr[t]=e,t=0;t<e.length;t++)Ap.add(e[t])}var Et=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gl=Object.prototype.hasOwnProperty,bv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qu={},Xu={};function Vv(t){return gl.call(Xu,t)?!0:gl.call(Qu,t)?!1:bv.test(t)?Xu[t]=!0:(Qu[t]=!0,!1)}function Gv(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Hv(t,e,n,r){if(e===null||typeof e>"u"||Gv(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Re(t,e,n,r,o,i,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var me={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){me[t]=new Re(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];me[e]=new Re(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){me[t]=new Re(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){me[t]=new Re(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){me[t]=new Re(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){me[t]=new Re(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){me[t]=new Re(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){me[t]=new Re(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){me[t]=new Re(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ua=/[\-:]([a-z])/g;function Fa(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ua,Fa);me[e]=new Re(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ua,Fa);me[e]=new Re(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ua,Fa);me[e]=new Re(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){me[t]=new Re(t,1,!1,t.toLowerCase(),null,!1,!1)});me.xlinkHref=new Re("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){me[t]=new Re(t,1,!1,t.toLowerCase(),null,!0,!0)});function Oa(t,e,n,r){var o=me.hasOwnProperty(e)?me[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Hv(e,n,o,r)&&(n=null),r||o===null?Vv(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Rt=Ov.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fo=Symbol.for("react.element"),Fn=Symbol.for("react.portal"),On=Symbol.for("react.fragment"),ba=Symbol.for("react.strict_mode"),vl=Symbol.for("react.profiler"),Rp=Symbol.for("react.provider"),Np=Symbol.for("react.context"),Va=Symbol.for("react.forward_ref"),yl=Symbol.for("react.suspense"),_l=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Dt=Symbol.for("react.lazy"),Pp=Symbol.for("react.offscreen"),Zu=Symbol.iterator;function Ar(t){return t===null||typeof t!="object"?null:(t=Zu&&t[Zu]||t["@@iterator"],typeof t=="function"?t:null)}var X=Object.assign,Ls;function Fr(t){if(Ls===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ls=e&&e[1]||""}return`
`+Ls+t}var Us=!1;function Fs(t,e){if(!t||Us)return"";Us=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var o=d.stack.split(`
`),i=r.stack.split(`
`),s=o.length-1,a=i.length-1;1<=s&&0<=a&&o[s]!==i[a];)a--;for(;1<=s&&0<=a;s--,a--)if(o[s]!==i[a]){if(s!==1||a!==1)do if(s--,a--,0>a||o[s]!==i[a]){var c=`
`+o[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=a);break}}}finally{Us=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fr(t):""}function Bv(t){switch(t.tag){case 5:return Fr(t.type);case 16:return Fr("Lazy");case 13:return Fr("Suspense");case 19:return Fr("SuspenseList");case 0:case 2:case 15:return t=Fs(t.type,!1),t;case 11:return t=Fs(t.type.render,!1),t;case 1:return t=Fs(t.type,!0),t;default:return""}}function El(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case On:return"Fragment";case Fn:return"Portal";case vl:return"Profiler";case ba:return"StrictMode";case yl:return"Suspense";case _l:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Np:return(t.displayName||"Context")+".Consumer";case Rp:return(t._context.displayName||"Context")+".Provider";case Va:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ga:return e=t.displayName||null,e!==null?e:El(t.type)||"Memo";case Dt:e=t._payload,t=t._init;try{return El(t(e))}catch{}}return null}function $v(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return El(e);case 8:return e===ba?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function en(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qv(t){var e=kp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Oo(t){t._valueTracker||(t._valueTracker=qv(t))}function xp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=kp(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ii(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Tl(t,e){var n=e.checked;return X({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ju(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=en(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Mp(t,e){e=e.checked,e!=null&&Oa(t,"checked",e,!1)}function Sl(t,e){Mp(t,e);var n=en(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Il(t,e.type,n):e.hasOwnProperty("defaultValue")&&Il(t,e.type,en(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ec(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Il(t,e,n){(e!=="number"||Ii(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Or=Array.isArray;function Xn(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+en(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Cl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(R(91));return X({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(R(92));if(Or(n)){if(1<n.length)throw Error(R(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:en(n)}}function Dp(t,e){var n=en(e.value),r=en(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function nc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Lp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Lp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bo,Up=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bo=bo||document.createElement("div"),bo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function eo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var $r={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zv=["Webkit","ms","Moz","O"];Object.keys($r).forEach(function(t){zv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$r[e]=$r[t]})});function Fp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||$r.hasOwnProperty(t)&&$r[t]?(""+e).trim():e+"px"}function Op(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Fp(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var Wv=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Al(t,e){if(e){if(Wv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(R(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(R(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(R(61))}if(e.style!=null&&typeof e.style!="object")throw Error(R(62))}}function Rl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nl=null;function Ha(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pl=null,Zn=null,jn=null;function rc(t){if(t=wo(t)){if(typeof Pl!="function")throw Error(R(280));var e=t.stateNode;e&&(e=ds(e),Pl(t.stateNode,t.type,e))}}function bp(t){Zn?jn?jn.push(t):jn=[t]:Zn=t}function Vp(){if(Zn){var t=Zn,e=jn;if(jn=Zn=null,rc(t),e)for(t=0;t<e.length;t++)rc(e[t])}}function Gp(t,e){return t(e)}function Hp(){}var Os=!1;function Bp(t,e,n){if(Os)return t(e,n);Os=!0;try{return Gp(t,e,n)}finally{Os=!1,(Zn!==null||jn!==null)&&(Hp(),Vp())}}function to(t,e){var n=t.stateNode;if(n===null)return null;var r=ds(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(R(231,e,typeof n));return n}var kl=!1;if(Et)try{var Rr={};Object.defineProperty(Rr,"passive",{get:function(){kl=!0}}),window.addEventListener("test",Rr,Rr),window.removeEventListener("test",Rr,Rr)}catch{kl=!1}function Jv(t,e,n,r,o,i,s,a,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var qr=!1,Ci=null,wi=!1,xl=null,Kv={onError:function(t){qr=!0,Ci=t}};function Yv(t,e,n,r,o,i,s,a,c){qr=!1,Ci=null,Jv.apply(Kv,arguments)}function Qv(t,e,n,r,o,i,s,a,c){if(Yv.apply(this,arguments),qr){if(qr){var d=Ci;qr=!1,Ci=null}else throw Error(R(198));wi||(wi=!0,xl=d)}}function Nn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $p(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function oc(t){if(Nn(t)!==t)throw Error(R(188))}function Xv(t){var e=t.alternate;if(!e){if(e=Nn(t),e===null)throw Error(R(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return oc(o),t;if(i===r)return oc(o),e;i=i.sibling}throw Error(R(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s){for(a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?t:e}function qp(t){return t=Xv(t),t!==null?zp(t):null}function zp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=zp(t);if(e!==null)return e;t=t.sibling}return null}var Wp=Fe.unstable_scheduleCallback,ic=Fe.unstable_cancelCallback,Zv=Fe.unstable_shouldYield,jv=Fe.unstable_requestPaint,re=Fe.unstable_now,ey=Fe.unstable_getCurrentPriorityLevel,Ba=Fe.unstable_ImmediatePriority,Jp=Fe.unstable_UserBlockingPriority,Ai=Fe.unstable_NormalPriority,ty=Fe.unstable_LowPriority,Kp=Fe.unstable_IdlePriority,ls=null,lt=null;function ny(t){if(lt&&typeof lt.onCommitFiberRoot=="function")try{lt.onCommitFiberRoot(ls,t,void 0,(t.current.flags&128)===128)}catch{}}var Xe=Math.clz32?Math.clz32:iy,ry=Math.log,oy=Math.LN2;function iy(t){return t>>>=0,t===0?32:31-(ry(t)/oy|0)|0}var Vo=64,Go=4194304;function br(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ri(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,i=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~o;a!==0?r=br(a):(i&=s,i!==0&&(r=br(i)))}else s=n&~o,s!==0?r=br(s):i!==0&&(r=br(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,i=e&-e,o>=i||o===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Xe(e),o=1<<n,r|=t[n],e&=~o;return r}function sy(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ly(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,i=t.pendingLanes;0<i;){var s=31-Xe(i),a=1<<s,c=o[s];c===-1?(!(a&n)||a&r)&&(o[s]=sy(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function Ml(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Yp(){var t=Vo;return Vo<<=1,!(Vo&4194240)&&(Vo=64),t}function bs(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Io(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xe(e),t[e]=n}function ay(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Xe(n),i=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~i}}function $a(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Xe(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var B=0;function Qp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Xp,qa,Zp,jp,eh,Dl=!1,Ho=[],$t=null,qt=null,zt=null,no=new Map,ro=new Map,Ut=[],uy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sc(t,e){switch(t){case"focusin":case"focusout":$t=null;break;case"dragenter":case"dragleave":qt=null;break;case"mouseover":case"mouseout":zt=null;break;case"pointerover":case"pointerout":no.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ro.delete(e.pointerId)}}function Nr(t,e,n,r,o,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},e!==null&&(e=wo(e),e!==null&&qa(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function cy(t,e,n,r,o){switch(e){case"focusin":return $t=Nr($t,t,e,n,r,o),!0;case"dragenter":return qt=Nr(qt,t,e,n,r,o),!0;case"mouseover":return zt=Nr(zt,t,e,n,r,o),!0;case"pointerover":var i=o.pointerId;return no.set(i,Nr(no.get(i)||null,t,e,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,ro.set(i,Nr(ro.get(i)||null,t,e,n,r,o)),!0}return!1}function th(t){var e=gn(t.target);if(e!==null){var n=Nn(e);if(n!==null){if(e=n.tag,e===13){if(e=$p(n),e!==null){t.blockedOn=e,eh(t.priority,function(){Zp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function li(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ll(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Nl=r,n.target.dispatchEvent(r),Nl=null}else return e=wo(n),e!==null&&qa(e),t.blockedOn=n,!1;e.shift()}return!0}function lc(t,e,n){li(t)&&n.delete(e)}function dy(){Dl=!1,$t!==null&&li($t)&&($t=null),qt!==null&&li(qt)&&(qt=null),zt!==null&&li(zt)&&(zt=null),no.forEach(lc),ro.forEach(lc)}function Pr(t,e){t.blockedOn===e&&(t.blockedOn=null,Dl||(Dl=!0,Fe.unstable_scheduleCallback(Fe.unstable_NormalPriority,dy)))}function oo(t){function e(o){return Pr(o,t)}if(0<Ho.length){Pr(Ho[0],t);for(var n=1;n<Ho.length;n++){var r=Ho[n];r.blockedOn===t&&(r.blockedOn=null)}}for($t!==null&&Pr($t,t),qt!==null&&Pr(qt,t),zt!==null&&Pr(zt,t),no.forEach(e),ro.forEach(e),n=0;n<Ut.length;n++)r=Ut[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ut.length&&(n=Ut[0],n.blockedOn===null);)th(n),n.blockedOn===null&&Ut.shift()}var er=Rt.ReactCurrentBatchConfig,Ni=!0;function fy(t,e,n,r){var o=B,i=er.transition;er.transition=null;try{B=1,za(t,e,n,r)}finally{B=o,er.transition=i}}function py(t,e,n,r){var o=B,i=er.transition;er.transition=null;try{B=4,za(t,e,n,r)}finally{B=o,er.transition=i}}function za(t,e,n,r){if(Ni){var o=Ll(t,e,n,r);if(o===null)Ks(t,e,r,Pi,n),sc(t,r);else if(cy(o,t,e,n,r))r.stopPropagation();else if(sc(t,r),e&4&&-1<uy.indexOf(t)){for(;o!==null;){var i=wo(o);if(i!==null&&Xp(i),i=Ll(t,e,n,r),i===null&&Ks(t,e,r,Pi,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else Ks(t,e,r,null,n)}}var Pi=null;function Ll(t,e,n,r){if(Pi=null,t=Ha(r),t=gn(t),t!==null)if(e=Nn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=$p(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Pi=t,null}function nh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ey()){case Ba:return 1;case Jp:return 4;case Ai:case ty:return 16;case Kp:return 536870912;default:return 16}default:return 16}}var Ht=null,Wa=null,ai=null;function rh(){if(ai)return ai;var t,e=Wa,n=e.length,r,o="value"in Ht?Ht.value:Ht.textContent,i=o.length;for(t=0;t<n&&e[t]===o[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===o[i-r];r++);return ai=o.slice(t,1<r?1-r:void 0)}function ui(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bo(){return!0}function ac(){return!1}function be(t){function e(n,r,o,i,s){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Bo:ac,this.isPropagationStopped=ac,this}return X(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bo)},persist:function(){},isPersistent:Bo}),e}var _r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ja=be(_r),Co=X({},_r,{view:0,detail:0}),hy=be(Co),Vs,Gs,kr,as=X({},Co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ka,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==kr&&(kr&&t.type==="mousemove"?(Vs=t.screenX-kr.screenX,Gs=t.screenY-kr.screenY):Gs=Vs=0,kr=t),Vs)},movementY:function(t){return"movementY"in t?t.movementY:Gs}}),uc=be(as),my=X({},as,{dataTransfer:0}),gy=be(my),vy=X({},Co,{relatedTarget:0}),Hs=be(vy),yy=X({},_r,{animationName:0,elapsedTime:0,pseudoElement:0}),_y=be(yy),Ey=X({},_r,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ty=be(Ey),Sy=X({},_r,{data:0}),cc=be(Sy),Iy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ay(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wy[t])?!!e[t]:!1}function Ka(){return Ay}var Ry=X({},Co,{key:function(t){if(t.key){var e=Iy[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ui(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Cy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ka,charCode:function(t){return t.type==="keypress"?ui(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ui(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ny=be(Ry),Py=X({},as,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dc=be(Py),ky=X({},Co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ka}),xy=be(ky),My=X({},_r,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dy=be(My),Ly=X({},as,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Uy=be(Ly),Fy=[9,13,27,32],Ya=Et&&"CompositionEvent"in window,zr=null;Et&&"documentMode"in document&&(zr=document.documentMode);var Oy=Et&&"TextEvent"in window&&!zr,oh=Et&&(!Ya||zr&&8<zr&&11>=zr),fc=" ",pc=!1;function ih(t,e){switch(t){case"keyup":return Fy.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bn=!1;function by(t,e){switch(t){case"compositionend":return sh(e);case"keypress":return e.which!==32?null:(pc=!0,fc);case"textInput":return t=e.data,t===fc&&pc?null:t;default:return null}}function Vy(t,e){if(bn)return t==="compositionend"||!Ya&&ih(t,e)?(t=rh(),ai=Wa=Ht=null,bn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return oh&&e.locale!=="ko"?null:e.data;default:return null}}var Gy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Gy[t.type]:e==="textarea"}function lh(t,e,n,r){bp(r),e=ki(e,"onChange"),0<e.length&&(n=new Ja("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wr=null,io=null;function Hy(t){yh(t,0)}function us(t){var e=Hn(t);if(xp(e))return t}function By(t,e){if(t==="change")return e}var ah=!1;if(Et){var Bs;if(Et){var $s="oninput"in document;if(!$s){var mc=document.createElement("div");mc.setAttribute("oninput","return;"),$s=typeof mc.oninput=="function"}Bs=$s}else Bs=!1;ah=Bs&&(!document.documentMode||9<document.documentMode)}function gc(){Wr&&(Wr.detachEvent("onpropertychange",uh),io=Wr=null)}function uh(t){if(t.propertyName==="value"&&us(io)){var e=[];lh(e,io,t,Ha(t)),Bp(Hy,e)}}function $y(t,e,n){t==="focusin"?(gc(),Wr=e,io=n,Wr.attachEvent("onpropertychange",uh)):t==="focusout"&&gc()}function qy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return us(io)}function zy(t,e){if(t==="click")return us(e)}function Wy(t,e){if(t==="input"||t==="change")return us(e)}function Jy(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tt=typeof Object.is=="function"?Object.is:Jy;function so(t,e){if(tt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!gl.call(e,o)||!tt(t[o],e[o]))return!1}return!0}function vc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yc(t,e){var n=vc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vc(n)}}function ch(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ch(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function dh(){for(var t=window,e=Ii();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ii(t.document)}return e}function Qa(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ky(t){var e=dh(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ch(n.ownerDocument.documentElement,n)){if(r!==null&&Qa(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!t.extend&&i>r&&(o=r,r=i,i=o),o=yc(n,i);var s=yc(n,r);o&&s&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Yy=Et&&"documentMode"in document&&11>=document.documentMode,Vn=null,Ul=null,Jr=null,Fl=!1;function _c(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Fl||Vn==null||Vn!==Ii(r)||(r=Vn,"selectionStart"in r&&Qa(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Jr&&so(Jr,r)||(Jr=r,r=ki(Ul,"onSelect"),0<r.length&&(e=new Ja("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Vn)))}function $o(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Gn={animationend:$o("Animation","AnimationEnd"),animationiteration:$o("Animation","AnimationIteration"),animationstart:$o("Animation","AnimationStart"),transitionend:$o("Transition","TransitionEnd")},qs={},fh={};Et&&(fh=document.createElement("div").style,"AnimationEvent"in window||(delete Gn.animationend.animation,delete Gn.animationiteration.animation,delete Gn.animationstart.animation),"TransitionEvent"in window||delete Gn.transitionend.transition);function cs(t){if(qs[t])return qs[t];if(!Gn[t])return t;var e=Gn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in fh)return qs[t]=e[n];return t}var ph=cs("animationend"),hh=cs("animationiteration"),mh=cs("animationstart"),gh=cs("transitionend"),vh=new Map,Ec="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nn(t,e){vh.set(t,e),Rn(e,[t])}for(var zs=0;zs<Ec.length;zs++){var Ws=Ec[zs],Qy=Ws.toLowerCase(),Xy=Ws[0].toUpperCase()+Ws.slice(1);nn(Qy,"on"+Xy)}nn(ph,"onAnimationEnd");nn(hh,"onAnimationIteration");nn(mh,"onAnimationStart");nn("dblclick","onDoubleClick");nn("focusin","onFocus");nn("focusout","onBlur");nn(gh,"onTransitionEnd");ur("onMouseEnter",["mouseout","mouseover"]);ur("onMouseLeave",["mouseout","mouseover"]);ur("onPointerEnter",["pointerout","pointerover"]);ur("onPointerLeave",["pointerout","pointerover"]);Rn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vr));function Tc(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Qv(r,e,void 0,t),t.currentTarget=null}function yh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==i&&o.isPropagationStopped())break e;Tc(o,a,d),i=c}else for(s=0;s<r.length;s++){if(a=r[s],c=a.instance,d=a.currentTarget,a=a.listener,c!==i&&o.isPropagationStopped())break e;Tc(o,a,d),i=c}}}if(wi)throw t=xl,wi=!1,xl=null,t}function W(t,e){var n=e[Hl];n===void 0&&(n=e[Hl]=new Set);var r=t+"__bubble";n.has(r)||(_h(e,t,2,!1),n.add(r))}function Js(t,e,n){var r=0;e&&(r|=4),_h(n,t,r,e)}var qo="_reactListening"+Math.random().toString(36).slice(2);function lo(t){if(!t[qo]){t[qo]=!0,Ap.forEach(function(n){n!=="selectionchange"&&(Zy.has(n)||Js(n,!1,t),Js(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[qo]||(e[qo]=!0,Js("selectionchange",!1,e))}}function _h(t,e,n,r){switch(nh(e)){case 1:var o=fy;break;case 4:o=py;break;default:o=za}n=o.bind(null,e,n,t),o=void 0,!kl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function Ks(t,e,n,r,o){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;s=s.return}for(;a!==null;){if(s=gn(a),s===null)return;if(c=s.tag,c===5||c===6){r=i=s;continue e}a=a.parentNode}}r=r.return}Bp(function(){var d=i,f=Ha(n),h=[];e:{var p=vh.get(t);if(p!==void 0){var m=Ja,_=t;switch(t){case"keypress":if(ui(n)===0)break e;case"keydown":case"keyup":m=Ny;break;case"focusin":_="focus",m=Hs;break;case"focusout":_="blur",m=Hs;break;case"beforeblur":case"afterblur":m=Hs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=uc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=gy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=xy;break;case ph:case hh:case mh:m=_y;break;case gh:m=Dy;break;case"scroll":m=hy;break;case"wheel":m=Uy;break;case"copy":case"cut":case"paste":m=Ty;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=dc}var E=(e&4)!==0,T=!E&&t==="scroll",v=E?p!==null?p+"Capture":null:p;E=[];for(var g=d,y;g!==null;){y=g;var I=y.stateNode;if(y.tag===5&&I!==null&&(y=I,v!==null&&(I=to(g,v),I!=null&&E.push(ao(g,I,y)))),T)break;g=g.return}0<E.length&&(p=new m(p,_,null,n,f),h.push({event:p,listeners:E}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==Nl&&(_=n.relatedTarget||n.fromElement)&&(gn(_)||_[Tt]))break e;if((m||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=d,_=_?gn(_):null,_!==null&&(T=Nn(_),_!==T||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=d),m!==_)){if(E=uc,I="onMouseLeave",v="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(E=dc,I="onPointerLeave",v="onPointerEnter",g="pointer"),T=m==null?p:Hn(m),y=_==null?p:Hn(_),p=new E(I,g+"leave",m,n,f),p.target=T,p.relatedTarget=y,I=null,gn(f)===d&&(E=new E(v,g+"enter",_,n,f),E.target=y,E.relatedTarget=T,I=E),T=I,m&&_)t:{for(E=m,v=_,g=0,y=E;y;y=Dn(y))g++;for(y=0,I=v;I;I=Dn(I))y++;for(;0<g-y;)E=Dn(E),g--;for(;0<y-g;)v=Dn(v),y--;for(;g--;){if(E===v||v!==null&&E===v.alternate)break t;E=Dn(E),v=Dn(v)}E=null}else E=null;m!==null&&Sc(h,p,m,E,!1),_!==null&&T!==null&&Sc(h,T,_,E,!0)}}e:{if(p=d?Hn(d):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var w=By;else if(hc(p))if(ah)w=Wy;else{w=qy;var C=$y}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(w=zy);if(w&&(w=w(t,d))){lh(h,w,n,f);break e}C&&C(t,p,d),t==="focusout"&&(C=p._wrapperState)&&C.controlled&&p.type==="number"&&Il(p,"number",p.value)}switch(C=d?Hn(d):window,t){case"focusin":(hc(C)||C.contentEditable==="true")&&(Vn=C,Ul=d,Jr=null);break;case"focusout":Jr=Ul=Vn=null;break;case"mousedown":Fl=!0;break;case"contextmenu":case"mouseup":case"dragend":Fl=!1,_c(h,n,f);break;case"selectionchange":if(Yy)break;case"keydown":case"keyup":_c(h,n,f)}var A;if(Ya)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else bn?ih(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(oh&&n.locale!=="ko"&&(bn||N!=="onCompositionStart"?N==="onCompositionEnd"&&bn&&(A=rh()):(Ht=f,Wa="value"in Ht?Ht.value:Ht.textContent,bn=!0)),C=ki(d,N),0<C.length&&(N=new cc(N,t,null,n,f),h.push({event:N,listeners:C}),A?N.data=A:(A=sh(n),A!==null&&(N.data=A)))),(A=Oy?by(t,n):Vy(t,n))&&(d=ki(d,"onBeforeInput"),0<d.length&&(f=new cc("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:d}),f.data=A))}yh(h,e)})}function ao(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ki(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=to(t,n),i!=null&&r.unshift(ao(t,i,o)),i=to(t,e),i!=null&&r.push(ao(t,i,o))),t=t.return}return r}function Dn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sc(t,e,n,r,o){for(var i=e._reactName,s=[];n!==null&&n!==r;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&d!==null&&(a=d,o?(c=to(n,i),c!=null&&s.unshift(ao(n,c,a))):o||(c=to(n,i),c!=null&&s.push(ao(n,c,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var jy=/\r\n?/g,e0=/\u0000|\uFFFD/g;function Ic(t){return(typeof t=="string"?t:""+t).replace(jy,`
`).replace(e0,"")}function zo(t,e,n){if(e=Ic(e),Ic(t)!==e&&n)throw Error(R(425))}function xi(){}var Ol=null,bl=null;function Vl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Gl=typeof setTimeout=="function"?setTimeout:void 0,t0=typeof clearTimeout=="function"?clearTimeout:void 0,Cc=typeof Promise=="function"?Promise:void 0,n0=typeof queueMicrotask=="function"?queueMicrotask:typeof Cc<"u"?function(t){return Cc.resolve(null).then(t).catch(r0)}:Gl;function r0(t){setTimeout(function(){throw t})}function Ys(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),oo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);oo(e)}function Wt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function wc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Er=Math.random().toString(36).slice(2),st="__reactFiber$"+Er,uo="__reactProps$"+Er,Tt="__reactContainer$"+Er,Hl="__reactEvents$"+Er,o0="__reactListeners$"+Er,i0="__reactHandles$"+Er;function gn(t){var e=t[st];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Tt]||n[st]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=wc(t);t!==null;){if(n=t[st])return n;t=wc(t)}return e}t=n,n=t.parentNode}return null}function wo(t){return t=t[st]||t[Tt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(R(33))}function ds(t){return t[uo]||null}var Bl=[],Bn=-1;function rn(t){return{current:t}}function J(t){0>Bn||(t.current=Bl[Bn],Bl[Bn]=null,Bn--)}function z(t,e){Bn++,Bl[Bn]=t.current,t.current=e}var tn={},Ee=rn(tn),ke=rn(!1),Tn=tn;function cr(t,e){var n=t.type.contextTypes;if(!n)return tn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function xe(t){return t=t.childContextTypes,t!=null}function Mi(){J(ke),J(Ee)}function Ac(t,e,n){if(Ee.current!==tn)throw Error(R(168));z(Ee,e),z(ke,n)}function Eh(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(R(108,$v(t)||"Unknown",o));return X({},n,r)}function Di(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||tn,Tn=Ee.current,z(Ee,t),z(ke,ke.current),!0}function Rc(t,e,n){var r=t.stateNode;if(!r)throw Error(R(169));n?(t=Eh(t,e,Tn),r.__reactInternalMemoizedMergedChildContext=t,J(ke),J(Ee),z(Ee,t)):J(ke),z(ke,n)}var ft=null,fs=!1,Qs=!1;function Th(t){ft===null?ft=[t]:ft.push(t)}function s0(t){fs=!0,Th(t)}function on(){if(!Qs&&ft!==null){Qs=!0;var t=0,e=B;try{var n=ft;for(B=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ft=null,fs=!1}catch(o){throw ft!==null&&(ft=ft.slice(t+1)),Wp(Ba,on),o}finally{B=e,Qs=!1}}return null}var $n=[],qn=0,Li=null,Ui=0,Ve=[],Ge=0,Sn=null,pt=1,ht="";function fn(t,e){$n[qn++]=Ui,$n[qn++]=Li,Li=t,Ui=e}function Sh(t,e,n){Ve[Ge++]=pt,Ve[Ge++]=ht,Ve[Ge++]=Sn,Sn=t;var r=pt;t=ht;var o=32-Xe(r)-1;r&=~(1<<o),n+=1;var i=32-Xe(e)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,pt=1<<32-Xe(e)+o|n<<o|r,ht=i+t}else pt=1<<i|n<<o|r,ht=t}function Xa(t){t.return!==null&&(fn(t,1),Sh(t,1,0))}function Za(t){for(;t===Li;)Li=$n[--qn],$n[qn]=null,Ui=$n[--qn],$n[qn]=null;for(;t===Sn;)Sn=Ve[--Ge],Ve[Ge]=null,ht=Ve[--Ge],Ve[Ge]=null,pt=Ve[--Ge],Ve[Ge]=null}var Ue=null,Le=null,K=!1,Qe=null;function Ih(t,e){var n=He(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Nc(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ue=t,Le=Wt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ue=t,Le=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Sn!==null?{id:pt,overflow:ht}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=He(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ue=t,Le=null,!0):!1;default:return!1}}function $l(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ql(t){if(K){var e=Le;if(e){var n=e;if(!Nc(t,e)){if($l(t))throw Error(R(418));e=Wt(n.nextSibling);var r=Ue;e&&Nc(t,e)?Ih(r,n):(t.flags=t.flags&-4097|2,K=!1,Ue=t)}}else{if($l(t))throw Error(R(418));t.flags=t.flags&-4097|2,K=!1,Ue=t}}}function Pc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ue=t}function Wo(t){if(t!==Ue)return!1;if(!K)return Pc(t),K=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Vl(t.type,t.memoizedProps)),e&&(e=Le)){if($l(t))throw Ch(),Error(R(418));for(;e;)Ih(t,e),e=Wt(e.nextSibling)}if(Pc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(R(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Le=Wt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Le=null}}else Le=Ue?Wt(t.stateNode.nextSibling):null;return!0}function Ch(){for(var t=Le;t;)t=Wt(t.nextSibling)}function dr(){Le=Ue=null,K=!1}function ja(t){Qe===null?Qe=[t]:Qe.push(t)}var l0=Rt.ReactCurrentBatchConfig;function xr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,t));var o=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var a=o.refs;s===null?delete a[i]:a[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,t))}return t}function Jo(t,e){throw t=Object.prototype.toString.call(e),Error(R(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function kc(t){var e=t._init;return e(t._payload)}function wh(t){function e(v,g){if(t){var y=v.deletions;y===null?(v.deletions=[g],v.flags|=16):y.push(g)}}function n(v,g){if(!t)return null;for(;g!==null;)e(v,g),g=g.sibling;return null}function r(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function o(v,g){return v=Qt(v,g),v.index=0,v.sibling=null,v}function i(v,g,y){return v.index=y,t?(y=v.alternate,y!==null?(y=y.index,y<g?(v.flags|=2,g):y):(v.flags|=2,g)):(v.flags|=1048576,g)}function s(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,g,y,I){return g===null||g.tag!==6?(g=rl(y,v.mode,I),g.return=v,g):(g=o(g,y),g.return=v,g)}function c(v,g,y,I){var w=y.type;return w===On?f(v,g,y.props.children,I,y.key):g!==null&&(g.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Dt&&kc(w)===g.type)?(I=o(g,y.props),I.ref=xr(v,g,y),I.return=v,I):(I=gi(y.type,y.key,y.props,null,v.mode,I),I.ref=xr(v,g,y),I.return=v,I)}function d(v,g,y,I){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=ol(y,v.mode,I),g.return=v,g):(g=o(g,y.children||[]),g.return=v,g)}function f(v,g,y,I,w){return g===null||g.tag!==7?(g=En(y,v.mode,I,w),g.return=v,g):(g=o(g,y),g.return=v,g)}function h(v,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=rl(""+g,v.mode,y),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Fo:return y=gi(g.type,g.key,g.props,null,v.mode,y),y.ref=xr(v,null,g),y.return=v,y;case Fn:return g=ol(g,v.mode,y),g.return=v,g;case Dt:var I=g._init;return h(v,I(g._payload),y)}if(Or(g)||Ar(g))return g=En(g,v.mode,y,null),g.return=v,g;Jo(v,g)}return null}function p(v,g,y,I){var w=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return w!==null?null:a(v,g,""+y,I);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Fo:return y.key===w?c(v,g,y,I):null;case Fn:return y.key===w?d(v,g,y,I):null;case Dt:return w=y._init,p(v,g,w(y._payload),I)}if(Or(y)||Ar(y))return w!==null?null:f(v,g,y,I,null);Jo(v,y)}return null}function m(v,g,y,I,w){if(typeof I=="string"&&I!==""||typeof I=="number")return v=v.get(y)||null,a(g,v,""+I,w);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Fo:return v=v.get(I.key===null?y:I.key)||null,c(g,v,I,w);case Fn:return v=v.get(I.key===null?y:I.key)||null,d(g,v,I,w);case Dt:var C=I._init;return m(v,g,y,C(I._payload),w)}if(Or(I)||Ar(I))return v=v.get(y)||null,f(g,v,I,w,null);Jo(g,I)}return null}function _(v,g,y,I){for(var w=null,C=null,A=g,N=g=0,P=null;A!==null&&N<y.length;N++){A.index>N?(P=A,A=null):P=A.sibling;var M=p(v,A,y[N],I);if(M===null){A===null&&(A=P);break}t&&A&&M.alternate===null&&e(v,A),g=i(M,g,N),C===null?w=M:C.sibling=M,C=M,A=P}if(N===y.length)return n(v,A),K&&fn(v,N),w;if(A===null){for(;N<y.length;N++)A=h(v,y[N],I),A!==null&&(g=i(A,g,N),C===null?w=A:C.sibling=A,C=A);return K&&fn(v,N),w}for(A=r(v,A);N<y.length;N++)P=m(A,v,N,y[N],I),P!==null&&(t&&P.alternate!==null&&A.delete(P.key===null?N:P.key),g=i(P,g,N),C===null?w=P:C.sibling=P,C=P);return t&&A.forEach(function(G){return e(v,G)}),K&&fn(v,N),w}function E(v,g,y,I){var w=Ar(y);if(typeof w!="function")throw Error(R(150));if(y=w.call(y),y==null)throw Error(R(151));for(var C=w=null,A=g,N=g=0,P=null,M=y.next();A!==null&&!M.done;N++,M=y.next()){A.index>N?(P=A,A=null):P=A.sibling;var G=p(v,A,M.value,I);if(G===null){A===null&&(A=P);break}t&&A&&G.alternate===null&&e(v,A),g=i(G,g,N),C===null?w=G:C.sibling=G,C=G,A=P}if(M.done)return n(v,A),K&&fn(v,N),w;if(A===null){for(;!M.done;N++,M=y.next())M=h(v,M.value,I),M!==null&&(g=i(M,g,N),C===null?w=M:C.sibling=M,C=M);return K&&fn(v,N),w}for(A=r(v,A);!M.done;N++,M=y.next())M=m(A,v,N,M.value,I),M!==null&&(t&&M.alternate!==null&&A.delete(M.key===null?N:M.key),g=i(M,g,N),C===null?w=M:C.sibling=M,C=M);return t&&A.forEach(function(ie){return e(v,ie)}),K&&fn(v,N),w}function T(v,g,y,I){if(typeof y=="object"&&y!==null&&y.type===On&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Fo:e:{for(var w=y.key,C=g;C!==null;){if(C.key===w){if(w=y.type,w===On){if(C.tag===7){n(v,C.sibling),g=o(C,y.props.children),g.return=v,v=g;break e}}else if(C.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Dt&&kc(w)===C.type){n(v,C.sibling),g=o(C,y.props),g.ref=xr(v,C,y),g.return=v,v=g;break e}n(v,C);break}else e(v,C);C=C.sibling}y.type===On?(g=En(y.props.children,v.mode,I,y.key),g.return=v,v=g):(I=gi(y.type,y.key,y.props,null,v.mode,I),I.ref=xr(v,g,y),I.return=v,v=I)}return s(v);case Fn:e:{for(C=y.key;g!==null;){if(g.key===C)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(v,g.sibling),g=o(g,y.children||[]),g.return=v,v=g;break e}else{n(v,g);break}else e(v,g);g=g.sibling}g=ol(y,v.mode,I),g.return=v,v=g}return s(v);case Dt:return C=y._init,T(v,g,C(y._payload),I)}if(Or(y))return _(v,g,y,I);if(Ar(y))return E(v,g,y,I);Jo(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(v,g.sibling),g=o(g,y),g.return=v,v=g):(n(v,g),g=rl(y,v.mode,I),g.return=v,v=g),s(v)):n(v,g)}return T}var fr=wh(!0),Ah=wh(!1),Fi=rn(null),Oi=null,zn=null,eu=null;function tu(){eu=zn=Oi=null}function nu(t){var e=Fi.current;J(Fi),t._currentValue=e}function zl(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function tr(t,e){Oi=t,eu=zn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pe=!0),t.firstContext=null)}function qe(t){var e=t._currentValue;if(eu!==t)if(t={context:t,memoizedValue:e,next:null},zn===null){if(Oi===null)throw Error(R(308));zn=t,Oi.dependencies={lanes:0,firstContext:t}}else zn=zn.next=t;return e}var vn=null;function ru(t){vn===null?vn=[t]:vn.push(t)}function Rh(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,ru(e)):(n.next=o.next,o.next=n),e.interleaved=n,St(t,r)}function St(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Lt=!1;function ou(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _t(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Jt(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,V&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,St(t,n)}return o=r.interleaved,o===null?(e.next=e,ru(r)):(e.next=o.next,o.next=e),r.interleaved=e,St(t,n)}function ci(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$a(t,n)}}function xc(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?o=i=e:i=i.next=e}else o=i=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function bi(t,e,n,r){var o=t.updateQueue;Lt=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var c=a,d=c.next;c.next=null,s===null?i=d:s.next=d,s=c;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==s&&(a===null?f.firstBaseUpdate=d:a.next=d,f.lastBaseUpdate=c))}if(i!==null){var h=o.baseState;s=0,f=d=c=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,E=a;switch(p=e,m=n,E.tag){case 1:if(_=E.payload,typeof _=="function"){h=_.call(m,h,p);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=E.payload,p=typeof _=="function"?_.call(m,h,p):_,p==null)break e;h=X({},h,p);break e;case 2:Lt=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=o.effects,p===null?o.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(d=f=m,c=h):f=f.next=m,s|=p;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;p=a,a=p.next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}while(!0);if(f===null&&(c=h),o.baseState=c,o.firstBaseUpdate=d,o.lastBaseUpdate=f,e=o.shared.interleaved,e!==null){o=e;do s|=o.lane,o=o.next;while(o!==e)}else i===null&&(o.shared.lanes=0);Cn|=s,t.lanes=s,t.memoizedState=h}}function Mc(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(R(191,o));o.call(r)}}}var Ao={},at=rn(Ao),co=rn(Ao),fo=rn(Ao);function yn(t){if(t===Ao)throw Error(R(174));return t}function iu(t,e){switch(z(fo,e),z(co,t),z(at,Ao),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:wl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=wl(e,t)}J(at),z(at,e)}function pr(){J(at),J(co),J(fo)}function Ph(t){yn(fo.current);var e=yn(at.current),n=wl(e,t.type);e!==n&&(z(co,t),z(at,n))}function su(t){co.current===t&&(J(at),J(co))}var Y=rn(0);function Vi(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xs=[];function lu(){for(var t=0;t<Xs.length;t++)Xs[t]._workInProgressVersionPrimary=null;Xs.length=0}var di=Rt.ReactCurrentDispatcher,Zs=Rt.ReactCurrentBatchConfig,In=0,Q=null,le=null,ce=null,Gi=!1,Kr=!1,po=0,a0=0;function ge(){throw Error(R(321))}function au(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!tt(t[n],e[n]))return!1;return!0}function uu(t,e,n,r,o,i){if(In=i,Q=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,di.current=t===null||t.memoizedState===null?f0:p0,t=n(r,o),Kr){i=0;do{if(Kr=!1,po=0,25<=i)throw Error(R(301));i+=1,ce=le=null,e.updateQueue=null,di.current=h0,t=n(r,o)}while(Kr)}if(di.current=Hi,e=le!==null&&le.next!==null,In=0,ce=le=Q=null,Gi=!1,e)throw Error(R(300));return t}function cu(){var t=po!==0;return po=0,t}function it(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ce===null?Q.memoizedState=ce=t:ce=ce.next=t,ce}function ze(){if(le===null){var t=Q.alternate;t=t!==null?t.memoizedState:null}else t=le.next;var e=ce===null?Q.memoizedState:ce.next;if(e!==null)ce=e,le=t;else{if(t===null)throw Error(R(310));le=t,t={memoizedState:le.memoizedState,baseState:le.baseState,baseQueue:le.baseQueue,queue:le.queue,next:null},ce===null?Q.memoizedState=ce=t:ce=ce.next=t}return ce}function ho(t,e){return typeof e=="function"?e(t):e}function js(t){var e=ze(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var r=le,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var a=s=null,c=null,d=i;do{var f=d.lane;if((In&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var h={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=h,s=r):c=c.next=h,Q.lanes|=f,Cn|=f}d=d.next}while(d!==null&&d!==i);c===null?s=r:c.next=a,tt(r,e.memoizedState)||(Pe=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do i=o.lane,Q.lanes|=i,Cn|=i,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function el(t){var e=ze(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,i=e.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do i=t(i,s.action),s=s.next;while(s!==o);tt(i,e.memoizedState)||(Pe=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function kh(){}function xh(t,e){var n=Q,r=ze(),o=e(),i=!tt(r.memoizedState,o);if(i&&(r.memoizedState=o,Pe=!0),r=r.queue,du(Lh.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ce!==null&&ce.memoizedState.tag&1){if(n.flags|=2048,mo(9,Dh.bind(null,n,r,o,e),void 0,null),de===null)throw Error(R(349));In&30||Mh(n,e,o)}return o}function Mh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Q.updateQueue,e===null?(e={lastEffect:null,stores:null},Q.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Dh(t,e,n,r){e.value=n,e.getSnapshot=r,Uh(e)&&Fh(t)}function Lh(t,e,n){return n(function(){Uh(e)&&Fh(t)})}function Uh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!tt(t,n)}catch{return!0}}function Fh(t){var e=St(t,1);e!==null&&Ze(e,t,1,-1)}function Dc(t){var e=it();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:t},e.queue=t,t=t.dispatch=d0.bind(null,Q,t),[e.memoizedState,t]}function mo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Q.updateQueue,e===null?(e={lastEffect:null,stores:null},Q.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Oh(){return ze().memoizedState}function fi(t,e,n,r){var o=it();Q.flags|=t,o.memoizedState=mo(1|e,n,void 0,r===void 0?null:r)}function ps(t,e,n,r){var o=ze();r=r===void 0?null:r;var i=void 0;if(le!==null){var s=le.memoizedState;if(i=s.destroy,r!==null&&au(r,s.deps)){o.memoizedState=mo(e,n,i,r);return}}Q.flags|=t,o.memoizedState=mo(1|e,n,i,r)}function Lc(t,e){return fi(8390656,8,t,e)}function du(t,e){return ps(2048,8,t,e)}function bh(t,e){return ps(4,2,t,e)}function Vh(t,e){return ps(4,4,t,e)}function Gh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Hh(t,e,n){return n=n!=null?n.concat([t]):null,ps(4,4,Gh.bind(null,e,t),n)}function fu(){}function Bh(t,e){var n=ze();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&au(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function $h(t,e){var n=ze();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&au(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function qh(t,e,n){return In&21?(tt(n,e)||(n=Yp(),Q.lanes|=n,Cn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pe=!0),t.memoizedState=n)}function u0(t,e){var n=B;B=n!==0&&4>n?n:4,t(!0);var r=Zs.transition;Zs.transition={};try{t(!1),e()}finally{B=n,Zs.transition=r}}function zh(){return ze().memoizedState}function c0(t,e,n){var r=Yt(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Wh(t))Jh(e,n);else if(n=Rh(t,e,n,r),n!==null){var o=Ie();Ze(n,t,r,o),Kh(n,e,r)}}function d0(t,e,n){var r=Yt(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wh(t))Jh(e,o);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,a=i(s,n);if(o.hasEagerState=!0,o.eagerState=a,tt(a,s)){var c=e.interleaved;c===null?(o.next=o,ru(e)):(o.next=c.next,c.next=o),e.interleaved=o;return}}catch{}finally{}n=Rh(t,e,o,r),n!==null&&(o=Ie(),Ze(n,t,r,o),Kh(n,e,r))}}function Wh(t){var e=t.alternate;return t===Q||e!==null&&e===Q}function Jh(t,e){Kr=Gi=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Kh(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$a(t,n)}}var Hi={readContext:qe,useCallback:ge,useContext:ge,useEffect:ge,useImperativeHandle:ge,useInsertionEffect:ge,useLayoutEffect:ge,useMemo:ge,useReducer:ge,useRef:ge,useState:ge,useDebugValue:ge,useDeferredValue:ge,useTransition:ge,useMutableSource:ge,useSyncExternalStore:ge,useId:ge,unstable_isNewReconciler:!1},f0={readContext:qe,useCallback:function(t,e){return it().memoizedState=[t,e===void 0?null:e],t},useContext:qe,useEffect:Lc,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fi(4194308,4,Gh.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fi(4194308,4,t,e)},useInsertionEffect:function(t,e){return fi(4,2,t,e)},useMemo:function(t,e){var n=it();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=it();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=c0.bind(null,Q,t),[r.memoizedState,t]},useRef:function(t){var e=it();return t={current:t},e.memoizedState=t},useState:Dc,useDebugValue:fu,useDeferredValue:function(t){return it().memoizedState=t},useTransition:function(){var t=Dc(!1),e=t[0];return t=u0.bind(null,t[1]),it().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Q,o=it();if(K){if(n===void 0)throw Error(R(407));n=n()}else{if(n=e(),de===null)throw Error(R(349));In&30||Mh(r,e,n)}o.memoizedState=n;var i={value:n,getSnapshot:e};return o.queue=i,Lc(Lh.bind(null,r,i,t),[t]),r.flags|=2048,mo(9,Dh.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=it(),e=de.identifierPrefix;if(K){var n=ht,r=pt;n=(r&~(1<<32-Xe(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=po++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=a0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},p0={readContext:qe,useCallback:Bh,useContext:qe,useEffect:du,useImperativeHandle:Hh,useInsertionEffect:bh,useLayoutEffect:Vh,useMemo:$h,useReducer:js,useRef:Oh,useState:function(){return js(ho)},useDebugValue:fu,useDeferredValue:function(t){var e=ze();return qh(e,le.memoizedState,t)},useTransition:function(){var t=js(ho)[0],e=ze().memoizedState;return[t,e]},useMutableSource:kh,useSyncExternalStore:xh,useId:zh,unstable_isNewReconciler:!1},h0={readContext:qe,useCallback:Bh,useContext:qe,useEffect:du,useImperativeHandle:Hh,useInsertionEffect:bh,useLayoutEffect:Vh,useMemo:$h,useReducer:el,useRef:Oh,useState:function(){return el(ho)},useDebugValue:fu,useDeferredValue:function(t){var e=ze();return le===null?e.memoizedState=t:qh(e,le.memoizedState,t)},useTransition:function(){var t=el(ho)[0],e=ze().memoizedState;return[t,e]},useMutableSource:kh,useSyncExternalStore:xh,useId:zh,unstable_isNewReconciler:!1};function Ke(t,e){if(t&&t.defaultProps){e=X({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Wl(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:X({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var hs={isMounted:function(t){return(t=t._reactInternals)?Nn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ie(),o=Yt(t),i=_t(r,o);i.payload=e,n!=null&&(i.callback=n),e=Jt(t,i,o),e!==null&&(Ze(e,t,o,r),ci(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ie(),o=Yt(t),i=_t(r,o);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Jt(t,i,o),e!==null&&(Ze(e,t,o,r),ci(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ie(),r=Yt(t),o=_t(n,r);o.tag=2,e!=null&&(o.callback=e),e=Jt(t,o,r),e!==null&&(Ze(e,t,r,n),ci(e,t,r))}};function Uc(t,e,n,r,o,i,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,s):e.prototype&&e.prototype.isPureReactComponent?!so(n,r)||!so(o,i):!0}function Yh(t,e,n){var r=!1,o=tn,i=e.contextType;return typeof i=="object"&&i!==null?i=qe(i):(o=xe(e)?Tn:Ee.current,r=e.contextTypes,i=(r=r!=null)?cr(t,o):tn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hs,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=i),e}function Fc(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&hs.enqueueReplaceState(e,e.state,null)}function Jl(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},ou(t);var i=e.contextType;typeof i=="object"&&i!==null?o.context=qe(i):(i=xe(e)?Tn:Ee.current,o.context=cr(t,i)),o.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Wl(t,e,i,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&hs.enqueueReplaceState(o,o.state,null),bi(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function hr(t,e){try{var n="",r=e;do n+=Bv(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:o,digest:null}}function tl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Kl(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var m0=typeof WeakMap=="function"?WeakMap:Map;function Qh(t,e,n){n=_t(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$i||($i=!0,oa=r),Kl(t,e)},n}function Xh(t,e,n){n=_t(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){Kl(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Kl(t,e),typeof r!="function"&&(Kt===null?Kt=new Set([this]):Kt.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Oc(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new m0;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=P0.bind(null,t,e,n),e.then(t,t))}function bc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Vc(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=_t(-1,1),e.tag=2,Jt(n,e,1))),n.lanes|=1),t)}var g0=Rt.ReactCurrentOwner,Pe=!1;function Se(t,e,n,r){e.child=t===null?Ah(e,null,n,r):fr(e,t.child,n,r)}function Gc(t,e,n,r,o){n=n.render;var i=e.ref;return tr(e,o),r=uu(t,e,n,r,i,o),n=cu(),t!==null&&!Pe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,It(t,e,o)):(K&&n&&Xa(e),e.flags|=1,Se(t,e,r,o),e.child)}function Hc(t,e,n,r,o){if(t===null){var i=n.type;return typeof i=="function"&&!Eu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Zh(t,e,i,r,o)):(t=gi(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&o)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:so,n(s,r)&&t.ref===e.ref)return It(t,e,o)}return e.flags|=1,t=Qt(i,r),t.ref=e.ref,t.return=e,e.child=t}function Zh(t,e,n,r,o){if(t!==null){var i=t.memoizedProps;if(so(i,r)&&t.ref===e.ref)if(Pe=!1,e.pendingProps=r=i,(t.lanes&o)!==0)t.flags&131072&&(Pe=!0);else return e.lanes=t.lanes,It(t,e,o)}return Yl(t,e,n,r,o)}function jh(t,e,n){var r=e.pendingProps,o=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},z(Jn,De),De|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,z(Jn,De),De|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,z(Jn,De),De|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,z(Jn,De),De|=r;return Se(t,e,o,n),e.child}function em(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Yl(t,e,n,r,o){var i=xe(n)?Tn:Ee.current;return i=cr(e,i),tr(e,o),n=uu(t,e,n,r,i,o),r=cu(),t!==null&&!Pe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,It(t,e,o)):(K&&r&&Xa(e),e.flags|=1,Se(t,e,n,o),e.child)}function Bc(t,e,n,r,o){if(xe(n)){var i=!0;Di(e)}else i=!1;if(tr(e,o),e.stateNode===null)pi(t,e),Yh(e,n,r),Jl(e,n,r,o),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var c=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=qe(d):(d=xe(n)?Tn:Ee.current,d=cr(e,d));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||c!==d)&&Fc(e,s,r,d),Lt=!1;var p=e.memoizedState;s.state=p,bi(e,r,s,o),c=e.memoizedState,a!==r||p!==c||ke.current||Lt?(typeof f=="function"&&(Wl(e,n,f,r),c=e.memoizedState),(a=Lt||Uc(e,n,a,r,p,c,d))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=d,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Nh(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:Ke(e.type,a),s.props=d,h=e.pendingProps,p=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=qe(c):(c=xe(n)?Tn:Ee.current,c=cr(e,c));var m=n.getDerivedStateFromProps;(f=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==h||p!==c)&&Fc(e,s,r,c),Lt=!1,p=e.memoizedState,s.state=p,bi(e,r,s,o);var _=e.memoizedState;a!==h||p!==_||ke.current||Lt?(typeof m=="function"&&(Wl(e,n,m,r),_=e.memoizedState),(d=Lt||Uc(e,n,d,r,p,_,c)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,_,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,_,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),s.props=r,s.state=_,s.context=c,r=d):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Ql(t,e,n,r,i,o)}function Ql(t,e,n,r,o,i){em(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return o&&Rc(e,n,!1),It(t,e,i);r=e.stateNode,g0.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=fr(e,t.child,null,i),e.child=fr(e,null,a,i)):Se(t,e,a,i),e.memoizedState=r.state,o&&Rc(e,n,!0),e.child}function tm(t){var e=t.stateNode;e.pendingContext?Ac(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ac(t,e.context,!1),iu(t,e.containerInfo)}function $c(t,e,n,r,o){return dr(),ja(o),e.flags|=256,Se(t,e,n,r),e.child}var Xl={dehydrated:null,treeContext:null,retryLane:0};function Zl(t){return{baseLanes:t,cachePool:null,transitions:null}}function nm(t,e,n){var r=e.pendingProps,o=Y.current,i=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(o&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),z(Y,o&1),t===null)return ql(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,i?(r=e.mode,i=e.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=vs(s,r,0,null),t=En(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Zl(n),e.memoizedState=Xl,t):pu(e,s));if(o=t.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return v0(t,e,s,r,a,o,n);if(i){i=r.fallback,s=e.mode,o=t.child,a=o.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Qt(o,c),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?i=Qt(a,i):(i=En(i,s,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,s=t.child.memoizedState,s=s===null?Zl(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=t.childLanes&~n,e.memoizedState=Xl,r}return i=t.child,t=i.sibling,r=Qt(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function pu(t,e){return e=vs({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ko(t,e,n,r){return r!==null&&ja(r),fr(e,t.child,null,n),t=pu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function v0(t,e,n,r,o,i,s){if(n)return e.flags&256?(e.flags&=-257,r=tl(Error(R(422))),Ko(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,o=e.mode,r=vs({mode:"visible",children:r.children},o,0,null),i=En(i,o,s,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&fr(e,t.child,null,s),e.child.memoizedState=Zl(s),e.memoizedState=Xl,i);if(!(e.mode&1))return Ko(t,e,s,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(R(419)),r=tl(i,r,void 0),Ko(t,e,s,r)}if(a=(s&t.childLanes)!==0,Pe||a){if(r=de,r!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|s)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,St(t,o),Ze(r,t,o,-1))}return _u(),r=tl(Error(R(421))),Ko(t,e,s,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=k0.bind(null,t),o._reactRetry=e,null):(t=i.treeContext,Le=Wt(o.nextSibling),Ue=e,K=!0,Qe=null,t!==null&&(Ve[Ge++]=pt,Ve[Ge++]=ht,Ve[Ge++]=Sn,pt=t.id,ht=t.overflow,Sn=e),e=pu(e,r.children),e.flags|=4096,e)}function qc(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),zl(t.return,e,n)}function nl(t,e,n,r,o){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function rm(t,e,n){var r=e.pendingProps,o=r.revealOrder,i=r.tail;if(Se(t,e,r.children,n),r=Y.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qc(t,n,e);else if(t.tag===19)qc(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(z(Y,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&Vi(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),nl(e,!1,o,n,i);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&Vi(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}nl(e,!0,n,null,i);break;case"together":nl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pi(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function It(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Cn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(R(153));if(e.child!==null){for(t=e.child,n=Qt(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qt(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function y0(t,e,n){switch(e.tag){case 3:tm(e),dr();break;case 5:Ph(e);break;case 1:xe(e.type)&&Di(e);break;case 4:iu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;z(Fi,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(z(Y,Y.current&1),e.flags|=128,null):n&e.child.childLanes?nm(t,e,n):(z(Y,Y.current&1),t=It(t,e,n),t!==null?t.sibling:null);z(Y,Y.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return rm(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),z(Y,Y.current),r)break;return null;case 22:case 23:return e.lanes=0,jh(t,e,n)}return It(t,e,n)}var om,jl,im,sm;om=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jl=function(){};im=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,yn(at.current);var i=null;switch(n){case"input":o=Tl(t,o),r=Tl(t,r),i=[];break;case"select":o=X({},o,{value:void 0}),r=X({},r,{value:void 0}),i=[];break;case"textarea":o=Cl(t,o),r=Cl(t,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=xi)}Al(n,r);var s;n=null;for(d in o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&o[d]!=null)if(d==="style"){var a=o[d];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(jr.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(a=o!=null?o[d]:void 0,r.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(s in a)!a.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&a[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(jr.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&W("scroll",t),i||a===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};sm=function(t,e,n,r){n!==r&&(e.flags|=4)};function Mr(t,e){if(!K)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ve(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function _0(t,e,n){var r=e.pendingProps;switch(Za(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ve(e),null;case 1:return xe(e.type)&&Mi(),ve(e),null;case 3:return r=e.stateNode,pr(),J(ke),J(Ee),lu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Wo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qe!==null&&(la(Qe),Qe=null))),jl(t,e),ve(e),null;case 5:su(e);var o=yn(fo.current);if(n=e.type,t!==null&&e.stateNode!=null)im(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(R(166));return ve(e),null}if(t=yn(at.current),Wo(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[st]=e,r[uo]=i,t=(e.mode&1)!==0,n){case"dialog":W("cancel",r),W("close",r);break;case"iframe":case"object":case"embed":W("load",r);break;case"video":case"audio":for(o=0;o<Vr.length;o++)W(Vr[o],r);break;case"source":W("error",r);break;case"img":case"image":case"link":W("error",r),W("load",r);break;case"details":W("toggle",r);break;case"input":ju(r,i),W("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},W("invalid",r);break;case"textarea":tc(r,i),W("invalid",r)}Al(n,i),o=null;for(var s in i)if(i.hasOwnProperty(s)){var a=i[s];s==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&zo(r.textContent,a,t),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&zo(r.textContent,a,t),o=["children",""+a]):jr.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&W("scroll",r)}switch(n){case"input":Oo(r),ec(r,i,!0);break;case"textarea":Oo(r),nc(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=xi)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Lp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[st]=e,t[uo]=r,om(t,e,!1,!1),e.stateNode=t;e:{switch(s=Rl(n,r),n){case"dialog":W("cancel",t),W("close",t),o=r;break;case"iframe":case"object":case"embed":W("load",t),o=r;break;case"video":case"audio":for(o=0;o<Vr.length;o++)W(Vr[o],t);o=r;break;case"source":W("error",t),o=r;break;case"img":case"image":case"link":W("error",t),W("load",t),o=r;break;case"details":W("toggle",t),o=r;break;case"input":ju(t,r),o=Tl(t,r),W("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=X({},r,{value:void 0}),W("invalid",t);break;case"textarea":tc(t,r),o=Cl(t,r),W("invalid",t);break;default:o=r}Al(n,o),a=o;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?Op(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Up(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&eo(t,c):typeof c=="number"&&eo(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(jr.hasOwnProperty(i)?c!=null&&i==="onScroll"&&W("scroll",t):c!=null&&Oa(t,i,c,s))}switch(n){case"input":Oo(t),ec(t,r,!1);break;case"textarea":Oo(t),nc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+en(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Xn(t,!!r.multiple,i,!1):r.defaultValue!=null&&Xn(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=xi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ve(e),null;case 6:if(t&&e.stateNode!=null)sm(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(R(166));if(n=yn(fo.current),yn(at.current),Wo(e)){if(r=e.stateNode,n=e.memoizedProps,r[st]=e,(i=r.nodeValue!==n)&&(t=Ue,t!==null))switch(t.tag){case 3:zo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&zo(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[st]=e,e.stateNode=r}return ve(e),null;case 13:if(J(Y),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(K&&Le!==null&&e.mode&1&&!(e.flags&128))Ch(),dr(),e.flags|=98560,i=!1;else if(i=Wo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(R(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(R(317));i[st]=e}else dr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ve(e),i=!1}else Qe!==null&&(la(Qe),Qe=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Y.current&1?ae===0&&(ae=3):_u())),e.updateQueue!==null&&(e.flags|=4),ve(e),null);case 4:return pr(),jl(t,e),t===null&&lo(e.stateNode.containerInfo),ve(e),null;case 10:return nu(e.type._context),ve(e),null;case 17:return xe(e.type)&&Mi(),ve(e),null;case 19:if(J(Y),i=e.memoizedState,i===null)return ve(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)Mr(i,!1);else{if(ae!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Vi(t),s!==null){for(e.flags|=128,Mr(i,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,t=s.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return z(Y,Y.current&1|2),e.child}t=t.sibling}i.tail!==null&&re()>mr&&(e.flags|=128,r=!0,Mr(i,!1),e.lanes=4194304)}else{if(!r)if(t=Vi(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Mr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!K)return ve(e),null}else 2*re()-i.renderingStartTime>mr&&n!==1073741824&&(e.flags|=128,r=!0,Mr(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(n=i.last,n!==null?n.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=re(),e.sibling=null,n=Y.current,z(Y,r?n&1|2:n&1),e):(ve(e),null);case 22:case 23:return yu(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?De&1073741824&&(ve(e),e.subtreeFlags&6&&(e.flags|=8192)):ve(e),null;case 24:return null;case 25:return null}throw Error(R(156,e.tag))}function E0(t,e){switch(Za(e),e.tag){case 1:return xe(e.type)&&Mi(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pr(),J(ke),J(Ee),lu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return su(e),null;case 13:if(J(Y),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(R(340));dr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return J(Y),null;case 4:return pr(),null;case 10:return nu(e.type._context),null;case 22:case 23:return yu(),null;case 24:return null;default:return null}}var Yo=!1,ye=!1,T0=typeof WeakSet=="function"?WeakSet:Set,D=null;function Wn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Z(t,e,r)}else n.current=null}function ea(t,e,n){try{n()}catch(r){Z(t,e,r)}}var zc=!1;function S0(t,e){if(Ol=Ni,t=dh(),Qa(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,a=-1,c=-1,d=0,f=0,h=t,p=null;t:for(;;){for(var m;h!==n||o!==0&&h.nodeType!==3||(a=s+o),h!==i||r!==0&&h.nodeType!==3||(c=s+r),h.nodeType===3&&(s+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++d===o&&(a=s),p===i&&++f===r&&(c=s),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(bl={focusedElem:t,selectionRange:n},Ni=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var E=_.memoizedProps,T=_.memoizedState,v=e.stateNode,g=v.getSnapshotBeforeUpdate(e.elementType===e.type?E:Ke(e.type,E),T);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(I){Z(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return _=zc,zc=!1,_}function Yr(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var i=o.destroy;o.destroy=void 0,i!==void 0&&ea(e,n,i)}o=o.next}while(o!==r)}}function ms(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ta(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lm(t){var e=t.alternate;e!==null&&(t.alternate=null,lm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[st],delete e[uo],delete e[Hl],delete e[o0],delete e[i0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function am(t){return t.tag===5||t.tag===3||t.tag===4}function Wc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||am(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function na(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xi));else if(r!==4&&(t=t.child,t!==null))for(na(t,e,n),t=t.sibling;t!==null;)na(t,e,n),t=t.sibling}function ra(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ra(t,e,n),t=t.sibling;t!==null;)ra(t,e,n),t=t.sibling}var pe=null,Ye=!1;function xt(t,e,n){for(n=n.child;n!==null;)um(t,e,n),n=n.sibling}function um(t,e,n){if(lt&&typeof lt.onCommitFiberUnmount=="function")try{lt.onCommitFiberUnmount(ls,n)}catch{}switch(n.tag){case 5:ye||Wn(n,e);case 6:var r=pe,o=Ye;pe=null,xt(t,e,n),pe=r,Ye=o,pe!==null&&(Ye?(t=pe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):pe.removeChild(n.stateNode));break;case 18:pe!==null&&(Ye?(t=pe,n=n.stateNode,t.nodeType===8?Ys(t.parentNode,n):t.nodeType===1&&Ys(t,n),oo(t)):Ys(pe,n.stateNode));break;case 4:r=pe,o=Ye,pe=n.stateNode.containerInfo,Ye=!0,xt(t,e,n),pe=r,Ye=o;break;case 0:case 11:case 14:case 15:if(!ye&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&ea(n,e,s),o=o.next}while(o!==r)}xt(t,e,n);break;case 1:if(!ye&&(Wn(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Z(n,e,a)}xt(t,e,n);break;case 21:xt(t,e,n);break;case 22:n.mode&1?(ye=(r=ye)||n.memoizedState!==null,xt(t,e,n),ye=r):xt(t,e,n);break;default:xt(t,e,n)}}function Jc(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new T0),e.forEach(function(r){var o=x0.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Je(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:pe=a.stateNode,Ye=!1;break e;case 3:pe=a.stateNode.containerInfo,Ye=!0;break e;case 4:pe=a.stateNode.containerInfo,Ye=!0;break e}a=a.return}if(pe===null)throw Error(R(160));um(i,s,o),pe=null,Ye=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(d){Z(o,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cm(e,t),e=e.sibling}function cm(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Je(e,t),ot(t),r&4){try{Yr(3,t,t.return),ms(3,t)}catch(E){Z(t,t.return,E)}try{Yr(5,t,t.return)}catch(E){Z(t,t.return,E)}}break;case 1:Je(e,t),ot(t),r&512&&n!==null&&Wn(n,n.return);break;case 5:if(Je(e,t),ot(t),r&512&&n!==null&&Wn(n,n.return),t.flags&32){var o=t.stateNode;try{eo(o,"")}catch(E){Z(t,t.return,E)}}if(r&4&&(o=t.stateNode,o!=null)){var i=t.memoizedProps,s=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Mp(o,i),Rl(a,s);var d=Rl(a,i);for(s=0;s<c.length;s+=2){var f=c[s],h=c[s+1];f==="style"?Op(o,h):f==="dangerouslySetInnerHTML"?Up(o,h):f==="children"?eo(o,h):Oa(o,f,h,d)}switch(a){case"input":Sl(o,i);break;case"textarea":Dp(o,i);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Xn(o,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?Xn(o,!!i.multiple,i.defaultValue,!0):Xn(o,!!i.multiple,i.multiple?[]:"",!1))}o[uo]=i}catch(E){Z(t,t.return,E)}}break;case 6:if(Je(e,t),ot(t),r&4){if(t.stateNode===null)throw Error(R(162));o=t.stateNode,i=t.memoizedProps;try{o.nodeValue=i}catch(E){Z(t,t.return,E)}}break;case 3:if(Je(e,t),ot(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{oo(e.containerInfo)}catch(E){Z(t,t.return,E)}break;case 4:Je(e,t),ot(t);break;case 13:Je(e,t),ot(t),o=t.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(gu=re())),r&4&&Jc(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ye=(d=ye)||f,Je(e,t),ye=d):Je(e,t),ot(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(D=t,f=t.child;f!==null;){for(h=D=f;D!==null;){switch(p=D,m=p.child,p.tag){case 0:case 11:case 14:case 15:Yr(4,p,p.return);break;case 1:Wn(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(E){Z(r,n,E)}}break;case 5:Wn(p,p.return);break;case 22:if(p.memoizedState!==null){Yc(h);continue}}m!==null?(m.return=p,D=m):Yc(h)}f=f.sibling}e:for(f=null,h=t;;){if(h.tag===5){if(f===null){f=h;try{o=h.stateNode,d?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,c=h.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Fp("display",s))}catch(E){Z(t,t.return,E)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(E){Z(t,t.return,E)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Je(e,t),ot(t),r&4&&Jc(t);break;case 21:break;default:Je(e,t),ot(t)}}function ot(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(am(n)){var r=n;break e}n=n.return}throw Error(R(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(eo(o,""),r.flags&=-33);var i=Wc(t);ra(t,i,o);break;case 3:case 4:var s=r.stateNode.containerInfo,a=Wc(t);na(t,a,s);break;default:throw Error(R(161))}}catch(c){Z(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function I0(t,e,n){D=t,dm(t)}function dm(t,e,n){for(var r=(t.mode&1)!==0;D!==null;){var o=D,i=o.child;if(o.tag===22&&r){var s=o.memoizedState!==null||Yo;if(!s){var a=o.alternate,c=a!==null&&a.memoizedState!==null||ye;a=Yo;var d=ye;if(Yo=s,(ye=c)&&!d)for(D=o;D!==null;)s=D,c=s.child,s.tag===22&&s.memoizedState!==null?Qc(o):c!==null?(c.return=s,D=c):Qc(o);for(;i!==null;)D=i,dm(i),i=i.sibling;D=o,Yo=a,ye=d}Kc(t)}else o.subtreeFlags&8772&&i!==null?(i.return=o,D=i):Kc(t)}}function Kc(t){for(;D!==null;){var e=D;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ye||ms(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ye)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:Ke(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Mc(e,i,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Mc(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&oo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}ye||e.flags&512&&ta(e)}catch(p){Z(e,e.return,p)}}if(e===t){D=null;break}if(n=e.sibling,n!==null){n.return=e.return,D=n;break}D=e.return}}function Yc(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var n=e.sibling;if(n!==null){n.return=e.return,D=n;break}D=e.return}}function Qc(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ms(4,e)}catch(c){Z(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(c){Z(e,o,c)}}var i=e.return;try{ta(e)}catch(c){Z(e,i,c)}break;case 5:var s=e.return;try{ta(e)}catch(c){Z(e,s,c)}}}catch(c){Z(e,e.return,c)}if(e===t){D=null;break}var a=e.sibling;if(a!==null){a.return=e.return,D=a;break}D=e.return}}var C0=Math.ceil,Bi=Rt.ReactCurrentDispatcher,hu=Rt.ReactCurrentOwner,Be=Rt.ReactCurrentBatchConfig,V=0,de=null,oe=null,he=0,De=0,Jn=rn(0),ae=0,go=null,Cn=0,gs=0,mu=0,Qr=null,Ne=null,gu=0,mr=1/0,dt=null,$i=!1,oa=null,Kt=null,Qo=!1,Bt=null,qi=0,Xr=0,ia=null,hi=-1,mi=0;function Ie(){return V&6?re():hi!==-1?hi:hi=re()}function Yt(t){return t.mode&1?V&2&&he!==0?he&-he:l0.transition!==null?(mi===0&&(mi=Yp()),mi):(t=B,t!==0||(t=window.event,t=t===void 0?16:nh(t.type)),t):1}function Ze(t,e,n,r){if(50<Xr)throw Xr=0,ia=null,Error(R(185));Io(t,n,r),(!(V&2)||t!==de)&&(t===de&&(!(V&2)&&(gs|=n),ae===4&&Ft(t,he)),Me(t,r),n===1&&V===0&&!(e.mode&1)&&(mr=re()+500,fs&&on()))}function Me(t,e){var n=t.callbackNode;ly(t,e);var r=Ri(t,t===de?he:0);if(r===0)n!==null&&ic(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ic(n),e===1)t.tag===0?s0(Xc.bind(null,t)):Th(Xc.bind(null,t)),n0(function(){!(V&6)&&on()}),n=null;else{switch(Qp(r)){case 1:n=Ba;break;case 4:n=Jp;break;case 16:n=Ai;break;case 536870912:n=Kp;break;default:n=Ai}n=_m(n,fm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function fm(t,e){if(hi=-1,mi=0,V&6)throw Error(R(327));var n=t.callbackNode;if(nr()&&t.callbackNode!==n)return null;var r=Ri(t,t===de?he:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=zi(t,r);else{e=r;var o=V;V|=2;var i=hm();(de!==t||he!==e)&&(dt=null,mr=re()+500,_n(t,e));do try{R0();break}catch(a){pm(t,a)}while(!0);tu(),Bi.current=i,V=o,oe!==null?e=0:(de=null,he=0,e=ae)}if(e!==0){if(e===2&&(o=Ml(t),o!==0&&(r=o,e=sa(t,o))),e===1)throw n=go,_n(t,0),Ft(t,r),Me(t,re()),n;if(e===6)Ft(t,r);else{if(o=t.current.alternate,!(r&30)&&!w0(o)&&(e=zi(t,r),e===2&&(i=Ml(t),i!==0&&(r=i,e=sa(t,i))),e===1))throw n=go,_n(t,0),Ft(t,r),Me(t,re()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(R(345));case 2:pn(t,Ne,dt);break;case 3:if(Ft(t,r),(r&130023424)===r&&(e=gu+500-re(),10<e)){if(Ri(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){Ie(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Gl(pn.bind(null,t,Ne,dt),e);break}pn(t,Ne,dt);break;case 4:if(Ft(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var s=31-Xe(r);i=1<<s,s=e[s],s>o&&(o=s),r&=~i}if(r=o,r=re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*C0(r/1960))-r,10<r){t.timeoutHandle=Gl(pn.bind(null,t,Ne,dt),r);break}pn(t,Ne,dt);break;case 5:pn(t,Ne,dt);break;default:throw Error(R(329))}}}return Me(t,re()),t.callbackNode===n?fm.bind(null,t):null}function sa(t,e){var n=Qr;return t.current.memoizedState.isDehydrated&&(_n(t,e).flags|=256),t=zi(t,e),t!==2&&(e=Ne,Ne=n,e!==null&&la(e)),t}function la(t){Ne===null?Ne=t:Ne.push.apply(Ne,t)}function w0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!tt(i(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ft(t,e){for(e&=~mu,e&=~gs,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Xe(e),r=1<<n;t[n]=-1,e&=~r}}function Xc(t){if(V&6)throw Error(R(327));nr();var e=Ri(t,0);if(!(e&1))return Me(t,re()),null;var n=zi(t,e);if(t.tag!==0&&n===2){var r=Ml(t);r!==0&&(e=r,n=sa(t,r))}if(n===1)throw n=go,_n(t,0),Ft(t,e),Me(t,re()),n;if(n===6)throw Error(R(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,pn(t,Ne,dt),Me(t,re()),null}function vu(t,e){var n=V;V|=1;try{return t(e)}finally{V=n,V===0&&(mr=re()+500,fs&&on())}}function wn(t){Bt!==null&&Bt.tag===0&&!(V&6)&&nr();var e=V;V|=1;var n=Be.transition,r=B;try{if(Be.transition=null,B=1,t)return t()}finally{B=r,Be.transition=n,V=e,!(V&6)&&on()}}function yu(){De=Jn.current,J(Jn)}function _n(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,t0(n)),oe!==null)for(n=oe.return;n!==null;){var r=n;switch(Za(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Mi();break;case 3:pr(),J(ke),J(Ee),lu();break;case 5:su(r);break;case 4:pr();break;case 13:J(Y);break;case 19:J(Y);break;case 10:nu(r.type._context);break;case 22:case 23:yu()}n=n.return}if(de=t,oe=t=Qt(t.current,null),he=De=e,ae=0,go=null,mu=gs=Cn=0,Ne=Qr=null,vn!==null){for(e=0;e<vn.length;e++)if(n=vn[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=o,r.next=s}n.pending=r}vn=null}return t}function pm(t,e){do{var n=oe;try{if(tu(),di.current=Hi,Gi){for(var r=Q.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Gi=!1}if(In=0,ce=le=Q=null,Kr=!1,po=0,hu.current=null,n===null||n.return===null){ae=1,go=e,oe=null;break}e:{var i=t,s=n.return,a=n,c=e;if(e=he,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=a,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=bc(s);if(m!==null){m.flags&=-257,Vc(m,s,a,i,e),m.mode&1&&Oc(i,d,e),e=m,c=d;var _=e.updateQueue;if(_===null){var E=new Set;E.add(c),e.updateQueue=E}else _.add(c);break e}else{if(!(e&1)){Oc(i,d,e),_u();break e}c=Error(R(426))}}else if(K&&a.mode&1){var T=bc(s);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Vc(T,s,a,i,e),ja(hr(c,a));break e}}i=c=hr(c,a),ae!==4&&(ae=2),Qr===null?Qr=[i]:Qr.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=Qh(i,c,e);xc(i,v);break e;case 1:a=c;var g=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Kt===null||!Kt.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var I=Xh(i,a,e);xc(i,I);break e}}i=i.return}while(i!==null)}gm(n)}catch(w){e=w,oe===n&&n!==null&&(oe=n=n.return);continue}break}while(!0)}function hm(){var t=Bi.current;return Bi.current=Hi,t===null?Hi:t}function _u(){(ae===0||ae===3||ae===2)&&(ae=4),de===null||!(Cn&268435455)&&!(gs&268435455)||Ft(de,he)}function zi(t,e){var n=V;V|=2;var r=hm();(de!==t||he!==e)&&(dt=null,_n(t,e));do try{A0();break}catch(o){pm(t,o)}while(!0);if(tu(),V=n,Bi.current=r,oe!==null)throw Error(R(261));return de=null,he=0,ae}function A0(){for(;oe!==null;)mm(oe)}function R0(){for(;oe!==null&&!Zv();)mm(oe)}function mm(t){var e=ym(t.alternate,t,De);t.memoizedProps=t.pendingProps,e===null?gm(t):oe=e,hu.current=null}function gm(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=E0(n,e),n!==null){n.flags&=32767,oe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ae=6,oe=null;return}}else if(n=_0(n,e,De),n!==null){oe=n;return}if(e=e.sibling,e!==null){oe=e;return}oe=e=t}while(e!==null);ae===0&&(ae=5)}function pn(t,e,n){var r=B,o=Be.transition;try{Be.transition=null,B=1,N0(t,e,n,r)}finally{Be.transition=o,B=r}return null}function N0(t,e,n,r){do nr();while(Bt!==null);if(V&6)throw Error(R(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(R(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ay(t,i),t===de&&(oe=de=null,he=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qo||(Qo=!0,_m(Ai,function(){return nr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Be.transition,Be.transition=null;var s=B;B=1;var a=V;V|=4,hu.current=null,S0(t,n),cm(n,t),Ky(bl),Ni=!!Ol,bl=Ol=null,t.current=n,I0(n),jv(),V=a,B=s,Be.transition=i}else t.current=n;if(Qo&&(Qo=!1,Bt=t,qi=o),i=t.pendingLanes,i===0&&(Kt=null),ny(n.stateNode),Me(t,re()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if($i)throw $i=!1,t=oa,oa=null,t;return qi&1&&t.tag!==0&&nr(),i=t.pendingLanes,i&1?t===ia?Xr++:(Xr=0,ia=t):Xr=0,on(),null}function nr(){if(Bt!==null){var t=Qp(qi),e=Be.transition,n=B;try{if(Be.transition=null,B=16>t?16:t,Bt===null)var r=!1;else{if(t=Bt,Bt=null,qi=0,V&6)throw Error(R(331));var o=V;for(V|=4,D=t.current;D!==null;){var i=D,s=i.child;if(D.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(D=d;D!==null;){var f=D;switch(f.tag){case 0:case 11:case 15:Yr(8,f,i)}var h=f.child;if(h!==null)h.return=f,D=h;else for(;D!==null;){f=D;var p=f.sibling,m=f.return;if(lm(f),f===d){D=null;break}if(p!==null){p.return=m,D=p;break}D=m}}}var _=i.alternate;if(_!==null){var E=_.child;if(E!==null){_.child=null;do{var T=E.sibling;E.sibling=null,E=T}while(E!==null)}}D=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,D=s;else e:for(;D!==null;){if(i=D,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Yr(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,D=v;break e}D=i.return}}var g=t.current;for(D=g;D!==null;){s=D;var y=s.child;if(s.subtreeFlags&2064&&y!==null)y.return=s,D=y;else e:for(s=g;D!==null;){if(a=D,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ms(9,a)}}catch(w){Z(a,a.return,w)}if(a===s){D=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,D=I;break e}D=a.return}}if(V=o,on(),lt&&typeof lt.onPostCommitFiberRoot=="function")try{lt.onPostCommitFiberRoot(ls,t)}catch{}r=!0}return r}finally{B=n,Be.transition=e}}return!1}function Zc(t,e,n){e=hr(n,e),e=Qh(t,e,1),t=Jt(t,e,1),e=Ie(),t!==null&&(Io(t,1,e),Me(t,e))}function Z(t,e,n){if(t.tag===3)Zc(t,t,n);else for(;e!==null;){if(e.tag===3){Zc(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Kt===null||!Kt.has(r))){t=hr(n,t),t=Xh(e,t,1),e=Jt(e,t,1),t=Ie(),e!==null&&(Io(e,1,t),Me(e,t));break}}e=e.return}}function P0(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ie(),t.pingedLanes|=t.suspendedLanes&n,de===t&&(he&n)===n&&(ae===4||ae===3&&(he&130023424)===he&&500>re()-gu?_n(t,0):mu|=n),Me(t,e)}function vm(t,e){e===0&&(t.mode&1?(e=Go,Go<<=1,!(Go&130023424)&&(Go=4194304)):e=1);var n=Ie();t=St(t,e),t!==null&&(Io(t,e,n),Me(t,n))}function k0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),vm(t,n)}function x0(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(R(314))}r!==null&&r.delete(e),vm(t,n)}var ym;ym=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ke.current)Pe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Pe=!1,y0(t,e,n);Pe=!!(t.flags&131072)}else Pe=!1,K&&e.flags&1048576&&Sh(e,Ui,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;pi(t,e),t=e.pendingProps;var o=cr(e,Ee.current);tr(e,n),o=uu(null,e,r,t,o,n);var i=cu();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xe(r)?(i=!0,Di(e)):i=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,ou(e),o.updater=hs,e.stateNode=o,o._reactInternals=e,Jl(e,r,t,n),e=Ql(null,e,r,!0,i,n)):(e.tag=0,K&&i&&Xa(e),Se(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(pi(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=D0(r),t=Ke(r,t),o){case 0:e=Yl(null,e,r,t,n);break e;case 1:e=Bc(null,e,r,t,n);break e;case 11:e=Gc(null,e,r,t,n);break e;case 14:e=Hc(null,e,r,Ke(r.type,t),n);break e}throw Error(R(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ke(r,o),Yl(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ke(r,o),Bc(t,e,r,o,n);case 3:e:{if(tm(e),t===null)throw Error(R(387));r=e.pendingProps,i=e.memoizedState,o=i.element,Nh(t,e),bi(e,r,null,n);var s=e.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){o=hr(Error(R(423)),e),e=$c(t,e,r,n,o);break e}else if(r!==o){o=hr(Error(R(424)),e),e=$c(t,e,r,n,o);break e}else for(Le=Wt(e.stateNode.containerInfo.firstChild),Ue=e,K=!0,Qe=null,n=Ah(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(dr(),r===o){e=It(t,e,n);break e}Se(t,e,r,n)}e=e.child}return e;case 5:return Ph(e),t===null&&ql(e),r=e.type,o=e.pendingProps,i=t!==null?t.memoizedProps:null,s=o.children,Vl(r,o)?s=null:i!==null&&Vl(r,i)&&(e.flags|=32),em(t,e),Se(t,e,s,n),e.child;case 6:return t===null&&ql(e),null;case 13:return nm(t,e,n);case 4:return iu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=fr(e,null,r,n):Se(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ke(r,o),Gc(t,e,r,o,n);case 7:return Se(t,e,e.pendingProps,n),e.child;case 8:return Se(t,e,e.pendingProps.children,n),e.child;case 12:return Se(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,i=e.memoizedProps,s=o.value,z(Fi,r._currentValue),r._currentValue=s,i!==null)if(tt(i.value,s)){if(i.children===o.children&&!ke.current){e=It(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){s=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=_t(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),zl(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)s=i.type===e.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(R(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),zl(s,n,e),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===e){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}Se(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,tr(e,n),o=qe(o),r=r(o),e.flags|=1,Se(t,e,r,n),e.child;case 14:return r=e.type,o=Ke(r,e.pendingProps),o=Ke(r.type,o),Hc(t,e,r,o,n);case 15:return Zh(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ke(r,o),pi(t,e),e.tag=1,xe(r)?(t=!0,Di(e)):t=!1,tr(e,n),Yh(e,r,o),Jl(e,r,o,n),Ql(null,e,r,!0,t,n);case 19:return rm(t,e,n);case 22:return jh(t,e,n)}throw Error(R(156,e.tag))};function _m(t,e){return Wp(t,e)}function M0(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function He(t,e,n,r){return new M0(t,e,n,r)}function Eu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function D0(t){if(typeof t=="function")return Eu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Va)return 11;if(t===Ga)return 14}return 2}function Qt(t,e){var n=t.alternate;return n===null?(n=He(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gi(t,e,n,r,o,i){var s=2;if(r=t,typeof t=="function")Eu(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case On:return En(n.children,o,i,e);case ba:s=8,o|=8;break;case vl:return t=He(12,n,e,o|2),t.elementType=vl,t.lanes=i,t;case yl:return t=He(13,n,e,o),t.elementType=yl,t.lanes=i,t;case _l:return t=He(19,n,e,o),t.elementType=_l,t.lanes=i,t;case Pp:return vs(n,o,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Rp:s=10;break e;case Np:s=9;break e;case Va:s=11;break e;case Ga:s=14;break e;case Dt:s=16,r=null;break e}throw Error(R(130,t==null?t:typeof t,""))}return e=He(s,n,e,o),e.elementType=t,e.type=r,e.lanes=i,e}function En(t,e,n,r){return t=He(7,t,r,e),t.lanes=n,t}function vs(t,e,n,r){return t=He(22,t,r,e),t.elementType=Pp,t.lanes=n,t.stateNode={isHidden:!1},t}function rl(t,e,n){return t=He(6,t,null,e),t.lanes=n,t}function ol(t,e,n){return e=He(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function L0(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bs(0),this.expirationTimes=bs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bs(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Tu(t,e,n,r,o,i,s,a,c){return t=new L0(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=He(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ou(i),t}function U0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Em(t){if(!t)return tn;t=t._reactInternals;e:{if(Nn(t)!==t||t.tag!==1)throw Error(R(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(R(171))}if(t.tag===1){var n=t.type;if(xe(n))return Eh(t,n,e)}return e}function Tm(t,e,n,r,o,i,s,a,c){return t=Tu(n,r,!0,t,o,i,s,a,c),t.context=Em(null),n=t.current,r=Ie(),o=Yt(n),i=_t(r,o),i.callback=e??null,Jt(n,i,o),t.current.lanes=o,Io(t,o,r),Me(t,r),t}function ys(t,e,n,r){var o=e.current,i=Ie(),s=Yt(o);return n=Em(n),e.context===null?e.context=n:e.pendingContext=n,e=_t(i,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Jt(o,e,s),t!==null&&(Ze(t,o,s,i),ci(t,o,s)),s}function Wi(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jc(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Su(t,e){jc(t,e),(t=t.alternate)&&jc(t,e)}function F0(){return null}var Sm=typeof reportError=="function"?reportError:function(t){console.error(t)};function Iu(t){this._internalRoot=t}_s.prototype.render=Iu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(R(409));ys(t,e,null,null)};_s.prototype.unmount=Iu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;wn(function(){ys(null,t,null,null)}),e[Tt]=null}};function _s(t){this._internalRoot=t}_s.prototype.unstable_scheduleHydration=function(t){if(t){var e=jp();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ut.length&&e!==0&&e<Ut[n].priority;n++);Ut.splice(n,0,t),n===0&&th(t)}};function Cu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Es(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ed(){}function O0(t,e,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var d=Wi(s);i.call(d)}}var s=Tm(e,r,t,0,null,!1,!1,"",ed);return t._reactRootContainer=s,t[Tt]=s.current,lo(t.nodeType===8?t.parentNode:t),wn(),s}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var d=Wi(c);a.call(d)}}var c=Tu(t,0,!1,null,null,!1,!1,"",ed);return t._reactRootContainer=c,t[Tt]=c.current,lo(t.nodeType===8?t.parentNode:t),wn(function(){ys(e,c,n,r)}),c}function Ts(t,e,n,r,o){var i=n._reactRootContainer;if(i){var s=i;if(typeof o=="function"){var a=o;o=function(){var c=Wi(s);a.call(c)}}ys(e,s,t,o)}else s=O0(n,e,t,o,r);return Wi(s)}Xp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=br(e.pendingLanes);n!==0&&($a(e,n|1),Me(e,re()),!(V&6)&&(mr=re()+500,on()))}break;case 13:wn(function(){var r=St(t,1);if(r!==null){var o=Ie();Ze(r,t,1,o)}}),Su(t,1)}};qa=function(t){if(t.tag===13){var e=St(t,134217728);if(e!==null){var n=Ie();Ze(e,t,134217728,n)}Su(t,134217728)}};Zp=function(t){if(t.tag===13){var e=Yt(t),n=St(t,e);if(n!==null){var r=Ie();Ze(n,t,e,r)}Su(t,e)}};jp=function(){return B};eh=function(t,e){var n=B;try{return B=t,e()}finally{B=n}};Pl=function(t,e,n){switch(e){case"input":if(Sl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=ds(r);if(!o)throw Error(R(90));xp(r),Sl(r,o)}}}break;case"textarea":Dp(t,n);break;case"select":e=n.value,e!=null&&Xn(t,!!n.multiple,e,!1)}};Gp=vu;Hp=wn;var b0={usingClientEntryPoint:!1,Events:[wo,Hn,ds,bp,Vp,vu]},Dr={findFiberByHostInstance:gn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},V0={bundleType:Dr.bundleType,version:Dr.version,rendererPackageName:Dr.rendererPackageName,rendererConfig:Dr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qp(t),t===null?null:t.stateNode},findFiberByHostInstance:Dr.findFiberByHostInstance||F0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xo.isDisabled&&Xo.supportsFiber)try{ls=Xo.inject(V0),lt=Xo}catch{}}Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b0;Oe.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cu(e))throw Error(R(200));return U0(t,e,null,n)};Oe.createRoot=function(t,e){if(!Cu(t))throw Error(R(299));var n=!1,r="",o=Sm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=Tu(t,1,!1,null,null,n,!1,r,o),t[Tt]=e.current,lo(t.nodeType===8?t.parentNode:t),new Iu(e)};Oe.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(R(188)):(t=Object.keys(t).join(","),Error(R(268,t)));return t=qp(e),t=t===null?null:t.stateNode,t};Oe.flushSync=function(t){return wn(t)};Oe.hydrate=function(t,e,n){if(!Es(e))throw Error(R(200));return Ts(null,t,e,!0,n)};Oe.hydrateRoot=function(t,e,n){if(!Cu(t))throw Error(R(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",s=Sm;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=Tm(e,null,t,1,n??null,o,!1,i,s),t[Tt]=e.current,lo(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new _s(e)};Oe.render=function(t,e,n){if(!Es(e))throw Error(R(200));return Ts(null,t,e,!1,n)};Oe.unmountComponentAtNode=function(t){if(!Es(t))throw Error(R(40));return t._reactRootContainer?(wn(function(){Ts(null,null,t,!1,function(){t._reactRootContainer=null,t[Tt]=null})}),!0):!1};Oe.unstable_batchedUpdates=vu;Oe.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Es(n))throw Error(R(200));if(t==null||t._reactInternals===void 0)throw Error(R(38));return Ts(t,e,n,!1,r)};Oe.version="18.3.1-next-f1338f8080-20240426";function Im(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Im)}catch(t){console.error(t)}}Im(),Ip.exports=Oe;var G0=Ip.exports,td=G0;ml.createRoot=td.createRoot,ml.hydrateRoot=td.hydrateRoot;var nd={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},H0=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const o=t[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const i=t[n++];e[r++]=String.fromCharCode((o&31)<<6|i&63)}else if(o>239&&o<365){const i=t[n++],s=t[n++],a=t[n++],c=((o&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],s=t[n++];e[r++]=String.fromCharCode((o&15)<<12|(i&63)<<6|s&63)}}return e.join("")},wm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<t.length;o+=3){const i=t[o],s=o+1<t.length,a=s?t[o+1]:0,c=o+2<t.length,d=c?t[o+2]:0,f=i>>2,h=(i&3)<<4|a>>4;let p=(a&15)<<2|d>>6,m=d&63;c||(m=64,s||(p=64)),r.push(n[f],n[h],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Cm(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):H0(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<t.length;){const i=n[t.charAt(o++)],a=o<t.length?n[t.charAt(o)]:0;++o;const d=o<t.length?n[t.charAt(o)]:64;++o;const h=o<t.length?n[t.charAt(o)]:64;if(++o,i==null||a==null||d==null||h==null)throw new B0;const p=i<<2|a>>4;if(r.push(p),d!==64){const m=a<<4&240|d>>2;if(r.push(m),h!==64){const _=d<<6&192|h;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class B0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $0=function(t){const e=Cm(t);return wm.encodeByteArray(e,!0)},Am=function(t){return $0(t).replace(/\./g,"")},Rm=function(t){try{return wm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=()=>q0().__FIREBASE_DEFAULTS__,W0=()=>{if(typeof process>"u"||typeof nd>"u")return;const t=nd.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},J0=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Rm(t[1]);return e&&JSON.parse(e)},wu=()=>{try{return z0()||W0()||J0()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},K0=t=>{var e,n;return(n=(e=wu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Nm=()=>{var t;return(t=wu())===null||t===void 0?void 0:t.config},Pm=t=>{var e;return(e=wu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Q0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ce())}function X0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Z0(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function j0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function e_(){const t=Ce();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function t_(){try{return typeof indexedDB=="object"}catch{return!1}}function n_(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var i;e(((i=o.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="FirebaseError";class sn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=r_,Object.setPrototypeOf(this,sn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ro.prototype.create)}}class Ro{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,i=this.errors[e],s=i?o_(i,r):"Error",a=`${this.serviceName}: ${s} (${o}).`;return new sn(o,a,r)}}function o_(t,e){return t.replace(i_,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const i_=/\{\$([^}]+)}/g;function s_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ji(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const i=t[o],s=e[o];if(rd(i)&&rd(s)){if(!Ji(i,s))return!1}else if(i!==s)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function rd(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Gr(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,i]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(i)}}),e}function Hr(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function l_(t,e){const n=new a_(t,e);return n.subscribe.bind(n)}class a_{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");u_(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=il),o.error===void 0&&(o.error=il),o.complete===void 0&&(o.complete=il);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function u_(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function il(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(t){return t&&t._delegate?t._delegate:t}class gr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Y0;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(o)return null;throw i}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(f_(e))try{this.getOrInitializeService({instanceIdentifier:hn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:o});r.resolve(i)}catch{}}}}clearInstance(e=hn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hn){return this.instances.has(e)}getOptions(e=hn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&s.resolve(o)}return o}onInit(e,n){var r;const o=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(o,i);const s=this.instances.get(o);return s&&e(s,o),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:d_(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=hn){return this.component?this.component.multipleInstances?e:hn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function d_(t){return t===hn?void 0:t}function f_(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new c_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var q;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(q||(q={}));const h_={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},m_=q.INFO,g_={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},v_=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),o=g_[e];if(o)console[o](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class km{constructor(e){this.name=e,this._logLevel=m_,this._logHandler=v_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in q))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?h_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...e),this._logHandler(this,q.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...e),this._logHandler(this,q.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,q.INFO,...e),this._logHandler(this,q.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,q.WARN,...e),this._logHandler(this,q.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...e),this._logHandler(this,q.ERROR,...e)}}const y_=(t,e)=>e.some(n=>t instanceof n);let od,id;function __(){return od||(od=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function E_(){return id||(id=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xm=new WeakMap,aa=new WeakMap,Mm=new WeakMap,sl=new WeakMap,Au=new WeakMap;function T_(t){const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{n(Xt(t.result)),o()},s=()=>{r(t.error),o()};t.addEventListener("success",i),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&xm.set(n,t)}).catch(()=>{}),Au.set(e,t),e}function S_(t){if(aa.has(t))return;const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{n(),o()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)});aa.set(t,e)}let ua={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return aa.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Mm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function I_(t){ua=t(ua)}function C_(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ll(this),e,...n);return Mm.set(r,e.sort?e.sort():[e]),Xt(r)}:E_().includes(t)?function(...e){return t.apply(ll(this),e),Xt(xm.get(this))}:function(...e){return Xt(t.apply(ll(this),e))}}function w_(t){return typeof t=="function"?C_(t):(t instanceof IDBTransaction&&S_(t),y_(t,__())?new Proxy(t,ua):t)}function Xt(t){if(t instanceof IDBRequest)return T_(t);if(sl.has(t))return sl.get(t);const e=w_(t);return e!==t&&(sl.set(t,e),Au.set(e,t)),e}const ll=t=>Au.get(t);function A_(t,e,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const s=indexedDB.open(t,e),a=Xt(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Xt(s.result),c.oldVersion,c.newVersion,Xt(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),o&&c.addEventListener("versionchange",d=>o(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}const R_=["get","getKey","getAll","getAllKeys","count"],N_=["put","add","delete","clear"],al=new Map;function sd(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(al.get(e))return al.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=N_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||R_.includes(n)))return;const i=async function(s,...a){const c=this.transaction(s,o?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[n](...a),o&&c.done]))[0]};return al.set(e,i),i}I_(t=>({...t,get:(e,n,r)=>sd(e,n)||t.get(e,n,r),has:(e,n)=>!!sd(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(k_(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function k_(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ca="@firebase/app",ld="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct=new km("@firebase/app"),x_="@firebase/app-compat",M_="@firebase/analytics-compat",D_="@firebase/analytics",L_="@firebase/app-check-compat",U_="@firebase/app-check",F_="@firebase/auth",O_="@firebase/auth-compat",b_="@firebase/database",V_="@firebase/data-connect",G_="@firebase/database-compat",H_="@firebase/functions",B_="@firebase/functions-compat",$_="@firebase/installations",q_="@firebase/installations-compat",z_="@firebase/messaging",W_="@firebase/messaging-compat",J_="@firebase/performance",K_="@firebase/performance-compat",Y_="@firebase/remote-config",Q_="@firebase/remote-config-compat",X_="@firebase/storage",Z_="@firebase/storage-compat",j_="@firebase/firestore",eE="@firebase/vertexai-preview",tE="@firebase/firestore-compat",nE="firebase",rE="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da="[DEFAULT]",oE={[ca]:"fire-core",[x_]:"fire-core-compat",[D_]:"fire-analytics",[M_]:"fire-analytics-compat",[U_]:"fire-app-check",[L_]:"fire-app-check-compat",[F_]:"fire-auth",[O_]:"fire-auth-compat",[b_]:"fire-rtdb",[V_]:"fire-data-connect",[G_]:"fire-rtdb-compat",[H_]:"fire-fn",[B_]:"fire-fn-compat",[$_]:"fire-iid",[q_]:"fire-iid-compat",[z_]:"fire-fcm",[W_]:"fire-fcm-compat",[J_]:"fire-perf",[K_]:"fire-perf-compat",[Y_]:"fire-rc",[Q_]:"fire-rc-compat",[X_]:"fire-gcs",[Z_]:"fire-gcs-compat",[j_]:"fire-fst",[tE]:"fire-fst-compat",[eE]:"fire-vertex","fire-js":"fire-js",[nE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new Map,iE=new Map,fa=new Map;function ad(t,e){try{t.container.addComponent(e)}catch(n){Ct.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function vo(t){const e=t.name;if(fa.has(e))return Ct.debug(`There were multiple attempts to register component ${e}.`),!1;fa.set(e,t);for(const n of Ki.values())ad(n,t);for(const n of iE.values())ad(n,t);return!0}function Dm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function mt(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zt=new Ro("app","Firebase",sE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zt.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=rE;function Lm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:da,automaticDataCollectionEnabled:!1},e),o=r.name;if(typeof o!="string"||!o)throw Zt.create("bad-app-name",{appName:String(o)});if(n||(n=Nm()),!n)throw Zt.create("no-options");const i=Ki.get(o);if(i){if(Ji(n,i.options)&&Ji(r,i.config))return i;throw Zt.create("duplicate-app",{appName:o})}const s=new p_(o);for(const c of fa.values())s.addComponent(c);const a=new lE(n,r,s);return Ki.set(o,a),a}function aE(t=da){const e=Ki.get(t);if(!e&&t===da&&Nm())return Lm();if(!e)throw Zt.create("no-app",{appName:t});return e}function rr(t,e,n){var r;let o=(r=oE[t])!==null&&r!==void 0?r:t;n&&(o+=`-${n}`);const i=o.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${o}" with version "${e}":`];i&&a.push(`library name "${o}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ct.warn(a.join(" "));return}vo(new gr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="firebase-heartbeat-database",cE=1,yo="firebase-heartbeat-store";let ul=null;function Um(){return ul||(ul=A_(uE,cE,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zt.create("idb-open",{originalErrorMessage:t.message})})),ul}async function dE(t){try{const n=(await Um()).transaction(yo),r=await n.objectStore(yo).get(Fm(t));return await n.done,r}catch(e){if(e instanceof sn)Ct.warn(e.message);else{const n=Zt.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ct.warn(n.message)}}}async function ud(t,e){try{const r=(await Um()).transaction(yo,"readwrite");await r.objectStore(yo).put(e,Fm(t)),await r.done}catch(n){if(n instanceof sn)Ct.warn(n.message);else{const r=Zt.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ct.warn(r.message)}}}function Fm(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=1024,pE=30*24*60*60*1e3;class hE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new gE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=cd();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=pE}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ct.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=cd(),{heartbeatsToSend:r,unsentEntries:o}=mE(this._heartbeatsCache.heartbeats),i=Am(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ct.warn(n),""}}}function cd(){return new Date().toISOString().substring(0,10)}function mE(t,e=fE){const n=[];let r=t.slice();for(const o of t){const i=n.find(s=>s.agent===o.agent);if(i){if(i.dates.push(o.date),dd(n)>e){i.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),dd(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class gE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return t_()?n_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await dE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return ud(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return ud(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function dd(t){return Am(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(t){vo(new gr("platform-logger",e=>new P_(e),"PRIVATE")),vo(new gr("heartbeat",e=>new hE(e),"PRIVATE")),rr(ca,ld,t),rr(ca,ld,"esm2017"),rr("fire-js","")}vE("");var yE="firebase",_E="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rr(yE,_E,"app");function Ru(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function Om(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const EE=Om,bm=new Ro("auth","Firebase",Om());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=new km("@firebase/auth");function TE(t,...e){Yi.logLevel<=q.WARN&&Yi.warn(`Auth (${Po}): ${t}`,...e)}function vi(t,...e){Yi.logLevel<=q.ERROR&&Yi.error(`Auth (${Po}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(t,...e){throw Nu(t,...e)}function ut(t,...e){return Nu(t,...e)}function Vm(t,e,n){const r=Object.assign(Object.assign({},EE()),{[e]:n});return new Ro("auth","Firebase",r).create(e,{appName:t.name})}function jt(t){return Vm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nu(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return bm.create(t,...e)}function L(t,e,...n){if(!t)throw Nu(e,...n)}function gt(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vi(e),new Error(e)}function wt(t,e){t||gt(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function SE(){return fd()==="http:"||fd()==="https:"}function fd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SE()||Z0()||"connection"in navigator)?navigator.onLine:!0}function CE(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n){this.shortDelay=e,this.longDelay=n,wt(n>e,"Short delay should be less than long delay!"),this.isMobile=Q0()||j0()}get(){return IE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(t,e){wt(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=new ko(3e4,6e4);function Pn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function an(t,e,n,r,o={}){return Hm(t,o,async()=>{let i={},s={};r&&(e==="GET"?s=r:i={body:JSON.stringify(r)});const a=No(Object.assign({key:t.config.apiKey},s)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return X0()||(d.referrerPolicy="no-referrer"),Gm.fetch()(Bm(t,t.config.apiHost,n,a),d)})}async function Hm(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},wE),e);try{const o=new NE(t),i=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Zo(t,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const a=i.ok?s.errorMessage:s.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zo(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Zo(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw Zo(t,"user-disabled",s);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Vm(t,f,d);nt(t,f)}}catch(o){if(o instanceof sn)throw o;nt(t,"network-request-failed",{message:String(o)})}}async function Ss(t,e,n,r,o={}){const i=await an(t,e,n,r,o);return"mfaPendingCredential"in i&&nt(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Bm(t,e,n,r){const o=`${e}${n}?${r}`;return t.config.emulator?Pu(t.config,o):`${t.config.apiScheme}://${o}`}function RE(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NE{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ut(this.auth,"network-request-failed")),AE.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=ut(t,e,r);return o.customData._tokenResponse=n,o}function pd(t){return t!==void 0&&t.enterprise!==void 0}class PE{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return RE(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function kE(t,e){return an(t,"GET","/v2/recaptchaConfig",Pn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xE(t,e){return an(t,"POST","/v1/accounts:delete",e)}async function $m(t,e){return an(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ME(t,e=!1){const n=ln(t),r=await n.getIdToken(e),o=ku(r);L(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const i=typeof o.firebase=="object"?o.firebase:void 0,s=i==null?void 0:i.sign_in_provider;return{claims:o,token:r,authTime:Zr(cl(o.auth_time)),issuedAtTime:Zr(cl(o.iat)),expirationTime:Zr(cl(o.exp)),signInProvider:s||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function cl(t){return Number(t)*1e3}function ku(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return vi("JWT malformed, contained fewer than 3 sections"),null;try{const o=Rm(n);return o?JSON.parse(o):(vi("Failed to decode base64 JWT payload"),null)}catch(o){return vi("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function hd(t){const e=ku(t);return L(e,"internal-error"),L(typeof e.exp<"u","internal-error"),L(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _o(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof sn&&DE(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function DE({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zr(this.lastLoginAt),this.creationTime=Zr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qi(t){var e;const n=t.auth,r=await t.getIdToken(),o=await _o(t,$m(n,{idToken:r}));L(o==null?void 0:o.users.length,n,"internal-error");const i=o.users[0];t._notifyReloadListener(i);const s=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?qm(i.providerUserInfo):[],a=FE(t.providerData,s),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),f=c?d:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new ha(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,h)}async function UE(t){const e=ln(t);await Qi(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function FE(t,e){return[...t.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function qm(t){return t.map(e=>{var{providerId:n}=e,r=Ru(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OE(t,e){const n=await Hm(t,{},async()=>{const r=No({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:i}=t.config,s=Bm(t,o,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Gm.fetch()(s,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function bE(t,e){return an(t,"POST","/v2/accounts:revokeToken",Pn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){L(e.idToken,"internal-error"),L(typeof e.idToken<"u","internal-error"),L(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hd(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){L(e.length!==0,"internal-error");const n=hd(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(L(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:i}=await OE(e,n);this.updateTokensAndExpiration(r,o,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:i}=n,s=new or;return r&&(L(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),o&&(L(typeof o=="string","internal-error",{appName:e}),s.accessToken=o),i&&(L(typeof i=="number","internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new or,this.toJSON())}_performRefresh(){return gt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(t,e){L(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class vt{constructor(e){var{uid:n,auth:r,stsTokenManager:o}=e,i=Ru(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new LE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ha(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await _o(this,this.stsTokenManager.getToken(this.auth,e));return L(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ME(this,e)}reload(){return UE(this)}_assign(e){this!==e&&(L(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){L(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Qi(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mt(this.auth.app))return Promise.reject(jt(this.auth));const e=await this.getIdToken();return await _o(this,xE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,o,i,s,a,c,d,f;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(o=n.email)!==null&&o!==void 0?o:void 0,m=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,_=(s=n.photoURL)!==null&&s!==void 0?s:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,v=(d=n.createdAt)!==null&&d!==void 0?d:void 0,g=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:y,emailVerified:I,isAnonymous:w,providerData:C,stsTokenManager:A}=n;L(y&&A,e,"internal-error");const N=or.fromJSON(this.name,A);L(typeof y=="string",e,"internal-error"),Mt(h,e.name),Mt(p,e.name),L(typeof I=="boolean",e,"internal-error"),L(typeof w=="boolean",e,"internal-error"),Mt(m,e.name),Mt(_,e.name),Mt(E,e.name),Mt(T,e.name),Mt(v,e.name),Mt(g,e.name);const P=new vt({uid:y,auth:e,email:p,emailVerified:I,displayName:h,isAnonymous:w,photoURL:_,phoneNumber:m,tenantId:E,stsTokenManager:N,createdAt:v,lastLoginAt:g});return C&&Array.isArray(C)&&(P.providerData=C.map(M=>Object.assign({},M))),T&&(P._redirectEventId=T),P}static async _fromIdTokenResponse(e,n,r=!1){const o=new or;o.updateFromServerResponse(n);const i=new vt({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Qi(i),i}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];L(o.localId!==void 0,"internal-error");const i=o.providerUserInfo!==void 0?qm(o.providerUserInfo):[],s=!(o.email&&o.passwordHash)&&!(i!=null&&i.length),a=new or;a.updateFromIdToken(r);const c=new vt({uid:o.localId,auth:e,stsTokenManager:a,isAnonymous:s}),d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:i,metadata:new ha(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md=new Map;function yt(t){wt(t instanceof Function,"Expected a class definition");let e=md.get(t);return e?(wt(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,md.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}zm.type="NONE";const gd=zm;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(t,e,n){return`firebase:${t}:${e}:${n}`}class ir{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:i}=this.auth;this.fullUserKey=yi(this.userKey,o.apiKey,i),this.fullPersistenceKey=yi("persistence",o.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?vt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ir(yt(gd),e,r);const o=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=o[0]||yt(gd);const s=yi(r,e.config.apiKey,e.name);let a=null;for(const d of n)try{const f=await d._get(s);if(f){const h=vt._fromJSON(e,f);d!==i&&(a=h),i=d;break}}catch{}const c=o.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new ir(i,e,r):(i=c[0],a&&await i._set(s,a.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(s)}catch{}})),new ir(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ym(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Wm(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Xm(e))return"Blackberry";if(Zm(e))return"Webos";if(Jm(e))return"Safari";if((e.includes("chrome/")||Km(e))&&!e.includes("edge/"))return"Chrome";if(Qm(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Wm(t=Ce()){return/firefox\//i.test(t)}function Jm(t=Ce()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Km(t=Ce()){return/crios\//i.test(t)}function Ym(t=Ce()){return/iemobile/i.test(t)}function Qm(t=Ce()){return/android/i.test(t)}function Xm(t=Ce()){return/blackberry/i.test(t)}function Zm(t=Ce()){return/webos/i.test(t)}function xu(t=Ce()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function VE(t=Ce()){var e;return xu(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function GE(){return e_()&&document.documentMode===10}function jm(t=Ce()){return xu(t)||Qm(t)||Zm(t)||Xm(t)||/windows phone/i.test(t)||Ym(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(t,e=[]){let n;switch(t){case"Browser":n=vd(Ce());break;case"Worker":n=`${vd(Ce())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Po}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((s,a)=>{try{const c=e(i);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BE(t,e={}){return an(t,"GET","/v2/passwordPolicy",Pn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=6;class qE{constructor(e){var n,r,o,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:$E,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,o,i,s,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(o=c.containsLowercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yd(this),this.idTokenSubscription=new yd(this),this.beforeStateQueue=new HE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bm,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=yt(n)),this._initializationPromise=this.queue(async()=>{var r,o;if(!this._deleted&&(this.persistenceManager=await ir.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $m(this,{idToken:e}),r=await vt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(mt(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=o==null?void 0:o._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===a)&&(c!=null&&c.user)&&(o=c.user,i=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(o)}catch(s){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return L(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Qi(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mt(this.app))return Promise.reject(jt(this));const n=e?ln(e):null;return n&&L(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&L(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mt(this.app)?Promise.reject(jt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mt(this.app)?Promise.reject(jt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yt(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await BE(this),n=new qE(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ro("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await bE(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&yt(e)||this._popupRedirectResolver;L(n,this,"argument-error"),this.redirectPersistenceManager=await ir.create(this,[yt(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(L(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,o);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return L(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&TE(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Tr(t){return ln(t)}class yd{constructor(e){this.auth=e,this.observer=null,this.addObserver=l_(n=>this.observer=n)}get next(){return L(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Is={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WE(t){Is=t}function tg(t){return Is.loadJS(t)}function JE(){return Is.recaptchaEnterpriseScript}function KE(){return Is.gapiScript}function YE(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const QE="recaptcha-enterprise",XE="NO_RECAPTCHA";class ZE{constructor(e){this.type=QE,this.auth=Tr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(s,a)=>{kE(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const d=new PE(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,s(d.siteKey)}}).catch(c=>{a(c)})})}function o(i,s,a){const c=window.grecaptcha;pd(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{s(d)}).catch(()=>{s(XE)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,s)=>{r(this.auth).then(a=>{if(!n&&pd(window.grecaptcha))o(a,i,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=JE();c.length!==0&&(c+=a),tg(c).then(()=>{o(a,i,s)}).catch(d=>{s(d)})}}).catch(a=>{s(a)})})}}async function _d(t,e,n,r=!1){const o=new ZE(t);let i;try{i=await o.verify(n)}catch{i=await o.verify(n,!0)}const s=Object.assign({},e);return r?Object.assign(s,{captchaResp:i}):Object.assign(s,{captchaResponse:i}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function Ed(t,e,n,r){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await _d(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await _d(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(t,e){const n=Dm(t,"auth");if(n.isInitialized()){const o=n.getImmediate(),i=n.getOptions();if(Ji(i,e??{}))return o;nt(o,"already-initialized")}return n.initialize({options:e})}function eT(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(yt);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function tT(t,e,n){const r=Tr(t);L(r._canInitEmulator,r,"emulator-config-failed"),L(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,i=ng(e),{host:s,port:a}=nT(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${s}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:o})}),rT()}function ng(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function nT(t){const e=ng(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const i=o[1];return{host:i,port:Td(r.substr(i.length+1))}}else{const[i,s]=r.split(":");return{host:i,port:Td(s)}}}function Td(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function rT(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gt("not implemented")}_getIdTokenResponse(e){return gt("not implemented")}_linkToIdToken(e,n){return gt("not implemented")}_getReauthenticationResolver(e){return gt("not implemented")}}async function oT(t,e){return an(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iT(t,e){return Ss(t,"POST","/v1/accounts:signInWithPassword",Pn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sT(t,e){return Ss(t,"POST","/v1/accounts:signInWithEmailLink",Pn(t,e))}async function lT(t,e){return Ss(t,"POST","/v1/accounts:signInWithEmailLink",Pn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo extends Mu{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Eo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Eo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ed(e,n,"signInWithPassword",iT);case"emailLink":return sT(e,{email:this._email,oobCode:this._password});default:nt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ed(e,r,"signUpPassword",oT);case"emailLink":return lT(e,{idToken:n,email:this._email,oobCode:this._password});default:nt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sr(t,e){return Ss(t,"POST","/v1/accounts:signInWithIdp",Pn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="http://localhost";class An extends Mu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new An(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):nt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=n,i=Ru(n,["providerId","signInMethod"]);if(!r||!o)return null;const s=new An(r,o);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return sr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,sr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,sr(e,n)}buildRequest(){const e={requestUri:aT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=No(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cT(t){const e=Gr(Hr(t)).link,n=e?Gr(Hr(e)).deep_link_id:null,r=Gr(Hr(t)).deep_link_id;return(r?Gr(Hr(r)).link:null)||r||n||e||t}class Du{constructor(e){var n,r,o,i,s,a;const c=Gr(Hr(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,f=(r=c.oobCode)!==null&&r!==void 0?r:null,h=uT((o=c.mode)!==null&&o!==void 0?o:null);L(d&&f&&h,"argument-error"),this.apiKey=d,this.operation=h,this.code=f,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(s=c.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=cT(e);try{return new Du(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(){this.providerId=Sr.PROVIDER_ID}static credential(e,n){return Eo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Du.parseLink(n);return L(r,"argument-error"),Eo._fromEmailAndCode(e,r.code,r.tenantId)}}Sr.PROVIDER_ID="password";Sr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Sr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends rg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot extends xo{constructor(){super("facebook.com")}static credential(e){return An._fromParams({providerId:Ot.PROVIDER_ID,signInMethod:Ot.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ot.credentialFromTaggedObject(e)}static credentialFromError(e){return Ot.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ot.credential(e.oauthAccessToken)}catch{return null}}}Ot.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ot.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt extends xo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return An._fromParams({providerId:bt.PROVIDER_ID,signInMethod:bt.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return bt.credentialFromTaggedObject(e)}static credentialFromError(e){return bt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return bt.credential(n,r)}catch{return null}}}bt.GOOGLE_SIGN_IN_METHOD="google.com";bt.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt extends xo{constructor(){super("github.com")}static credential(e){return An._fromParams({providerId:Vt.PROVIDER_ID,signInMethod:Vt.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vt.credentialFromTaggedObject(e)}static credentialFromError(e){return Vt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vt.credential(e.oauthAccessToken)}catch{return null}}}Vt.GITHUB_SIGN_IN_METHOD="github.com";Vt.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt extends xo{constructor(){super("twitter.com")}static credential(e,n){return An._fromParams({providerId:Gt.PROVIDER_ID,signInMethod:Gt.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gt.credentialFromTaggedObject(e)}static credentialFromError(e){return Gt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Gt.credential(n,r)}catch{return null}}}Gt.TWITTER_SIGN_IN_METHOD="twitter.com";Gt.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const i=await vt._fromIdTokenResponse(e,r,o),s=Sd(r);return new vr({user:i,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=Sd(r);return new vr({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function Sd(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends sn{constructor(e,n,r,o){var i;super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Xi.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new Xi(e,n,r,o)}}function og(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Xi._fromErrorAndOperation(t,i,e,r):i})}async function dT(t,e,n=!1){const r=await _o(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return vr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fT(t,e,n=!1){const{auth:r}=t;if(mt(r.app))return Promise.reject(jt(r));const o="reauthenticate";try{const i=await _o(t,og(r,o,e,t),n);L(i.idToken,r,"internal-error");const s=ku(i.idToken);L(s,r,"internal-error");const{sub:a}=s;return L(t.uid===a,r,"user-mismatch"),vr._forOperation(t,o,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&nt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ig(t,e,n=!1){if(mt(t.app))return Promise.reject(jt(t));const r="signIn",o=await og(t,r,e),i=await vr._fromIdTokenResponse(t,r,o);return n||await t._updateCurrentUser(i.user),i}async function pT(t,e){return ig(Tr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hT(t){const e=Tr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function mT(t,e,n){return mt(t.app)?Promise.reject(jt(t)):pT(ln(t),Sr.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&hT(t),r})}function gT(t,e,n,r){return ln(t).onIdTokenChanged(e,n,r)}function vT(t,e,n){return ln(t).beforeAuthStateChanged(e,n)}function yT(t,e,n,r){return ln(t).onAuthStateChanged(e,n,r)}const Zi="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zi,"1"),this.storage.removeItem(Zi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T=1e3,ET=10;class lg extends sg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jm(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,a,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},i=this.storage.getItem(r);GE()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,ET):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},_T)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}lg.type="LOCAL";const TT=lg;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag extends sg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ag.type="SESSION";const ug=ag;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new Cs(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:i}=n.data,s=this.handlersMap[o];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const a=Array.from(s).map(async d=>d(n.origin,i)),c=await ST(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cs.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let i,s;return new Promise((a,c)=>{const d=Lu("",20);o.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:o,onMessage(h){const p=h;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(s),o.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[o.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(){return window}function CT(t){ct().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(){return typeof ct().WorkerGlobalScope<"u"&&typeof ct().importScripts=="function"}async function wT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AT(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function RT(){return cg()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="firebaseLocalStorageDb",NT=1,ji="firebaseLocalStorage",fg="fbase_key";class Mo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ws(t,e){return t.transaction([ji],e?"readwrite":"readonly").objectStore(ji)}function PT(){const t=indexedDB.deleteDatabase(dg);return new Mo(t).toPromise()}function ma(){const t=indexedDB.open(dg,NT);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ji,{keyPath:fg})}catch(o){n(o)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ji)?e(r):(r.close(),await PT(),e(await ma()))})})}async function Id(t,e,n){const r=ws(t,!0).put({[fg]:e,value:n});return new Mo(r).toPromise()}async function kT(t,e){const n=ws(t,!1).get(e),r=await new Mo(n).toPromise();return r===void 0?null:r.value}function Cd(t,e){const n=ws(t,!0).delete(e);return new Mo(n).toPromise()}const xT=800,MT=3;class pg{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ma(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>MT)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cs._getInstance(RT()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await wT(),!this.activeServiceWorker)return;this.sender=new IT(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ma();return await Id(e,Zi,"1"),await Cd(e,Zi),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Id(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>kT(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Cd(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const i=ws(o,!1).getAll();return new Mo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:i}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(i)&&(this.notifyListeners(o,i),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pg.type="LOCAL";const DT=pg;new ko(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(t,e){return e?yt(e):(L(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu extends Mu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return sr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return sr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function UT(t){return ig(t.auth,new Uu(t),t.bypassAuthState)}function FT(t){const{auth:e,user:n}=t;return L(n,e,"internal-error"),fT(n,new Uu(t),t.bypassAuthState)}async function OT(t){const{auth:e,user:n}=t;return L(n,e,"internal-error"),dT(n,new Uu(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,n,r,o,i=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:i,error:s,type:a}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UT;case"linkViaPopup":case"linkViaRedirect":return OT;case"reauthViaPopup":case"reauthViaRedirect":return FT;default:nt(this.auth,"internal-error")}}resolve(e){wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT=new ko(2e3,1e4);class Kn extends hg{constructor(e,n,r,o,i){super(e,n,o,i),this.provider=r,this.authWindow=null,this.pollId=null,Kn.currentPopupAction&&Kn.currentPopupAction.cancel(),Kn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return L(e,this.auth,"internal-error"),e}async onExecution(){wt(this.filter.length===1,"Popup operations only handle one event");const e=Lu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ut(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ut(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ut(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bT.get())};e()}}Kn.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="pendingRedirect",_i=new Map;class GT extends hg{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=_i.get(this.auth._key());if(!e){try{const r=await HT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}_i.set(this.auth._key(),e)}return this.bypassAuthState||_i.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HT(t,e){const n=qT(e),r=$T(t);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function BT(t,e){_i.set(t._key(),e)}function $T(t){return yt(t._redirectPersistence)}function qT(t){return yi(VT,t.config.apiKey,t.name)}async function zT(t,e,n=!1){if(mt(t.app))return Promise.reject(jt(t));const r=Tr(t),o=LT(r,e),s=await new GT(r,o,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT=10*60*1e3;class JT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KT(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!mg(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ut(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WT&&this.cachedEventUids.clear(),this.cachedEventUids.has(wd(e))}saveEventToCache(e){this.cachedEventUids.add(wd(e)),this.lastProcessedEventTime=Date.now()}}function wd(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function mg({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function KT(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mg(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YT(t,e={}){return an(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XT=/^https?/;async function ZT(t){if(t.config.emulator)return;const{authorizedDomains:e}=await YT(t);for(const n of e)try{if(jT(n))return}catch{}nt(t,"unauthorized-domain")}function jT(t){const e=pa(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!XT.test(n))return!1;if(QT.test(t))return r===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS=new ko(3e4,6e4);function Ad(){const t=ct().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function tS(t){return new Promise((e,n)=>{var r,o,i;function s(){Ad(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ad(),n(ut(t,"network-request-failed"))},timeout:eS.get()})}if(!((o=(r=ct().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((i=ct().gapi)===null||i===void 0)&&i.load)s();else{const a=YE("iframefcb");return ct()[a]=()=>{gapi.load?s():n(ut(t,"network-request-failed"))},tg(`${KE()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Ei=null,e})}let Ei=null;function nS(t){return Ei=Ei||tS(t),Ei}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=new ko(5e3,15e3),oS="__/auth/iframe",iS="emulator/auth/iframe",sS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aS(t){const e=t.config;L(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Pu(e,iS):`https://${t.config.authDomain}/${oS}`,r={apiKey:e.apiKey,appName:t.name,v:Po},o=lS.get(t.config.apiHost);o&&(r.eid=o);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${No(r).slice(1)}`}async function uS(t){const e=await nS(t),n=ct().gapi;return L(n,t,"internal-error"),e.open({where:document.body,url:aS(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sS,dontclear:!0},r=>new Promise(async(o,i)=>{await r.restyle({setHideOnLeave:!1});const s=ut(t,"network-request-failed"),a=ct().setTimeout(()=>{i(s)},rS.get());function c(){ct().clearTimeout(a),o(r)}r.ping(c).then(c,()=>{i(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dS=500,fS=600,pS="_blank",hS="http://localhost";class Rd{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mS(t,e,n,r=dS,o=fS){const i=Math.max((window.screen.availHeight-o)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},cS),{width:r.toString(),height:o.toString(),top:i,left:s}),d=Ce().toLowerCase();n&&(a=Km(d)?pS:n),Wm(d)&&(e=e||hS,c.scrollbars="yes");const f=Object.entries(c).reduce((p,[m,_])=>`${p}${m}=${_},`,"");if(VE(d)&&a!=="_self")return gS(e||"",a),new Rd(null);const h=window.open(e||"",a,f);L(h,t,"popup-blocked");try{h.focus()}catch{}return new Rd(h)}function gS(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="__/auth/handler",yS="emulator/auth/handler",_S=encodeURIComponent("fac");async function Nd(t,e,n,r,o,i){L(t.config.authDomain,t,"auth-domain-config-required"),L(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Po,eventId:o};if(e instanceof rg){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",s_(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,h]of Object.entries({}))s[f]=h}if(e instanceof xo){const f=e.getScopes().filter(h=>h!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const c=await t._getAppCheckToken(),d=c?`#${_S}=${encodeURIComponent(c)}`:"";return`${ES(t)}?${No(a).slice(1)}${d}`}function ES({config:t}){return t.emulator?Pu(t,yS):`https://${t.authDomain}/${vS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl="webStorageSupport";class TS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ug,this._completeRedirectFn=zT,this._overrideRedirectResult=BT}async _openPopup(e,n,r,o){var i;wt((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await Nd(e,n,r,pa(),o);return mS(e,s,Lu())}async _openRedirect(e,n,r,o){await this._originValidation(e);const i=await Nd(e,n,r,pa(),o);return CT(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:i}=this.eventManagers[n];return o?Promise.resolve(o):(wt(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await uS(e),r=new JT(e);return n.register("authEvent",o=>(L(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(dl,{type:dl},o=>{var i;const s=(i=o==null?void 0:o[0])===null||i===void 0?void 0:i[dl];s!==void 0&&n(!!s),nt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZT(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return jm()||Jm()||xu()}}const SS=TS;var Pd="@firebase/auth",kd="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){L(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wS(t){vo(new gr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;L(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eg(t)},d=new zE(r,o,i,c);return eT(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),vo(new gr("auth-internal",e=>{const n=Tr(e.getProvider("auth").getImmediate());return(r=>new IS(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),rr(Pd,kd,CS(t)),rr(Pd,kd,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS=5*60,RS=Pm("authIdTokenMaxAge")||AS;let xd=null;const NS=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>RS)return;const o=n==null?void 0:n.token;xd!==o&&(xd=o,await fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function PS(t=aE()){const e=Dm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=jE(t,{popupRedirectResolver:SS,persistence:[DT,TT,ug]}),r=Pm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const s=NS(i.toString());vT(n,s,()=>s(n.currentUser)),gT(n,a=>s(a))}}const o=K0("auth");return o&&tT(n,`http://${o}`),n}function kS(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}WE({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=o=>{const i=ut("internal-error");i.customData=o,n(i)},r.type="text/javascript",r.charset="UTF-8",kS().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wS("Browser");const xS={VITE_FIREBASE_API_KEY:"AIzaSyBZ8-0NrU8C3cXnU9d1Dc2qBctv8xMrpo4",VITE_FIREBASE_APP_ID:"1:245765105329:web:c7daacb35f7b040b442490",VITE_FIREBASE_AUTH_DOMAIN:"nutriai-9f4c8.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"245765105329",VITE_FIREBASE_PROJECT_ID:"nutriai-9f4c8",VITE_FIREBASE_STORAGE_BUCKET:"nutriai-9f4c8.firebasestorage.app"},Ln=xS,MS={apiKey:Ln.VITE_FIREBASE_API_KEY,authDomain:Ln.VITE_FIREBASE_AUTH_DOMAIN,projectId:Ln.VITE_FIREBASE_PROJECT_ID,storageBucket:Ln.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:Ln.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:Ln.VITE_FIREBASE_APP_ID},DS=Lm(MS),Fu=PS(DS);var ne=(t=>(t.LOGIN="LOGIN",t.DASHBOARD="DASHBOARD",t.FOOD_TRACKER="FOOD_TRACKER",t.WORKOUT_TRACKER="WORKOUT_TRACKER",t))(ne||{});const LS=({currentView:t,setView:e,userEmail:n})=>{const r=()=>{Fu.signOut()};return S.jsxs("nav",{className:"bg-emerald-600 text-white shadow-lg sticky top-0 z-50",children:[S.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:S.jsxs("div",{className:"flex items-center justify-between h-16",children:[S.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>e(ne.DASHBOARD),children:[S.jsx("svg",{className:"w-8 h-8 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),S.jsx("span",{className:"font-bold text-xl tracking-tight",children:"NutriAI"})]}),S.jsx("div",{className:"hidden md:block",children:S.jsxs("div",{className:"ml-10 flex items-baseline space-x-4",children:[S.jsx("button",{onClick:()=>e(ne.FOOD_TRACKER),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${t===ne.FOOD_TRACKER?"bg-emerald-700 text-white":"text-emerald-100 hover:bg-emerald-500"}`,children:"Food"}),S.jsx("button",{onClick:()=>e(ne.WORKOUT_TRACKER),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${t===ne.WORKOUT_TRACKER?"bg-emerald-700 text-white":"text-emerald-100 hover:bg-emerald-500"}`,children:"Workout"})]})}),S.jsxs("div",{className:"flex items-center",children:[S.jsx("span",{className:"hidden sm:block text-xs text-emerald-200 mr-4 truncate max-w-[150px]",children:n}),S.jsx("button",{onClick:r,className:"bg-emerald-800 hover:bg-emerald-900 text-white px-3 py-1 rounded text-sm transition-colors",children:"Logout"})]})]})}),S.jsxs("div",{className:"md:hidden flex justify-around bg-emerald-700 py-2",children:[S.jsx("button",{onClick:()=>e(ne.DASHBOARD),className:`p-2 ${t===ne.DASHBOARD?"text-white":"text-emerald-300"}`,children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),S.jsx("button",{onClick:()=>e(ne.FOOD_TRACKER),className:`p-2 ${t===ne.FOOD_TRACKER?"text-white":"text-emerald-300"}`,children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),S.jsx("button",{onClick:()=>e(ne.WORKOUT_TRACKER),className:`p-2 ${t===ne.WORKOUT_TRACKER?"text-white":"text-emerald-300"}`,children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]})]})},US=({setView:t})=>S.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[S.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-6",children:"Welcome to NutriAI"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[S.jsxs("div",{onClick:()=>t(ne.FOOD_TRACKER),className:"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow cursor-pointer border border-slate-100 group",children:[S.jsx("div",{className:"h-40 bg-orange-100 flex items-center justify-center group-hover:bg-orange-200 transition-colors",children:S.jsx("svg",{className:"w-20 h-20 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})})}),S.jsxs("div",{className:"p-6",children:[S.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:"Track Calories"}),S.jsx("p",{className:"text-slate-600",children:"Upload a photo of your meal or describe what you ate. AI will estimate your caloric intake and macros."}),S.jsx("span",{className:"mt-4 inline-block text-orange-600 font-semibold group-hover:translate-x-1 transition-transform",children:"Start Tracking "})]})]}),S.jsxs("div",{onClick:()=>t(ne.WORKOUT_TRACKER),className:"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow cursor-pointer border border-slate-100 group",children:[S.jsx("div",{className:"h-40 bg-blue-100 flex items-center justify-center group-hover:bg-blue-200 transition-colors",children:S.jsx("svg",{className:"w-20 h-20 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),S.jsxs("div",{className:"p-6",children:[S.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:"Track Workouts"}),S.jsx("p",{className:"text-slate-600",children:"Send a photo of your treadmill, gym machine, or describe your workout. We'll calculate your burn based on your stats."}),S.jsx("span",{className:"mt-4 inline-block text-blue-600 font-semibold group-hover:translate-x-1 transition-transform",children:"Start Tracking "})]})]})]})]}),FS=Object.prototype.toString,OS=t=>FS.call(t)==="[object Error]",bS=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function VS(t){if(!(t&&OS(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;const{message:n,stack:r}=t;return n==="Load failed"?r===void 0||"__sentry_captured__"in t:n.startsWith("error sending request for url")?!0:bS.has(n)}function GS(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function jo(t,e,{min:n=0,allowInfinity:r=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${r?" or Infinity":""}.`);if(!r&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<n)throw new TypeError(`Expected \`${t}\` to be  ${n}.`)}}class gg extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}function HS(t,e){const n=Math.max(1,t+1),r=e.randomize?Math.random()+1:1;let o=Math.round(r*e.minTimeout*e.factor**(n-1));return o=Math.min(o,e.maxTimeout),o}function Md(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function BS({error:t,attemptNumber:e,retriesConsumed:n,startTime:r,options:o}){var m,_,E,T;const i=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(i instanceof gg)throw i.originalError;const s=Number.isFinite(o.retries)?Math.max(0,o.retries-n):o.retries,a=o.maxRetryTime??Number.POSITIVE_INFINITY,c=Object.freeze({error:i,attemptNumber:e,retriesLeft:s,retriesConsumed:n});if(await o.onFailedAttempt(c),Md(r,a)<=0)throw i;const d=await o.shouldConsumeRetry(c),f=Md(r,a);if(f<=0||s<=0)throw i;if(i instanceof TypeError&&!VS(i)){if(d)throw i;return(m=o.signal)==null||m.throwIfAborted(),!1}if(!await o.shouldRetry(c))throw i;if(!d)return(_=o.signal)==null||_.throwIfAborted(),!1;const h=HS(n,o),p=Math.min(h,f);return(E=o.signal)==null||E.throwIfAborted(),p>0&&await new Promise((v,g)=>{var w,C;const y=()=>{var A;clearTimeout(I),(A=o.signal)==null||A.removeEventListener("abort",y),g(o.signal.reason)},I=setTimeout(()=>{var A;(A=o.signal)==null||A.removeEventListener("abort",y),v()},p);o.unref&&((w=I.unref)==null||w.call(I)),(C=o.signal)==null||C.addEventListener("abort",y,{once:!0})}),(T=o.signal)==null||T.throwIfAborted(),!0}async function $S(t,e={}){var i,s,a;if(e={...e},GS(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),jo("factor",e.factor,{min:0,allowInfinity:!1}),jo("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),jo("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),jo("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(i=e.signal)==null||i.throwIfAborted();let n=0,r=0;const o=performance.now();for(;!Number.isFinite(e.retries)||r<=e.retries;){n++;try{(s=e.signal)==null||s.throwIfAborted();const c=await t(n);return(a=e.signal)==null||a.throwIfAborted(),c}catch(c){await BS({error:c,attemptNumber:n,retriesConsumed:r,startTime:o,options:e})&&r++}}throw new Error("Retry attempts exhausted without throwing an error.")}var qS={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let zS,WS;function JS(){return{geminiUrl:zS,vertexUrl:WS}}function KS(t,e,n,r){var o,i;if(!(t!=null&&t.baseUrl)){const s=JS();return e?(o=s.vertexUrl)!==null&&o!==void 0?o:n:(i=s.geminiUrl)!==null&&i!==void 0?i:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nt{}function x(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const i=e[o];return i!=null?String(i):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function u(t,e,n){for(let i=0;i<e.length-1;i++){const s=e[i];if(s.endsWith("[]")){const a=s.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[a])){const c=t[a];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];u(f,e.slice(i+1),n[d])}else for(const d of c)u(d,e.slice(i+1),n)}return}else if(s.endsWith("[0]")){const a=s.slice(0,-3);a in t||(t[a]=[{}]);const c=t[a];u(c[0],e.slice(i+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],o=t[r];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function l(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const o=e[r];if(o.endsWith("[]")){const i=o.slice(0,-2);if(i in t){const s=t[i];return Array.isArray(s)?s.map(a=>l(a,e.slice(r+1),n)):n}else return n}else t=t[o]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function YS(t,e){for(const[n,r]of Object.entries(e)){const o=n.split("."),i=r.split("."),s=new Set;let a=-1;for(let c=0;c<o.length;c++)if(o[c]==="*"){a=c;break}if(a!==-1&&i.length>a)for(let c=a;c<i.length;c++){const d=i[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&s.add(d)}ga(t,o,i,0,s)}}function ga(t,e,n,r,o){if(r>=e.length||typeof t!="object"||t===null)return;const i=e[r];if(i.endsWith("[]")){const s=i.slice(0,-2),a=t;if(s in a&&Array.isArray(a[s]))for(const c of a[s])ga(c,e,n,r+1,o)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,a=Object.keys(s).filter(d=>!d.startsWith("_")&&!o.has(d)),c={};for(const d of a)c[d]=s[d];for(const[d,f]of Object.entries(c)){const h=[];for(const p of n.slice(r))p==="*"?h.push(d):h.push(p);u(s,h,f)}for(const d of a)delete s[d]}}else{const s=t;i in s&&ga(s[i],e,n,r+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ou(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QS(t){const e={},n=l(t,["operationName"]);n!=null&&u(e,["operationName"],n);const r=l(t,["resourceName"]);return r!=null&&u(e,["_url","resourceName"],r),e}function XS(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);i!=null&&u(e,["error"],i);const s=l(t,["response","generateVideoResponse"]);return s!=null&&u(e,["response"],jS(s)),e}function ZS(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);i!=null&&u(e,["error"],i);const s=l(t,["response"]);return s!=null&&u(e,["response"],eI(s)),e}function jS(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>tI(s))),u(e,["generatedVideos"],i)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const o=l(t,["raiMediaFilteredReasons"]);return o!=null&&u(e,["raiMediaFilteredReasons"],o),e}function eI(t){const e={},n=l(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>nI(s))),u(e,["generatedVideos"],i)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const o=l(t,["raiMediaFilteredReasons"]);return o!=null&&u(e,["raiMediaFilteredReasons"],o),e}function tI(t){const e={},n=l(t,["video"]);return n!=null&&u(e,["video"],aI(n)),e}function nI(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],uI(n)),e}function rI(t){const e={},n=l(t,["operationName"]);return n!=null&&u(e,["_url","operationName"],n),e}function oI(t){const e={},n=l(t,["operationName"]);return n!=null&&u(e,["_url","operationName"],n),e}function iI(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);i!=null&&u(e,["error"],i);const s=l(t,["response"]);return s!=null&&u(e,["response"],sI(s)),e}function sI(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["parent"]);r!=null&&u(e,["parent"],r);const o=l(t,["documentName"]);return o!=null&&u(e,["documentName"],o),e}function vg(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);i!=null&&u(e,["error"],i);const s=l(t,["response"]);return s!=null&&u(e,["response"],lI(s)),e}function lI(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["parent"]);r!=null&&u(e,["parent"],r);const o=l(t,["documentName"]);return o!=null&&u(e,["documentName"],o),e}function aI(t){const e={},n=l(t,["uri"]);n!=null&&u(e,["uri"],n);const r=l(t,["encodedVideo"]);r!=null&&u(e,["videoBytes"],Ou(r));const o=l(t,["encoding"]);return o!=null&&u(e,["mimeType"],o),e}function uI(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["uri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&u(e,["videoBytes"],Ou(r));const o=l(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Dd;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Dd||(Dd={}));var Ld;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Ld||(Ld={}));var Ud;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Ud||(Ud={}));var j;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(j||(j={}));var Fd;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Fd||(Fd={}));var Od;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Od||(Od={}));var bd;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(bd||(bd={}));var Vd;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Vd||(Vd={}));var Gd;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Gd||(Gd={}));var Hd;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Hd||(Hd={}));var Bd;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Bd||(Bd={}));var $d;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})($d||($d={}));var qd;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(qd||(qd={}));var zd;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(zd||(zd={}));var Wd;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Wd||(Wd={}));var Jd;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Jd||(Jd={}));var Kd;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Kd||(Kd={}));var Yd;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Yd||(Yd={}));var Qd;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Qd||(Qd={}));var Xd;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Xd||(Xd={}));var Zd;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Zd||(Zd={}));var es;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(es||(es={}));var jd;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(jd||(jd={}));var ef;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(ef||(ef={}));var tf;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(tf||(tf={}));var va;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(va||(va={}));var nf;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(nf||(nf={}));var rf;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(rf||(rf={}));var ya;(function(t){t.COLLECTION="COLLECTION"})(ya||(ya={}));var of;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(of||(of={}));var sf;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(sf||(sf={}));var lf;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(lf||(lf={}));var af;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(af||(af={}));var uf;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(uf||(uf={}));var cf;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(cf||(cf={}));var df;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(df||(df={}));var ff;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ff||(ff={}));var pf;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(pf||(pf={}));var hf;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(hf||(hf={}));var mf;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(mf||(mf={}));var gf;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(gf||(gf={}));var vf;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(vf||(vf={}));var yf;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(yf||(yf={}));var _f;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(_f||(_f={}));var Ef;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Ef||(Ef={}));var Tf;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(Tf||(Tf={}));var Sf;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Sf||(Sf={}));var If;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(If||(If={}));var Cf;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Cf||(Cf={}));var wf;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(wf||(wf={}));var Af;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Af||(Af={}));var Rf;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Rf||(Rf={}));var Nf;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Nf||(Nf={}));var Pf;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Pf||(Pf={}));var kf;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(kf||(kf={}));var xf;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(xf||(xf={}));var Yn;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Yn||(Yn={}));class _a{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Lr{get text(){var e,n,r,o,i,s,a,c;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const h=[];for(const p of(c=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[m,_]of Object.entries(p))m!=="text"&&m!=="thought"&&m!=="thoughtSignature"&&(_!==null||_!==void 0)&&h.push(m);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;f=!0,d+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,r,o,i,s,a,c;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const h of(c=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[p,m]of Object.entries(h))p!=="inlineData"&&(m!==null||m!==void 0)&&f.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(d+=atob(h.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,r,o,i,s,a,c;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,r,o,i,s,a,c,d;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,r,o,i,s,a,c,d;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class Mf{}class Df{}class cI{}class dI{}class fI{}class pI{}class Lf{}class Uf{}class Ff{}class hI{}class ts{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new ts;let o;const i=e;return n?o=ZS(i):o=XS(i),Object.assign(r,o),r}}class Of{}class bf{}class Vf{}class Gf{}class mI{}class gI{}class vI{}class bu{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new bu,i=iI(e);return Object.assign(r,i),r}}class yI{}class _I{}class EI{}class TI{}class Hf{}class SI{get text(){var e,n,r;let o="",i=!1;const s=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,d]of Object.entries(a))c!=="text"&&c!=="thought"&&d!==null&&s.push(c);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;i=!0,o+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?o:void 0}get data(){var e,n,r;let o="";const i=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,c]of Object.entries(s))a!=="inlineData"&&c!==null&&i.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(o+=atob(s.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class II{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Vu{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Vu,i=vg(e);return Object.assign(r,i),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function yg(t,e){const n=H(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function _g(t){return Array.isArray(t)?t.map(e=>ns(e)):[ns(t)]}function ns(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Eg(t){const e=ns(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Tg(t){const e=ns(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Bf(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Sg(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Bf(e)):[Bf(t)]}function Ea(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function $f(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function qf(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function _e(t){if(t==null)throw new Error("ContentUnion is required");return Ea(t)?t:{role:"user",parts:Sg(t)}}function Gu(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=_e(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=_e(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>_e(n)):[_e(e)]}function $e(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if($f(t)||qf(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[_e(t)]}const e=[],n=[],r=Ea(t[0]);for(const o of t){const i=Ea(o);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(o);else{if($f(o)||qf(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return r||e.push({role:"user",parts:Sg(n)}),e}function CI(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(j).includes(n[0].toUpperCase())?n[0].toUpperCase():j.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(j).includes(r.toUpperCase())?r.toUpperCase():j.TYPE_UNSPECIFIED})}}function lr(t){const e={},n=["items"],r=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&CI(t.type,e);for(const[s,a]of Object.entries(t))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(j).includes(a.toUpperCase())?a.toUpperCase():j.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=lr(a);else if(r.includes(s)){const c=[];for(const d of a){if(d.type=="null"){e.nullable=!0;continue}c.push(lr(d))}e[s]=c}else if(o.includes(s)){const c={};for(const[d,f]of Object.entries(a))c[d]=lr(f);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=a}return e}function Hu(t){return lr(t)}function Bu(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function $u(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ir(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=lr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=lr(e.response));return t}function Cr(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function wI(t,e,n,r=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function Pt(t,e){if(typeof e!="string")throw new Error("name must be a string");return wI(t,e,"cachedContents")}function Ig(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function un(t){return Ou(t)}function AI(t){return t!=null&&typeof t=="object"&&"name"in t}function RI(t){return t!=null&&typeof t=="object"&&"video"in t}function NI(t){return t!=null&&typeof t=="object"&&"uri"in t}function Cg(t){var e;let n;if(AI(t)&&(n=t.name),!(NI(t)&&(n=t.uri,n===void 0))&&!(RI(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function wg(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Ag(t){for(const e of["models","tunedModels","publisherModels"])if(PI(t,e))return t[e];return[]}function PI(t,e){return t!==null&&typeof t=="object"&&e in t}function kI(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function xI(t,e={}){const n=[],r=new Set;for(const o of t){const i=o.name;if(r.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);r.add(i);const s=kI(o,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function Rg(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function MI(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Ng(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let i=!1;for(const s of o){if(typeof s!="object"||s===null)continue;const c=s.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function wr(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Pg(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DI(t){const e={},n=l(t,["responsesFile"]);n!=null&&u(e,["fileName"],n);const r=l(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>pC(s))),u(e,["inlinedResponses"],i)}const o=l(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["inlinedEmbedContentResponses"],i)}return e}function LI(t){const e={},n=l(t,["predictionsFormat"]);n!=null&&u(e,["format"],n);const r=l(t,["gcsDestination","outputUriPrefix"]);r!=null&&u(e,["gcsUri"],r);const o=l(t,["bigqueryDestination","outputUri"]);return o!=null&&u(e,["bigqueryUri"],o),e}function UI(t){const e={},n=l(t,["format"]);n!=null&&u(e,["predictionsFormat"],n);const r=l(t,["gcsUri"]);r!=null&&u(e,["gcsDestination","outputUriPrefix"],r);const o=l(t,["bigqueryUri"]);if(o!=null&&u(e,["bigqueryDestination","outputUri"],o),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Ti(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata","displayName"]);r!=null&&u(e,["displayName"],r);const o=l(t,["metadata","state"]);o!=null&&u(e,["state"],Pg(o));const i=l(t,["metadata","createTime"]);i!=null&&u(e,["createTime"],i);const s=l(t,["metadata","endTime"]);s!=null&&u(e,["endTime"],s);const a=l(t,["metadata","updateTime"]);a!=null&&u(e,["updateTime"],a);const c=l(t,["metadata","model"]);c!=null&&u(e,["model"],c);const d=l(t,["metadata","output"]);return d!=null&&u(e,["dest"],DI(Ng(d))),e}function Ta(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const o=l(t,["state"]);o!=null&&u(e,["state"],Pg(o));const i=l(t,["error"]);i!=null&&u(e,["error"],i);const s=l(t,["createTime"]);s!=null&&u(e,["createTime"],s);const a=l(t,["startTime"]);a!=null&&u(e,["startTime"],a);const c=l(t,["endTime"]);c!=null&&u(e,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&u(e,["updateTime"],d);const f=l(t,["model"]);f!=null&&u(e,["model"],f);const h=l(t,["inputConfig"]);h!=null&&u(e,["src"],FI(h));const p=l(t,["outputConfig"]);p!=null&&u(e,["dest"],LI(Ng(p)));const m=l(t,["completionStats"]);return m!=null&&u(e,["completionStats"],m),e}function FI(t){const e={},n=l(t,["instancesFormat"]);n!=null&&u(e,["format"],n);const r=l(t,["gcsSource","uris"]);r!=null&&u(e,["gcsUri"],r);const o=l(t,["bigquerySource","inputUri"]);return o!=null&&u(e,["bigqueryUri"],o),e}function OI(t,e){const n={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=l(e,["fileName"]);r!=null&&u(n,["fileName"],r);const o=l(e,["inlinedRequests"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>fC(t,s))),u(n,["requests","requests"],i)}return n}function bI(t){const e={},n=l(t,["format"]);n!=null&&u(e,["instancesFormat"],n);const r=l(t,["gcsUri"]);r!=null&&u(e,["gcsSource","uris"],r);const o=l(t,["bigqueryUri"]);if(o!=null&&u(e,["bigquerySource","inputUri"],o),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function VI(t){const e={},n=l(t,["data"]);if(n!=null&&u(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function GI(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],wr(t,r)),n}function HI(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],wr(t,r)),n}function BI(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],n);const r=l(t,["citationMetadata"]);r!=null&&u(e,["citationMetadata"],$I(r));const o=l(t,["tokenCount"]);o!=null&&u(e,["tokenCount"],o);const i=l(t,["finishReason"]);i!=null&&u(e,["finishReason"],i);const s=l(t,["avgLogprobs"]);s!=null&&u(e,["avgLogprobs"],s);const a=l(t,["groundingMetadata"]);a!=null&&u(e,["groundingMetadata"],a);const c=l(t,["index"]);c!=null&&u(e,["index"],c);const d=l(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);const f=l(t,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>m)),u(e,["safetyRatings"],p)}const h=l(t,["urlContextMetadata"]);return h!=null&&u(e,["urlContextMetadata"],h),e}function $I(t){const e={},n=l(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),u(e,["citations"],r)}return e}function kg(t){const e={},n=l(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>EC(i))),u(e,["parts"],o)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function qI(t,e){const n={},r=l(t,["displayName"]);if(e!==void 0&&r!=null&&u(e,["batch","displayName"],r),l(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function zI(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const o=l(t,["dest"]);return e!==void 0&&o!=null&&u(e,["outputConfig"],UI(MI(o))),n}function zf(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],H(t,r));const o=l(e,["src"]);o!=null&&u(n,["batch","inputConfig"],OI(t,Rg(t,o)));const i=l(e,["config"]);return i!=null&&qI(i,n),n}function WI(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],H(t,r));const o=l(e,["src"]);o!=null&&u(n,["inputConfig"],bI(Rg(t,o)));const i=l(e,["config"]);return i!=null&&zI(i,n),n}function JI(t,e){const n={},r=l(t,["displayName"]);return e!==void 0&&r!=null&&u(e,["batch","displayName"],r),n}function KI(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],H(t,r));const o=l(e,["src"]);o!=null&&u(n,["batch","inputConfig"],tC(t,o));const i=l(e,["config"]);return i!=null&&JI(i,n),n}function YI(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],wr(t,r)),n}function QI(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],wr(t,r)),n}function XI(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);return i!=null&&u(e,["error"],i),e}function ZI(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);return i!=null&&u(e,["error"],i),e}function jI(t,e){const n={},r=l(e,["contents"]);if(r!=null){let i=Gu(t,r);Array.isArray(i)&&(i=i.map(s=>s)),u(n,["requests[]","request","content"],i)}const o=l(e,["config"]);return o!=null&&(u(n,["_self"],eC(o,n)),YS(n,{"requests[].*":"requests[].request.*"})),n}function eC(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&u(e,["requests[]","taskType"],r);const o=l(t,["title"]);e!==void 0&&o!=null&&u(e,["requests[]","title"],o);const i=l(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&u(e,["requests[]","outputDimensionality"],i),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function tC(t,e){const n={},r=l(e,["fileName"]);r!=null&&u(n,["file_name"],r);const o=l(e,["inlinedRequests"]);return o!=null&&u(n,["requests"],jI(t,o)),n}function nC(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function rC(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const o=l(t,["name"]);if(o!=null&&u(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function oC(t){const e={},n=l(t,["allowedFunctionNames"]);n!=null&&u(e,["allowedFunctionNames"],n);const r=l(t,["mode"]);if(r!=null&&u(e,["mode"],r),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function iC(t,e,n){const r={},o=l(e,["systemInstruction"]);n!==void 0&&o!=null&&u(n,["systemInstruction"],kg(_e(o)));const i=l(e,["temperature"]);i!=null&&u(r,["temperature"],i);const s=l(e,["topP"]);s!=null&&u(r,["topP"],s);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&u(r,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&u(r,["stopSequences"],f);const h=l(e,["responseLogprobs"]);h!=null&&u(r,["responseLogprobs"],h);const p=l(e,["logprobs"]);p!=null&&u(r,["logprobs"],p);const m=l(e,["presencePenalty"]);m!=null&&u(r,["presencePenalty"],m);const _=l(e,["frequencyPenalty"]);_!=null&&u(r,["frequencyPenalty"],_);const E=l(e,["seed"]);E!=null&&u(r,["seed"],E);const T=l(e,["responseMimeType"]);T!=null&&u(r,["responseMimeType"],T);const v=l(e,["responseSchema"]);v!=null&&u(r,["responseSchema"],Hu(v));const g=l(e,["responseJsonSchema"]);if(g!=null&&u(r,["responseJsonSchema"],g),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const y=l(e,["safetySettings"]);if(n!==void 0&&y!=null){let ee=y;Array.isArray(ee)&&(ee=ee.map(se=>TC(se))),u(n,["safetySettings"],ee)}const I=l(e,["tools"]);if(n!==void 0&&I!=null){let ee=Cr(I);Array.isArray(ee)&&(ee=ee.map(se=>IC(Ir(se)))),u(n,["tools"],ee)}const w=l(e,["toolConfig"]);if(n!==void 0&&w!=null&&u(n,["toolConfig"],SC(w)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=l(e,["cachedContent"]);n!==void 0&&C!=null&&u(n,["cachedContent"],Pt(t,C));const A=l(e,["responseModalities"]);A!=null&&u(r,["responseModalities"],A);const N=l(e,["mediaResolution"]);N!=null&&u(r,["mediaResolution"],N);const P=l(e,["speechConfig"]);if(P!=null&&u(r,["speechConfig"],Bu(P)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=l(e,["thinkingConfig"]);M!=null&&u(r,["thinkingConfig"],M);const G=l(e,["imageConfig"]);G!=null&&u(r,["imageConfig"],dC(G));const ie=l(e,["enableEnhancedCivicAnswers"]);if(ie!=null&&u(r,["enableEnhancedCivicAnswers"],ie),l(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function sC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>BI(d))),u(e,["candidates"],c)}const o=l(t,["modelVersion"]);o!=null&&u(e,["modelVersion"],o);const i=l(t,["promptFeedback"]);i!=null&&u(e,["promptFeedback"],i);const s=l(t,["responseId"]);s!=null&&u(e,["responseId"],s);const a=l(t,["usageMetadata"]);return a!=null&&u(e,["usageMetadata"],a),e}function lC(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],wr(t,r)),n}function aC(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],wr(t,r)),n}function uC(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function cC(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function dC(t){const e={},n=l(t,["aspectRatio"]);n!=null&&u(e,["aspectRatio"],n);const r=l(t,["imageSize"]);if(r!=null&&u(e,["imageSize"],r),l(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function fC(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["request","model"],H(t,r));const o=l(e,["contents"]);if(o!=null){let a=$e(o);Array.isArray(a)&&(a=a.map(c=>kg(c))),u(n,["request","contents"],a)}const i=l(e,["metadata"]);i!=null&&u(n,["metadata"],i);const s=l(e,["config"]);return s!=null&&u(n,["request","generationConfig"],iC(t,s,l(n,["request"],{}))),n}function pC(t){const e={},n=l(t,["response"]);n!=null&&u(e,["response"],sC(n));const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["error"]);return o!=null&&u(e,["error"],o),e}function hC(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);if(e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),l(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function mC(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);e!==void 0&&o!=null&&u(e,["_query","pageToken"],o);const i=l(t,["filter"]);return e!==void 0&&i!=null&&u(e,["_query","filter"],i),n}function gC(t){const e={},n=l(t,["config"]);return n!=null&&hC(n,e),e}function vC(t){const e={},n=l(t,["config"]);return n!=null&&mC(n,e),e}function yC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["operations"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Ti(s))),u(e,["batchJobs"],i)}return e}function _C(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["batchPredictionJobs"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Ta(s))),u(e,["batchJobs"],i)}return e}function EC(t){const e={},n=l(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&u(e,["codeExecutionResult"],r);const o=l(t,["executableCode"]);o!=null&&u(e,["executableCode"],o);const i=l(t,["fileData"]);i!=null&&u(e,["fileData"],nC(i));const s=l(t,["functionCall"]);s!=null&&u(e,["functionCall"],rC(s));const a=l(t,["functionResponse"]);a!=null&&u(e,["functionResponse"],a);const c=l(t,["inlineData"]);c!=null&&u(e,["inlineData"],VI(c));const d=l(t,["text"]);d!=null&&u(e,["text"],d);const f=l(t,["thought"]);f!=null&&u(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const p=l(t,["videoMetadata"]);return p!=null&&u(e,["videoMetadata"],p),e}function TC(t){const e={},n=l(t,["category"]);if(n!=null&&u(e,["category"],n),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=l(t,["threshold"]);return r!=null&&u(e,["threshold"],r),e}function SC(t){const e={},n=l(t,["retrievalConfig"]);n!=null&&u(e,["retrievalConfig"],n);const r=l(t,["functionCallingConfig"]);return r!=null&&u(e,["functionCallingConfig"],oC(r)),e}function IC(t){const e={};if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=l(t,["computerUse"]);n!=null&&u(e,["computerUse"],n);const r=l(t,["fileSearch"]);r!=null&&u(e,["fileSearch"],r);const o=l(t,["codeExecution"]);if(o!=null&&u(e,["codeExecution"],o),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=l(t,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>h)),u(e,["functionDeclarations"],f)}const s=l(t,["googleMaps"]);s!=null&&u(e,["googleMaps"],uC(s));const a=l(t,["googleSearch"]);a!=null&&u(e,["googleSearch"],cC(a));const c=l(t,["googleSearchRetrieval"]);c!=null&&u(e,["googleSearchRetrieval"],c);const d=l(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var At;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(At||(At={}));class kn{constructor(e,n,r,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,o)}init(e,n,r){var o,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(i=(o=s.config)===null||o===void 0?void 0:o.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CC extends Nt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new kn(At.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=zf(this.apiClient,e),r=n._url,o=x("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,c=a.requests,d=[];for(const f of c){const h=Object.assign({},f);if(h.systemInstruction){const p=h.systemInstruction;delete h.systemInstruction;const m=h.request;m.systemInstruction=p,h.request=m}d.push(h)}return a.requests=d,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},o=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${o}`),r.dest===void 0){const i=this.getGcsUri(e),s=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?r.dest=`${i.slice(0,-6)}/dest`:r.dest=`${i}_dest_${o}`;else if(s)r.dest=`${s}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=WI(this.apiClient,e);return a=x("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Ta(f))}else{const d=zf(this.apiClient,e);return a=x("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Ti(f))}}async createEmbeddingsInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=KI(this.apiClient,e);return i=x("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>Ti(c))}}async get(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=aC(this.apiClient,e);return a=x("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Ta(f))}else{const d=lC(this.apiClient,e);return a=x("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Ti(f))}}async cancel(e){var n,r,o,i;let s="",a={};if(this.apiClient.isVertexAI()){const c=HI(this.apiClient,e);s=x("batchPredictionJobs/{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=GI(this.apiClient,e);s=x("batches/{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=vC(e);return a=x("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=_C(f),p=new Hf;return Object.assign(p,h),p})}else{const d=gC(e);return a=x("batches",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=yC(f),p=new Hf;return Object.assign(p,h),p})}}async delete(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=QI(this.apiClient,e);return a=x("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>ZI(f))}else{const d=YI(this.apiClient,e);return a=x("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>XI(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wC(t){const e={},n=l(t,["data"]);if(n!=null&&u(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function Wf(t){const e={},n=l(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>KC(i))),u(e,["parts"],o)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function AC(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const o=l(t,["expireTime"]);e!==void 0&&o!=null&&u(e,["expireTime"],o);const i=l(t,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let f=$e(s);Array.isArray(f)&&(f=f.map(h=>Wf(h))),u(e,["contents"],f)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&u(e,["systemInstruction"],Wf(_e(a)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(h=>QC(h))),u(e,["tools"],f)}const d=l(t,["toolConfig"]);if(e!==void 0&&d!=null&&u(e,["toolConfig"],YC(d)),l(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function RC(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const o=l(t,["expireTime"]);e!==void 0&&o!=null&&u(e,["expireTime"],o);const i=l(t,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let h=$e(s);Array.isArray(h)&&(h=h.map(p=>p)),u(e,["contents"],h)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&u(e,["systemInstruction"],_e(a));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(p=>XC(p))),u(e,["tools"],h)}const d=l(t,["toolConfig"]);e!==void 0&&d!=null&&u(e,["toolConfig"],d);const f=l(t,["kmsKeyName"]);return e!==void 0&&f!=null&&u(e,["encryption_spec","kmsKeyName"],f),n}function NC(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],yg(t,r));const o=l(e,["config"]);return o!=null&&AC(o,n),n}function PC(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],yg(t,r));const o=l(e,["config"]);return o!=null&&RC(o,n),n}function kC(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],Pt(t,r)),n}function xC(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],Pt(t,r)),n}function MC(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function DC(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function LC(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function UC(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const o=l(t,["name"]);if(o!=null&&u(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function FC(t){const e={},n=l(t,["allowedFunctionNames"]);n!=null&&u(e,["allowedFunctionNames"],n);const r=l(t,["mode"]);if(r!=null&&u(e,["mode"],r),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function OC(t){const e={},n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const i=l(t,["parametersJsonSchema"]);i!=null&&u(e,["parametersJsonSchema"],i);const s=l(t,["response"]);s!=null&&u(e,["response"],s);const a=l(t,["responseJsonSchema"]);if(a!=null&&u(e,["responseJsonSchema"],a),l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function bC(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],Pt(t,r)),n}function VC(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],Pt(t,r)),n}function GC(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function HC(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function BC(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),n}function $C(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),n}function qC(t){const e={},n=l(t,["config"]);return n!=null&&BC(n,e),e}function zC(t){const e={},n=l(t,["config"]);return n!=null&&$C(n,e),e}function WC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["cachedContents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["cachedContents"],i)}return e}function JC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["cachedContents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["cachedContents"],i)}return e}function KC(t){const e={},n=l(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&u(e,["codeExecutionResult"],r);const o=l(t,["executableCode"]);o!=null&&u(e,["executableCode"],o);const i=l(t,["fileData"]);i!=null&&u(e,["fileData"],LC(i));const s=l(t,["functionCall"]);s!=null&&u(e,["functionCall"],UC(s));const a=l(t,["functionResponse"]);a!=null&&u(e,["functionResponse"],a);const c=l(t,["inlineData"]);c!=null&&u(e,["inlineData"],wC(c));const d=l(t,["text"]);d!=null&&u(e,["text"],d);const f=l(t,["thought"]);f!=null&&u(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const p=l(t,["videoMetadata"]);return p!=null&&u(e,["videoMetadata"],p),e}function YC(t){const e={},n=l(t,["retrievalConfig"]);n!=null&&u(e,["retrievalConfig"],n);const r=l(t,["functionCallingConfig"]);return r!=null&&u(e,["functionCallingConfig"],FC(r)),e}function QC(t){const e={};if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=l(t,["computerUse"]);n!=null&&u(e,["computerUse"],n);const r=l(t,["fileSearch"]);r!=null&&u(e,["fileSearch"],r);const o=l(t,["codeExecution"]);if(o!=null&&u(e,["codeExecution"],o),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=l(t,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>h)),u(e,["functionDeclarations"],f)}const s=l(t,["googleMaps"]);s!=null&&u(e,["googleMaps"],GC(s));const a=l(t,["googleSearch"]);a!=null&&u(e,["googleSearch"],HC(a));const c=l(t,["googleSearchRetrieval"]);c!=null&&u(e,["googleSearchRetrieval"],c);const d=l(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}function XC(t){const e={},n=l(t,["retrieval"]);n!=null&&u(e,["retrieval"],n);const r=l(t,["computerUse"]);if(r!=null&&u(e,["computerUse"],r),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=l(t,["codeExecution"]);o!=null&&u(e,["codeExecution"],o);const i=l(t,["enterpriseWebSearch"]);i!=null&&u(e,["enterpriseWebSearch"],i);const s=l(t,["functionDeclarations"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>OC(p))),u(e,["functionDeclarations"],h)}const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],a);const c=l(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],c);const d=l(t,["googleSearchRetrieval"]);d!=null&&u(e,["googleSearchRetrieval"],d);const f=l(t,["urlContext"]);return f!=null&&u(e,["urlContext"],f),e}function ZC(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const o=l(t,["expireTime"]);return e!==void 0&&o!=null&&u(e,["expireTime"],o),n}function jC(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const o=l(t,["expireTime"]);return e!==void 0&&o!=null&&u(e,["expireTime"],o),n}function ew(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],Pt(t,r));const o=l(e,["config"]);return o!=null&&ZC(o,n),n}function tw(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],Pt(t,r));const o=l(e,["config"]);return o!=null&&jC(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nw extends Nt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new kn(At.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=PC(this.apiClient,e);return a=x("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=NC(this.apiClient,e);return a=x("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=VC(this.apiClient,e);return a=x("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=bC(this.apiClient,e);return a=x("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=xC(this.apiClient,e);return a=x("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=DC(f),p=new Vf;return Object.assign(p,h),p})}else{const d=kC(this.apiClient,e);return a=x("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=MC(f),p=new Vf;return Object.assign(p,h),p})}}async update(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=tw(this.apiClient,e);return a=x("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=ew(this.apiClient,e);return a=x("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=zC(e);return a=x("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=JC(f),p=new Gf;return Object.assign(p,h),p})}else{const d=qC(e);return a=x("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=WC(f),p=new Gf;return Object.assign(p,h),p})}}}function rs(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function Jf(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function F(t){return this instanceof F?(this.v=t,this):new F(t)}function je(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(m){return function(_){return Promise.resolve(_).then(m,h)}}function a(m,_){r[m]&&(o[m]=function(E){return new Promise(function(T,v){i.push([m,E,T,v])>1||c(m,E)})},_&&(o[m]=_(o[m])))}function c(m,_){try{d(r[m](_))}catch(E){p(i[0][3],E)}}function d(m){m.value instanceof F?Promise.resolve(m.value.v).then(f,h):p(i[0][2],m)}function f(m){c("next",m)}function h(m){c("throw",m)}function p(m,_){m(_),i.shift(),i.length&&c(i[0][0],i[0][1])}}function et(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Jf=="function"?Jf(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(s){return new Promise(function(a,c){s=t[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(d){i({value:d,done:a})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rw(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:xg(n)}function xg(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function ow(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Kf(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const o=[];let i=!0;for(;r<n&&t[r].role==="model";)o.push(t[r]),i&&!xg(t[r])&&(i=!1),r++;i?e.push(...o):e.pop()}return e}class iw{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new sw(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class sw{constructor(e,n,r,o={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=o,this.history=i,this.sendPromise=Promise.resolve(),ow(i)}async sendMessage(e){var n;await this.sendPromise;const r=_e(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,s,a;const c=await o,d=(s=(i=c.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content,f=c.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let p=[];f!=null&&(p=(a=f.slice(h))!==null&&a!==void 0?a:[]);const m=d?[d]:[];this.recordHistory(r,m,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const r=_e(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const i=await o;return this.processStreamResponse(i,r)}getHistory(e=!1){const n=e?Kf(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return je(this,arguments,function*(){var o,i,s,a,c,d;const f=[];try{for(var h=!0,p=et(e),m;m=yield F(p.next()),o=m.done,!o;h=!0){a=m.value,h=!1;const _=a;if(rw(_)){const E=(d=(c=_.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content;E!==void 0&&f.push(E)}yield yield F(_)}}catch(_){i={error:_}}finally{try{!h&&!o&&(s=p.return)&&(yield F(s.call(p)))}finally{if(i)throw i.error}}this.recordHistory(n,f)})}recordHistory(e,n,r){let o=[];n.length>0&&n.every(i=>i.role!==void 0)?o=n:o.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Kf(r)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class To extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,To.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lw(t){const e={},n=l(t,["file"]);return n!=null&&u(e,["file"],n),e}function aw(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function uw(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","file"],Cg(n)),e}function cw(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function dw(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","file"],Cg(n)),e}function fw(t){const e={},n=l(t,["uris"]);return n!=null&&u(e,["uris"],n),e}function pw(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),n}function hw(t){const e={},n=l(t,["config"]);return n!=null&&pw(n,e),e}function mw(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["files"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["files"],i)}return e}function gw(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),u(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vw extends Nt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new kn(At.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=hw(e);return i=x("files",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=mw(c),f=new yI;return Object.assign(f,d),f})}}async createInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=lw(e);return i=x("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=aw(c),f=new _I;return Object.assign(f,d),f})}}async get(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=dw(e);return i=x("files/{file}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=uw(e);return i=x("files/{file}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=cw(c),f=new EI;return Object.assign(f,d),f})}}async registerFilesInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=fw(e);return i=x("files:register",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=gw(c),f=new TI;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Si(t){const e={},n=l(t,["data"]);if(n!=null&&u(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function yw(t){const e={},n=l(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>Lw(i))),u(e,["parts"],o)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function _w(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function Ew(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const o=l(t,["name"]);if(o!=null&&u(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Tw(t){const e={},n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const i=l(t,["parametersJsonSchema"]);i!=null&&u(e,["parametersJsonSchema"],i);const s=l(t,["response"]);s!=null&&u(e,["response"],s);const a=l(t,["responseJsonSchema"]);if(a!=null&&u(e,["responseJsonSchema"],a),l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Sw(t){const e={},n=l(t,["modelSelectionConfig"]);n!=null&&u(e,["modelConfig"],n);const r=l(t,["responseJsonSchema"]);r!=null&&u(e,["responseJsonSchema"],r);const o=l(t,["audioTimestamp"]);o!=null&&u(e,["audioTimestamp"],o);const i=l(t,["candidateCount"]);i!=null&&u(e,["candidateCount"],i);const s=l(t,["enableAffectiveDialog"]);s!=null&&u(e,["enableAffectiveDialog"],s);const a=l(t,["frequencyPenalty"]);a!=null&&u(e,["frequencyPenalty"],a);const c=l(t,["logprobs"]);c!=null&&u(e,["logprobs"],c);const d=l(t,["maxOutputTokens"]);d!=null&&u(e,["maxOutputTokens"],d);const f=l(t,["mediaResolution"]);f!=null&&u(e,["mediaResolution"],f);const h=l(t,["presencePenalty"]);h!=null&&u(e,["presencePenalty"],h);const p=l(t,["responseLogprobs"]);p!=null&&u(e,["responseLogprobs"],p);const m=l(t,["responseMimeType"]);m!=null&&u(e,["responseMimeType"],m);const _=l(t,["responseModalities"]);_!=null&&u(e,["responseModalities"],_);const E=l(t,["responseSchema"]);E!=null&&u(e,["responseSchema"],E);const T=l(t,["routingConfig"]);T!=null&&u(e,["routingConfig"],T);const v=l(t,["seed"]);v!=null&&u(e,["seed"],v);const g=l(t,["speechConfig"]);g!=null&&u(e,["speechConfig"],g);const y=l(t,["stopSequences"]);y!=null&&u(e,["stopSequences"],y);const I=l(t,["temperature"]);I!=null&&u(e,["temperature"],I);const w=l(t,["thinkingConfig"]);w!=null&&u(e,["thinkingConfig"],w);const C=l(t,["topK"]);C!=null&&u(e,["topK"],C);const A=l(t,["topP"]);if(A!=null&&u(e,["topP"],A),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Iw(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function Cw(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function ww(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],r);const o=l(t,["responseModalities"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","responseModalities"],o);const i=l(t,["temperature"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","temperature"],i);const s=l(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","seed"],f);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","speechConfig"],$u(h));const p=l(t,["thinkingConfig"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","thinkingConfig"],p);const m=l(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],m);const _=l(t,["systemInstruction"]);e!==void 0&&_!=null&&u(e,["setup","systemInstruction"],yw(_e(_)));const E=l(t,["tools"]);if(e!==void 0&&E!=null){let C=Cr(E);Array.isArray(C)&&(C=C.map(A=>Fw(Ir(A)))),u(e,["setup","tools"],C)}const T=l(t,["sessionResumption"]);e!==void 0&&T!=null&&u(e,["setup","sessionResumption"],Uw(T));const v=l(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&u(e,["setup","inputAudioTranscription"],v);const g=l(t,["outputAudioTranscription"]);e!==void 0&&g!=null&&u(e,["setup","outputAudioTranscription"],g);const y=l(t,["realtimeInputConfig"]);e!==void 0&&y!=null&&u(e,["setup","realtimeInputConfig"],y);const I=l(t,["contextWindowCompression"]);e!==void 0&&I!=null&&u(e,["setup","contextWindowCompression"],I);const w=l(t,["proactivity"]);if(e!==void 0&&w!=null&&u(e,["setup","proactivity"],w),l(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Aw(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],Sw(r));const o=l(t,["responseModalities"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","responseModalities"],o);const i=l(t,["temperature"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","temperature"],i);const s=l(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","seed"],f);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","speechConfig"],$u(h));const p=l(t,["thinkingConfig"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","thinkingConfig"],p);const m=l(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],m);const _=l(t,["systemInstruction"]);e!==void 0&&_!=null&&u(e,["setup","systemInstruction"],_e(_));const E=l(t,["tools"]);if(e!==void 0&&E!=null){let A=Cr(E);Array.isArray(A)&&(A=A.map(N=>Ow(Ir(N)))),u(e,["setup","tools"],A)}const T=l(t,["sessionResumption"]);e!==void 0&&T!=null&&u(e,["setup","sessionResumption"],T);const v=l(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&u(e,["setup","inputAudioTranscription"],v);const g=l(t,["outputAudioTranscription"]);e!==void 0&&g!=null&&u(e,["setup","outputAudioTranscription"],g);const y=l(t,["realtimeInputConfig"]);e!==void 0&&y!=null&&u(e,["setup","realtimeInputConfig"],y);const I=l(t,["contextWindowCompression"]);e!==void 0&&I!=null&&u(e,["setup","contextWindowCompression"],I);const w=l(t,["proactivity"]);e!==void 0&&w!=null&&u(e,["setup","proactivity"],w);const C=l(t,["explicitVadSignal"]);return e!==void 0&&C!=null&&u(e,["setup","explicitVadSignal"],C),n}function Rw(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],H(t,r));const o=l(e,["config"]);return o!=null&&u(n,["config"],ww(o,n)),n}function Nw(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],H(t,r));const o=l(e,["config"]);return o!=null&&u(n,["config"],Aw(o,n)),n}function Pw(t){const e={},n=l(t,["musicGenerationConfig"]);return n!=null&&u(e,["musicGenerationConfig"],n),e}function kw(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),u(e,["weightedPrompts"],r)}return e}function xw(t){const e={},n=l(t,["media"]);if(n!=null){let d=_g(n);Array.isArray(d)&&(d=d.map(f=>Si(f))),u(e,["mediaChunks"],d)}const r=l(t,["audio"]);r!=null&&u(e,["audio"],Si(Tg(r)));const o=l(t,["audioStreamEnd"]);o!=null&&u(e,["audioStreamEnd"],o);const i=l(t,["video"]);i!=null&&u(e,["video"],Si(Eg(i)));const s=l(t,["text"]);s!=null&&u(e,["text"],s);const a=l(t,["activityStart"]);a!=null&&u(e,["activityStart"],a);const c=l(t,["activityEnd"]);return c!=null&&u(e,["activityEnd"],c),e}function Mw(t){const e={},n=l(t,["media"]);if(n!=null){let d=_g(n);Array.isArray(d)&&(d=d.map(f=>f)),u(e,["mediaChunks"],d)}const r=l(t,["audio"]);r!=null&&u(e,["audio"],Tg(r));const o=l(t,["audioStreamEnd"]);o!=null&&u(e,["audioStreamEnd"],o);const i=l(t,["video"]);i!=null&&u(e,["video"],Eg(i));const s=l(t,["text"]);s!=null&&u(e,["text"],s);const a=l(t,["activityStart"]);a!=null&&u(e,["activityStart"],a);const c=l(t,["activityEnd"]);return c!=null&&u(e,["activityEnd"],c),e}function Dw(t){const e={},n=l(t,["setupComplete"]);n!=null&&u(e,["setupComplete"],n);const r=l(t,["serverContent"]);r!=null&&u(e,["serverContent"],r);const o=l(t,["toolCall"]);o!=null&&u(e,["toolCall"],o);const i=l(t,["toolCallCancellation"]);i!=null&&u(e,["toolCallCancellation"],i);const s=l(t,["usageMetadata"]);s!=null&&u(e,["usageMetadata"],bw(s));const a=l(t,["goAway"]);a!=null&&u(e,["goAway"],a);const c=l(t,["sessionResumptionUpdate"]);c!=null&&u(e,["sessionResumptionUpdate"],c);const d=l(t,["voiceActivityDetectionSignal"]);d!=null&&u(e,["voiceActivityDetectionSignal"],d);const f=l(t,["voiceActivity"]);return f!=null&&u(e,["voiceActivity"],Vw(f)),e}function Lw(t){const e={},n=l(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&u(e,["codeExecutionResult"],r);const o=l(t,["executableCode"]);o!=null&&u(e,["executableCode"],o);const i=l(t,["fileData"]);i!=null&&u(e,["fileData"],_w(i));const s=l(t,["functionCall"]);s!=null&&u(e,["functionCall"],Ew(s));const a=l(t,["functionResponse"]);a!=null&&u(e,["functionResponse"],a);const c=l(t,["inlineData"]);c!=null&&u(e,["inlineData"],Si(c));const d=l(t,["text"]);d!=null&&u(e,["text"],d);const f=l(t,["thought"]);f!=null&&u(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const p=l(t,["videoMetadata"]);return p!=null&&u(e,["videoMetadata"],p),e}function Uw(t){const e={},n=l(t,["handle"]);if(n!=null&&u(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Fw(t){const e={};if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=l(t,["computerUse"]);n!=null&&u(e,["computerUse"],n);const r=l(t,["fileSearch"]);r!=null&&u(e,["fileSearch"],r);const o=l(t,["codeExecution"]);if(o!=null&&u(e,["codeExecution"],o),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=l(t,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>h)),u(e,["functionDeclarations"],f)}const s=l(t,["googleMaps"]);s!=null&&u(e,["googleMaps"],Iw(s));const a=l(t,["googleSearch"]);a!=null&&u(e,["googleSearch"],Cw(a));const c=l(t,["googleSearchRetrieval"]);c!=null&&u(e,["googleSearchRetrieval"],c);const d=l(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}function Ow(t){const e={},n=l(t,["retrieval"]);n!=null&&u(e,["retrieval"],n);const r=l(t,["computerUse"]);if(r!=null&&u(e,["computerUse"],r),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=l(t,["codeExecution"]);o!=null&&u(e,["codeExecution"],o);const i=l(t,["enterpriseWebSearch"]);i!=null&&u(e,["enterpriseWebSearch"],i);const s=l(t,["functionDeclarations"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>Tw(p))),u(e,["functionDeclarations"],h)}const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],a);const c=l(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],c);const d=l(t,["googleSearchRetrieval"]);d!=null&&u(e,["googleSearchRetrieval"],d);const f=l(t,["urlContext"]);return f!=null&&u(e,["urlContext"],f),e}function bw(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&u(e,["promptTokenCount"],n);const r=l(t,["cachedContentTokenCount"]);r!=null&&u(e,["cachedContentTokenCount"],r);const o=l(t,["candidatesTokenCount"]);o!=null&&u(e,["responseTokenCount"],o);const i=l(t,["toolUsePromptTokenCount"]);i!=null&&u(e,["toolUsePromptTokenCount"],i);const s=l(t,["thoughtsTokenCount"]);s!=null&&u(e,["thoughtsTokenCount"],s);const a=l(t,["totalTokenCount"]);a!=null&&u(e,["totalTokenCount"],a);const c=l(t,["promptTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(_=>_)),u(e,["promptTokensDetails"],m)}const d=l(t,["cacheTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(_=>_)),u(e,["cacheTokensDetails"],m)}const f=l(t,["candidatesTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(_=>_)),u(e,["responseTokensDetails"],m)}const h=l(t,["toolUsePromptTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(_=>_)),u(e,["toolUsePromptTokensDetails"],m)}const p=l(t,["trafficType"]);return p!=null&&u(e,["trafficType"],p),e}function Vw(t){const e={},n=l(t,["type"]);return n!=null&&u(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gw(t,e){const n={},r=l(t,["data"]);if(r!=null&&u(n,["data"],r),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(t,["mimeType"]);return o!=null&&u(n,["mimeType"],o),n}function Hw(t,e){const n={},r=l(t,["content"]);r!=null&&u(n,["content"],r);const o=l(t,["citationMetadata"]);o!=null&&u(n,["citationMetadata"],Bw(o));const i=l(t,["tokenCount"]);i!=null&&u(n,["tokenCount"],i);const s=l(t,["finishReason"]);s!=null&&u(n,["finishReason"],s);const a=l(t,["avgLogprobs"]);a!=null&&u(n,["avgLogprobs"],a);const c=l(t,["groundingMetadata"]);c!=null&&u(n,["groundingMetadata"],c);const d=l(t,["index"]);d!=null&&u(n,["index"],d);const f=l(t,["logprobsResult"]);f!=null&&u(n,["logprobsResult"],f);const h=l(t,["safetyRatings"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(_=>_)),u(n,["safetyRatings"],m)}const p=l(t,["urlContextMetadata"]);return p!=null&&u(n,["urlContextMetadata"],p),n}function Bw(t,e){const n={},r=l(t,["citationSources"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),u(n,["citations"],o)}return n}function $w(t,e,n){const r={},o=l(e,["model"]);o!=null&&u(r,["_url","model"],H(t,o));const i=l(e,["contents"]);if(i!=null){let s=$e(i);Array.isArray(s)&&(s=s.map(a=>a)),u(r,["contents"],s)}return r}function qw(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["tokensInfo"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(n,["tokensInfo"],i)}return n}function zw(t,e){const n={},r=l(t,["values"]);r!=null&&u(n,["values"],r);const o=l(t,["statistics"]);return o!=null&&u(n,["statistics"],Ww(o)),n}function Ww(t,e){const n={},r=l(t,["truncated"]);r!=null&&u(n,["truncated"],r);const o=l(t,["token_count"]);return o!=null&&u(n,["tokenCount"],o),n}function As(t,e){const n={},r=l(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>tR(s))),u(n,["parts"],i)}const o=l(t,["role"]);return o!=null&&u(n,["role"],o),n}function Jw(t,e){const n={},r=l(t,["controlType"]);r!=null&&u(n,["controlType"],r);const o=l(t,["enableControlImageComputation"]);return o!=null&&u(n,["computeControl"],o),n}function Kw(t,e){const n={};if(l(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function Yw(t,e,n){const r={},o=l(t,["systemInstruction"]);e!==void 0&&o!=null&&u(e,["systemInstruction"],_e(o));const i=l(t,["tools"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>Ug(c))),u(e,["tools"],a)}const s=l(t,["generationConfig"]);return e!==void 0&&s!=null&&u(e,["generationConfig"],GA(s)),r}function Qw(t,e,n){const r={},o=l(e,["model"]);o!=null&&u(r,["_url","model"],H(t,o));const i=l(e,["contents"]);if(i!=null){let a=$e(i);Array.isArray(a)&&(a=a.map(c=>As(c))),u(r,["contents"],a)}const s=l(e,["config"]);return s!=null&&Kw(s),r}function Xw(t,e,n){const r={},o=l(e,["model"]);o!=null&&u(r,["_url","model"],H(t,o));const i=l(e,["contents"]);if(i!=null){let a=$e(i);Array.isArray(a)&&(a=a.map(c=>c)),u(r,["contents"],a)}const s=l(e,["config"]);return s!=null&&Yw(s,r),r}function Zw(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["totalTokens"]);o!=null&&u(n,["totalTokens"],o);const i=l(t,["cachedContentTokenCount"]);return i!=null&&u(n,["cachedContentTokenCount"],i),n}function jw(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["totalTokens"]);return o!=null&&u(n,["totalTokens"],o),n}function eA(t,e,n){const r={},o=l(e,["model"]);return o!=null&&u(r,["_url","name"],H(t,o)),r}function tA(t,e,n){const r={},o=l(e,["model"]);return o!=null&&u(r,["_url","name"],H(t,o)),r}function nA(t,e){const n={},r=l(t,["sdkHttpResponse"]);return r!=null&&u(n,["sdkHttpResponse"],r),n}function rA(t,e){const n={},r=l(t,["sdkHttpResponse"]);return r!=null&&u(n,["sdkHttpResponse"],r),n}function oA(t,e,n){const r={},o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&u(e,["parameters","storageUri"],o);const i=l(t,["negativePrompt"]);e!==void 0&&i!=null&&u(e,["parameters","negativePrompt"],i);const s=l(t,["numberOfImages"]);e!==void 0&&s!=null&&u(e,["parameters","sampleCount"],s);const a=l(t,["aspectRatio"]);e!==void 0&&a!=null&&u(e,["parameters","aspectRatio"],a);const c=l(t,["guidanceScale"]);e!==void 0&&c!=null&&u(e,["parameters","guidanceScale"],c);const d=l(t,["seed"]);e!==void 0&&d!=null&&u(e,["parameters","seed"],d);const f=l(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&u(e,["parameters","safetySetting"],f);const h=l(t,["personGeneration"]);e!==void 0&&h!=null&&u(e,["parameters","personGeneration"],h);const p=l(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&u(e,["parameters","includeSafetyAttributes"],p);const m=l(t,["includeRaiReason"]);e!==void 0&&m!=null&&u(e,["parameters","includeRaiReason"],m);const _=l(t,["language"]);e!==void 0&&_!=null&&u(e,["parameters","language"],_);const E=l(t,["outputMimeType"]);e!==void 0&&E!=null&&u(e,["parameters","outputOptions","mimeType"],E);const T=l(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&u(e,["parameters","outputOptions","compressionQuality"],T);const v=l(t,["addWatermark"]);e!==void 0&&v!=null&&u(e,["parameters","addWatermark"],v);const g=l(t,["labels"]);e!==void 0&&g!=null&&u(e,["labels"],g);const y=l(t,["editMode"]);e!==void 0&&y!=null&&u(e,["parameters","editMode"],y);const I=l(t,["baseSteps"]);return e!==void 0&&I!=null&&u(e,["parameters","editConfig","baseSteps"],I),r}function iA(t,e,n){const r={},o=l(e,["model"]);o!=null&&u(r,["_url","model"],H(t,o));const i=l(e,["prompt"]);i!=null&&u(r,["instances[0]","prompt"],i);const s=l(e,["referenceImages"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>lR(d))),u(r,["instances[0]","referenceImages"],c)}const a=l(e,["config"]);return a!=null&&oA(a,r),r}function sA(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Rs(s))),u(n,["generatedImages"],i)}return n}function lA(t,e,n){const r={},o=l(t,["taskType"]);e!==void 0&&o!=null&&u(e,["requests[]","taskType"],o);const i=l(t,["title"]);e!==void 0&&i!=null&&u(e,["requests[]","title"],i);const s=l(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&u(e,["requests[]","outputDimensionality"],s),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function aA(t,e,n){const r={},o=l(t,["taskType"]);e!==void 0&&o!=null&&u(e,["instances[]","task_type"],o);const i=l(t,["title"]);e!==void 0&&i!=null&&u(e,["instances[]","title"],i);const s=l(t,["outputDimensionality"]);e!==void 0&&s!=null&&u(e,["parameters","outputDimensionality"],s);const a=l(t,["mimeType"]);e!==void 0&&a!=null&&u(e,["instances[]","mimeType"],a);const c=l(t,["autoTruncate"]);return e!==void 0&&c!=null&&u(e,["parameters","autoTruncate"],c),r}function uA(t,e,n){const r={},o=l(e,["model"]);o!=null&&u(r,["_url","model"],H(t,o));const i=l(e,["contents"]);if(i!=null){let c=Gu(t,i);Array.isArray(c)&&(c=c.map(d=>d)),u(r,["requests[]","content"],c)}const s=l(e,["config"]);s!=null&&lA(s,r);const a=l(e,["model"]);return a!==void 0&&u(r,["requests[]","model"],H(t,a)),r}function cA(t,e,n){const r={},o=l(e,["model"]);o!=null&&u(r,["_url","model"],H(t,o));const i=l(e,["contents"]);if(i!=null){let a=Gu(t,i);Array.isArray(a)&&(a=a.map(c=>c)),u(r,["instances[]","content"],a)}const s=l(e,["config"]);return s!=null&&aA(s,r),r}function dA(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["embeddings"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>a)),u(n,["embeddings"],s)}const i=l(t,["metadata"]);return i!=null&&u(n,["metadata"],i),n}function fA(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["predictions[]","embeddings"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>zw(a))),u(n,["embeddings"],s)}const i=l(t,["metadata"]);return i!=null&&u(n,["metadata"],i),n}function pA(t,e){const n={},r=l(t,["endpoint"]);r!=null&&u(n,["name"],r);const o=l(t,["deployedModelId"]);return o!=null&&u(n,["deployedModelId"],o),n}function hA(t,e){const n={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["fileUri"]);r!=null&&u(n,["fileUri"],r);const o=l(t,["mimeType"]);return o!=null&&u(n,["mimeType"],o),n}function mA(t,e){const n={},r=l(t,["id"]);r!=null&&u(n,["id"],r);const o=l(t,["args"]);o!=null&&u(n,["args"],o);const i=l(t,["name"]);if(i!=null&&u(n,["name"],i),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function gA(t,e){const n={},r=l(t,["allowedFunctionNames"]);r!=null&&u(n,["allowedFunctionNames"],r);const o=l(t,["mode"]);if(o!=null&&u(n,["mode"],o),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function vA(t,e){const n={},r=l(t,["description"]);r!=null&&u(n,["description"],r);const o=l(t,["name"]);o!=null&&u(n,["name"],o);const i=l(t,["parameters"]);i!=null&&u(n,["parameters"],i);const s=l(t,["parametersJsonSchema"]);s!=null&&u(n,["parametersJsonSchema"],s);const a=l(t,["response"]);a!=null&&u(n,["response"],a);const c=l(t,["responseJsonSchema"]);if(c!=null&&u(n,["responseJsonSchema"],c),l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function yA(t,e,n,r){const o={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&u(n,["systemInstruction"],As(_e(i)));const s=l(e,["temperature"]);s!=null&&u(o,["temperature"],s);const a=l(e,["topP"]);a!=null&&u(o,["topP"],a);const c=l(e,["topK"]);c!=null&&u(o,["topK"],c);const d=l(e,["candidateCount"]);d!=null&&u(o,["candidateCount"],d);const f=l(e,["maxOutputTokens"]);f!=null&&u(o,["maxOutputTokens"],f);const h=l(e,["stopSequences"]);h!=null&&u(o,["stopSequences"],h);const p=l(e,["responseLogprobs"]);p!=null&&u(o,["responseLogprobs"],p);const m=l(e,["logprobs"]);m!=null&&u(o,["logprobs"],m);const _=l(e,["presencePenalty"]);_!=null&&u(o,["presencePenalty"],_);const E=l(e,["frequencyPenalty"]);E!=null&&u(o,["frequencyPenalty"],E);const T=l(e,["seed"]);T!=null&&u(o,["seed"],T);const v=l(e,["responseMimeType"]);v!=null&&u(o,["responseMimeType"],v);const g=l(e,["responseSchema"]);g!=null&&u(o,["responseSchema"],Hu(g));const y=l(e,["responseJsonSchema"]);if(y!=null&&u(o,["responseJsonSchema"],y),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=l(e,["safetySettings"]);if(n!==void 0&&I!=null){let se=I;Array.isArray(se)&&(se=se.map(kt=>aR(kt))),u(n,["safetySettings"],se)}const w=l(e,["tools"]);if(n!==void 0&&w!=null){let se=Cr(w);Array.isArray(se)&&(se=se.map(kt=>mR(Ir(kt)))),u(n,["tools"],se)}const C=l(e,["toolConfig"]);if(n!==void 0&&C!=null&&u(n,["toolConfig"],hR(C)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=l(e,["cachedContent"]);n!==void 0&&A!=null&&u(n,["cachedContent"],Pt(t,A));const N=l(e,["responseModalities"]);N!=null&&u(o,["responseModalities"],N);const P=l(e,["mediaResolution"]);P!=null&&u(o,["mediaResolution"],P);const M=l(e,["speechConfig"]);if(M!=null&&u(o,["speechConfig"],Bu(M)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const G=l(e,["thinkingConfig"]);G!=null&&u(o,["thinkingConfig"],G);const ie=l(e,["imageConfig"]);ie!=null&&u(o,["imageConfig"],zA(ie));const ee=l(e,["enableEnhancedCivicAnswers"]);if(ee!=null&&u(o,["enableEnhancedCivicAnswers"],ee),l(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function _A(t,e,n,r){const o={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&u(n,["systemInstruction"],_e(i));const s=l(e,["temperature"]);s!=null&&u(o,["temperature"],s);const a=l(e,["topP"]);a!=null&&u(o,["topP"],a);const c=l(e,["topK"]);c!=null&&u(o,["topK"],c);const d=l(e,["candidateCount"]);d!=null&&u(o,["candidateCount"],d);const f=l(e,["maxOutputTokens"]);f!=null&&u(o,["maxOutputTokens"],f);const h=l(e,["stopSequences"]);h!=null&&u(o,["stopSequences"],h);const p=l(e,["responseLogprobs"]);p!=null&&u(o,["responseLogprobs"],p);const m=l(e,["logprobs"]);m!=null&&u(o,["logprobs"],m);const _=l(e,["presencePenalty"]);_!=null&&u(o,["presencePenalty"],_);const E=l(e,["frequencyPenalty"]);E!=null&&u(o,["frequencyPenalty"],E);const T=l(e,["seed"]);T!=null&&u(o,["seed"],T);const v=l(e,["responseMimeType"]);v!=null&&u(o,["responseMimeType"],v);const g=l(e,["responseSchema"]);g!=null&&u(o,["responseSchema"],Hu(g));const y=l(e,["responseJsonSchema"]);y!=null&&u(o,["responseJsonSchema"],y);const I=l(e,["routingConfig"]);I!=null&&u(o,["routingConfig"],I);const w=l(e,["modelSelectionConfig"]);w!=null&&u(o,["modelConfig"],w);const C=l(e,["safetySettings"]);if(n!==void 0&&C!=null){let k=C;Array.isArray(k)&&(k=k.map(U=>U)),u(n,["safetySettings"],k)}const A=l(e,["tools"]);if(n!==void 0&&A!=null){let k=Cr(A);Array.isArray(k)&&(k=k.map(U=>Ug(Ir(U)))),u(n,["tools"],k)}const N=l(e,["toolConfig"]);n!==void 0&&N!=null&&u(n,["toolConfig"],N);const P=l(e,["labels"]);n!==void 0&&P!=null&&u(n,["labels"],P);const M=l(e,["cachedContent"]);n!==void 0&&M!=null&&u(n,["cachedContent"],Pt(t,M));const G=l(e,["responseModalities"]);G!=null&&u(o,["responseModalities"],G);const ie=l(e,["mediaResolution"]);ie!=null&&u(o,["mediaResolution"],ie);const ee=l(e,["speechConfig"]);ee!=null&&u(o,["speechConfig"],Bu(ee));const se=l(e,["audioTimestamp"]);se!=null&&u(o,["audioTimestamp"],se);const kt=l(e,["thinkingConfig"]);kt!=null&&u(o,["thinkingConfig"],kt);const xn=l(e,["imageConfig"]);if(xn!=null&&u(o,["imageConfig"],WA(xn)),l(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const Mn=l(e,["modelArmorConfig"]);return n!==void 0&&Mn!=null&&u(n,["modelArmorConfig"],Mn),o}function Yf(t,e,n){const r={},o=l(e,["model"]);o!=null&&u(r,["_url","model"],H(t,o));const i=l(e,["contents"]);if(i!=null){let a=$e(i);Array.isArray(a)&&(a=a.map(c=>As(c))),u(r,["contents"],a)}const s=l(e,["config"]);return s!=null&&u(r,["generationConfig"],yA(t,s,r)),r}function Qf(t,e,n){const r={},o=l(e,["model"]);o!=null&&u(r,["_url","model"],H(t,o));const i=l(e,["contents"]);if(i!=null){let a=$e(i);Array.isArray(a)&&(a=a.map(c=>c)),u(r,["contents"],a)}const s=l(e,["config"]);return s!=null&&u(r,["generationConfig"],_A(t,s,r)),r}function Xf(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(f=>Hw(f))),u(n,["candidates"],d)}const i=l(t,["modelVersion"]);i!=null&&u(n,["modelVersion"],i);const s=l(t,["promptFeedback"]);s!=null&&u(n,["promptFeedback"],s);const a=l(t,["responseId"]);a!=null&&u(n,["responseId"],a);const c=l(t,["usageMetadata"]);return c!=null&&u(n,["usageMetadata"],c),n}function Zf(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["candidates"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(h=>h)),u(n,["candidates"],f)}const i=l(t,["createTime"]);i!=null&&u(n,["createTime"],i);const s=l(t,["modelVersion"]);s!=null&&u(n,["modelVersion"],s);const a=l(t,["promptFeedback"]);a!=null&&u(n,["promptFeedback"],a);const c=l(t,["responseId"]);c!=null&&u(n,["responseId"],c);const d=l(t,["usageMetadata"]);return d!=null&&u(n,["usageMetadata"],d),n}function EA(t,e,n){const r={};if(l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o);const i=l(t,["aspectRatio"]);e!==void 0&&i!=null&&u(e,["parameters","aspectRatio"],i);const s=l(t,["guidanceScale"]);if(e!==void 0&&s!=null&&u(e,["parameters","guidanceScale"],s),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=l(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&u(e,["parameters","safetySetting"],a);const c=l(t,["personGeneration"]);e!==void 0&&c!=null&&u(e,["parameters","personGeneration"],c);const d=l(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&u(e,["parameters","includeSafetyAttributes"],d);const f=l(t,["includeRaiReason"]);e!==void 0&&f!=null&&u(e,["parameters","includeRaiReason"],f);const h=l(t,["language"]);e!==void 0&&h!=null&&u(e,["parameters","language"],h);const p=l(t,["outputMimeType"]);e!==void 0&&p!=null&&u(e,["parameters","outputOptions","mimeType"],p);const m=l(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&u(e,["parameters","outputOptions","compressionQuality"],m),l(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=l(t,["imageSize"]);if(e!==void 0&&_!=null&&u(e,["parameters","sampleImageSize"],_),l(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function TA(t,e,n){const r={},o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&u(e,["parameters","storageUri"],o);const i=l(t,["negativePrompt"]);e!==void 0&&i!=null&&u(e,["parameters","negativePrompt"],i);const s=l(t,["numberOfImages"]);e!==void 0&&s!=null&&u(e,["parameters","sampleCount"],s);const a=l(t,["aspectRatio"]);e!==void 0&&a!=null&&u(e,["parameters","aspectRatio"],a);const c=l(t,["guidanceScale"]);e!==void 0&&c!=null&&u(e,["parameters","guidanceScale"],c);const d=l(t,["seed"]);e!==void 0&&d!=null&&u(e,["parameters","seed"],d);const f=l(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&u(e,["parameters","safetySetting"],f);const h=l(t,["personGeneration"]);e!==void 0&&h!=null&&u(e,["parameters","personGeneration"],h);const p=l(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&u(e,["parameters","includeSafetyAttributes"],p);const m=l(t,["includeRaiReason"]);e!==void 0&&m!=null&&u(e,["parameters","includeRaiReason"],m);const _=l(t,["language"]);e!==void 0&&_!=null&&u(e,["parameters","language"],_);const E=l(t,["outputMimeType"]);e!==void 0&&E!=null&&u(e,["parameters","outputOptions","mimeType"],E);const T=l(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&u(e,["parameters","outputOptions","compressionQuality"],T);const v=l(t,["addWatermark"]);e!==void 0&&v!=null&&u(e,["parameters","addWatermark"],v);const g=l(t,["labels"]);e!==void 0&&g!=null&&u(e,["labels"],g);const y=l(t,["imageSize"]);e!==void 0&&y!=null&&u(e,["parameters","sampleImageSize"],y);const I=l(t,["enhancePrompt"]);return e!==void 0&&I!=null&&u(e,["parameters","enhancePrompt"],I),r}function SA(t,e,n){const r={},o=l(e,["model"]);o!=null&&u(r,["_url","model"],H(t,o));const i=l(e,["prompt"]);i!=null&&u(r,["instances[0]","prompt"],i);const s=l(e,["config"]);return s!=null&&EA(s,r),r}function IA(t,e,n){const r={},o=l(e,["model"]);o!=null&&u(r,["_url","model"],H(t,o));const i=l(e,["prompt"]);i!=null&&u(r,["instances[0]","prompt"],i);const s=l(e,["config"]);return s!=null&&TA(s,r),r}function CA(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>FA(a))),u(n,["generatedImages"],s)}const i=l(t,["positivePromptSafetyAttributes"]);return i!=null&&u(n,["positivePromptSafetyAttributes"],Dg(i)),n}function wA(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Rs(a))),u(n,["generatedImages"],s)}const i=l(t,["positivePromptSafetyAttributes"]);return i!=null&&u(n,["positivePromptSafetyAttributes"],Lg(i)),n}function AA(t,e,n){const r={},o=l(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o),l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=l(t,["durationSeconds"]);if(e!==void 0&&i!=null&&u(e,["parameters","durationSeconds"],i),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s);const a=l(t,["resolution"]);e!==void 0&&a!=null&&u(e,["parameters","resolution"],a);const c=l(t,["personGeneration"]);if(e!==void 0&&c!=null&&u(e,["parameters","personGeneration"],c),l(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=l(t,["negativePrompt"]);e!==void 0&&d!=null&&u(e,["parameters","negativePrompt"],d);const f=l(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&u(e,["parameters","enhancePrompt"],f),l(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const h=l(t,["lastFrame"]);e!==void 0&&h!=null&&u(e,["instances[0]","lastFrame"],Ns(h));const p=l(t,["referenceImages"]);if(e!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(_=>NR(_))),u(e,["instances[0]","referenceImages"],m)}if(l(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function RA(t,e,n){const r={},o=l(t,["numberOfVideos"]);e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o);const i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&u(e,["parameters","storageUri"],i);const s=l(t,["fps"]);e!==void 0&&s!=null&&u(e,["parameters","fps"],s);const a=l(t,["durationSeconds"]);e!==void 0&&a!=null&&u(e,["parameters","durationSeconds"],a);const c=l(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);const d=l(t,["aspectRatio"]);e!==void 0&&d!=null&&u(e,["parameters","aspectRatio"],d);const f=l(t,["resolution"]);e!==void 0&&f!=null&&u(e,["parameters","resolution"],f);const h=l(t,["personGeneration"]);e!==void 0&&h!=null&&u(e,["parameters","personGeneration"],h);const p=l(t,["pubsubTopic"]);e!==void 0&&p!=null&&u(e,["parameters","pubsubTopic"],p);const m=l(t,["negativePrompt"]);e!==void 0&&m!=null&&u(e,["parameters","negativePrompt"],m);const _=l(t,["enhancePrompt"]);e!==void 0&&_!=null&&u(e,["parameters","enhancePrompt"],_);const E=l(t,["generateAudio"]);e!==void 0&&E!=null&&u(e,["parameters","generateAudio"],E);const T=l(t,["lastFrame"]);e!==void 0&&T!=null&&u(e,["instances[0]","lastFrame"],rt(T));const v=l(t,["referenceImages"]);if(e!==void 0&&v!=null){let I=v;Array.isArray(I)&&(I=I.map(w=>PR(w))),u(e,["instances[0]","referenceImages"],I)}const g=l(t,["mask"]);e!==void 0&&g!=null&&u(e,["instances[0]","mask"],RR(g));const y=l(t,["compressionQuality"]);return e!==void 0&&y!=null&&u(e,["parameters","compressionQuality"],y),r}function NA(t,e){const n={},r=l(t,["name"]);r!=null&&u(n,["name"],r);const o=l(t,["metadata"]);o!=null&&u(n,["metadata"],o);const i=l(t,["done"]);i!=null&&u(n,["done"],i);const s=l(t,["error"]);s!=null&&u(n,["error"],s);const a=l(t,["response","generateVideoResponse"]);return a!=null&&u(n,["response"],MA(a)),n}function PA(t,e){const n={},r=l(t,["name"]);r!=null&&u(n,["name"],r);const o=l(t,["metadata"]);o!=null&&u(n,["metadata"],o);const i=l(t,["done"]);i!=null&&u(n,["done"],i);const s=l(t,["error"]);s!=null&&u(n,["error"],s);const a=l(t,["response"]);return a!=null&&u(n,["response"],DA(a)),n}function kA(t,e,n){const r={},o=l(e,["model"]);o!=null&&u(r,["_url","model"],H(t,o));const i=l(e,["prompt"]);i!=null&&u(r,["instances[0]","prompt"],i);const s=l(e,["image"]);s!=null&&u(r,["instances[0]","image"],Ns(s));const a=l(e,["video"]);a!=null&&u(r,["instances[0]","video"],Fg(a));const c=l(e,["source"]);c!=null&&LA(c,r);const d=l(e,["config"]);return d!=null&&AA(d,r),r}function xA(t,e,n){const r={},o=l(e,["model"]);o!=null&&u(r,["_url","model"],H(t,o));const i=l(e,["prompt"]);i!=null&&u(r,["instances[0]","prompt"],i);const s=l(e,["image"]);s!=null&&u(r,["instances[0]","image"],rt(s));const a=l(e,["video"]);a!=null&&u(r,["instances[0]","video"],Og(a));const c=l(e,["source"]);c!=null&&UA(c,r);const d=l(e,["config"]);return d!=null&&RA(d,r),r}function MA(t,e){const n={},r=l(t,["generatedSamples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>bA(a))),u(n,["generatedVideos"],s)}const o=l(t,["raiMediaFilteredCount"]);o!=null&&u(n,["raiMediaFilteredCount"],o);const i=l(t,["raiMediaFilteredReasons"]);return i!=null&&u(n,["raiMediaFilteredReasons"],i),n}function DA(t,e){const n={},r=l(t,["videos"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>VA(a))),u(n,["generatedVideos"],s)}const o=l(t,["raiMediaFilteredCount"]);o!=null&&u(n,["raiMediaFilteredCount"],o);const i=l(t,["raiMediaFilteredReasons"]);return i!=null&&u(n,["raiMediaFilteredReasons"],i),n}function LA(t,e,n){const r={},o=l(t,["prompt"]);e!==void 0&&o!=null&&u(e,["instances[0]","prompt"],o);const i=l(t,["image"]);e!==void 0&&i!=null&&u(e,["instances[0]","image"],Ns(i));const s=l(t,["video"]);return e!==void 0&&s!=null&&u(e,["instances[0]","video"],Fg(s)),r}function UA(t,e,n){const r={},o=l(t,["prompt"]);e!==void 0&&o!=null&&u(e,["instances[0]","prompt"],o);const i=l(t,["image"]);e!==void 0&&i!=null&&u(e,["instances[0]","image"],rt(i));const s=l(t,["video"]);return e!==void 0&&s!=null&&u(e,["instances[0]","video"],Og(s)),r}function FA(t,e){const n={},r=l(t,["_self"]);r!=null&&u(n,["image"],JA(r));const o=l(t,["raiFilteredReason"]);o!=null&&u(n,["raiFilteredReason"],o);const i=l(t,["_self"]);return i!=null&&u(n,["safetyAttributes"],Dg(i)),n}function Rs(t,e){const n={},r=l(t,["_self"]);r!=null&&u(n,["image"],Mg(r));const o=l(t,["raiFilteredReason"]);o!=null&&u(n,["raiFilteredReason"],o);const i=l(t,["_self"]);i!=null&&u(n,["safetyAttributes"],Lg(i));const s=l(t,["prompt"]);return s!=null&&u(n,["enhancedPrompt"],s),n}function OA(t,e){const n={},r=l(t,["_self"]);r!=null&&u(n,["mask"],Mg(r));const o=l(t,["labels"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(n,["labels"],i)}return n}function bA(t,e){const n={},r=l(t,["video"]);return r!=null&&u(n,["video"],wR(r)),n}function VA(t,e){const n={},r=l(t,["_self"]);return r!=null&&u(n,["video"],AR(r)),n}function GA(t,e){const n={},r=l(t,["modelSelectionConfig"]);r!=null&&u(n,["modelConfig"],r);const o=l(t,["responseJsonSchema"]);o!=null&&u(n,["responseJsonSchema"],o);const i=l(t,["audioTimestamp"]);i!=null&&u(n,["audioTimestamp"],i);const s=l(t,["candidateCount"]);s!=null&&u(n,["candidateCount"],s);const a=l(t,["enableAffectiveDialog"]);a!=null&&u(n,["enableAffectiveDialog"],a);const c=l(t,["frequencyPenalty"]);c!=null&&u(n,["frequencyPenalty"],c);const d=l(t,["logprobs"]);d!=null&&u(n,["logprobs"],d);const f=l(t,["maxOutputTokens"]);f!=null&&u(n,["maxOutputTokens"],f);const h=l(t,["mediaResolution"]);h!=null&&u(n,["mediaResolution"],h);const p=l(t,["presencePenalty"]);p!=null&&u(n,["presencePenalty"],p);const m=l(t,["responseLogprobs"]);m!=null&&u(n,["responseLogprobs"],m);const _=l(t,["responseMimeType"]);_!=null&&u(n,["responseMimeType"],_);const E=l(t,["responseModalities"]);E!=null&&u(n,["responseModalities"],E);const T=l(t,["responseSchema"]);T!=null&&u(n,["responseSchema"],T);const v=l(t,["routingConfig"]);v!=null&&u(n,["routingConfig"],v);const g=l(t,["seed"]);g!=null&&u(n,["seed"],g);const y=l(t,["speechConfig"]);y!=null&&u(n,["speechConfig"],y);const I=l(t,["stopSequences"]);I!=null&&u(n,["stopSequences"],I);const w=l(t,["temperature"]);w!=null&&u(n,["temperature"],w);const C=l(t,["thinkingConfig"]);C!=null&&u(n,["thinkingConfig"],C);const A=l(t,["topK"]);A!=null&&u(n,["topK"],A);const N=l(t,["topP"]);if(N!=null&&u(n,["topP"],N),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function HA(t,e,n){const r={},o=l(e,["model"]);return o!=null&&u(r,["_url","name"],H(t,o)),r}function BA(t,e,n){const r={},o=l(e,["model"]);return o!=null&&u(r,["_url","name"],H(t,o)),r}function $A(t,e){const n={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=l(t,["enableWidget"]);return r!=null&&u(n,["enableWidget"],r),n}function qA(t,e){const n={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=l(t,["timeRangeFilter"]);return r!=null&&u(n,["timeRangeFilter"],r),n}function zA(t,e){const n={},r=l(t,["aspectRatio"]);r!=null&&u(n,["aspectRatio"],r);const o=l(t,["imageSize"]);if(o!=null&&u(n,["imageSize"],o),l(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function WA(t,e){const n={},r=l(t,["aspectRatio"]);r!=null&&u(n,["aspectRatio"],r);const o=l(t,["imageSize"]);o!=null&&u(n,["imageSize"],o);const i=l(t,["personGeneration"]);i!=null&&u(n,["personGeneration"],i);const s=l(t,["outputMimeType"]);s!=null&&u(n,["imageOutputOptions","mimeType"],s);const a=l(t,["outputCompressionQuality"]);return a!=null&&u(n,["imageOutputOptions","compressionQuality"],a),n}function JA(t,e){const n={},r=l(t,["bytesBase64Encoded"]);r!=null&&u(n,["imageBytes"],un(r));const o=l(t,["mimeType"]);return o!=null&&u(n,["mimeType"],o),n}function Mg(t,e){const n={},r=l(t,["gcsUri"]);r!=null&&u(n,["gcsUri"],r);const o=l(t,["bytesBase64Encoded"]);o!=null&&u(n,["imageBytes"],un(o));const i=l(t,["mimeType"]);return i!=null&&u(n,["mimeType"],i),n}function Ns(t,e){const n={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=l(t,["imageBytes"]);r!=null&&u(n,["bytesBase64Encoded"],un(r));const o=l(t,["mimeType"]);return o!=null&&u(n,["mimeType"],o),n}function rt(t,e){const n={},r=l(t,["gcsUri"]);r!=null&&u(n,["gcsUri"],r);const o=l(t,["imageBytes"]);o!=null&&u(n,["bytesBase64Encoded"],un(o));const i=l(t,["mimeType"]);return i!=null&&u(n,["mimeType"],i),n}function KA(t,e,n,r){const o={},i=l(e,["pageSize"]);n!==void 0&&i!=null&&u(n,["_query","pageSize"],i);const s=l(e,["pageToken"]);n!==void 0&&s!=null&&u(n,["_query","pageToken"],s);const a=l(e,["filter"]);n!==void 0&&a!=null&&u(n,["_query","filter"],a);const c=l(e,["queryBase"]);return n!==void 0&&c!=null&&u(n,["_url","models_url"],wg(t,c)),o}function YA(t,e,n,r){const o={},i=l(e,["pageSize"]);n!==void 0&&i!=null&&u(n,["_query","pageSize"],i);const s=l(e,["pageToken"]);n!==void 0&&s!=null&&u(n,["_query","pageToken"],s);const a=l(e,["filter"]);n!==void 0&&a!=null&&u(n,["_query","filter"],a);const c=l(e,["queryBase"]);return n!==void 0&&c!=null&&u(n,["_url","models_url"],wg(t,c)),o}function QA(t,e,n){const r={},o=l(e,["config"]);return o!=null&&KA(t,o,r),r}function XA(t,e,n){const r={},o=l(e,["config"]);return o!=null&&YA(t,o,r),r}function ZA(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["nextPageToken"]);o!=null&&u(n,["nextPageToken"],o);const i=l(t,["_self"]);if(i!=null){let s=Ag(i);Array.isArray(s)&&(s=s.map(a=>Sa(a))),u(n,["models"],s)}return n}function jA(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["nextPageToken"]);o!=null&&u(n,["nextPageToken"],o);const i=l(t,["_self"]);if(i!=null){let s=Ag(i);Array.isArray(s)&&(s=s.map(a=>Ia(a))),u(n,["models"],s)}return n}function eR(t,e){const n={},r=l(t,["maskMode"]);r!=null&&u(n,["maskMode"],r);const o=l(t,["segmentationClasses"]);o!=null&&u(n,["maskClasses"],o);const i=l(t,["maskDilation"]);return i!=null&&u(n,["dilation"],i),n}function Sa(t,e){const n={},r=l(t,["name"]);r!=null&&u(n,["name"],r);const o=l(t,["displayName"]);o!=null&&u(n,["displayName"],o);const i=l(t,["description"]);i!=null&&u(n,["description"],i);const s=l(t,["version"]);s!=null&&u(n,["version"],s);const a=l(t,["_self"]);a!=null&&u(n,["tunedModelInfo"],gR(a));const c=l(t,["inputTokenLimit"]);c!=null&&u(n,["inputTokenLimit"],c);const d=l(t,["outputTokenLimit"]);d!=null&&u(n,["outputTokenLimit"],d);const f=l(t,["supportedGenerationMethods"]);f!=null&&u(n,["supportedActions"],f);const h=l(t,["temperature"]);h!=null&&u(n,["temperature"],h);const p=l(t,["maxTemperature"]);p!=null&&u(n,["maxTemperature"],p);const m=l(t,["topP"]);m!=null&&u(n,["topP"],m);const _=l(t,["topK"]);_!=null&&u(n,["topK"],_);const E=l(t,["thinking"]);return E!=null&&u(n,["thinking"],E),n}function Ia(t,e){const n={},r=l(t,["name"]);r!=null&&u(n,["name"],r);const o=l(t,["displayName"]);o!=null&&u(n,["displayName"],o);const i=l(t,["description"]);i!=null&&u(n,["description"],i);const s=l(t,["versionId"]);s!=null&&u(n,["version"],s);const a=l(t,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>pA(m))),u(n,["endpoints"],p)}const c=l(t,["labels"]);c!=null&&u(n,["labels"],c);const d=l(t,["_self"]);d!=null&&u(n,["tunedModelInfo"],vR(d));const f=l(t,["defaultCheckpointId"]);f!=null&&u(n,["defaultCheckpointId"],f);const h=l(t,["checkpoints"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>m)),u(n,["checkpoints"],p)}return n}function tR(t,e){const n={},r=l(t,["mediaResolution"]);r!=null&&u(n,["mediaResolution"],r);const o=l(t,["codeExecutionResult"]);o!=null&&u(n,["codeExecutionResult"],o);const i=l(t,["executableCode"]);i!=null&&u(n,["executableCode"],i);const s=l(t,["fileData"]);s!=null&&u(n,["fileData"],hA(s));const a=l(t,["functionCall"]);a!=null&&u(n,["functionCall"],mA(a));const c=l(t,["functionResponse"]);c!=null&&u(n,["functionResponse"],c);const d=l(t,["inlineData"]);d!=null&&u(n,["inlineData"],Gw(d));const f=l(t,["text"]);f!=null&&u(n,["text"],f);const h=l(t,["thought"]);h!=null&&u(n,["thought"],h);const p=l(t,["thoughtSignature"]);p!=null&&u(n,["thoughtSignature"],p);const m=l(t,["videoMetadata"]);return m!=null&&u(n,["videoMetadata"],m),n}function nR(t,e){const n={},r=l(t,["productImage"]);return r!=null&&u(n,["image"],rt(r)),n}function rR(t,e,n){const r={},o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o);const i=l(t,["baseSteps"]);e!==void 0&&i!=null&&u(e,["parameters","baseSteps"],i);const s=l(t,["outputGcsUri"]);e!==void 0&&s!=null&&u(e,["parameters","storageUri"],s);const a=l(t,["seed"]);e!==void 0&&a!=null&&u(e,["parameters","seed"],a);const c=l(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&u(e,["parameters","safetySetting"],c);const d=l(t,["personGeneration"]);e!==void 0&&d!=null&&u(e,["parameters","personGeneration"],d);const f=l(t,["addWatermark"]);e!==void 0&&f!=null&&u(e,["parameters","addWatermark"],f);const h=l(t,["outputMimeType"]);e!==void 0&&h!=null&&u(e,["parameters","outputOptions","mimeType"],h);const p=l(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&u(e,["parameters","outputOptions","compressionQuality"],p);const m=l(t,["enhancePrompt"]);e!==void 0&&m!=null&&u(e,["parameters","enhancePrompt"],m);const _=l(t,["labels"]);return e!==void 0&&_!=null&&u(e,["labels"],_),r}function oR(t,e,n){const r={},o=l(e,["model"]);o!=null&&u(r,["_url","model"],H(t,o));const i=l(e,["source"]);i!=null&&sR(i,r);const s=l(e,["config"]);return s!=null&&rR(s,r),r}function iR(t,e){const n={},r=l(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>Rs(i))),u(n,["generatedImages"],o)}return n}function sR(t,e,n){const r={},o=l(t,["prompt"]);e!==void 0&&o!=null&&u(e,["instances[0]","prompt"],o);const i=l(t,["personImage"]);e!==void 0&&i!=null&&u(e,["instances[0]","personImage","image"],rt(i));const s=l(t,["productImages"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>nR(c))),u(e,["instances[0]","productImages"],a)}return r}function lR(t,e){const n={},r=l(t,["referenceImage"]);r!=null&&u(n,["referenceImage"],rt(r));const o=l(t,["referenceId"]);o!=null&&u(n,["referenceId"],o);const i=l(t,["referenceType"]);i!=null&&u(n,["referenceType"],i);const s=l(t,["maskImageConfig"]);s!=null&&u(n,["maskImageConfig"],eR(s));const a=l(t,["controlImageConfig"]);a!=null&&u(n,["controlImageConfig"],Jw(a));const c=l(t,["styleImageConfig"]);c!=null&&u(n,["styleImageConfig"],c);const d=l(t,["subjectImageConfig"]);return d!=null&&u(n,["subjectImageConfig"],d),n}function Dg(t,e){const n={},r=l(t,["safetyAttributes","categories"]);r!=null&&u(n,["categories"],r);const o=l(t,["safetyAttributes","scores"]);o!=null&&u(n,["scores"],o);const i=l(t,["contentType"]);return i!=null&&u(n,["contentType"],i),n}function Lg(t,e){const n={},r=l(t,["safetyAttributes","categories"]);r!=null&&u(n,["categories"],r);const o=l(t,["safetyAttributes","scores"]);o!=null&&u(n,["scores"],o);const i=l(t,["contentType"]);return i!=null&&u(n,["contentType"],i),n}function aR(t,e){const n={},r=l(t,["category"]);if(r!=null&&u(n,["category"],r),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=l(t,["threshold"]);return o!=null&&u(n,["threshold"],o),n}function uR(t,e){const n={},r=l(t,["image"]);return r!=null&&u(n,["image"],rt(r)),n}function cR(t,e,n){const r={},o=l(t,["mode"]);e!==void 0&&o!=null&&u(e,["parameters","mode"],o);const i=l(t,["maxPredictions"]);e!==void 0&&i!=null&&u(e,["parameters","maxPredictions"],i);const s=l(t,["confidenceThreshold"]);e!==void 0&&s!=null&&u(e,["parameters","confidenceThreshold"],s);const a=l(t,["maskDilation"]);e!==void 0&&a!=null&&u(e,["parameters","maskDilation"],a);const c=l(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&u(e,["parameters","binaryColorThreshold"],c);const d=l(t,["labels"]);return e!==void 0&&d!=null&&u(e,["labels"],d),r}function dR(t,e,n){const r={},o=l(e,["model"]);o!=null&&u(r,["_url","model"],H(t,o));const i=l(e,["source"]);i!=null&&pR(i,r);const s=l(e,["config"]);return s!=null&&cR(s,r),r}function fR(t,e){const n={},r=l(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>OA(i))),u(n,["generatedMasks"],o)}return n}function pR(t,e,n){const r={},o=l(t,["prompt"]);e!==void 0&&o!=null&&u(e,["instances[0]","prompt"],o);const i=l(t,["image"]);e!==void 0&&i!=null&&u(e,["instances[0]","image"],rt(i));const s=l(t,["scribbleImage"]);return e!==void 0&&s!=null&&u(e,["instances[0]","scribble"],uR(s)),r}function hR(t,e){const n={},r=l(t,["retrievalConfig"]);r!=null&&u(n,["retrievalConfig"],r);const o=l(t,["functionCallingConfig"]);return o!=null&&u(n,["functionCallingConfig"],gA(o)),n}function mR(t,e){const n={};if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["computerUse"]);r!=null&&u(n,["computerUse"],r);const o=l(t,["fileSearch"]);o!=null&&u(n,["fileSearch"],o);const i=l(t,["codeExecution"]);if(i!=null&&u(n,["codeExecution"],i),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=l(t,["functionDeclarations"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>p)),u(n,["functionDeclarations"],h)}const a=l(t,["googleMaps"]);a!=null&&u(n,["googleMaps"],$A(a));const c=l(t,["googleSearch"]);c!=null&&u(n,["googleSearch"],qA(c));const d=l(t,["googleSearchRetrieval"]);d!=null&&u(n,["googleSearchRetrieval"],d);const f=l(t,["urlContext"]);return f!=null&&u(n,["urlContext"],f),n}function Ug(t,e){const n={},r=l(t,["retrieval"]);r!=null&&u(n,["retrieval"],r);const o=l(t,["computerUse"]);if(o!=null&&u(n,["computerUse"],o),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=l(t,["codeExecution"]);i!=null&&u(n,["codeExecution"],i);const s=l(t,["enterpriseWebSearch"]);s!=null&&u(n,["enterpriseWebSearch"],s);const a=l(t,["functionDeclarations"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>vA(m))),u(n,["functionDeclarations"],p)}const c=l(t,["googleMaps"]);c!=null&&u(n,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&u(n,["googleSearch"],d);const f=l(t,["googleSearchRetrieval"]);f!=null&&u(n,["googleSearchRetrieval"],f);const h=l(t,["urlContext"]);return h!=null&&u(n,["urlContext"],h),n}function gR(t,e){const n={},r=l(t,["baseModel"]);r!=null&&u(n,["baseModel"],r);const o=l(t,["createTime"]);o!=null&&u(n,["createTime"],o);const i=l(t,["updateTime"]);return i!=null&&u(n,["updateTime"],i),n}function vR(t,e){const n={},r=l(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&u(n,["baseModel"],r);const o=l(t,["createTime"]);o!=null&&u(n,["createTime"],o);const i=l(t,["updateTime"]);return i!=null&&u(n,["updateTime"],i),n}function yR(t,e,n){const r={},o=l(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);const i=l(t,["description"]);e!==void 0&&i!=null&&u(e,["description"],i);const s=l(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&u(e,["defaultCheckpointId"],s),r}function _R(t,e,n){const r={},o=l(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);const i=l(t,["description"]);e!==void 0&&i!=null&&u(e,["description"],i);const s=l(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&u(e,["defaultCheckpointId"],s),r}function ER(t,e,n){const r={},o=l(e,["model"]);o!=null&&u(r,["_url","name"],H(t,o));const i=l(e,["config"]);return i!=null&&yR(i,r),r}function TR(t,e,n){const r={},o=l(e,["model"]);o!=null&&u(r,["_url","model"],H(t,o));const i=l(e,["config"]);return i!=null&&_R(i,r),r}function SR(t,e,n){const r={},o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&u(e,["parameters","storageUri"],o);const i=l(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&u(e,["parameters","safetySetting"],i);const s=l(t,["personGeneration"]);e!==void 0&&s!=null&&u(e,["parameters","personGeneration"],s);const a=l(t,["includeRaiReason"]);e!==void 0&&a!=null&&u(e,["parameters","includeRaiReason"],a);const c=l(t,["outputMimeType"]);e!==void 0&&c!=null&&u(e,["parameters","outputOptions","mimeType"],c);const d=l(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&u(e,["parameters","outputOptions","compressionQuality"],d);const f=l(t,["enhanceInputImage"]);e!==void 0&&f!=null&&u(e,["parameters","upscaleConfig","enhanceInputImage"],f);const h=l(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&u(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const p=l(t,["labels"]);e!==void 0&&p!=null&&u(e,["labels"],p);const m=l(t,["numberOfImages"]);e!==void 0&&m!=null&&u(e,["parameters","sampleCount"],m);const _=l(t,["mode"]);return e!==void 0&&_!=null&&u(e,["parameters","mode"],_),r}function IR(t,e,n){const r={},o=l(e,["model"]);o!=null&&u(r,["_url","model"],H(t,o));const i=l(e,["image"]);i!=null&&u(r,["instances[0]","image"],rt(i));const s=l(e,["upscaleFactor"]);s!=null&&u(r,["parameters","upscaleConfig","upscaleFactor"],s);const a=l(e,["config"]);return a!=null&&SR(a,r),r}function CR(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Rs(s))),u(n,["generatedImages"],i)}return n}function wR(t,e){const n={},r=l(t,["uri"]);r!=null&&u(n,["uri"],r);const o=l(t,["encodedVideo"]);o!=null&&u(n,["videoBytes"],un(o));const i=l(t,["encoding"]);return i!=null&&u(n,["mimeType"],i),n}function AR(t,e){const n={},r=l(t,["gcsUri"]);r!=null&&u(n,["uri"],r);const o=l(t,["bytesBase64Encoded"]);o!=null&&u(n,["videoBytes"],un(o));const i=l(t,["mimeType"]);return i!=null&&u(n,["mimeType"],i),n}function RR(t,e){const n={},r=l(t,["image"]);r!=null&&u(n,["_self"],rt(r));const o=l(t,["maskMode"]);return o!=null&&u(n,["maskMode"],o),n}function NR(t,e){const n={},r=l(t,["image"]);r!=null&&u(n,["image"],Ns(r));const o=l(t,["referenceType"]);return o!=null&&u(n,["referenceType"],o),n}function PR(t,e){const n={},r=l(t,["image"]);r!=null&&u(n,["image"],rt(r));const o=l(t,["referenceType"]);return o!=null&&u(n,["referenceType"],o),n}function Fg(t,e){const n={},r=l(t,["uri"]);r!=null&&u(n,["uri"],r);const o=l(t,["videoBytes"]);o!=null&&u(n,["encodedVideo"],un(o));const i=l(t,["mimeType"]);return i!=null&&u(n,["encoding"],i),n}function Og(t,e){const n={},r=l(t,["uri"]);r!=null&&u(n,["gcsUri"],r);const o=l(t,["videoBytes"]);o!=null&&u(n,["bytesBase64Encoded"],un(o));const i=l(t,["mimeType"]);return i!=null&&u(n,["mimeType"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kR(t,e){const n={},r=l(t,["displayName"]);return e!==void 0&&r!=null&&u(e,["displayName"],r),n}function xR(t){const e={},n=l(t,["config"]);return n!=null&&kR(n,e),e}function MR(t,e){const n={},r=l(t,["force"]);return e!==void 0&&r!=null&&u(e,["_query","force"],r),n}function DR(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&MR(r,e),e}function LR(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","name"],n),e}function UR(t,e){const n={},r=l(t,["customMetadata"]);if(e!==void 0&&r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["customMetadata"],i)}const o=l(t,["chunkingConfig"]);return e!==void 0&&o!=null&&u(e,["chunkingConfig"],o),n}function FR(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);i!=null&&u(e,["error"],i);const s=l(t,["response"]);return s!=null&&u(e,["response"],bR(s)),e}function OR(t){const e={},n=l(t,["fileSearchStoreName"]);n!=null&&u(e,["_url","file_search_store_name"],n);const r=l(t,["fileName"]);r!=null&&u(e,["fileName"],r);const o=l(t,["config"]);return o!=null&&UR(o,e),e}function bR(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["parent"]);r!=null&&u(e,["parent"],r);const o=l(t,["documentName"]);return o!=null&&u(e,["documentName"],o),e}function VR(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),n}function GR(t){const e={},n=l(t,["config"]);return n!=null&&VR(n,e),e}function HR(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["fileSearchStores"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["fileSearchStores"],i)}return e}function bg(t,e){const n={},r=l(t,["mimeType"]);e!==void 0&&r!=null&&u(e,["mimeType"],r);const o=l(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);const i=l(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>c)),u(e,["customMetadata"],a)}const s=l(t,["chunkingConfig"]);return e!==void 0&&s!=null&&u(e,["chunkingConfig"],s),n}function BR(t){const e={},n=l(t,["fileSearchStoreName"]);n!=null&&u(e,["_url","file_search_store_name"],n);const r=l(t,["config"]);return r!=null&&bg(r,e),e}function $R(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qR="Content-Type",zR="X-Server-Timeout",WR="User-Agent",Ca="x-goog-api-client",JR="1.41.0",KR=`google-genai-sdk/${JR}`,YR="v1beta1",QR="v1beta",XR=5,ZR=[408,429,500,502,503,504];class jR{constructor(e){var n,r,o;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const i={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const a=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!a?(i.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?i.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(i.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:YR}else{if(!this.clientOptions.apiKey)throw new To({message:"API key must be set when using the Gemini API.",status:403});i.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:QR,i.baseUrl="https://generativelanguage.googleapis.com/"}i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const o=[this.getRequestUrlInternal(n)];return r&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===ya.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e,n),o=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,a]of Object.entries(e.queryParams))o.searchParams.append(s,String(a));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,o.toString(),e.abortSignal),this.unaryApiCall(o,i,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[o,i]of Object.entries(n))typeof i=="object"?r[o]=Object.assign(Object.assign({},r[o]),i):i!==void 0&&(r[o]=i);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e,n),o=this.constructUrl(e.path,n,r);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,o.toString(),e.abortSignal),this.streamApiCall(o,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,o){if(n&&n.timeout||o){const i=new AbortController,s=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>i.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{i.abort()}),e.signal=s}return n&&n.extraBody!==null&&eN(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await jf(o),new _a(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await jf(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return je(this,arguments,function*(){var r;const o=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),i=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let s="";const a="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:f}=yield F(o.read());if(d){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=i.decode(f,{stream:!0});try{const _=JSON.parse(h);if("error"in _){const E=JSON.parse(JSON.stringify(_.error)),T=E.status,v=E.code,g=`got status: ${T}. ${JSON.stringify(_)}`;if(v>=400&&v<600)throw new To({message:g,status:v})}}catch(_){if(_.name==="ApiError")throw _}s+=h;let p=-1,m=0;for(;;){p=-1,m=0;for(const T of c){const v=s.indexOf(T);v!==-1&&(p===-1||v<p)&&(p=v,m=T.length)}if(p===-1)break;const _=s.substring(0,p);s=s.substring(p+m);const E=_.trim();if(E.startsWith(a)){const T=E.substring(a.length).trim();try{const v=new Response(T,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield F(new _a(v))}catch(v){throw new Error(`exception parsing stream chunk ${T}. ${v}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,n){var r;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,n);const o=this.clientOptions.httpOptions.retryOptions;return $S(async()=>{const s=await fetch(e,n);if(s.ok)return s;throw ZR.includes(s.status)?new Error(`Retryable HTTP Error: ${s.statusText}`):new gg(`Non-retryable exception ${s.statusText} sending request`)},{retries:((r=o.attempts)!==null&&r!==void 0?r:XR)-1})}getDefaultHeaders(){const e={},n=KR+" "+this.clientOptions.userAgentExtra;return e[WR]=n,e[Ca]=n,e[qR]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[o,i]of Object.entries(e.headers))r.append(o,i);e.timeout&&e.timeout>0&&r.append(zR,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const i=this.clientOptions.uploader,s=await i.stat(e);o.sizeBytes=String(s.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=a;const c={file:o},d=this.getFileName(e),f=x("upload/v1beta/files",c._url),h=await this.fetchUploadUrl(f,o.sizeBytes,o.mimeType,d,c,n==null?void 0:n.httpOptions);return i.upload(e,h,this)}async uploadFileToFileSearchStore(e,n,r){var o;const i=this.clientOptions.uploader,s=await i.stat(n),a=String(s.size),c=(o=r==null?void 0:r.mimeType)!==null&&o!==void 0?o:s.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),h={};r!=null&&bg(r,h);const p=await this.fetchUploadUrl(d,a,c,f,h,r==null?void 0:r.httpOptions);return i.uploadToFileSearchStore(n,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,o,i,s){var a;let c={};s?c=s:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},o?{"X-Goog-Upload-File-Name":o}:{})};const d=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:c});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(a=d==null?void 0:d.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function jf(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(r);throw n>=400&&n<600?new To({message:o,status:n}):new Error(o)}}function eN(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(i,s){const a=Object.assign({},i);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const d=s[c],f=a[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?a[c]=r(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),a[c]=d)}return a}const o=r(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tN="mcp_used/unknown";let nN=!1;function Vg(t){for(const e of t)if(rN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return nN}function Gg(t){var e;const n=(e=t[Ca])!==null&&e!==void 0?e:"";t[Ca]=(n+` ${tN}`).trimStart()}function rN(t){return t!==null&&typeof t=="object"&&t instanceof qu}function oN(t){return je(this,arguments,function*(n,r=100){let o,i=0;for(;i<r;){const s=yield F(n.listTools({cursor:o}));for(const a of s.tools)yield yield F(a),i++;if(!s.nextCursor)break;o=s.nextCursor}})}class qu{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new qu(e,n)}async initialize(){var e,n,r,o;if(this.mcpTools.length>0)return;const i={},s=[];for(const f of this.mcpClients)try{for(var a=!0,c=(n=void 0,et(oN(f))),d;d=await c.next(),e=d.done,!e;a=!0){o=d.value,a=!1;const h=o;s.push(h);const p=h.name;if(i[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);i[p]=f}}catch(h){n={error:h}}finally{try{!a&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),xI(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[r.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const s=await o.callTool({name:r.name,arguments:r.args},void 0,i);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function iN(t,e,n){const r=new II;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(r,o),e(r)}class sN{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),s=uN(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),c=`${o}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${a}`;let d=()=>{};const f=new Promise(y=>{d=y}),h=e.callbacks,p=function(){d({})},m=this.apiClient,_={onopen:p,onmessage:y=>{iN(m,h.onmessage,y)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(y){},onclose:(r=h==null?void 0:h.onclose)!==null&&r!==void 0?r:function(y){}},E=this.webSocketFactory.create(c,aN(s),_);E.connect(),await f;const g={setup:{model:H(this.apiClient,e.model)}};return E.send(JSON.stringify(g)),new lN(E,this.apiClient)}}class lN{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=kw(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Pw(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Yn.PLAY)}pause(){this.sendPlaybackControl(Yn.PAUSE)}stop(){this.sendPlaybackControl(Yn.STOP)}resetContext(){this.sendPlaybackControl(Yn.RESET_CONTEXT)}close(){this.conn.close()}}function aN(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function uN(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function dN(t,e,n){const r=new SI;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const i=JSON.parse(o);if(t.isVertexAI()){const s=Dw(i);Object.assign(r,s)}else Object.assign(r,i);e(r)}class fN{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new sN(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,o,i,s,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&Vg(e.config.tools)&&Gg(h);const p=gN(h);if(this.apiClient.isVertexAI()){const P=this.apiClient.getProject(),M=this.apiClient.getLocation(),G=this.apiClient.getApiKey(),ie=!!P&&!!M||!!G;this.apiClient.getCustomBaseUrl()&&!ie?f=c:(f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,f))}else{const P=this.apiClient.getApiKey();let M="BidiGenerateContent",G="key";P!=null&&P.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),M="BidiGenerateContentConstrained",G="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${M}?${G}=${P}`}let m=()=>{};const _=new Promise(P=>{m=P}),E=e.callbacks,T=function(){var P;(P=E==null?void 0:E.onopen)===null||P===void 0||P.call(E),m({})},v=this.apiClient,g={onopen:T,onmessage:P=>{dN(v,E.onmessage,P)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(P){},onclose:(r=E==null?void 0:E.onclose)!==null&&r!==void 0?r:function(P){}},y=this.webSocketFactory.create(f,mN(p),g);y.connect(),await _;let I=H(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&I.startsWith("publishers/")){const P=this.apiClient.getProject(),M=this.apiClient.getLocation();P&&M&&(I=`projects/${P}/locations/${M}/`+I)}let w={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[es.AUDIO]}:e.config.responseModalities=[es.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const C=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],A=[];for(const P of C)if(this.isCallableTool(P)){const M=P;A.push(await M.tool())}else A.push(P);A.length>0&&(e.config.tools=A);const N={model:I,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?w=Nw(this.apiClient,N):w=Rw(this.apiClient,N),delete w.config,y.send(JSON.stringify(w)),new hN(y,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const pN={turnComplete:!0};class hN{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=$e(n.turns),e.isVertexAI()||(r=r.map(o=>As(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const i of r){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(cN)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},pN),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Mw(e)}:n={realtimeInput:xw(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function mN(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function gN(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ep=10;function tp(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(ar(s)){o=!0;break}if(!o)return!0;const i=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function ar(t){return"callTool"in t&&typeof t.callTool=="function"}function vN(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>ar(o)))!==null&&r!==void 0?r:!1}function np(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,o)=>{if(ar(r))return;const i=r;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(o)}),n}function rp(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yN extends Nt{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,o,i,s,a;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!vN(n)||tp(n.config))return await this.generateContentInternal(c);const d=np(n);if(d.length>0){const E=d.map(T=>`tools[${T}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${E}.`)}let f,h;const p=$e(c.contents),m=(i=(o=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&i!==void 0?i:ep;let _=0;for(;_<m&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const E=f.candidates[0].content,T=[];for(const v of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(ar(v)){const y=await v.callTool(f.functionCalls);T.push(...y)}_++,h={role:"user",parts:T},c.contents=$e(c.contents),c.contents.push(E),c.contents.push(h),rp(c.config)&&(p.push(E),p.push(h))}return rp(c.config)&&(f.automaticFunctionCallingHistory=p),f},this.generateContentStream=async n=>{var r,o,i,s,a;if(this.maybeMoveToResponseJsonSchem(n),tp(n.config)){const h=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(h)}const c=np(n);if(c.length>0){const h=c.map(p=>`tools[${p}]`).join(", ");throw new Error(`Incompatible tools found at ${h}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(i=(o=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,f=(a=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(d&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var o;let i;const s=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((o=c==null?void 0:c.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?i=c==null?void 0:c.safetyAttributes:s.push(c);let a;return i?a={generatedImages:s,positivePromptSafetyAttributes:i,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new kn(At.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var r,o,i,s,a,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(i=n.source)===null||i===void 0?void 0:i.video)===null||s===void 0)&&s.uri&&(!((c=(a=n.source)===null||a===void 0?void 0:a.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,o;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const s=await Promise.all(i.map(async c=>ar(c)?await c.tool():c)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(a.config.tools=s,e.config&&e.config.tools&&Vg(e.config.tools)){const c=(o=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&o!==void 0?o:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),Gg(d),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return a}async initAfcToolsMap(e){var n,r,o;const i=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(ar(s)){const a=s,c=await a.tool();for(const d of(o=c.functionDeclarations)!==null&&o!==void 0?o:[]){if(!d.name)throw new Error("Function declaration name is required.");if(i.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);i.set(d.name,a)}}return i}async processAfcStream(e){var n,r,o;const i=(o=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:ep;let s=!1,a=0;const c=await this.initAfcToolsMap(e);return function(d,f,h){return je(this,arguments,function*(){for(var p,m,_,E,T,v;a<i;){s&&(a++,s=!1);const w=yield F(d.processParamsMaybeAddMcpUsage(h)),C=yield F(d.generateContentStreamInternal(w)),A=[],N=[];try{for(var g=!0,y=(m=void 0,et(C)),I;I=yield F(y.next()),p=I.done,!p;g=!0){E=I.value,g=!1;const P=E;if(yield yield F(P),P.candidates&&(!((T=P.candidates[0])===null||T===void 0)&&T.content)){N.push(P.candidates[0].content);for(const M of(v=P.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(a<i&&M.functionCall){if(!M.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(M.functionCall.name)){const G=yield F(f.get(M.functionCall.name).callTool([M.functionCall]));A.push(...G)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${M.functionCall.name}`)}}}}catch(P){m={error:P}}finally{try{!g&&!p&&(_=y.return)&&(yield F(_.call(y)))}finally{if(m)throw m.error}}if(A.length>0){s=!0;const P=new Lr;P.candidates=[{content:{role:"user",parts:A}}],yield yield F(P);const M=[];M.push(...N),M.push({role:"user",parts:A});const G=$e(h.contents).concat(M);h.contents=G}else break}})}(this,c,e)}async generateContentInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=Qf(this.apiClient,e);return a=x("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=Zf(f),p=new Lr;return Object.assign(p,h),p})}else{const d=Yf(this.apiClient,e);return a=x("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=Xf(f),p=new Lr;return Object.assign(p,h),p})}}async generateContentStreamInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=Qf(this.apiClient,e);return a=x("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(h){return je(this,arguments,function*(){var p,m,_,E;try{for(var T=!0,v=et(h),g;g=yield F(v.next()),p=g.done,!p;T=!0){E=g.value,T=!1;const y=E,I=Zf(yield F(y.json()),e);I.sdkHttpResponse={headers:y.headers};const w=new Lr;Object.assign(w,I),yield yield F(w)}}catch(y){m={error:y}}finally{try{!T&&!p&&(_=v.return)&&(yield F(_.call(v)))}finally{if(m)throw m.error}}})})}else{const d=Yf(this.apiClient,e);return a=x("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(h){return je(this,arguments,function*(){var p,m,_,E;try{for(var T=!0,v=et(h),g;g=yield F(v.next()),p=g.done,!p;T=!0){E=g.value,T=!1;const y=E,I=Xf(yield F(y.json()),e);I.sdkHttpResponse={headers:y.headers};const w=new Lr;Object.assign(w,I),yield yield F(w)}}catch(y){m={error:y}}finally{try{!T&&!p&&(_=v.return)&&(yield F(_.call(v)))}finally{if(m)throw m.error}}})})}}async embedContent(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=cA(this.apiClient,e);return a=x("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=fA(f),p=new Mf;return Object.assign(p,h),p})}else{const d=uA(this.apiClient,e);return a=x("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=dA(f),p=new Mf;return Object.assign(p,h),p})}}async generateImagesInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=IA(this.apiClient,e);return a=x("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=wA(f),p=new Df;return Object.assign(p,h),p})}else{const d=SA(this.apiClient,e);return a=x("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=CA(f),p=new Df;return Object.assign(p,h),p})}}async editImageInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const a=iA(this.apiClient,e);return i=x("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=sA(c),f=new cI;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const a=IR(this.apiClient,e);return i=x("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=CR(c),f=new dI;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const a=oR(this.apiClient,e);return i=x("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=iR(c),f=new fI;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const a=dR(this.apiClient,e);return i=x("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=fR(c),f=new pI;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=BA(this.apiClient,e);return a=x("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Ia(f))}else{const d=HA(this.apiClient,e);return a=x("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Sa(f))}}async listInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=XA(this.apiClient,e);return a=x("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=jA(f),p=new Lf;return Object.assign(p,h),p})}else{const d=QA(this.apiClient,e);return a=x("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=ZA(f),p=new Lf;return Object.assign(p,h),p})}}async update(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=TR(this.apiClient,e);return a=x("{model}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Ia(f))}else{const d=ER(this.apiClient,e);return a=x("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Sa(f))}}async delete(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=tA(this.apiClient,e);return a=x("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=rA(f),p=new Uf;return Object.assign(p,h),p})}else{const d=eA(this.apiClient,e);return a=x("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=nA(f),p=new Uf;return Object.assign(p,h),p})}}async countTokens(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=Xw(this.apiClient,e);return a=x("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=jw(f),p=new Ff;return Object.assign(p,h),p})}else{const d=Qw(this.apiClient,e);return a=x("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=Zw(f),p=new Ff;return Object.assign(p,h),p})}}async computeTokens(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const a=$w(this.apiClient,e);return i=x("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=qw(c),f=new hI;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=xA(this.apiClient,e);return a=x("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const h=PA(f),p=new ts;return Object.assign(p,h),p})}else{const d=kA(this.apiClient,e);return a=x("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=NA(f),p=new ts;return Object.assign(p,h),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _N extends Nt{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=oI(e);return a=x("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s}else{const d=rI(e);return a=x("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const a=QS(e);return i=x("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EN(t){const e={},n=l(t,["data"]);if(n!=null&&u(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function TN(t){const e={},n=l(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>kN(i))),u(e,["parts"],o)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function SN(t,e,n){const r={},o=l(e,["expireTime"]);n!==void 0&&o!=null&&u(n,["expireTime"],o);const i=l(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&u(n,["newSessionExpireTime"],i);const s=l(e,["uses"]);n!==void 0&&s!=null&&u(n,["uses"],s);const a=l(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&u(n,["bidiGenerateContentSetup"],PN(t,a));const c=l(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&u(n,["fieldMask"],c),r}function IN(t,e){const n={},r=l(e,["config"]);return r!=null&&u(n,["config"],SN(t,r,n)),n}function CN(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function wN(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const o=l(t,["name"]);if(o!=null&&u(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function AN(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function RN(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function NN(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],r);const o=l(t,["responseModalities"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","responseModalities"],o);const i=l(t,["temperature"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","temperature"],i);const s=l(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","seed"],f);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","speechConfig"],$u(h));const p=l(t,["thinkingConfig"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","thinkingConfig"],p);const m=l(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],m);const _=l(t,["systemInstruction"]);e!==void 0&&_!=null&&u(e,["setup","systemInstruction"],TN(_e(_)));const E=l(t,["tools"]);if(e!==void 0&&E!=null){let C=Cr(E);Array.isArray(C)&&(C=C.map(A=>MN(Ir(A)))),u(e,["setup","tools"],C)}const T=l(t,["sessionResumption"]);e!==void 0&&T!=null&&u(e,["setup","sessionResumption"],xN(T));const v=l(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&u(e,["setup","inputAudioTranscription"],v);const g=l(t,["outputAudioTranscription"]);e!==void 0&&g!=null&&u(e,["setup","outputAudioTranscription"],g);const y=l(t,["realtimeInputConfig"]);e!==void 0&&y!=null&&u(e,["setup","realtimeInputConfig"],y);const I=l(t,["contextWindowCompression"]);e!==void 0&&I!=null&&u(e,["setup","contextWindowCompression"],I);const w=l(t,["proactivity"]);if(e!==void 0&&w!=null&&u(e,["setup","proactivity"],w),l(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function PN(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],H(t,r));const o=l(e,["config"]);return o!=null&&u(n,["config"],NN(o,n)),n}function kN(t){const e={},n=l(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&u(e,["codeExecutionResult"],r);const o=l(t,["executableCode"]);o!=null&&u(e,["executableCode"],o);const i=l(t,["fileData"]);i!=null&&u(e,["fileData"],CN(i));const s=l(t,["functionCall"]);s!=null&&u(e,["functionCall"],wN(s));const a=l(t,["functionResponse"]);a!=null&&u(e,["functionResponse"],a);const c=l(t,["inlineData"]);c!=null&&u(e,["inlineData"],EN(c));const d=l(t,["text"]);d!=null&&u(e,["text"],d);const f=l(t,["thought"]);f!=null&&u(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const p=l(t,["videoMetadata"]);return p!=null&&u(e,["videoMetadata"],p),e}function xN(t){const e={},n=l(t,["handle"]);if(n!=null&&u(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function MN(t){const e={};if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=l(t,["computerUse"]);n!=null&&u(e,["computerUse"],n);const r=l(t,["fileSearch"]);r!=null&&u(e,["fileSearch"],r);const o=l(t,["codeExecution"]);if(o!=null&&u(e,["codeExecution"],o),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=l(t,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>h)),u(e,["functionDeclarations"],f)}const s=l(t,["googleMaps"]);s!=null&&u(e,["googleMaps"],AN(s));const a=l(t,["googleSearch"]);a!=null&&u(e,["googleSearch"],RN(a));const c=l(t,["googleSearchRetrieval"]);c!=null&&u(e,["googleSearchRetrieval"],c);const d=l(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DN(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const o=Object.keys(r).map(i=>`${n}.${i}`);e.push(...o)}else e.push(n)}return e.join(",")}function LN(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const i=r.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const i=DN(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];o.length>0&&(a=o.map(d=>s.includes(d)?`generationConfig.${d}`:d));const c=[];i&&c.push(i),a.length>0&&c.push(...a),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class UN extends Nt{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=IN(this.apiClient,e);i=x("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;const c=LN(a,e.config);return o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FN(t,e){const n={},r=l(t,["force"]);return e!==void 0&&r!=null&&u(e,["_query","force"],r),n}function ON(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&FN(r,e),e}function bN(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","name"],n),e}function VN(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),n}function GN(t){const e={},n=l(t,["parent"]);n!=null&&u(e,["_url","parent"],n);const r=l(t,["config"]);return r!=null&&VN(r,e),e}function HN(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["documents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BN extends Nt{constructor(e){super(),this.apiClient=e,this.list=async n=>new kn(At.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=bN(e);return i=x("{name}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(e){var n,r;let o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=ON(e);o=x("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=GN(e);return i=x("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=HN(c),f=new mI;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $N extends Nt{constructor(e,n=new BN(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new kn(At.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=xR(e);return i=x("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async get(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=LR(e);return i=x("{name}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(e){var n,r;let o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=DR(e);o=x("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=GR(e);return i=x("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=HR(c),f=new gI;return Object.assign(f,d),f})}}async uploadToFileSearchStoreInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=BR(e);return i=x("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=$R(c),f=new vI;return Object.assign(f,d),f})}}async importFile(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=OR(e);return i=x("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=FR(c),f=new bu;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Hg=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Hg=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const qN=()=>Hg();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wa(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Aa=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class We extends Error{}class we extends We{constructor(e,n,r,o){super(`${we.makeMessage(e,n,r)}`),this.status=e,this.headers=o,this.error=n}static makeMessage(e,n,r){const o=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,n,r,o){if(!e||!o)return new Ps({message:r,cause:Aa(n)});const i=n;return e===400?new $g(e,i,r,o):e===401?new qg(e,i,r,o):e===403?new zg(e,i,r,o):e===404?new Wg(e,i,r,o):e===409?new Jg(e,i,r,o):e===422?new Kg(e,i,r,o):e===429?new Yg(e,i,r,o):e>=500?new Qg(e,i,r,o):new we(e,i,r,o)}}class Ra extends we{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Ps extends we{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Bg extends Ps{constructor({message:e}={}){super({message:e??"Request timed out."})}}class $g extends we{}class qg extends we{}class zg extends we{}class Wg extends we{}class Jg extends we{}class Kg extends we{}class Yg extends we{}class Qg extends we{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zN=/^[a-z][a-z0-9+.-]*:/i,WN=t=>zN.test(t);let Na=t=>(Na=Array.isArray,Na(t));const JN=Na;let KN=JN;const op=KN;function YN(t){if(!t)return!0;for(const e in t)return!1;return!0}function QN(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const XN=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new We(`${t} must be an integer`);if(e<0)throw new We(`${t} must be a positive integer`);return e},ZN=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jN=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Un="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eP(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const tP=()=>{var t,e,n,r,o;const i=eP();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Un,"X-Stainless-OS":sp(Deno.build.os),"X-Stainless-Arch":ip(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Un,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Un,"X-Stainless-OS":sp((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":ip((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const s=nP();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Un,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Un,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function nP(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const o=r[1]||0,i=r[2]||0,s=r[3]||0;return{browser:e,version:`${o}.${i}.${s}`}}}return null}const ip=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",sp=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let ei;const rP=()=>ei??(ei=tP());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oP(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Xg(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function iP(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Xg({start(){},async pull(n){const{done:r,value:o}=await e.next();r?n.close():n.enqueue(o)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Zg(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function sP(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),o=r.cancel();r.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lP=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jg=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function fl(t,e,n){return jg(),new File(t,e??"unknown_file",n)}function aP(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const uP=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ev=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",cP=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&ev(t),dP=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function fP(t,e,n){if(jg(),t=await t,cP(t))return t instanceof File?t:fl([await t.arrayBuffer()],t.name);if(dP(t)){const o=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),fl(await Pa(o),e,n)}const r=await Pa(t);if(e||(e=aP(t)),!(n!=null&&n.type)){const o=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof o=="string"&&(n=Object.assign(Object.assign({},n),{type:o}))}return fl(r,e,n)}async function Pa(t){var e,n,r,o,i;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(ev(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(uP(t))try{for(var a=!0,c=et(t),d;d=await c.next(),e=d.done,!e;a=!0){o=d.value,a=!1;const f=o;s.push(...await Pa(f))}}catch(f){n={error:f}}finally{try{!a&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}else{const f=(i=t==null?void 0:t.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${pP(t)}`)}return s}function pP(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tv{constructor(e){this._client=e}}tv._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nv(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const lp=Object.freeze(Object.create(null)),hP=(t=nv)=>function(n,...r){if(n.length===1)return n[0];let o=!1;const i=[],s=n.reduce((f,h,p)=>{var m,_,E;/[?#]/.test(h)&&(o=!0);const T=r[p];let v=(o?encodeURIComponent:t)(""+T);return p!==r.length&&(T==null||typeof T=="object"&&T.toString===((E=Object.getPrototypeOf((_=Object.getPrototypeOf((m=T.hasOwnProperty)!==null&&m!==void 0?m:lp))!==null&&_!==void 0?_:lp))===null||E===void 0?void 0:E.toString))&&(v=T+"",i.push({start:f.length+h.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(T).slice(8,-1)} is not a valid path parameter`})),f+h+(p===r.length?"":v)},""),a=s.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=c.exec(a))!==null;)i.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(i.sort((f,h)=>f.start-h.start),i.length>0){let f=0;const h=i.reduce((p,m)=>{const _=" ".repeat(m.start-f),E="^".repeat(m.length);return f=m.start+m.length,p+_+E},"");throw new We(`Path parameters result in path with invalid segments:
${i.map(p=>p.error).join(`
`)}
${s}
${h}`)}return s},ti=hP(nv);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rv extends tv{create(e,n){var r;const{api_version:o=this._client.apiVersion}=e,i=rs(e,["api_version"]);if("model"in i&&"agent_config"in i)throw new We("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new We("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(ti`/${o}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:o=this._client.apiVersion}=n??{};return this._client.delete(ti`/${o}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:o=this._client.apiVersion}=n??{};return this._client.post(ti`/${o}/interactions/${e}/cancel`,r)}get(e,n={},r){var o;const i=n??{},{api_version:s=this._client.apiVersion}=i,a=rs(i,["api_version"]);return this._client.get(ti`/${s}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(o=n==null?void 0:n.stream)!==null&&o!==void 0?o:!1}))}}rv._key=Object.freeze(["interactions"]);class ov extends rv{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mP(t){let e=0;for(const o of t)e+=o.length;const n=new Uint8Array(e);let r=0;for(const o of t)n.set(o,r),r+=o.length;return n}let ni;function zu(t){let e;return(ni??(e=new globalThis.TextEncoder,ni=e.encode.bind(e)))(t)}let ri;function ap(t){let e;return(ri??(e=new globalThis.TextDecoder,ri=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ks{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?zu(e):e;this.buffer=mP([this.buffer,n]);const r=[];let o;for(;(o=gP(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){r.push(ap(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const i=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,s=ap(this.buffer.subarray(0,i));r.push(s),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}ks.NEWLINE_CHARS=new Set([`
`,"\r"]);ks.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function gP(t,e){for(let o=e??0;o<t.length;o++){if(t[o]===10)return{preceding:o,index:o+1,carriage:!1};if(t[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function vP(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const os={off:0,error:200,warn:300,info:400,debug:500},up=(t,e,n)=>{if(t){if(QN(os,t))return t;Te(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(os))}`)}};function Br(){}function oi(t,e,n){return!e||os[t]>os[n]?Br:e[t].bind(e)}const yP={error:Br,warn:Br,info:Br,debug:Br};let cp=new WeakMap;function Te(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return yP;const o=cp.get(n);if(o&&o[0]===r)return o[1];const i={error:oi("error",n,r),warn:oi("warn",n,r),info:oi("info",n,r),debug:oi("debug",n,r)};return cp.set(n,[r,i]),i}const mn=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qn{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let o=!1;const i=r?Te(r):console;function s(){return je(this,arguments,function*(){var c,d,f,h;if(o)throw new We("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let p=!1;try{try{for(var m=!0,_=et(_P(e,n)),E;E=yield F(_.next()),c=E.done,!c;m=!0){h=E.value,m=!1;const T=h;if(!p)if(T.data.startsWith("[DONE]")){p=!0;continue}else try{yield yield F(JSON.parse(T.data))}catch(v){throw i.error("Could not parse message into JSON:",T.data),i.error("From chunk:",T.raw),v}}}catch(T){d={error:T}}finally{try{!m&&!c&&(f=_.return)&&(yield F(f.call(_)))}finally{if(d)throw d.error}}p=!0}catch(T){if(wa(T))return yield F(void 0);throw T}finally{p||n.abort()}})}return new Qn(s,n,r)}static fromReadableStream(e,n,r){let o=!1;function i(){return je(this,arguments,function*(){var c,d,f,h;const p=new ks,m=Zg(e);try{for(var _=!0,E=et(m),T;T=yield F(E.next()),c=T.done,!c;_=!0){h=T.value,_=!1;const v=h;for(const g of p.decode(v))yield yield F(g)}}catch(v){d={error:v}}finally{try{!_&&!c&&(f=E.return)&&(yield F(f.call(E)))}finally{if(d)throw d.error}}for(const v of p.flush())yield yield F(v)})}function s(){return je(this,arguments,function*(){var c,d,f,h;if(o)throw new We("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let p=!1;try{try{for(var m=!0,_=et(i()),E;E=yield F(_.next()),c=E.done,!c;m=!0){h=E.value,m=!1;const T=h;p||T&&(yield yield F(JSON.parse(T)))}}catch(T){d={error:T}}finally{try{!m&&!c&&(f=_.return)&&(yield F(f.call(_)))}finally{if(d)throw d.error}}p=!0}catch(T){if(wa(T))return yield F(void 0);throw T}finally{p||n.abort()}})}return new Qn(s,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),o=i=>({next:()=>{if(i.length===0){const s=r.next();e.push(s),n.push(s)}return i.shift()}});return[new Qn(()=>o(e),this.controller,this.client),new Qn(()=>o(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Xg({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:o,done:i}=await n.next();if(i)return r.close();const s=zu(JSON.stringify(o)+`
`);r.enqueue(s)}catch(o){r.error(o)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function _P(t,e){return je(this,arguments,function*(){var r,o,i,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new We("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new We("Attempted to iterate over a response with no body");const a=new TP,c=new ks,d=Zg(t.body);try{for(var f=!0,h=et(EP(d)),p;p=yield F(h.next()),r=p.done,!r;f=!0){s=p.value,f=!1;const m=s;for(const _ of c.decode(m)){const E=a.decode(_);E&&(yield yield F(E))}}}catch(m){o={error:m}}finally{try{!f&&!r&&(i=h.return)&&(yield F(i.call(h)))}finally{if(o)throw o.error}}for(const m of c.flush()){const _=a.decode(m);_&&(yield yield F(_))}})}function EP(t){return je(this,arguments,function*(){var n,r,o,i;let s=new Uint8Array;try{for(var a=!0,c=et(t),d;d=yield F(c.next()),n=d.done,!n;a=!0){i=d.value,a=!1;const f=i;if(f==null)continue;const h=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?zu(f):f;let p=new Uint8Array(s.length+h.length);p.set(s),p.set(h,s.length),s=p;let m;for(;(m=vP(s))!==-1;)yield yield F(s.slice(0,m)),s=s.slice(m)}}catch(f){r={error:f}}finally{try{!a&&!n&&(o=c.return)&&(yield F(o.call(c)))}finally{if(r)throw r.error}}s.length>0&&(yield yield F(s))})}class TP{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,o]=SP(e,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}}function SP(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function IP(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:o,startTime:i}=e,s=await(async()=>{var a;if(e.options.stream)return Te(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Qn.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const c=n.headers.get("content-type"),d=(a=c==null?void 0:c.split(";")[0])===null||a===void 0?void 0:a.trim();return(d==null?void 0:d.includes("application/json"))||(d==null?void 0:d.endsWith("+json"))?n.headers.get("content-length")==="0"?void 0:await n.json():await n.text()})();return Te(t).debug(`[${r}] response parsed`,mn({retryOfRequestLogID:o,url:n.url,status:n.status,body:s,durationMs:Date.now()-i})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wu extends Promise{constructor(e,n,r=IP){super(o=>{o(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new Wu(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iv=Symbol("brand.privateNullableHeaders");function*CP(t){if(!t)return;if(iv in t){const{values:r,nulls:o}=t;yield*r.entries();for(const i of o)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():op(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const o=r[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const i=op(r[1])?r[1]:[r[1]];let s=!1;for(const a of i)a!==void 0&&(e&&!s&&(s=!0,yield[o,null]),yield[o,a])}}const Ur=t=>{const e=new Headers,n=new Set;for(const r of t){const o=new Set;for(const[i,s]of CP(r)){const a=i.toLowerCase();o.has(a)||(e.delete(i),o.add(a)),s===null?(e.delete(i),n.add(a)):(e.append(i,s),n.delete(a))}}return{[iv]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pl=t=>{var e,n,r,o,i,s;if(typeof globalThis.process<"u")return(r=(n=(e=qS)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(s=(i=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||i===void 0?void 0:i.call(o,t))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var sv;class xs{constructor(e){var n,r,o,i,s,a,c,{baseURL:d=pl("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(n=pl("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:h="v1beta"}=e,p=rs(e,["baseURL","apiKey","apiVersion"]);const m=Object.assign(Object.assign({apiKey:f,apiVersion:h},p),{baseURL:d||"https://generativelanguage.googleapis.com"});this.baseURL=m.baseURL,this.timeout=(r=m.timeout)!==null&&r!==void 0?r:xs.DEFAULT_TIMEOUT,this.logger=(o=m.logger)!==null&&o!==void 0?o:console;const _="warn";this.logLevel=_,this.logLevel=(s=(i=up(m.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:up(pl("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:_,this.fetchOptions=m.fetchOptions,this.maxRetries=(a=m.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(c=m.fetch)!==null&&c!==void 0?c:oP(),this.encoder=lP,this._options=m,this.apiKey=f,this.apiVersion=h,this.clientAdapter=m.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Ur([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Ur([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ur([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new We(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Un}`}defaultIdempotencyKey(){return`stainless-node-retry-${qN()}`}makeStatusError(e,n,r,o){return we.generate(e,n,r,o)}buildURL(e,n,r){const o=!this.baseURLOverridden()&&r||this.baseURL,i=WN(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return YN(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(o=>Object.assign({method:e,path:n},o)))}request(e,n=null){return new Wu(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var o,i,s;const a=await e,c=(o=a.maxRetries)!==null&&o!==void 0?o:this.maxRetries;n==null&&(n=c),await this.prepareOptions(a);const{req:d,url:f,timeout:h}=await this.buildRequest(a,{retryCount:c-n});await this.prepareRequest(d,{url:f,options:a});const p="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=r===void 0?"":`, retryOf: ${r}`,_=Date.now();if(Te(this).debug(`[${p}] sending request`,mn({retryOfRequestLogID:r,method:a.method,url:f,options:a,headers:d.headers})),!((i=a.signal)===null||i===void 0)&&i.aborted)throw new Ra;const E=new AbortController,T=await this.fetchWithTimeout(f,d,h,E).catch(Aa),v=Date.now();if(T instanceof globalThis.Error){const y=`retrying, ${n} attempts remaining`;if(!((s=a.signal)===null||s===void 0)&&s.aborted)throw new Ra;const I=wa(T)||/timed? ?out/i.test(String(T)+("cause"in T?String(T.cause):""));if(n)return Te(this).info(`[${p}] connection ${I?"timed out":"failed"} - ${y}`),Te(this).debug(`[${p}] connection ${I?"timed out":"failed"} (${y})`,mn({retryOfRequestLogID:r,url:f,durationMs:v-_,message:T.message})),this.retryRequest(a,n,r??p);throw Te(this).info(`[${p}] connection ${I?"timed out":"failed"} - error; no more retries left`),Te(this).debug(`[${p}] connection ${I?"timed out":"failed"} (error; no more retries left)`,mn({retryOfRequestLogID:r,url:f,durationMs:v-_,message:T.message})),I?new Bg:new Ps({cause:T})}const g=`[${p}${m}] ${d.method} ${f} ${T.ok?"succeeded":"failed"} with status ${T.status} in ${v-_}ms`;if(!T.ok){const y=await this.shouldRetry(T);if(n&&y){const P=`retrying, ${n} attempts remaining`;return await sP(T.body),Te(this).info(`${g} - ${P}`),Te(this).debug(`[${p}] response error (${P})`,mn({retryOfRequestLogID:r,url:T.url,status:T.status,headers:T.headers,durationMs:v-_})),this.retryRequest(a,n,r??p,T.headers)}const I=y?"error; no more retries left":"error; not retryable";Te(this).info(`${g} - ${I}`);const w=await T.text().catch(P=>Aa(P).message),C=ZN(w),A=C?void 0:w;throw Te(this).debug(`[${p}] response error (${I})`,mn({retryOfRequestLogID:r,url:T.url,status:T.status,headers:T.headers,message:A,durationMs:Date.now()-_})),this.makeStatusError(T.status,C,A,T.headers)}return Te(this).info(g),Te(this).debug(`[${p}] response start`,mn({retryOfRequestLogID:r,url:T.url,status:T.status,headers:T.headers,durationMs:v-_})),{response:T,options:a,controller:E,requestLogID:p,retryOfRequestLogID:r,startTime:_}}async fetchWithTimeout(e,n,r,o){const i=n||{},{signal:s,method:a}=i,c=rs(i,["signal","method"]),d=this._makeAbort(o);s&&s.addEventListener("abort",d,{once:!0});const f=setTimeout(d,r),h=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,p=Object.assign(Object.assign(Object.assign({signal:o.signal},h?{duplex:"half"}:{}),{method:"GET"}),c);a&&(p.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(f)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,o){var i;let s;const a=o==null?void 0:o.get("retry-after-ms");if(a){const d=parseFloat(a);Number.isNaN(d)||(s=d)}const c=o==null?void 0:o.get("retry-after");if(c&&!s){const d=parseFloat(c);Number.isNaN(d)?s=Date.parse(c)-Date.now():s=d*1e3}if(!(s&&0<=s&&s<60*1e3)){const d=(i=e.maxRetries)!==null&&i!==void 0?i:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,d)}return await jN(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,s=Math.min(.5*Math.pow(2,i),8),a=1-Math.random()*.25;return s*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,o,i;const s=Object.assign({},e),{method:a,path:c,query:d,defaultBaseURL:f}=s,h=this.buildURL(c,d,f);"timeout"in s&&XN("timeout",s.timeout),s.timeout=(r=s.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:p,body:m}=this.buildBody({options:s}),_=await this.buildHeaders({options:e,method:a,bodyHeaders:p,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:_},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"}),m&&{body:m}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(i=s.fetchOptions)!==null&&i!==void 0?i:{}),url:h,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:o}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const s=await this.authHeaders(e);let a=Ur([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),rP()),this._options.defaultHeaders,r,e.headers,s]);return this.validateHeaders(a),a.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Ur([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:iP(e)}:this.encoder({body:e,headers:r})}}xs.DEFAULT_TIMEOUT=6e4;class fe extends xs{constructor(){super(...arguments),this.interactions=new ov(this)}}sv=fe;fe.GeminiNextGenAPIClient=sv;fe.GeminiNextGenAPIClientError=We;fe.APIError=we;fe.APIConnectionError=Ps;fe.APIConnectionTimeoutError=Bg;fe.APIUserAbortError=Ra;fe.NotFoundError=Wg;fe.ConflictError=Jg;fe.RateLimitError=Yg;fe.BadRequestError=$g;fe.AuthenticationError=qg;fe.InternalServerError=Qg;fe.PermissionDeniedError=zg;fe.UnprocessableEntityError=Kg;fe.toFile=fP;fe.Interactions=ov;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wP(t,e){const n={},r=l(t,["name"]);return r!=null&&u(n,["_url","name"],r),n}function AP(t,e){const n={},r=l(t,["name"]);return r!=null&&u(n,["_url","name"],r),n}function RP(t,e){const n={},r=l(t,["sdkHttpResponse"]);return r!=null&&u(n,["sdkHttpResponse"],r),n}function NP(t,e){const n={},r=l(t,["sdkHttpResponse"]);return r!=null&&u(n,["sdkHttpResponse"],r),n}function PP(t,e,n){const r={};if(l(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=l(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&u(e,["displayName"],o),l(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=l(t,["epochCount"]);e!==void 0&&i!=null&&u(e,["tuningTask","hyperparameters","epochCount"],i);const s=l(t,["learningRateMultiplier"]);if(s!=null&&u(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),l(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(l(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(l(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const a=l(t,["batchSize"]);e!==void 0&&a!=null&&u(e,["tuningTask","hyperparameters","batchSize"],a);const c=l(t,["learningRate"]);if(e!==void 0&&c!=null&&u(e,["tuningTask","hyperparameters","learningRate"],c),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(l(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(l(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(l(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(l(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(l(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(l(t,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return r}function kP(t,e,n){const r={};let o=l(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const C=l(t,["validationDataset"]);e!==void 0&&C!=null&&u(e,["supervisedTuningSpec"],hl(C))}else if(o==="PREFERENCE_TUNING"){const C=l(t,["validationDataset"]);e!==void 0&&C!=null&&u(e,["preferenceOptimizationSpec"],hl(C))}else if(o==="DISTILLATION"){const C=l(t,["validationDataset"]);e!==void 0&&C!=null&&u(e,["distillationSpec"],hl(C))}const i=l(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&u(e,["tunedModelDisplayName"],i);const s=l(t,["description"]);e!==void 0&&s!=null&&u(e,["description"],s);let a=l(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const C=l(t,["epochCount"]);e!==void 0&&C!=null&&u(e,["supervisedTuningSpec","hyperParameters","epochCount"],C)}else if(a==="PREFERENCE_TUNING"){const C=l(t,["epochCount"]);e!==void 0&&C!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],C)}else if(a==="DISTILLATION"){const C=l(t,["epochCount"]);e!==void 0&&C!=null&&u(e,["distillationSpec","hyperParameters","epochCount"],C)}let c=l(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const C=l(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&u(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],C)}else if(c==="PREFERENCE_TUNING"){const C=l(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],C)}else if(c==="DISTILLATION"){const C=l(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&u(e,["distillationSpec","hyperParameters","learningRateMultiplier"],C)}let d=l(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const C=l(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&u(e,["supervisedTuningSpec","exportLastCheckpointOnly"],C)}else if(d==="PREFERENCE_TUNING"){const C=l(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&u(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],C)}else if(d==="DISTILLATION"){const C=l(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&u(e,["distillationSpec","exportLastCheckpointOnly"],C)}let f=l(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const C=l(t,["adapterSize"]);e!==void 0&&C!=null&&u(e,["supervisedTuningSpec","hyperParameters","adapterSize"],C)}else if(f==="PREFERENCE_TUNING"){const C=l(t,["adapterSize"]);e!==void 0&&C!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],C)}else if(f==="DISTILLATION"){const C=l(t,["adapterSize"]);e!==void 0&&C!=null&&u(e,["distillationSpec","hyperParameters","adapterSize"],C)}let h=l(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const C=l(t,["tuningMode"]);e!==void 0&&C!=null&&u(e,["supervisedTuningSpec","tuningMode"],C)}const p=l(t,["customBaseModel"]);e!==void 0&&p!=null&&u(e,["customBaseModel"],p);let m=l(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const C=l(t,["batchSize"]);e!==void 0&&C!=null&&u(e,["supervisedTuningSpec","hyperParameters","batchSize"],C)}let _=l(n,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const C=l(t,["learningRate"]);e!==void 0&&C!=null&&u(e,["supervisedTuningSpec","hyperParameters","learningRate"],C)}const E=l(t,["labels"]);e!==void 0&&E!=null&&u(e,["labels"],E);const T=l(t,["beta"]);e!==void 0&&T!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","beta"],T);const v=l(t,["baseTeacherModel"]);e!==void 0&&v!=null&&u(e,["distillationSpec","baseTeacherModel"],v);const g=l(t,["tunedTeacherModelSource"]);e!==void 0&&g!=null&&u(e,["distillationSpec","tunedTeacherModelSource"],g);const y=l(t,["sftLossWeightMultiplier"]);e!==void 0&&y!=null&&u(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],y);const I=l(t,["outputUri"]);e!==void 0&&I!=null&&u(e,["outputUri"],I);const w=l(t,["encryptionSpec"]);return e!==void 0&&w!=null&&u(e,["encryptionSpec"],w),r}function xP(t,e){const n={},r=l(t,["baseModel"]);r!=null&&u(n,["baseModel"],r);const o=l(t,["preTunedModel"]);o!=null&&u(n,["preTunedModel"],o);const i=l(t,["trainingDataset"]);i!=null&&BP(i);const s=l(t,["config"]);return s!=null&&PP(s,n),n}function MP(t,e){const n={},r=l(t,["baseModel"]);r!=null&&u(n,["baseModel"],r);const o=l(t,["preTunedModel"]);o!=null&&u(n,["preTunedModel"],o);const i=l(t,["trainingDataset"]);i!=null&&$P(i,n,e);const s=l(t,["config"]);return s!=null&&kP(s,n,e),n}function DP(t,e){const n={},r=l(t,["name"]);return r!=null&&u(n,["_url","name"],r),n}function LP(t,e){const n={},r=l(t,["name"]);return r!=null&&u(n,["_url","name"],r),n}function UP(t,e,n){const r={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&u(e,["_query","pageToken"],i);const s=l(t,["filter"]);return e!==void 0&&s!=null&&u(e,["_query","filter"],s),r}function FP(t,e,n){const r={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&u(e,["_query","pageToken"],i);const s=l(t,["filter"]);return e!==void 0&&s!=null&&u(e,["_query","filter"],s),r}function OP(t,e){const n={},r=l(t,["config"]);return r!=null&&UP(r,n),n}function bP(t,e){const n={},r=l(t,["config"]);return r!=null&&FP(r,n),n}function VP(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["nextPageToken"]);o!=null&&u(n,["nextPageToken"],o);const i=l(t,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>lv(a))),u(n,["tuningJobs"],s)}return n}function GP(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["nextPageToken"]);o!=null&&u(n,["nextPageToken"],o);const i=l(t,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>ka(a))),u(n,["tuningJobs"],s)}return n}function HP(t,e){const n={},r=l(t,["name"]);r!=null&&u(n,["model"],r);const o=l(t,["name"]);return o!=null&&u(n,["endpoint"],o),n}function BP(t,e){const n={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=l(t,["examples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),u(n,["examples","examples"],o)}return n}function $P(t,e,n){const r={};let o=l(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=l(t,["gcsUri"]);e!==void 0&&s!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=l(t,["gcsUri"]);e!==void 0&&s!=null&&u(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(o==="DISTILLATION"){const s=l(t,["gcsUri"]);e!==void 0&&s!=null&&u(e,["distillationSpec","promptDatasetUri"],s)}let i=l(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&u(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(i==="DISTILLATION"){const s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&u(e,["distillationSpec","promptDatasetUri"],s)}if(l(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function lv(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["name"]);o!=null&&u(n,["name"],o);const i=l(t,["state"]);i!=null&&u(n,["state"],Ig(i));const s=l(t,["createTime"]);s!=null&&u(n,["createTime"],s);const a=l(t,["tuningTask","startTime"]);a!=null&&u(n,["startTime"],a);const c=l(t,["tuningTask","completeTime"]);c!=null&&u(n,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&u(n,["updateTime"],d);const f=l(t,["description"]);f!=null&&u(n,["description"],f);const h=l(t,["baseModel"]);h!=null&&u(n,["baseModel"],h);const p=l(t,["_self"]);return p!=null&&u(n,["tunedModel"],HP(p)),n}function ka(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["name"]);o!=null&&u(n,["name"],o);const i=l(t,["state"]);i!=null&&u(n,["state"],Ig(i));const s=l(t,["createTime"]);s!=null&&u(n,["createTime"],s);const a=l(t,["startTime"]);a!=null&&u(n,["startTime"],a);const c=l(t,["endTime"]);c!=null&&u(n,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&u(n,["updateTime"],d);const f=l(t,["error"]);f!=null&&u(n,["error"],f);const h=l(t,["description"]);h!=null&&u(n,["description"],h);const p=l(t,["baseModel"]);p!=null&&u(n,["baseModel"],p);const m=l(t,["tunedModel"]);m!=null&&u(n,["tunedModel"],m);const _=l(t,["preTunedModel"]);_!=null&&u(n,["preTunedModel"],_);const E=l(t,["supervisedTuningSpec"]);E!=null&&u(n,["supervisedTuningSpec"],E);const T=l(t,["preferenceOptimizationSpec"]);T!=null&&u(n,["preferenceOptimizationSpec"],T);const v=l(t,["distillationSpec"]);v!=null&&u(n,["distillationSpec"],v);const g=l(t,["tuningDataStats"]);g!=null&&u(n,["tuningDataStats"],g);const y=l(t,["encryptionSpec"]);y!=null&&u(n,["encryptionSpec"],y);const I=l(t,["partnerModelTuningSpec"]);I!=null&&u(n,["partnerModelTuningSpec"],I);const w=l(t,["customBaseModel"]);w!=null&&u(n,["customBaseModel"],w);const C=l(t,["experiment"]);C!=null&&u(n,["experiment"],C);const A=l(t,["labels"]);A!=null&&u(n,["labels"],A);const N=l(t,["outputUri"]);N!=null&&u(n,["outputUri"],N);const P=l(t,["pipelineJob"]);P!=null&&u(n,["pipelineJob"],P);const M=l(t,["serviceAccount"]);M!=null&&u(n,["serviceAccount"],M);const G=l(t,["tunedModelDisplayName"]);G!=null&&u(n,["tunedModelDisplayName"],G);const ie=l(t,["veoTuningSpec"]);return ie!=null&&u(n,["veoTuningSpec"],ie),n}function qP(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["name"]);o!=null&&u(n,["name"],o);const i=l(t,["metadata"]);i!=null&&u(n,["metadata"],i);const s=l(t,["done"]);s!=null&&u(n,["done"],s);const a=l(t,["error"]);return a!=null&&u(n,["error"],a),n}function hl(t,e){const n={},r=l(t,["gcsUri"]);r!=null&&u(n,["validationDatasetUri"],r);const o=l(t,["vertexDatasetResource"]);return o!=null&&u(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zP extends Nt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new kn(At.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:o});return i.baseModel=void 0,await this.tuneInternal(i)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),i=await this.tuneMldevInternal(o);let s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:va.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=LP(e);return a=x("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>ka(f))}else{const d=DP(e);return a=x("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>lv(f))}}async listInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=bP(e);return a=x("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=GP(f),p=new Of;return Object.assign(p,h),p})}else{const d=OP(e);return a=x("tunedModels",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=VP(f),p=new Of;return Object.assign(p,h),p})}}async cancel(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=AP(e);return a=x("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=NP(f),p=new bf;return Object.assign(p,h),p})}else{const d=wP(e);return a=x("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=RP(f),p=new bf;return Object.assign(p,h),p})}}async tuneInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const a=MP(e,e);return i=x("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>ka(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=xP(e);return i=x("tunedModels",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>qP(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WP{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const JP=1024*1024*8,KP=3,YP=1e3,QP=2,is="x-goog-upload-status";async function XP(t,e,n){var r;const o=await av(t,e,n),i=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[is])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function ZP(t,e,n){var r;const o=await av(t,e,n),i=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[is])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=vg(i),a=new Vu;return Object.assign(a,s),a}async function av(t,e,n){var r,o;let i=0,s=0,a=new _a(new Response),c="upload";for(i=t.size;s<i;){const d=Math.min(JP,i-s),f=t.slice(s,s+d);s+d>=i&&(c+=", finalize");let h=0,p=YP;for(;h<KP&&(a=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(s),"Content-Length":String(d)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[is]));)h++,await ek(p),p=p*QP;if(s+=d,((o=a==null?void 0:a.headers)===null||o===void 0?void 0:o[is])!=="active")break;if(i<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function jP(t){return{size:t.size,type:t.type}}function ek(t){return new Promise(e=>setTimeout(e,t))}class tk{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await XP(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ZP(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await jP(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nk{create(e,n,r){return new rk(e,n,r)}}class rk{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dp="x-goog-api-key";class ok{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(dp)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(dp,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ik="gl-node/";class sk{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const n=this.httpOptions;n!=null&&n.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const r=new fe({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:n==null?void 0:n.timeout,maxRetries:(e=n==null?void 0:n.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=r.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=KS(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new ok(this.apiKey);this.apiClient=new jR({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:ik+"web",uploader:new tk,downloader:new WP}),this.models=new yN(this.apiClient),this.live=new fN(this.apiClient,o,new nk),this.batches=new CC(this.apiClient),this.chats=new iw(this.models,this.apiClient),this.caches=new nw(this.apiClient),this.files=new vw(this.apiClient),this.operations=new _N(this.apiClient),this.authTokens=new UN(this.apiClient),this.tunings=new zP(this.apiClient),this.fileSearchStores=new $N(this.apiClient)}}const uv=new sk({apiKey:"AIzaSyBrKqC3jnsXqEViaROJMW_P5lWT0grBS4Q"}),cv="gemini-3-flash-preview",dv=async t=>new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{const i=r.result.split(",")[1];e({inlineData:{data:i,mimeType:t.type}})},r.onerror=n,r.readAsDataURL(t)}),lk=async(t,e)=>{const n=[];if(e){const o=await dv(e);n.push(o)}t&&n.push({text:`Description of food: ${t}`}),n.push({text:`
    Analyze the provided food image and/or description.
    Identify the food items.
    Estimate the total calories.
    Provide a breakdown of macronutrients (Protein, Carbs, Fats).
    Provide a short summary.
    
    Return the response in JSON format matching this schema:
    {
      "foodName": "string (Main dish name or summary)",
      "estimatedCalories": number,
      "macros": {
        "protein": "string (e.g. 20g)",
        "carbs": "string",
        "fat": "string"
      },
      "confidence": "string (High/Medium/Low)",
      "summary": "string (Short friendly summary)"
    }
  `});try{const o=await uv.models.generateContent({model:cv,contents:{parts:n},config:{responseMimeType:"application/json",responseSchema:{type:j.OBJECT,properties:{foodName:{type:j.STRING},estimatedCalories:{type:j.NUMBER},macros:{type:j.OBJECT,properties:{protein:{type:j.STRING},carbs:{type:j.STRING},fat:{type:j.STRING}}},confidence:{type:j.STRING},summary:{type:j.STRING}}}}});if(o.text)return JSON.parse(o.text);throw new Error("No data returned from AI")}catch(o){throw console.error("Gemini Food Analysis Error:",o),o}},ak=async(t,e,n)=>{const r=[];if(n){const s=await dv(n);r.push(s)}const o=`
    User Statistics:
    Weight: ${t.weight}kg
    Height: ${t.height}cm
    BMR (TMB): ${t.tmb} kcal/day
  `;r.push({text:o}),e&&r.push({text:`Workout Description: ${e}`}),r.push({text:`
    Analyze the provided workout description or image (which might be a gym machine screen, a workout summary board, or a selfie) in context of the User Statistics.
    Estimate the total calories burned during this specific session.
    
    Return the response in JSON format matching this schema:
    {
      "workoutType": "string",
      "caloriesBurned": number,
      "intensity": "string (Low/Moderate/High)",
      "summary": "string (Short analysis of the effort)"
    }
  `});try{const s=await uv.models.generateContent({model:cv,contents:{parts:r},config:{responseMimeType:"application/json",responseSchema:{type:j.OBJECT,properties:{workoutType:{type:j.STRING},caloriesBurned:{type:j.NUMBER},intensity:{type:j.STRING},summary:{type:j.STRING}}}}});if(s.text)return JSON.parse(s.text);throw new Error("No data returned from AI")}catch(s){throw console.error("Gemini Workout Analysis Error:",s),s}},uk=()=>{const[t,e]=$.useState(""),[n,r]=$.useState(null),[o,i]=$.useState(null),[s,a]=$.useState(!1),[c,d]=$.useState(null),[f,h]=$.useState(null),p=$.useRef(null),m=T=>{if(T.target.files&&T.target.files[0]){const v=T.target.files[0];r(v);const g=new FileReader;g.onloadend=()=>{i(g.result)},g.readAsDataURL(v)}},_=async()=>{if(!t&&!n){h("Please provide a description or an image.");return}a(!0),h(null),d(null);try{const T=await lk(t,n);d(T)}catch(T){h("Failed to analyze. Please try again. "+(T instanceof Error?T.message:""))}finally{a(!1)}},E=()=>{e(""),r(null),i(null),d(null),p.current&&(p.current.value="")};return S.jsx("div",{className:"max-w-3xl mx-auto px-4 py-6",children:S.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-slate-100",children:[S.jsxs("h2",{className:"text-2xl font-bold text-slate-800 mb-6 flex items-center",children:[S.jsx("span",{className:"bg-orange-100 text-orange-600 p-2 rounded-lg mr-3",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),"Food Analysis"]}),c?S.jsxs("div",{className:"animate-fade-in",children:[S.jsxs("div",{className:"bg-orange-50 border border-orange-100 rounded-xl p-6 mb-6",children:[S.jsxs("div",{className:"flex justify-between items-start mb-4",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-bold text-slate-900",children:c.foodName}),S.jsxs("p",{className:"text-sm text-slate-500",children:[c.confidence," Confidence"]})]}),S.jsxs("div",{className:"text-center",children:[S.jsx("span",{className:"block text-3xl font-bold text-orange-600",children:c.estimatedCalories}),S.jsx("span",{className:"text-xs text-orange-600 font-medium uppercase tracking-wide",children:"Calories"})]})]}),S.jsxs("p",{className:"text-slate-700 mb-6 italic",children:['"',c.summary,'"']}),S.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[S.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm border border-slate-100 text-center",children:[S.jsx("span",{className:"block text-sm text-slate-500 mb-1",children:"Protein"}),S.jsx("span",{className:"block font-semibold text-slate-800",children:c.macros.protein})]}),S.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm border border-slate-100 text-center",children:[S.jsx("span",{className:"block text-sm text-slate-500 mb-1",children:"Carbs"}),S.jsx("span",{className:"block font-semibold text-slate-800",children:c.macros.carbs})]}),S.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm border border-slate-100 text-center",children:[S.jsx("span",{className:"block text-sm text-slate-500 mb-1",children:"Fats"}),S.jsx("span",{className:"block font-semibold text-slate-800",children:c.macros.fat})]})]})]}),S.jsx("button",{onClick:E,className:"w-full py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 font-medium rounded-xl transition-colors",children:"Track Another Meal"})]}):S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"space-y-2",children:[S.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Food Photo"}),S.jsxs("div",{onClick:()=>{var T;return(T=p.current)==null?void 0:T.click()},className:`border-2 border-dashed rounded-xl h-48 flex flex-col items-center justify-center cursor-pointer transition-colors ${o?"border-orange-300 bg-orange-50":"border-slate-300 hover:border-orange-400 hover:bg-slate-50"}`,children:[o?S.jsx("img",{src:o,alt:"Preview",className:"h-full w-full object-contain rounded-lg"}):S.jsxs(S.Fragment,{children:[S.jsx("svg",{className:"w-10 h-10 text-slate-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),S.jsx("p",{className:"text-sm text-slate-500",children:"Tap to upload image"})]}),S.jsx("input",{type:"file",ref:p,onChange:m,accept:"image/*",className:"hidden"})]}),n&&S.jsx("button",{onClick:T=>{T.stopPropagation(),r(null),i(null)},className:"text-xs text-red-500 hover:underline",children:"Remove Image"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description (Optional if image provided)"}),S.jsx("textarea",{value:t,onChange:T=>e(T.target.value),placeholder:"e.g., Grilled chicken breast with broccoli and brown rice...",className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all resize-none h-24"})]}),f&&S.jsx("div",{className:"p-3 bg-red-50 text-red-600 rounded-lg text-sm",children:f}),S.jsx("button",{onClick:_,disabled:s,className:`w-full py-3 px-4 rounded-xl font-bold text-white shadow-md transition-all ${s?"bg-slate-400 cursor-not-allowed":"bg-orange-500 hover:bg-orange-600 hover:shadow-lg active:scale-[0.98]"}`,children:s?S.jsxs("span",{className:"flex items-center justify-center",children:[S.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Analyzing..."]}):"Analyze Meal"})]})]})})},ck=()=>{const[t,e]=$.useState({weight:70,height:170,tmb:1600}),[n,r]=$.useState(""),[o,i]=$.useState(null),[s,a]=$.useState(null),[c,d]=$.useState(!1),[f,h]=$.useState(null),[p,m]=$.useState(null),[_,E]=$.useState(!0),T=$.useRef(null);$.useEffect(()=>{const w=localStorage.getItem("nutriai_stats");if(w)try{e(JSON.parse(w)),E(!1)}catch{console.error("Failed to parse saved stats")}},[]);const v=(w,C)=>{const A=parseFloat(C)||0,N={...t,[w]:A};e(N),localStorage.setItem("nutriai_stats",JSON.stringify(N))},g=w=>{if(w.target.files&&w.target.files[0]){const C=w.target.files[0];i(C);const A=new FileReader;A.onloadend=()=>{a(A.result)},A.readAsDataURL(C)}},y=async()=>{if(!n&&!o){m("Please describe the workout or upload a photo.");return}d(!0),m(null),h(null);try{const w=await ak(t,n,o);h(w)}catch(w){m("Failed to analyze. Please try again. "+(w instanceof Error?w.message:""))}finally{d(!1)}},I=()=>{r(""),i(null),a(null),h(null),T.current&&(T.current.value="")};return S.jsx("div",{className:"max-w-3xl mx-auto px-4 py-6",children:S.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-slate-100",children:[S.jsxs("h2",{className:"text-2xl font-bold text-slate-800 mb-6 flex items-center",children:[S.jsx("span",{className:"bg-blue-100 text-blue-600 p-2 rounded-lg mr-3",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),"Workout Calculator"]}),f?S.jsxs("div",{className:"animate-fade-in",children:[S.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-xl p-6 mb-6",children:[S.jsxs("div",{className:"flex justify-between items-start mb-4",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-bold text-slate-900",children:f.workoutType}),S.jsxs("p",{className:"inline-block bg-blue-200 text-blue-800 text-xs px-2 py-1 rounded-full mt-1",children:[f.intensity," Intensity"]})]}),S.jsxs("div",{className:"text-center",children:[S.jsx("span",{className:"block text-3xl font-bold text-blue-600",children:f.caloriesBurned}),S.jsx("span",{className:"text-xs text-blue-600 font-medium uppercase tracking-wide",children:"Calories Burned"})]})]}),S.jsxs("p",{className:"text-slate-700 italic border-l-4 border-blue-300 pl-3",children:['"',f.summary,'"']})]}),S.jsx("button",{onClick:I,className:"w-full py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 font-medium rounded-xl transition-colors",children:"Track Another Workout"})]}):S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-200",children:[S.jsxs("div",{className:"flex justify-between items-center mb-2 cursor-pointer",onClick:()=>E(!_),children:[S.jsx("h3",{className:"font-semibold text-slate-700",children:"My Stats"}),S.jsx("svg",{className:`w-5 h-5 text-slate-400 transition-transform ${_?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),_&&S.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4 animate-fade-in",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Weight (kg)"}),S.jsx("input",{type:"number",value:t.weight,onChange:w=>v("weight",w.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Height (cm)"}),S.jsx("input",{type:"number",value:t.height,onChange:w=>v("height",w.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"BMR (kcal)"}),S.jsx("input",{type:"number",value:t.tmb,onChange:w=>v("tmb",w.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Workout Photo (Optional)"}),S.jsxs("div",{onClick:()=>{var w;return(w=T.current)==null?void 0:w.click()},className:`border-2 border-dashed rounded-xl h-32 flex flex-col items-center justify-center cursor-pointer transition-colors ${s?"border-blue-300 bg-blue-50":"border-slate-300 hover:border-blue-400 hover:bg-slate-50"}`,children:[s?S.jsx("img",{src:s,alt:"Preview",className:"h-full w-full object-contain rounded-lg"}):S.jsxs("div",{className:"text-center",children:[S.jsxs("svg",{className:"w-8 h-8 text-slate-400 mx-auto mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),S.jsx("span",{className:"text-xs text-slate-500",children:"Upload console/machine photo"})]}),S.jsx("input",{type:"file",ref:T,onChange:g,accept:"image/*",className:"hidden"})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),S.jsx("textarea",{value:n,onChange:w=>r(w.target.value),placeholder:"e.g., 30 minutes of HIIT treadmill running at 10km/h...",className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all resize-none h-24"})]}),p&&S.jsx("div",{className:"p-3 bg-red-50 text-red-600 rounded-lg text-sm",children:p}),S.jsx("button",{onClick:y,disabled:c,className:`w-full py-3 px-4 rounded-xl font-bold text-white shadow-md transition-all ${c?"bg-slate-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 hover:shadow-lg active:scale-[0.98]"}`,children:c?"Calculating...":"Calculate Burn"})]})]})})},dk=()=>{const[t,e]=$.useState(""),[n,r]=$.useState(""),[o,i]=$.useState(""),[s,a]=$.useState(!1),c=async d=>{d.preventDefault(),a(!0),i("");try{await mT(Fu,t,n)}catch(f){console.error(f),f.code==="auth/invalid-credential"?i("Invalid email or password."):i("Failed to login. Please try again.")}finally{a(!1)}};return S.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 px-4",children:S.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 border border-slate-100",children:[S.jsxs("div",{className:"text-center mb-8",children:[S.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-emerald-100 text-emerald-600 mb-4",children:S.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),S.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"NutriAI"}),S.jsx("p",{className:"text-slate-500 mt-2",children:"Sign in to track your health"})]}),o&&S.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm mb-6 text-center",children:o}),S.jsxs("form",{onSubmit:c,className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),S.jsx("input",{type:"email",value:t,onChange:d=>e(d.target.value),required:!0,className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none transition-all",placeholder:"you@example.com"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Password"}),S.jsx("input",{type:"password",value:n,onChange:d=>r(d.target.value),required:!0,className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none transition-all",placeholder:""})]}),S.jsx("button",{type:"submit",disabled:s,className:`w-full py-3 px-4 rounded-xl font-bold text-white shadow-md transition-all ${s?"bg-slate-400 cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-700 hover:shadow-lg active:scale-[0.98]"}`,children:s?"Signing in...":"Sign In"})]}),S.jsx("div",{className:"mt-6 text-center text-xs text-slate-400",children:"Note: New accounts must be created by the administrator."})]})})},fk=()=>{const[t,e]=$.useState(null),[n,r]=$.useState(!0),[o,i]=$.useState(ne.DASHBOARD);return $.useEffect(()=>{const s=yT(Fu,a=>{e(a),r(!1),a?o===ne.LOGIN&&i(ne.DASHBOARD):i(ne.LOGIN)});return()=>s()},[o]),n?S.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})}):t?S.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col font-sans",children:[S.jsx(LS,{currentView:o,setView:i,userEmail:t.email}),S.jsxs("main",{className:"flex-grow",children:[o===ne.DASHBOARD&&S.jsx(US,{setView:i}),o===ne.FOOD_TRACKER&&S.jsx(uk,{}),o===ne.WORKOUT_TRACKER&&S.jsx(ck,{})]}),S.jsx("footer",{className:"bg-white border-t border-slate-200 py-6 mt-12",children:S.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center text-slate-400 text-sm",children:[" ",new Date().getFullYear()," NutriAI. Powered by Google Gemini."]})})]}):S.jsx(dk,{})},fv=document.getElementById("root");if(!fv)throw new Error("Could not find root element to mount to");const pk=ml.createRoot(fv);pk.render(S.jsx(Pv.StrictMode,{children:S.jsx(fk,{})}));
